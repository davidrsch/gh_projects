{
  "version": 3,
  "sources": ["../../src/webviews/client/utils.ts", "../../src/webviews/client/renderers/cellRenderer.ts", "../../src/webviews/client/components/ColumnHeaderMenu.ts", "../../src/webviews/client/components/FieldsMenu.ts", "../../src/webviews/client/components/SlicePanel.ts", "../../src/webviews/client/utils/tableSorting.ts", "../../src/webviews/client/components/ProjectTable.ts", "../../src/webviews/client/viewFetcherUtils.ts", "../../src/webviews/client/tableViewFetcher.ts"],
  "sourcesContent": ["export function escapeHtml(s: any): string {\r\n    return s\r\n        ? String(s)\r\n            .replace(/&/g, \"&amp;\")\r\n            .replace(/</g, \"&lt;\")\r\n            .replace(/>/g, \"&gt;\")\r\n        : \"\";\r\n}\r\n\r\nexport function normalizeColor(color: any): string | null {\r\n    if (!color) return null;\r\n    let n = String(color).trim();\r\n    if (\r\n        /^#?[0-9a-f]{3}$/i.test(n) ||\r\n        /^#?[0-9a-f]{6}$/i.test(n) ||\r\n        /^#?[0-9a-f]{8}$/i.test(n)\r\n    ) {\r\n        let b = n[0] === \"#\" ? n.slice(1) : n;\r\n        return \"#\" + (b.length === 8 ? b.substring(0, 6) : b);\r\n    }\r\n    let s = {\r\n        GRAY: \"#848d97\",\r\n        RED: \"#f85149\",\r\n        ORANGE: \"#db6d28\",\r\n        YELLOW: \"#d29922\",\r\n        GREEN: \"#3fb950\",\r\n        BLUE: \"#2f81f7\",\r\n        PURPLE: \"#a371f7\",\r\n        PINK: \"#db61a2\",\r\n        BLACK: \"#000000\",\r\n        WHITE: \"#ffffff\",\r\n    };\r\n    let u = n.toUpperCase();\r\n    return (s as any)[u] || null;\r\n}\r\n\r\nexport function addAlpha(color: any, alpha: any): string | null {\r\n    if (!color) return null;\r\n    let s = color.replace(\"#\", \"\");\r\n    let u = (b: any) => parseInt(b, 16);\r\n    if (s.length === 3) {\r\n        let b = u(s[0] + s[0]),\r\n            S = u(s[1] + s[1]),\r\n            v = u(s[2] + s[2]);\r\n        return \"rgba(\" + b + \",\" + S + \",\" + v + \",\" + alpha + \")\";\r\n    }\r\n    if (s.length === 6 || s.length === 8) {\r\n        let b = s.length === 8 ? s.substring(0, 6) : s,\r\n            S = u(s.substring(0, 2)),\r\n            v = u(b.substring(2, 4)),\r\n            C = u(b.substring(4, 6));\r\n        return \"rgba(\" + S + \",\" + v + \",\" + C + \",\" + alpha + \")\";\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function getContrastColor(color: any): string {\r\n    if (!color) return \"#333333\";\r\n    let n = color.replace(\"#\", \"\");\r\n    let s = (C: any) => parseInt(C, 16);\r\n    let u, b, S;\r\n    if (n.length === 3)\r\n        (u = s(n[0] + n[0])),\r\n            (b = s(n[1] + n[1])),\r\n            (S = s(n[2] + n[2]));\r\n    else if (n.length === 6 || n.length === 8) {\r\n        let C = n.length === 8 ? n.substring(0, 6) : n;\r\n        (u = s(C.substring(0, 2))),\r\n            (b = s(C.substring(2, 4))),\r\n            (S = s(C.substring(4, 6)));\r\n    } else return \"#333333\";\r\n    return 0.2126 * (u / 255) + 0.7152 * (b / 255) + 0.0722 * (S / 255) > 0.6\r\n        ? \"#111111\"\r\n        : \"#ffffff\";\r\n}\r\n", "import { escapeHtml, normalizeColor, addAlpha, getContrastColor } from \"../utils\";\r\n\r\nexport function renderCell(e: any, n: any, s: any, allItems: any) {\r\n    var u, b, S, v, C, E, W, D, H, T, _, j, U, c, i;\r\n    if (!e) return \"\";\r\n    try {\r\n        switch (e.type) {\r\n            case \"title\": {\r\n                let t =\r\n                    (e &&\r\n                        e.title &&\r\n                        ((e.title.raw && e.title.raw.text) ||\r\n                            (e.title.content &&\r\n                                (e.title.content.title || e.title.content.name)) ||\r\n                            (typeof e.title == \"string\" && e.title))) ||\r\n                    (e && e.content && (e.content.title || e.content.name)) ||\r\n                    (e && e.raw && e.raw.text) ||\r\n                    \"\",\r\n                    o =\r\n                        (e && e.title && e.title.content && e.title.content.number) ||\r\n                        (e && e.raw && e.raw.itemContent && e.raw.itemContent.number) ||\r\n                        (s && s.content && s.content.number) ||\r\n                        \"\",\r\n                    l =\r\n                        (e && e.title && e.title.content && e.title.content.url) ||\r\n                        (e && e.raw && e.raw.itemContent && e.raw.itemContent.url) ||\r\n                        (s && s.content && s.content.url) ||\r\n                        \"\",\r\n                    r = null;\r\n                if (s && Array.isArray(s.fieldValues)) {\r\n                    let w = s.fieldValues.find(\r\n                        (x: any) =>\r\n                            x &&\r\n                            x.type === \"single_select\" &&\r\n                            ((x.raw &&\r\n                                x.raw.field &&\r\n                                String(x.raw.field.name || \"\").toLowerCase() ===\r\n                                \"status\") ||\r\n                                (x.fieldName &&\r\n                                    String(x.fieldName || \"\").toLowerCase() === \"status\") ||\r\n                                (x.field &&\r\n                                    x.field.name &&\r\n                                    String(x.field.name || \"\").toLowerCase() === \"status\"))\r\n                    );\r\n                    w &&\r\n                        (r =\r\n                            (w.option &&\r\n                                (w.option.color || w.option.id || w.option.name)) ||\r\n                            (w.raw && w.raw.color) ||\r\n                            null);\r\n                }\r\n                let a = normalizeColor(r) || null,\r\n                    p = a && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(a) ? a : \"#666666\",\r\n                    g = escapeHtml(String(t || \"\")),\r\n                    f = o ? escapeHtml(String(o)) : \"\";\r\n                return (\r\n                    '<a href=\"' +\r\n                    escapeHtml(String(l || \"\")) +\r\n                    '\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"text-decoration:none;color:inherit;display:inline-flex;align-items:center;gap:8px;width:100%;\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:' +\r\n                    escapeHtml(p) +\r\n                    '\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"currentColor\" /></svg><span style=\"flex:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block\">' +\r\n                    g +\r\n                    \"</span>\" +\r\n                    (f\r\n                        ? '<span style=\"flex:none;margin-left:6px;color:var(--vscode-descriptionForeground);white-space:nowrap\">#' +\r\n                        f +\r\n                        \"</span>\"\r\n                        : \"\") +\r\n                    \"</a>\"\r\n                );\r\n            }\r\n            case \"text\":\r\n                return \"<div>\" + escapeHtml((u = e.text) != null ? u : \"\") + \"</div>\";\r\n            case \"number\": {\r\n                let t =\r\n                    e.number !== void 0 && e.number !== null ? String(e.number) : \"\";\r\n                return (\r\n                    '<div style=\"text-align:right;font-variant-numeric:tabular-nums\">' +\r\n                    escapeHtml(t) +\r\n                    \"</div>\"\r\n                );\r\n            }\r\n            case \"date\": {\r\n                let t =\r\n                    (v =\r\n                        (S = (b = e.date) != null ? b : e.startDate) != null\r\n                            ? S\r\n                            : e.dueOn) != null\r\n                        ? v\r\n                        : null;\r\n                if (!t) return \"<div></div>\";\r\n                try {\r\n                    let o = new Date(t);\r\n                    if (isNaN(o.getTime())) return \"<div>\" + escapeHtml(String(t)) + \"</div>\";\r\n                    let l = o.toLocaleDateString(\"en-US\", {\r\n                        month: \"short\",\r\n                        day: \"numeric\",\r\n                        year: \"numeric\",\r\n                    });\r\n                    return \"<div>\" + escapeHtml(l) + \"</div>\";\r\n                } catch (e) {\r\n                    return \"<div>\" + escapeHtml(String(t)) + \"</div>\";\r\n                }\r\n            }\r\n            case \"single_select\": {\r\n                let t = escapeHtml(\r\n                    (E = (C = e.option) == null ? void 0 : C.name) != null ? E : \"\"\r\n                ),\r\n                    o = null;\r\n                if (n && Array.isArray(n.options)) {\r\n                    let f = n.options.find(\r\n                        (h: any) =>\r\n                            (h.id && e.option && e.option.id && h.id === e.option.id) ||\r\n                            (h.name &&\r\n                                e.option &&\r\n                                e.option.name &&\r\n                                h.name === e.option.name)\r\n                    );\r\n                    f &&\r\n                        (o = (D = (W = f.color) != null ? W : f.id) != null ? D : null);\r\n                }\r\n                let l = normalizeColor(o) || null,\r\n                    r = !!(l && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(l)),\r\n                    a = l || \"#999999\",\r\n                    p = (r && addAlpha(l, 0.12)) || \"rgba(0,0,0,0.06)\",\r\n                    g = l || \"#333333\";\r\n                // Render a full-width flexible pill so it can shrink and ellipsize inside table cells\r\n                return (\r\n                    '<span style=\"display:block;width:100%;box-sizing:border-box\">' +\r\n                    '<div style=\"display:inline-flex;align-items:center;padding:2px 8px;border:1px solid ' +\r\n                    escapeHtml(a) +\r\n                    \";border-radius:999px;color:\" +\r\n                    escapeHtml(g) +\r\n                    \";background:\" +\r\n                    escapeHtml(p) +\r\n                    ';font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;width:100%\">' +\r\n                    '<span style=\"flex:1 1 auto;min-width:0;max-width:100%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap\">' +\r\n                    t +\r\n                    \"</span>\" +\r\n                    \"</div>\" +\r\n                    \"</span>\"\r\n                );\r\n            }\r\n            case \"labels\":\r\n                return (\r\n                    \"<div>\" +\r\n                    (e.labels || [])\r\n                        .map((o: any) => {\r\n                            let l = escapeHtml(o.name || \"\"),\r\n                                r =\r\n                                    (s &&\r\n                                        ((s.content &&\r\n                                            s.content.repository &&\r\n                                            s.content.repository.nameWithOwner) ||\r\n                                            (s.repository && s.repository.nameWithOwner))) ||\r\n                                    (e.raw &&\r\n                                        e.raw.itemContent &&\r\n                                        e.raw.itemContent.repository &&\r\n                                        e.raw.itemContent.repository.nameWithOwner) ||\r\n                                    null,\r\n                                a = o.color || o.colour || null;\r\n                            if (n && n.repoOptions && r && n.repoOptions[r]) {\r\n                                let k = n.repoOptions[r].find(\r\n                                    (L: any) => L && L.name === o.name\r\n                                );\r\n                                k && (a = k.color || k.colour || a);\r\n                            }\r\n                            let p = normalizeColor(a) || null,\r\n                                g = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p)),\r\n                                f = p || \"#999999\",\r\n                                h = (g && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\",\r\n                                w = p || \"#333333\";\r\n                            return (\r\n                                '<span style=\"display:inline-block;padding:2px 8px;margin-right:6px;border-radius:999px;border:1px solid ' +\r\n                                escapeHtml(f) +\r\n                                \";background:\" +\r\n                                escapeHtml(h) +\r\n                                \";color:\" +\r\n                                escapeHtml(w) +\r\n                                ';font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\">' +\r\n                                l +\r\n                                \"</span>\"\r\n                            );\r\n                        })\r\n                        .join(\"\") +\r\n                    \"</div>\"\r\n                );\r\n            case \"repository\": {\r\n                let t = escapeHtml(\r\n                    (T = (H = e.repository) == null ? void 0 : H.nameWithOwner) !=\r\n                        null\r\n                        ? T\r\n                        : \"\"\r\n                );\r\n                return (\r\n                    '<a href=\"' +\r\n                    escapeHtml(\r\n                        ((_ = e.repository) == null ? void 0 : _.url) ||\r\n                        ((j = e.repository) == null ? void 0 : j.html_url) ||\r\n                        \"\"\r\n                    ) +\r\n                    '\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"text-decoration:none;color:inherit;display:inline-flex;align-items:center;gap:8px\"><svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:var(--vscode-icon-foreground)\"><path fill=\"currentColor\" d=\"M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z\"/></svg><span>' +\r\n                    t +\r\n                    \"</span></a>\"\r\n                );\r\n            }\r\n            case \"pull_request\": {\r\n                const prs = e.pullRequests || [];\r\n                return (function () {\r\n                    var prs = e.pullRequests || [];\r\n                    if (!prs || prs.length === 0) return \"\";\r\n                    var out =\r\n                        '<div style=\"display:flex;flex-wrap:wrap;gap:6px;align-items:center\">';\r\n                    for (var i = 0; i < prs.length; i++) {\r\n                        var p = prs[i];\r\n                        var num = escapeHtml(String((p && p.number) || \"\"));\r\n                        var titleText = escapeHtml((p && p.title) || \"\");\r\n                        var url = escapeHtml((p && p.url) || \"\");\r\n                        var rawColor =\r\n                            (p && (p.state_color || p.color || p.colour || p.state)) ||\r\n                            null;\r\n                        var normColor = normalizeColor(rawColor) || null;\r\n                        var hasHex = !!(\r\n                            normColor && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(normColor)\r\n                        );\r\n                        var border = normColor || \"#999999\";\r\n                        var bg = (hasHex && addAlpha(normColor, 0.12)) || \"rgba(0,0,0,0.06)\";\r\n                        var fg = getContrastColor(normColor) || \"#333333\";\r\n                        out +=\r\n                            '<a href=\"' +\r\n                            url +\r\n                            '\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"text-decoration:none;color:inherit\">' +\r\n                            '<span title=\"' +\r\n                            titleText +\r\n                            '\" style=\"display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid ' +\r\n                            escapeHtml(border) +\r\n                            \";background:\" +\r\n                            escapeHtml(bg) +\r\n                            \";color:\" +\r\n                            escapeHtml(fg) +\r\n                            ';font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;max-width:160px\">' +\r\n                            '<svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:' +\r\n                            escapeHtml(normColor || \"#666\") +\r\n                            '\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"currentColor\" /></svg>' +\r\n                            '<span style=\"flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap\">#' +\r\n                            num +\r\n                            \"</span></span></a>\";\r\n                    }\r\n                    out += \"</div>\";\r\n                    return out;\r\n                })();\r\n            }\r\n            case \"issue\":\r\n                return (e.issues || [])\r\n                    .map(\r\n                        (t: any) =>\r\n                            '<a href=\"' +\r\n                            escapeHtml(t.url || \"\") +\r\n                            '\" target=\"_blank\" rel=\"noopener noreferrer\">#' +\r\n                            escapeHtml(String(t.number || \"\")) +\r\n                            \" \" +\r\n                            escapeHtml(t.title || \"\") +\r\n                            \"</a>\"\r\n                    )\r\n                    .join(\"<br/>\");\r\n            case \"assignees\": {\r\n                let t = e.assignees || [];\r\n                if (t.length === 0) return \"<div></div>\";\r\n                let l = t\r\n                    .slice(0, 3)\r\n                    .map((g: any, f: any) => {\r\n                        let h = escapeHtml(g.avatarUrl || g.avatar || \"\"),\r\n                            w = f === 0 ? \"0px\" : f === 1 ? \"-8px\" : \"-14px\",\r\n                            x = Math.max(1, 3 - f);\r\n                        if (h)\r\n                            return (\r\n                                '<span title=\"' +\r\n                                escapeHtml(g.login || g.name || \"\") +\r\n                                '\" style=\"display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url(' +\r\n                                h +\r\n                                \");border:2px solid var(--vscode-editor-background);margin-left:\" +\r\n                                w +\r\n                                \";vertical-align:middle;position:relative;z-index:\" +\r\n                                x +\r\n                                '\"></span>'\r\n                            );\r\n                        let k = escapeHtml(\r\n                            (g.name || g.login || \"\")\r\n                                .split(\" \")\r\n                                .map((L: any) => L[0] || \"\")\r\n                                .join(\"\")\r\n                                .toUpperCase()\r\n                                .slice(0, 2)\r\n                        );\r\n                        return (\r\n                            '<span title=\"' +\r\n                            escapeHtml(g.login || g.name || \"\") +\r\n                            '\" style=\"display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;background:#777;color:#fff;font-size:11px;border:2px solid var(--vscode-editor-background);margin-left:' +\r\n                            w +\r\n                            \";vertical-align:middle;position:relative;z-index:\" +\r\n                            x +\r\n                            '\">' +\r\n                            k +\r\n                            \"</span>\"\r\n                        );\r\n                    })\r\n                    .join(\"\"),\r\n                    r = t.map((g: any) => g.login || g.name || \"\"),\r\n                    a = \"\";\r\n                return (\r\n                    r.length === 1\r\n                        ? (a = r[0])\r\n                        : r.length === 2\r\n                            ? (a = r[0] + \" and \" + r[1])\r\n                            : (a = r.slice(0, -1).join(\", \") + \" and \" + r.slice(-1)[0]),\r\n                    '<div style=\"display:flex;align-items:center;gap:8px\"><span style=\"display:flex;align-items:center\">' +\r\n                    ('<span style=\"display:inline-block;vertical-align:middle;height:20px;line-height:20px;margin-right:8px;\">' +\r\n                        l +\r\n                        \"</span>\") +\r\n                    '</span><span style=\"white-space:nowrap;overflow:hidden;text-overflow:ellipsis\">' +\r\n                    escapeHtml(a) +\r\n                    \"</span></div>\"\r\n                );\r\n            }\r\n            case \"requested_reviewers\":\r\n                return (\r\n                    \"<div>\" +\r\n                    escapeHtml(\r\n                        (e.reviewers || [])\r\n                            .map((t: any) => t.login || t.name || t.kind || \"\")\r\n                            .join(\", \")\r\n                    ) +\r\n                    \"</div>\"\r\n                );\r\n            case \"iteration\": {\r\n                let t = escapeHtml((U = e.title) != null ? U : \"\"),\r\n                    l = normalizeColor(\"GRAY\") || null,\r\n                    r = !!(l && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(l)),\r\n                    a = l || \"#999999\",\r\n                    p = (r && addAlpha(l, 0.12)) || \"rgba(0,0,0,0.06)\",\r\n                    g = l || \"#333333\";\r\n                return (\r\n                    '<div style=\"display:inline-block;padding:2px 8px;border:1px solid ' +\r\n                    escapeHtml(a) +\r\n                    \";border-radius:999px;color:\" +\r\n                    escapeHtml(g) +\r\n                    \";background:\" +\r\n                    escapeHtml(p) +\r\n                    ';font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\">' +\r\n                    t +\r\n                    \"</div>\"\r\n                );\r\n            }\r\n            case \"parent_issue\": {\r\n                let t =\r\n                    (e &&\r\n                        (e.parent ||\r\n                            e.parentIssue ||\r\n                            e.issue ||\r\n                            e.option ||\r\n                            e.item ||\r\n                            e.value)) ||\r\n                    (e &&\r\n                        e.raw &&\r\n                        (e.raw.parent || e.raw.itemContent || e.raw.item)) ||\r\n                    null,\r\n                    o =\r\n                        (t &&\r\n                            (t.number || t.id || (t.raw && t.raw.number)) &&\r\n                            (t.number || (t.raw && t.raw.number))) ||\r\n                        \"\",\r\n                    l =\r\n                        (t &&\r\n                            (t.title || t.name || (t.raw && t.raw.title)) &&\r\n                            (t.title || t.name || (t.raw && t.raw.title))) ||\r\n                        \"\",\r\n                    r =\r\n                        (t &&\r\n                            (t.url || t.html_url || (t.raw && t.raw.url)) &&\r\n                            (t.url || t.html_url || (t.raw && t.raw.url))) ||\r\n                        \"\",\r\n                    a = escapeHtml(String(l || \"\")),\r\n                    p = o ? escapeHtml(String(o)) : \"\",\r\n                    g = escapeHtml(String(r || \"\")),\r\n                    f = null;\r\n                try {\r\n                    var itemsList = Array.isArray(allItems)\r\n                        ? allItems\r\n                        : allItems || [];\r\n                    if (\r\n                        Array.isArray(itemsList) &&\r\n                        itemsList.length > 0 &&\r\n                        (o || t)\r\n                    ) {\r\n                        let B =\r\n                            (t &&\r\n                                t.repository &&\r\n                                (t.repository.nameWithOwner || t.repository.name)) ||\r\n                            (t &&\r\n                                t.content &&\r\n                                t.content.repository &&\r\n                                t.content.repository.nameWithOwner) ||\r\n                            null,\r\n                            O = [];\r\n                        o && O.push(String(o)),\r\n                            t &&\r\n                            (t.id || (t.raw && t.raw.id)) &&\r\n                            O.push(String(t.id || (t.raw && t.raw.id))),\r\n                            t &&\r\n                            (t.url || (t.raw && t.raw.url)) &&\r\n                            O.push(String(t.url || (t.raw && t.raw.url))),\r\n                            t && (t.title || t.name) && O.push(String(t.title || t.name));\r\n                        let $ = itemsList.find((A) => {\r\n                            let d =\r\n                                (A && (A.content || (A.raw && A.raw.itemContent))) || null;\r\n                            if (!d) return !1;\r\n                            let M = [];\r\n                            if (\r\n                                (d.number && M.push(String(d.number)),\r\n                                    d.id && M.push(String(d.id)),\r\n                                    d.url && M.push(String(d.url)),\r\n                                    d.title && M.push(String(d.title)),\r\n                                    d.name && M.push(String(d.name)),\r\n                                    d.raw && d.raw.number && M.push(String(d.raw.number)),\r\n                                    d.raw && d.raw.id && M.push(String(d.raw.id)),\r\n                                    d.raw && d.raw.url && M.push(String(d.raw.url)),\r\n                                    B)\r\n                            ) {\r\n                                let V =\r\n                                    (d.repository &&\r\n                                        (d.repository.nameWithOwner || d.repository.name)) ||\r\n                                    null;\r\n                                if (V && String(V) !== String(B)) return !1;\r\n                            }\r\n                            for (let V = 0; V < O.length; V++)\r\n                                for (let X = 0; X < M.length; X++)\r\n                                    if (O[V] && M[X] && String(O[V]) === String(M[X]))\r\n                                        return !0;\r\n                            return !1;\r\n                        });\r\n                        if ($ && Array.isArray($.fieldValues)) {\r\n                            let A = $.fieldValues.find(\r\n                                (d: any) =>\r\n                                    d &&\r\n                                    d.type === \"single_select\" &&\r\n                                    ((d.raw &&\r\n                                        d.raw.field &&\r\n                                        String(d.raw.field.name || \"\").toLowerCase() ===\r\n                                        \"status\") ||\r\n                                        (d.fieldName &&\r\n                                            String(d.fieldName || \"\").toLowerCase() ===\r\n                                            \"status\") ||\r\n                                        (d.field &&\r\n                                            d.field.name &&\r\n                                            String(d.field.name || \"\").toLowerCase() ===\r\n                                            \"status\"))\r\n                            );\r\n                            A &&\r\n                                (f =\r\n                                    (A.option &&\r\n                                        (A.option.color || A.option.id || A.option.name)) ||\r\n                                    (A.raw && A.raw.color) ||\r\n                                    null);\r\n                        }\r\n                    }\r\n                } catch (e) { }\r\n                f ||\r\n                    (f =\r\n                        (t &&\r\n                            ((t.option &&\r\n                                (t.option.color || t.option.id || t.option.name)) ||\r\n                                t.color ||\r\n                                t.colour)) ||\r\n                        null);\r\n                let h = normalizeColor(f) || null,\r\n                    w = !!(h && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(h)),\r\n                    x = h || \"#999999\",\r\n                    k = (w && addAlpha(h, 0.12)) || \"rgba(0,0,0,0.06)\",\r\n                    L = getContrastColor(h) || \"#333333\",\r\n                    q =\r\n                        '<span style=\"display:block;width:100%;box-sizing:border-box\">' +\r\n                        '<div style=\"display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border:1px solid ' +\r\n                        escapeHtml(x) +\r\n                        \";border-radius:999px;color:\" +\r\n                        escapeHtml(L) +\r\n                        \";background:\" +\r\n                        escapeHtml(k) +\r\n                        ';font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;width:100%\">' +\r\n                        '<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:' +\r\n                        escapeHtml(h || \"#666\") +\r\n                        '\"><circle cx=\"8\" cy=\"8\" r=\"6\" fill=\"currentColor\" /></svg>' +\r\n                        '<span class=\"parent-issue-title\" style=\"flex:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block\">' +\r\n                        a +\r\n                        \"</span>\" +\r\n                        (p\r\n                            ? '<span style=\"margin-left:6px;color:var(--vscode-descriptionForeground);white-space:nowrap\">#' +\r\n                            p +\r\n                            \"</span>\"\r\n                            : \"\") +\r\n                        \"</div></span>\";\r\n                // Provide a class for parent-issue wrappers so CSS can style/truncate reliably\r\n                const parentWrapper = '<span data-gh-open=\"' + (g || '') + '\" class=\"parent-issue-wrapper\" style=\"display:block;width:100%;cursor:' + (g ? 'pointer' : 'default') + '\">' ;\r\n                return g\r\n                    ? parentWrapper + q + \"</span>\"\r\n                    : q;\r\n            }\r\n            case \"milestone\":\r\n                return (\r\n                    \"<div>\" +\r\n                    escapeHtml(\r\n                        (i = (c = e.milestone) == null ? void 0 : c.title) != null\r\n                            ? i\r\n                            : \"\"\r\n                    ) +\r\n                    \"</div>\"\r\n                );\r\n            case \"sub_issues_progress\":\r\n                try {\r\n                    // Only render when there is a meaningful total (> 0)\r\n                    if (!e || e.total == null || Number(e.total) <= 0) return \"\";\r\n                    const totalCount = Math.max(0, Math.floor(Number(e.total) || 0));\r\n                    const doneCount = Math.max(0, Math.floor(Number(e.done || 0)));\r\n                    if (totalCount === 0) return \"\";\r\n                    // percentage for text\r\n                    let pct = null;\r\n                    if (e.percent !== void 0 && e.percent !== null)\r\n                        pct = Number(e.percent);\r\n                    else pct = Math.round((doneCount / totalCount) * 100);\r\n                    if (pct == null || !isFinite(pct)) return \"\";\r\n                    pct = Math.max(0, Math.min(100, pct));\r\n                    // Render a single pill-style progress bar (matching group header style)\r\n                    const barHtml =\r\n                        '<div class=\"sub-issues-progress\" style=\"display:flex;align-items:center;gap:8px;width:100%;\">' +\r\n                        // flexible bar container\r\n                        '<div class=\"sub-issues-progress-bar\" style=\"flex:1;min-width:0\">' +\r\n                        // outer bar: border + rounded corners, inner fill width is pct%\r\n                        '<div style=\"width:100%;height:12px;border-radius:6px;border:1px solid var(--vscode-focusBorder);overflow:hidden;background:transparent;box-sizing:border-box\">' +\r\n                        '<div style=\"height:100%;width:' + String(pct) + '%;background:var(--vscode-focusBorder)\"></div>' +\r\n                        '</div>' +\r\n                        '</div>' +\r\n                        // percentage text\r\n                        '<div class=\"sub-issues-progress-pct\" style=\"min-width:44px;text-align:right;font-variant-numeric:tabular-nums;color:var(--vscode-descriptionForeground)\">' +\r\n                        escapeHtml(String(pct) + \"%\") +\r\n                        '</div>' +\r\n                        '</div>';\r\n\r\n                    return barHtml;\r\n                } catch (e) {\r\n                    return \"\";\r\n                }\r\n            case \"missing\":\r\n                return \"\";\r\n            default:\r\n                return (\r\n                    \"<div>\" +\r\n                    escapeHtml(\r\n                        e && e.raw && e.raw.__typename\r\n                            ? String(e.raw.__typename)\r\n                            : JSON.stringify(e).slice(0, 200)\r\n                    ) +\r\n                    \"</div>\"\r\n                );\r\n        }\r\n    } catch (e) {\r\n        return \"\";\r\n    }\r\n}\r\n", "/**\r\n * Column Header Dropdown Menu Component\r\n * Shows context menu when clicking column header with actions like sort, group, slice, hide, move\r\n */\r\n\r\nexport interface MenuOptions {\r\n    canGroup: boolean;\r\n    canSlice: boolean;\r\n    canFilter: boolean;\r\n    isGrouped?: boolean;\r\n    isSliced?: boolean;\r\n    currentSort?: 'ASC' | 'DESC' | null;\r\n    onSort?: (direction: 'ASC' | 'DESC') => void;\r\n    onGroup?: () => void;\r\n    onSlice?: () => void;\r\n    onClearGroup?: () => void;\r\n    onClearSlice?: () => void;\r\n    onClearSort?: () => void;\r\n    onHide?: () => void;\r\n    onMove?: (direction: 'left' | 'right') => void;\r\n    onFilter?: () => void;\r\n}\r\n\r\nexport class ColumnHeaderMenu {\r\n    private field: any;\r\n    private options: MenuOptions;\r\n    private menuElement: HTMLElement | null = null;\r\n    private backdropElement: HTMLElement | null = null;\r\n\r\n    constructor(field: any, options: MenuOptions) {\r\n        this.field = field;\r\n        this.options = options;\r\n    }\r\n\r\n    /**\r\n     * Show the menu anchored below the header element\r\n     */\r\n    public show(anchorElement: HTMLElement): void {\r\n        // Hide any existing menu\r\n        this.hide();\r\n\r\n        // Create backdrop to detect outside clicks\r\n        this.backdropElement = document.createElement('div');\r\n        this.backdropElement.style.position = 'fixed';\r\n        this.backdropElement.style.top = '0';\r\n        this.backdropElement.style.left = '0';\r\n        this.backdropElement.style.right = '0';\r\n        this.backdropElement.style.bottom = '0';\r\n        this.backdropElement.style.zIndex = '999';\r\n        this.backdropElement.addEventListener('click', () => this.hide());\r\n        document.body.appendChild(this.backdropElement);\r\n\r\n        // Create menu\r\n        this.menuElement = document.createElement('div');\r\n        this.menuElement.className = 'column-header-menu';\r\n        this.menuElement.style.position = 'absolute';\r\n        this.menuElement.style.background = 'var(--vscode-menu-background)';\r\n        this.menuElement.style.border = '1px solid var(--vscode-menu-border)';\r\n        this.menuElement.style.borderRadius = '4px';\r\n        this.menuElement.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.15)';\r\n        this.menuElement.style.minWidth = '180px';\r\n        this.menuElement.style.padding = '4px 0';\r\n        this.menuElement.style.zIndex = '1000';\r\n        this.menuElement.style.fontSize = '13px';\r\n\r\n        // Position below anchor\r\n        const rect = anchorElement.getBoundingClientRect();\r\n        this.menuElement.style.top = `${rect.bottom + 4}px`;\r\n        this.menuElement.style.left = `${rect.left}px`;\r\n\r\n        // Build menu items\r\n        this.buildMenuItems();\r\n\r\n        document.body.appendChild(this.menuElement);\r\n    }\r\n\r\n    /**\r\n     * Hide and remove the menu\r\n     */\r\n    public hide(): void {\r\n        if (this.menuElement) {\r\n            this.menuElement.remove();\r\n            this.menuElement = null;\r\n        }\r\n        if (this.backdropElement) {\r\n            this.backdropElement.remove();\r\n            this.backdropElement = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Build menu items based on options\r\n     */\r\n    private buildMenuItems(): void {\r\n        if (!this.menuElement) return;\r\n\r\n        // Header\r\n        this.addMenuItem('Select column', null, { isHeader: true });\r\n        this.addSeparator();\r\n\r\n        // Sort options (always available). If the column is currently sorted, show an 'x' clear button\r\n        this.addMenuItem('Sort ascending \u2191', () => {\r\n            this.options.onSort?.('ASC');\r\n            this.hide();\r\n        }, { icon: '\u2191', showClear: !!(this.options.currentSort === 'ASC'), clearAction: this.options.onClearSort });\r\n\r\n        this.addMenuItem('Sort descending \u2193', () => {\r\n            this.options.onSort?.('DESC');\r\n            this.hide();\r\n        }, { icon: '\u2193', showClear: !!(this.options.currentSort === 'DESC'), clearAction: this.options.onClearSort });\r\n\r\n        this.addSeparator();\r\n\r\n        // Group by (conditional)\r\n        if (this.options.canGroup) {\r\n            this.addMenuItem('Group by values', () => {\r\n                this.options.onGroup?.();\r\n                this.hide();\r\n            }, { showClear: !!this.options.isGrouped, clearAction: this.options.onClearGroup });\r\n        }\r\n\r\n        // Slice by (conditional)\r\n        if (this.options.canSlice) {\r\n            this.addMenuItem('Slice by values', () => {\r\n                this.options.onSlice?.();\r\n                this.hide();\r\n            }, { showClear: !!this.options.isSliced, clearAction: this.options.onClearSlice });\r\n        }\r\n\r\n        // Filter (conditional)\r\n        if (this.options.canFilter) {\r\n            this.addMenuItem('Filter by values...', () => {\r\n                this.options.onFilter?.();\r\n                this.hide();\r\n            });\r\n        }\r\n\r\n        // Always available actions\r\n        if (this.options.canGroup || this.options.canSlice || this.options.canFilter) {\r\n            this.addSeparator();\r\n        }\r\n\r\n        this.addMenuItem('Hide field', () => {\r\n            this.options.onHide?.();\r\n            this.hide();\r\n        });\r\n\r\n        this.addSeparator();\r\n\r\n        this.addMenuItem('Move left \u2190', () => {\r\n            this.options.onMove?.('left');\r\n            this.hide();\r\n        }, { icon: '\u2190' });\r\n\r\n        this.addMenuItem('Move right \u2192', () => {\r\n            this.options.onMove?.('right');\r\n            this.hide();\r\n        }, { icon: '\u2192' });\r\n    }\r\n\r\n    /**\r\n     * Add a menu item\r\n     */\r\n    private addMenuItem(\r\n        label: string,\r\n        onClick: (() => void) | null,\r\n        options?: { isHeader?: boolean; icon?: string; showClear?: boolean; clearAction?: (() => void) | null }\r\n    ): void {\r\n        if (!this.menuElement) return;\r\n        const item = document.createElement('div');\r\n        item.className = 'menu-item';\r\n\r\n        if (options?.isHeader) {\r\n            item.textContent = label;\r\n            item.style.padding = '6px 12px';\r\n            item.style.fontWeight = '600';\r\n            item.style.color = 'var(--vscode-descriptionForeground)';\r\n            item.style.fontSize = '11px';\r\n            item.style.textTransform = 'uppercase';\r\n            item.style.cursor = 'default';\r\n            this.menuElement.appendChild(item);\r\n            return;\r\n        }\r\n\r\n        // Non-header item layout: label on the left, optional clear 'x' button on the right\r\n        item.style.display = 'flex';\r\n        item.style.alignItems = 'center';\r\n        item.style.justifyContent = 'space-between';\r\n        item.style.padding = '6px 12px';\r\n        item.style.cursor = 'pointer';\r\n        item.style.color = 'var(--vscode-menu-foreground)';\r\n\r\n        const labelEl = document.createElement('span');\r\n        labelEl.textContent = label;\r\n        labelEl.style.flex = '1';\r\n        labelEl.style.whiteSpace = 'nowrap';\r\n        labelEl.style.overflow = 'hidden';\r\n        labelEl.style.textOverflow = 'ellipsis';\r\n\r\n        item.appendChild(labelEl);\r\n\r\n        // Optional clear 'x' button\r\n        if (options?.showClear && options?.clearAction) {\r\n            const clearBtn = document.createElement('button');\r\n            clearBtn.type = 'button';\r\n            clearBtn.textContent = '\u2715';\r\n            clearBtn.title = 'Clear';\r\n            clearBtn.style.border = 'none';\r\n            clearBtn.style.background = 'transparent';\r\n            clearBtn.style.cursor = 'pointer';\r\n            clearBtn.style.padding = '2px 6px';\r\n            clearBtn.style.marginLeft = '8px';\r\n            clearBtn.style.color = 'var(--vscode-menu-foreground)';\r\n\r\n            clearBtn.addEventListener('mouseenter', () => {\r\n                clearBtn.style.color = 'var(--vscode-menu-selectionForeground)';\r\n                clearBtn.style.background = 'var(--vscode-menu-selectionBackground)';\r\n            });\r\n            clearBtn.addEventListener('mouseleave', () => {\r\n                clearBtn.style.color = 'var(--vscode-menu-foreground)';\r\n                clearBtn.style.background = 'transparent';\r\n            });\r\n\r\n            clearBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                options.clearAction && options.clearAction();\r\n                this.hide();\r\n            });\r\n\r\n            item.appendChild(clearBtn);\r\n        }\r\n\r\n        if (onClick) {\r\n            item.addEventListener('mouseenter', () => {\r\n                item.style.background = 'var(--vscode-menu-selectionBackground)';\r\n                item.style.color = 'var(--vscode-menu-selectionForeground)';\r\n            });\r\n\r\n            item.addEventListener('mouseleave', () => {\r\n                item.style.background = 'transparent';\r\n                item.style.color = 'var(--vscode-menu-foreground)';\r\n            });\r\n\r\n            item.addEventListener('click', onClick);\r\n        }\r\n\r\n        this.menuElement.appendChild(item);\r\n    }\r\n\r\n    /**\r\n     * Add menu separator\r\n     */\r\n    private addSeparator(): void {\r\n        if (!this.menuElement) return;\r\n\r\n        const separator = document.createElement('div');\r\n        separator.style.height = '1px';\r\n        separator.style.background = 'var(--vscode-menu-separatorBackground)';\r\n        separator.style.margin = '4px 0';\r\n\r\n        this.menuElement.appendChild(separator);\r\n    }\r\n}\r\n", "/**\r\n * Fields Menu\r\n * Dropdown used from table plus-column. Shows project fields split into Visible / Hidden sections\r\n * First item is a \"+ New field\" button. Visible fields show a leading checkmark.\r\n */\r\n\r\nexport interface FieldItem {\r\n    id: string;\r\n    name: string;\r\n    iconClass?: string;\r\n}\r\n\r\nexport interface FieldsMenuOptions {\r\n    fields: FieldItem[];\r\n    visibleFieldIds: Set<string>;\r\n    onToggleVisibility?: (fieldId: string, visible: boolean) => void;\r\n    onCreateField?: () => void;\r\n}\r\n\r\nexport class FieldsMenu {\r\n    private options: FieldsMenuOptions;\r\n    private menuElement: HTMLElement | null = null;\r\n    private backdropElement: HTMLElement | null = null;\r\n\r\n    constructor(options: FieldsMenuOptions) {\r\n        this.options = options;\r\n    }\r\n\r\n    public show(anchorElement: HTMLElement) {\r\n        this.hide();\r\n\r\n        // Backdrop to detect outside clicks\r\n        this.backdropElement = document.createElement('div');\r\n        this.backdropElement.style.position = 'fixed';\r\n        this.backdropElement.style.top = '0';\r\n        this.backdropElement.style.left = '0';\r\n        this.backdropElement.style.right = '0';\r\n        this.backdropElement.style.bottom = '0';\r\n        this.backdropElement.style.zIndex = '998';\r\n        this.backdropElement.addEventListener('click', () => this.hide());\r\n        document.body.appendChild(this.backdropElement);\r\n\r\n        // Create menu offscreen first so we can measure size and pick best placement\r\n        this.menuElement = document.createElement('div');\r\n        this.menuElement.className = 'fields-menu';\r\n        this.menuElement.style.position = 'absolute';\r\n        this.menuElement.style.visibility = 'hidden';\r\n        this.menuElement.style.left = '0px';\r\n        this.menuElement.style.top = '0px';\r\n        this.menuElement.style.background = 'var(--vscode-menu-background)';\r\n        this.menuElement.style.border = '1px solid var(--vscode-menu-border)';\r\n        this.menuElement.style.borderRadius = '4px';\r\n        this.menuElement.style.boxShadow = '0 2px 8px rgba(0,0,0,0.15)';\r\n        this.menuElement.style.minWidth = '220px';\r\n        this.menuElement.style.padding = '6px 0';\r\n        this.menuElement.style.zIndex = '1000';\r\n        this.menuElement.style.fontSize = '13px';\r\n\r\n        // Append hidden, build, measure, then position\r\n        document.body.appendChild(this.menuElement);\r\n        this.buildMenu();\r\n\r\n        const rect = anchorElement.getBoundingClientRect();\r\n        const menuRect = this.menuElement.getBoundingClientRect();\r\n        const margin = 8;\r\n        const vw = window.innerWidth || document.documentElement.clientWidth;\r\n        const vh = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n        // Vertical placement: prefer below, otherwise above, else clamp\r\n        let top = rect.bottom + margin;\r\n        if (rect.bottom + menuRect.height + margin > vh) {\r\n            // try above\r\n            if (rect.top - menuRect.height - margin >= 0) {\r\n                top = rect.top - menuRect.height - margin;\r\n            } else {\r\n                // clamp within viewport\r\n                top = Math.max(margin, Math.min(vh - menuRect.height - margin, rect.bottom + margin));\r\n            }\r\n        }\r\n\r\n        // Horizontal placement: align left by default, but adjust if overflowing\r\n        let left = rect.left;\r\n        if (rect.left + menuRect.width + margin > vw) {\r\n            // try align to right edge of anchor\r\n            left = Math.max(margin, rect.right - menuRect.width);\r\n        }\r\n        // Clamp left\r\n        left = Math.max(margin, Math.min(left, vw - menuRect.width - margin));\r\n\r\n        this.menuElement.style.top = `${Math.round(top)}px`;\r\n        this.menuElement.style.left = `${Math.round(left)}px`;\r\n        this.menuElement.style.visibility = 'visible';\r\n    }\r\n\r\n    public hide() {\r\n        if (this.menuElement) { this.menuElement.remove(); this.menuElement = null; }\r\n        if (this.backdropElement) { this.backdropElement.remove(); this.backdropElement = null; }\r\n    }\r\n\r\n    private buildMenu() {\r\n        if (!this.menuElement) return;\r\n\r\n        // Header\r\n        const title = document.createElement('div');\r\n        title.style.display = 'flex';\r\n        title.style.alignItems = 'center';\r\n        title.style.padding = '6px 12px';\r\n        title.style.fontWeight = '600';\r\n        title.style.color = 'var(--vscode-descriptionForeground)';\r\n        title.style.fontSize = '12px';\r\n        title.style.textTransform = 'uppercase';\r\n\r\n        const icon = document.createElement('i');\r\n        icon.className = 'octicon octicon-note';\r\n        icon.style.marginRight = '8px';\r\n        title.appendChild(icon);\r\n\r\n        const label = document.createElement('span');\r\n        label.textContent = 'Fields';\r\n        title.appendChild(label);\r\n\r\n        this.menuElement.appendChild(title);\r\n        this.addSeparator();\r\n\r\n        // + New field\r\n        const newField = document.createElement('div');\r\n        newField.style.display = 'flex';\r\n        newField.style.alignItems = 'center';\r\n        newField.style.padding = '6px 12px';\r\n        newField.style.cursor = 'pointer';\r\n        newField.style.color = 'var(--vscode-menu-foreground)';\r\n        newField.innerHTML = `<span style=\"margin-right:8px;font-weight:700\">+</span><span>New field</span>`;\r\n        newField.addEventListener('mouseenter', () => { newField.style.background = 'var(--vscode-menu-selectionBackground)'; newField.style.color = 'var(--vscode-menu-selectionForeground)'; });\r\n        newField.addEventListener('mouseleave', () => { newField.style.background = 'transparent'; newField.style.color = 'var(--vscode-menu-foreground)'; });\r\n        newField.addEventListener('click', () => { this.options.onCreateField?.(); this.hide(); });\r\n        this.menuElement.appendChild(newField);\r\n\r\n        this.addSeparator();\r\n\r\n        const visible = this.options.fields.filter(f => this.options.visibleFieldIds.has(f.id));\r\n        const hidden = this.options.fields.filter(f => !this.options.visibleFieldIds.has(f.id));\r\n\r\n        this.addSectionHeader('Visible fields');\r\n        if (visible.length === 0) this.addEmptyRow('No visible fields');\r\n        else visible.forEach(f => this.addFieldRow(f, true));\r\n\r\n        this.addSeparator();\r\n\r\n        this.addSectionHeader('Hidden fields');\r\n        if (hidden.length === 0) this.addEmptyRow('No hidden fields');\r\n        else hidden.forEach(f => this.addFieldRow(f, false));\r\n    }\r\n\r\n    private addSectionHeader(text: string) { if (!this.menuElement) return; const h = document.createElement('div'); h.textContent = text; h.style.padding='6px 12px'; h.style.fontSize='11px'; h.style.fontWeight='600'; h.style.color='var(--vscode-descriptionForeground)'; h.style.textTransform='uppercase'; this.menuElement.appendChild(h); }\r\n    private addEmptyRow(text: string) { if (!this.menuElement) return; const r = document.createElement('div'); r.textContent = text; r.style.padding='6px 12px'; r.style.color='var(--vscode-menu-foreground)'; r.style.opacity='0.8'; this.menuElement.appendChild(r); }\r\n\r\n    private addFieldRow(field: FieldItem, visible: boolean) {\r\n        if (!this.menuElement) return;\r\n        const row = document.createElement('div');\r\n        row.style.display = 'flex'; row.style.alignItems = 'center'; row.style.padding = '6px 12px'; row.style.cursor='pointer'; row.style.color='var(--vscode-menu-foreground)';\r\n\r\n        if (visible) { const c = document.createElement('span'); c.textContent = '\u2713'; c.style.marginRight='8px'; c.style.color='var(--vscode-menu-selectionForeground)'; row.appendChild(c); }\r\n        else { const s = document.createElement('span'); s.style.display='inline-block'; s.style.width='14px'; s.style.marginRight='8px'; row.appendChild(s); }\r\n\r\n        const icon = document.createElement('i'); icon.className = field.iconClass || 'octicon octicon-tag'; icon.style.marginRight='8px'; row.appendChild(icon);\r\n        const label = document.createElement('span'); label.textContent = field.name; label.style.flex='1'; label.style.whiteSpace='nowrap'; label.style.overflow='hidden'; label.style.textOverflow='ellipsis'; row.appendChild(label);\r\n\r\n        row.addEventListener('mouseenter', () => { row.style.background='var(--vscode-menu-selectionBackground)'; row.style.color='var(--vscode-menu-selectionForeground)'; });\r\n        row.addEventListener('mouseleave', () => { row.style.background='transparent'; row.style.color='var(--vscode-menu-foreground)'; });\r\n        row.addEventListener('click', () => {\r\n            const newVisible = !visible;\r\n            this.options.onToggleVisibility?.(field.id, newVisible);\r\n            if (newVisible) this.options.visibleFieldIds.add(field.id); else this.options.visibleFieldIds.delete(field.id);\r\n            this.menuElement && (this.menuElement.innerHTML = '', this.buildMenu());\r\n        });\r\n\r\n        this.menuElement.appendChild(row);\r\n    }\r\n\r\n    private addSeparator() { if (!this.menuElement) return; const s = document.createElement('div'); s.style.height='1px'; s.style.background='var(--vscode-menu-separatorBackground)'; s.style.margin='6px 0'; this.menuElement.appendChild(s); }\r\n}\r\n\r\nexport default FieldsMenu;\r\n", "/**\r\n * Slice Panel Component\r\n * Shows unique values for a field with counts, allowing quick filtering\r\n */\r\n\r\nimport { normalizeColor, escapeHtml } from '../utils';\r\n\r\nexport class SlicePanel {\r\n    private container: HTMLElement;\r\n    private field: any;\r\n    private items: any[];\r\n    private panelElement: HTMLElement | null = null;\r\n    private onValueSelectCallback?: (value: any) => void;\r\n    private onFieldChangeCallback?: (field: any) => void;\r\n    private allFields: any[];\r\n\r\n    constructor(container: HTMLElement, field: any, items: any[], allFields?: any[]) {\r\n        this.container = container;\r\n        this.field = field;\r\n        this.items = items;\r\n        this.allFields = allFields || [];\r\n    }\r\n\r\n    /**\r\n     * Render the slice panel\r\n     */\r\n    public render(): void {\r\n        this.close(); // Close any existing panel\r\n\r\n        // Create panel\r\n        this.panelElement = document.createElement('div');\r\n        this.panelElement.className = 'slice-panel';\r\n        this.panelElement.style.position = 'relative';\r\n        this.panelElement.style.float = 'left';\r\n        // Restore persisted width if available\r\n        try {\r\n            const stored = localStorage.getItem('ghProjects.slicePanel.width');\r\n            if (stored) this.panelElement.style.width = stored;\r\n            else this.panelElement.style.width = '280px';\r\n        } catch (e) {\r\n            this.panelElement.style.width = '280px';\r\n        }\r\n        this.panelElement.style.marginRight = '12px';\r\n        this.panelElement.style.background = 'var(--vscode-sideBar-background)';\r\n        this.panelElement.style.border = '1px solid var(--vscode-sideBar-border)';\r\n        this.panelElement.style.borderRadius = '6px';\r\n        this.panelElement.style.display = 'flex';\r\n        this.panelElement.style.flexDirection = 'column';\r\n        this.panelElement.style.overflow = 'hidden';\r\n        this.panelElement.style.maxHeight = '600px';\r\n\r\n        // Temporary debug overlay: shows last resolved parent metadata and progress\r\n        const debugOverlay = document.createElement('pre');\r\n        debugOverlay.className = 'slice-panel-debug-overlay';\r\n        debugOverlay.style.position = 'absolute';\r\n        debugOverlay.style.left = '8px';\r\n        debugOverlay.style.bottom = '8px';\r\n        debugOverlay.style.right = '8px';\r\n        debugOverlay.style.maxHeight = '120px';\r\n        debugOverlay.style.overflow = 'auto';\r\n        debugOverlay.style.background = 'rgba(0,0,0,0.6)';\r\n        debugOverlay.style.color = 'white';\r\n        debugOverlay.style.fontSize = '11px';\r\n        debugOverlay.style.padding = '8px';\r\n        debugOverlay.style.borderRadius = '6px';\r\n        debugOverlay.style.zIndex = '200';\r\n        debugOverlay.style.display = 'none'; // hidden by default\r\n        debugOverlay.title = 'SlicePanel debug (click to show/hide)';\r\n        debugOverlay.addEventListener('click', () => {\r\n            debugOverlay.style.display = debugOverlay.style.display === 'none' ? 'block' : 'none';\r\n        });\r\n        this.panelElement.appendChild(debugOverlay);\r\n\r\n        // Add resizer on the right edge to allow adjusting panel width\r\n        const resizer = document.createElement('div');\r\n        resizer.className = 'slice-panel-resizer';\r\n        resizer.style.position = 'absolute';\r\n        resizer.style.top = '0';\r\n        resizer.style.right = '0';\r\n        resizer.style.bottom = '0';\r\n        resizer.style.width = '6px';\r\n        resizer.style.cursor = 'col-resize';\r\n        resizer.style.zIndex = '100';\r\n        this.panelElement.appendChild(resizer);\r\n\r\n        let startX: number | null = null;\r\n        let startWidth: number | null = null;\r\n\r\n        const onMouseMove = (e: MouseEvent) => {\r\n            if (startX == null || startWidth == null) return;\r\n            const dx = e.pageX - startX;\r\n            const newW = Math.max(160, startWidth + dx);\r\n            this.panelElement!.style.width = newW + 'px';\r\n        };\r\n\r\n        const onMouseUp = () => {\r\n            if (startX == null) return;\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n            try { localStorage.setItem('ghProjects.slicePanel.width', this.panelElement!.style.width); } catch (e) { }\r\n            startX = null; startWidth = null;\r\n        };\r\n\r\n        resizer.addEventListener('mousedown', (ev: MouseEvent) => {\r\n            ev.preventDefault();\r\n            startX = ev.pageX;\r\n            startWidth = this.panelElement ? this.panelElement.offsetWidth : 280;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n            document.addEventListener('mouseup', onMouseUp);\r\n        });\r\n\r\n        // Header with dropdown\r\n        const header = document.createElement('div');\r\n        header.style.padding = '12px';\r\n        header.style.borderBottom = '1px solid var(--vscode-sideBar-border)';\r\n        header.style.display = 'flex';\r\n        header.style.flexDirection = 'column';\r\n        header.style.gap = '8px';\r\n\r\n        const headerTop = document.createElement('div');\r\n        headerTop.style.display = 'flex';\r\n        headerTop.style.alignItems = 'center';\r\n        headerTop.style.gap = '8px';\r\n\r\n        const sliceLabel = document.createElement('span');\r\n        sliceLabel.textContent = 'Slice by';\r\n        sliceLabel.style.fontSize = '11px';\r\n        sliceLabel.style.fontWeight = '600';\r\n        sliceLabel.style.color = 'var(--vscode-descriptionForeground)';\r\n        sliceLabel.style.textTransform = 'uppercase';\r\n        sliceLabel.style.letterSpacing = '0.5px';\r\n        headerTop.appendChild(sliceLabel);\r\n\r\n        // Field dropdown/button\r\n        const fieldButton = document.createElement('button');\r\n        fieldButton.textContent = this.field.name;\r\n        fieldButton.style.flex = '1';\r\n        fieldButton.style.padding = '6px 12px';\r\n        fieldButton.style.background = 'var(--vscode-button-secondaryBackground)';\r\n        fieldButton.style.color = 'var(--vscode-button-secondaryForeground)';\r\n        fieldButton.style.border = '1px solid var(--vscode-button-border)';\r\n        fieldButton.style.borderRadius = '4px';\r\n        fieldButton.style.cursor = 'pointer';\r\n        fieldButton.style.fontSize = '13px';\r\n        fieldButton.style.fontWeight = '500';\r\n        fieldButton.style.textAlign = 'left';\r\n        fieldButton.style.display = 'flex';\r\n        fieldButton.style.justifyContent = 'space-between';\r\n        fieldButton.style.alignItems = 'center';\r\n\r\n        // Add dropdown arrow\r\n        const arrow = document.createElement('span');\r\n        arrow.textContent = '\u25BC';\r\n        arrow.style.fontSize = '10px';\r\n        arrow.style.marginLeft = 'auto';\r\n        fieldButton.appendChild(arrow);\r\n\r\n        // Add dropdown menu on click\r\n        fieldButton.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            this.showFieldDropdown(fieldButton);\r\n        });\r\n\r\n        headerTop.appendChild(fieldButton);\r\n        header.appendChild(headerTop);\r\n\r\n        this.panelElement.appendChild(header);\r\n\r\n        // Content\r\n        const content = document.createElement('div');\r\n        content.style.flex = '1';\r\n        content.style.overflow = 'auto';\r\n        content.style.padding = '8px';\r\n\r\n        this.renderValues(content);\r\n\r\n        this.panelElement.appendChild(content);\r\n        this.container.appendChild(this.panelElement);\r\n    }\r\n\r\n    /**\r\n     * Show dropdown menu to select a different field\r\n     */\r\n    private showFieldDropdown(anchorButton: HTMLElement): void {\r\n        // Get sliceable fields\r\n        const sliceableTypes = new Set([\r\n            'assignees',\r\n            'single_select',\r\n            'parent_issue',\r\n            'iteration',\r\n            'number',\r\n            'date',\r\n            'milestone',\r\n            'repository',\r\n            'labels'\r\n        ]);\r\n\r\n        const sliceableFields = this.allFields.filter(f => {\r\n            const dataType = (f.dataType || '').toLowerCase();\r\n            return sliceableTypes.has(dataType);\r\n        });\r\n\r\n        if (sliceableFields.length === 0) return;\r\n\r\n        // Create dropdown\r\n        const dropdown = document.createElement('div');\r\n        dropdown.style.position = 'absolute';\r\n        dropdown.style.top = `${anchorButton.getBoundingClientRect().bottom + 4}px`;\r\n        dropdown.style.left = `${anchorButton.getBoundingClientRect().left}px`;\r\n        dropdown.style.minWidth = `${anchorButton.offsetWidth}px`;\r\n        dropdown.style.background = 'var(--vscode-dropdown-background)';\r\n        dropdown.style.border = '1px solid var(--vscode-dropdown-border)';\r\n        dropdown.style.borderRadius = '4px';\r\n        dropdown.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';\r\n        dropdown.style.zIndex = '1000';\r\n        dropdown.style.maxHeight = '300px';\r\n        dropdown.style.overflowY = 'auto';\r\n\r\n        sliceableFields.forEach(field => {\r\n            const item = document.createElement('div');\r\n            item.textContent = field.name;\r\n            item.style.padding = '8px 12px';\r\n            item.style.cursor = 'pointer';\r\n            item.style.fontSize = '13px';\r\n            item.style.color = 'var(--vscode-dropdown-foreground)';\r\n\r\n            if (field.id === this.field.id) {\r\n                item.style.background = 'var(--vscode-list-activeSelectionBackground)';\r\n                item.style.color = 'var(--vscode-list-activeSelectionForeground)';\r\n            }\r\n\r\n            item.addEventListener('mouseenter', () => {\r\n                if (field.id !== this.field.id) {\r\n                    item.style.background = 'var(--vscode-list-hoverBackground)';\r\n                }\r\n            });\r\n\r\n            item.addEventListener('mouseleave', () => {\r\n                if (field.id !== this.field.id) {\r\n                    item.style.background = 'transparent';\r\n                }\r\n            });\r\n\r\n            item.addEventListener('click', () => {\r\n                this.field = field;\r\n                dropdown.remove();\r\n                backdrop.remove();\r\n                this.render();\r\n                if (this.onFieldChangeCallback) {\r\n                    this.onFieldChangeCallback(field);\r\n                }\r\n            });\r\n\r\n            dropdown.appendChild(item);\r\n        });\r\n\r\n        // Backdrop to close dropdown\r\n        const backdrop = document.createElement('div');\r\n        backdrop.style.position = 'fixed';\r\n        backdrop.style.top = '0';\r\n        backdrop.style.left = '0';\r\n        backdrop.style.right = '0';\r\n        backdrop.style.bottom = '0';\r\n        backdrop.style.zIndex = '999';\r\n\r\n        backdrop.addEventListener('click', () => {\r\n            dropdown.remove();\r\n            backdrop.remove();\r\n        });\r\n\r\n        document.body.appendChild(backdrop);\r\n        document.body.appendChild(dropdown);\r\n    }\r\n\r\n    /**\r\n     * Render the list of unique values with counts\r\n     */\r\n    private renderValues(container: HTMLElement): void {\r\n        // Get unique values and their counts\r\n        const valueCounts = this.getValueCounts();\r\n\r\n        if (valueCounts.size === 0) {\r\n            const empty = document.createElement('div');\r\n            empty.textContent = 'No values';\r\n            empty.style.padding = '8px';\r\n            empty.style.color = 'var(--vscode-descriptionForeground)';\r\n            container.appendChild(empty);\r\n            return;\r\n        }\r\n\r\n        // Sort by count (descending)\r\n        const sorted = Array.from(valueCounts.entries())\r\n            .sort((a, b) => b[1].count - a[1].count);\r\n\r\n        // Helper: resolve parent item and compute progress (done/total/pct)\r\n        const resolveParentProgress = (parentMeta: any) => {\r\n            const result: any = { resolved: null, statusColor: null, number: null, title: null, done: 0, total: 0, pct: 0 };\r\n            if (!parentMeta) return result;\r\n\r\n            // Build identifier list from parentMeta\r\n            const identifiers: string[] = [];\r\n            if (parentMeta.number) identifiers.push(String(parentMeta.number));\r\n            if (parentMeta.id) identifiers.push(String(parentMeta.id));\r\n            if (parentMeta.url) identifiers.push(String(parentMeta.url));\r\n            if (parentMeta.title) identifiers.push(String(parentMeta.title));\r\n\r\n            // Try to find a matching item in this.items (same logic as grouping header resolution)\r\n            const found = this.items.find((A: any) => {\r\n                const d = (A && (A.content || (A.raw && A.raw.itemContent))) || null;\r\n                if (!d) return false;\r\n                const M: string[] = [];\r\n                if (d.number) M.push(String(d.number));\r\n                if (d.id) M.push(String(d.id));\r\n                if (d.url) M.push(String(d.url));\r\n                if (d.title) M.push(String(d.title));\r\n                if (d.name) M.push(String(d.name));\r\n                if (d.raw && d.raw.number) M.push(String(d.raw.number));\r\n                if (d.raw && d.raw.id) M.push(String(d.raw.id));\r\n                if (d.raw && d.raw.url) M.push(String(d.raw.url));\r\n                for (let o of identifiers) {\r\n                    for (let m of M) {\r\n                        if (o && m && String(o) === String(m)) return true;\r\n                    }\r\n                }\r\n                return false;\r\n            });\r\n\r\n            if (!found) return result; // single strategy: only use resolved item in snapshot\r\n\r\n            result.resolved = found;\r\n            const content = found.content || (found.raw && found.raw.itemContent) || null;\r\n            result.title = content && (content.title || content.name) ? (content.title || content.name) : (found.title || found.name || null);\r\n            result.number = content && content.number ? String(content.number) : (found.number || found.id || null);\r\n\r\n            // Determine status color from single_select field in parent (if present)\r\n            if (Array.isArray(found.fieldValues)) {\r\n                const statusFV = found.fieldValues.find((v: any) => v && v.type === 'single_select' && v.option && v.option.name);\r\n                if (statusFV && statusFV.option) {\r\n                    try {\r\n                        const c = statusFV.option.color || statusFV.option.id || statusFV.option.name || null;\r\n                        result.statusColor = normalizeColor(c) || null;\r\n                    } catch (e) { }\r\n                }\r\n\r\n                // Try to read aggregate progress field (sub_issues_progress or synthesized with total/done)\r\n                const agg = found.fieldValues.find((v: any) => v && (v.type === 'sub_issues_progress' || (v.total != null && v.done != null)));\r\n                if (agg && agg.total != null) {\r\n                    result.total = Number(agg.total || 0);\r\n                    result.done = Number(agg.done || 0);\r\n                    result.pct = result.total > 0 ? Math.round((result.done / result.total) * 100) : 0;\r\n                }\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        // Render each value with grouping-style presentation\r\n        sorted.forEach(([key, { value, count, rawValue }]) => {\r\n            const item = document.createElement('div');\r\n            item.className = 'slice-value-item';\r\n            item.style.padding = '10px 12px';\r\n            item.style.cursor = 'pointer';\r\n            item.style.borderRadius = '4px';\r\n            item.style.marginBottom = '4px';\r\n            item.style.display = 'flex';\r\n            item.style.alignItems = 'center';\r\n            item.style.gap = '8px';\r\n            item.style.transition = 'background-color 0.15s ease';\r\n\r\n            const dataType = (this.field.dataType || '').toLowerCase();\r\n\r\n            // Normalize parent meta for this iteration so both visual and label rendering use the same source\r\n            let parentMetaForIteration: any = null;\r\n            if (dataType === 'parent_issue' && rawValue) {\r\n                parentMetaForIteration = rawValue.parent || rawValue.parentIssue || rawValue.issue || rawValue.item || rawValue.value || rawValue;\r\n            }\r\n\r\n            // Left visual area: avatar / color dot / repo icon\r\n            const leftVisual = document.createElement('div');\r\n            leftVisual.style.display = 'flex';\r\n            leftVisual.style.alignItems = 'center';\r\n            leftVisual.style.gap = '8px';\r\n            leftVisual.style.flex = '0 0 auto';\r\n\r\n            // Helper: create a color dot\r\n            const makeColorDot = (c: string | null) => {\r\n                const dot = document.createElement('span');\r\n                dot.style.display = 'inline-block';\r\n                dot.style.width = '12px';\r\n                dot.style.height = '12px';\r\n                dot.style.borderRadius = '50%';\r\n                dot.style.flexShrink = '0';\r\n                dot.style.backgroundColor = c || 'var(--vscode-descriptionForeground)';\r\n                return dot;\r\n            };\r\n\r\n            let visualAppended = false;\r\n\r\n            // Assignees: rawValue may be an individual assignee object (from getValueCounts)\r\n            if (dataType === 'assignees' && rawValue) {\r\n                const a = rawValue;\r\n                const avatarUrl = a && (a.avatarUrl || a.avatar || a.imageUrl || a.avatar_url);\r\n                if (avatarUrl) {\r\n                    const avatarEl = document.createElement('span');\r\n                    avatarEl.innerHTML = '<span title=\"' + escapeHtml(a.login || a.name || a.id || '') + '\" style=\"display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url(' + escapeHtml(avatarUrl) + ');border:2px solid var(--vscode-editor-background)\"></span>';\r\n                    leftVisual.appendChild(avatarEl);\r\n                    visualAppended = true;\r\n                } else {\r\n                    // fallback color dot\r\n                    leftVisual.appendChild(makeColorDot(null));\r\n                    visualAppended = true;\r\n                }\r\n            }\r\n\r\n            // Repository: show repo icon\r\n            if (!visualAppended && dataType === 'repository') {\r\n                const repoIcon = document.createElement('span');\r\n                repoIcon.innerHTML = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:var(--vscode-icon-foreground)\"><path fill=\"currentColor\" d=\"M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z\"/></svg>';\r\n                leftVisual.appendChild(repoIcon);\r\n                visualAppended = true;\r\n            }\r\n\r\n            // Parent issue: try to extract parent title and show a color dot (use resolved parent status color if possible)\r\n            if (!visualAppended && dataType === 'parent_issue') {\r\n                const prog = parentMetaForIteration ? resolveParentProgress(parentMetaForIteration) : null;\r\n                // Prefer status color from resolved parent progress, then try parentMeta.option/color fields\r\n                let dotColor = (prog && prog.statusColor) ? prog.statusColor : null;\r\n                if (!dotColor && parentMetaForIteration) {\r\n                    dotColor = normalizeColor(parentMetaForIteration.color || (parentMetaForIteration.option && parentMetaForIteration.option.color) || parentMetaForIteration.statusColor || parentMetaForIteration.status?.color) || null;\r\n                }\r\n\r\n                if (parentMetaForIteration && (parentMetaForIteration.title || parentMetaForIteration.name || parentMetaForIteration.number || (prog && (prog.title || prog.number)))) {\r\n                    const pd = makeColorDot(dotColor);\r\n                    leftVisual.appendChild(pd);\r\n                    visualAppended = true;\r\n                }\r\n            }\r\n\r\n            // Labels: ensure label color dot comes from label metadata\r\n            if (!visualAppended && dataType === 'labels' && rawValue) {\r\n                // rawValue here is the individual label object\r\n                const lab = rawValue;\r\n                const colorCandidate = lab && (lab.color || lab.colorName || lab.hex || lab.name);\r\n                const normalized = normalizeColor(colorCandidate);\r\n                leftVisual.appendChild(makeColorDot(normalized));\r\n                visualAppended = true;\r\n            }\r\n\r\n            // If still no specialized visual, fall back to normalized color from options/iterations\r\n            if (!visualAppended) {\r\n                let colorVal: any = null;\r\n                if (dataType === 'single_select' && rawValue && rawValue.option) {\r\n                    colorVal = rawValue.option.color || rawValue.option.name || rawValue.option.id;\r\n                }\r\n                // If repository/parent/iteration/milestone provide color directly, prefer it\r\n                if (!colorVal && rawValue && (rawValue.color || rawValue.colorName)) {\r\n                    colorVal = rawValue.color || rawValue.colorName;\r\n                }\r\n                if (!colorVal && Array.isArray(this.field.options)) {\r\n                    try {\r\n                        const found = (this.field.options || []).find((o: any) => String(o.name) === String(key) || String(o.id) === String(rawValue && (rawValue.optionId || (rawValue.option && rawValue.option.id))));\r\n                        if (found) colorVal = found.color || found.name || found.id;\r\n                    } catch (e) { }\r\n                }\r\n                if (!colorVal && this.field && this.field.configuration && Array.isArray(this.field.configuration.iterations)) {\r\n                    try {\r\n                        const iter = (this.field.configuration.iterations || []).find((it: any) => String(it.title) === String(key) || String(it.id) === String(rawValue && (rawValue.iterationId || (rawValue.iteration && rawValue.iteration.id))));\r\n                        if (iter) colorVal = iter.color || iter.name || iter.title || iter.id;\r\n                    } catch (e) { }\r\n                }\r\n                const normalized = normalizeColor(colorVal);\r\n                leftVisual.appendChild(makeColorDot(normalized));\r\n            }\r\n\r\n            item.appendChild(leftVisual);\r\n\r\n            // Label column\r\n            const labelColumn = document.createElement('div');\r\n            labelColumn.style.flex = '1';\r\n            labelColumn.style.display = 'flex';\r\n            labelColumn.style.flexDirection = 'column';\r\n            labelColumn.style.minWidth = '0';\r\n\r\n            // For parent_issue we render a custom header below (avoid duplicating the generic label)\r\n            let label: HTMLElement | null = null;\r\n            if (dataType !== 'parent_issue') {\r\n                label = document.createElement('span');\r\n                label.textContent = key;\r\n                label.style.fontSize = '13px';\r\n                label.style.fontWeight = '500';\r\n                // Allow wrapping to next line instead of overflowing\r\n                label.style.whiteSpace = 'normal';\r\n                label.style.wordBreak = 'break-word';\r\n                label.style.overflow = 'hidden';\r\n                labelColumn.appendChild(label);\r\n            }\r\n\r\n            // Add description for single_select\r\n            if (dataType === 'single_select') {\r\n                // Prefer metadata description from field.options if available, else rawValue.option.description\r\n                let descText: string | null = null;\r\n                try {\r\n                    if (rawValue && rawValue.option && rawValue.option.description) descText = rawValue.option.description;\r\n                    else if (Array.isArray(this.field.options)) {\r\n                        const found = (this.field.options || []).find((o: any) => String(o.name) === String(key) || String(o.id) === String(rawValue && (rawValue.optionId || (rawValue.option && rawValue.option.id))));\r\n                        if (found && found.description) descText = found.description;\r\n                    }\r\n                } catch (e) { }\r\n\r\n                if (descText) {\r\n                    const desc = document.createElement('span');\r\n                    desc.textContent = descText;\r\n                    desc.style.fontSize = '11px';\r\n                    desc.style.color = 'var(--vscode-descriptionForeground)';\r\n                    desc.style.whiteSpace = 'normal';\r\n                    desc.style.wordBreak = 'break-word';\r\n                    desc.style.overflow = 'hidden';\r\n                    desc.style.maxHeight = '3.6em';\r\n                    labelColumn.appendChild(desc);\r\n                }\r\n            }\r\n\r\n            // For parent_issue, show title snippet if available\r\n            if (dataType === 'parent_issue' && rawValue) {\r\n                const p = parentMetaForIteration || (rawValue.parent || rawValue.parentIssue || rawValue.issue || rawValue.item || rawValue.value || null);\r\n                const prog = resolveParentProgress(p);\r\n                // Title + number\r\n                const titleText = prog.title || (p && (p.title || p.name)) || key;\r\n                const titleEl = document.createElement('div');\r\n                titleEl.style.display = 'flex';\r\n                titleEl.style.gap = '8px';\r\n                titleEl.style.alignItems = 'baseline';\r\n                const tspan = document.createElement('span');\r\n                // Append number inline into the title text so it appears immediately after the title\r\n                const displayedTitle = String(titleText).slice(0, 120);\r\n                tspan.textContent = prog.number ? `${displayedTitle} #${String(prog.number)}` : displayedTitle;\r\n                tspan.style.fontSize = '13px';\r\n                tspan.style.fontWeight = '600';\r\n                tspan.style.whiteSpace = 'normal';\r\n                tspan.style.wordBreak = 'break-word';\r\n                titleEl.appendChild(tspan);\r\n                labelColumn.appendChild(titleEl);\r\n\r\n                // Progress summary and bar\r\n                if (prog.total && prog.total > 0) {\r\n                    const summary = document.createElement('div');\r\n                    summary.style.display = 'flex';\r\n                    summary.style.alignItems = 'center';\r\n                    summary.style.gap = '8px';\r\n                    summary.style.marginTop = '6px';\r\n\r\n                    const doneText = document.createElement('div');\r\n                    doneText.textContent = `${prog.done}/${prog.total}`;\r\n                    doneText.style.color = 'var(--vscode-descriptionForeground)';\r\n                    doneText.style.fontSize = '12px';\r\n                    doneText.style.fontVariantNumeric = 'tabular-nums';\r\n                    summary.appendChild(doneText);\r\n\r\n                    const bar = document.createElement('div');\r\n                    bar.style.display = 'inline-block';\r\n                    bar.style.width = '120px';\r\n                    bar.style.height = '10px';\r\n                    bar.style.background = 'transparent';\r\n                    bar.style.border = '1px solid var(--vscode-focusBorder)';\r\n                    bar.style.borderRadius = '6px';\r\n                    bar.style.overflow = 'hidden';\r\n                    const fill = document.createElement('div');\r\n                    fill.style.height = '100%';\r\n                    fill.style.width = String(prog.pct) + '%';\r\n                    fill.style.background = 'var(--vscode-focusBorder)';\r\n                    bar.appendChild(fill);\r\n                    summary.appendChild(bar);\r\n\r\n                    labelColumn.appendChild(summary);\r\n                }\r\n            }\r\n\r\n                // Iteration: show date range if available\r\n                if (dataType === 'iteration') {\r\n                    try {\r\n                        // rawValue may be an FV with iteration object, or we can look up field.configuration.iterations\r\n                        const iterObj = (rawValue && (rawValue.iteration || rawValue.configuration || rawValue)) || null;\r\n                        let iterCandidate: any = null;\r\n                        if (iterObj && iterObj.startDate && (iterObj.duration || iterObj.length)) {\r\n                            iterCandidate = iterObj;\r\n                        } else if (this.field && this.field.configuration && Array.isArray(this.field.configuration.iterations)) {\r\n                            const found = (this.field.configuration.iterations || []).find((it: any) => String(it.title || it.name) === String(key) || String(it.id) === String(rawValue && (rawValue.iterationId || (rawValue.iteration && rawValue.iteration.id))));\r\n                            if (found) iterCandidate = found;\r\n                        }\r\n\r\n                        if (iterCandidate) {\r\n                            const start = iterCandidate.startDate || iterCandidate.start;\r\n                            const duration = iterCandidate.duration || iterCandidate.length || iterCandidate.days;\r\n                            if (start && duration) {\r\n                                const s = new Date(start);\r\n                                const e = new Date(s.getTime() + Number(duration || 0) * 24 * 60 * 60 * 1000);\r\n                                const sStr = s.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n                                const eStr = e.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n                                const rangeEl = document.createElement('div');\r\n                                rangeEl.textContent = `${sStr} \u2014 ${eStr}`;\r\n                                rangeEl.style.fontSize = '11px';\r\n                                rangeEl.style.color = 'var(--vscode-descriptionForeground)';\r\n                                rangeEl.style.marginTop = '4px';\r\n                                labelColumn.appendChild(rangeEl);\r\n                            }\r\n                        }\r\n                    } catch (e) { }\r\n                }\r\n\r\n            item.appendChild(labelColumn);\r\n\r\n            // Count circle (like grouping)\r\n            const countCircle = document.createElement('span');\r\n            countCircle.style.display = 'inline-flex';\r\n            countCircle.style.alignItems = 'center';\r\n            countCircle.style.justifyContent = 'center';\r\n            countCircle.style.minWidth = '24px';\r\n            countCircle.style.height = '24px';\r\n            countCircle.style.borderRadius = '50%';\r\n            countCircle.style.background = 'var(--vscode-input-background)';\r\n            countCircle.style.border = '1px solid var(--vscode-panel-border)';\r\n            countCircle.style.color = 'var(--vscode-foreground)';\r\n            countCircle.style.fontSize = '12px';\r\n            countCircle.style.fontWeight = '600';\r\n            countCircle.style.padding = '0 6px';\r\n            countCircle.style.boxSizing = 'border-box';\r\n            countCircle.textContent = String(count);\r\n\r\n            item.appendChild(countCircle);\r\n\r\n            // Hover effect\r\n            item.addEventListener('mouseenter', () => {\r\n                item.style.background = 'var(--vscode-list-hoverBackground)';\r\n            });\r\n\r\n            item.addEventListener('mouseleave', () => {\r\n                item.style.background = 'transparent';\r\n            });\r\n\r\n            // Click handler\r\n            item.addEventListener('click', () => {\r\n                if (this.onValueSelectCallback) {\r\n                    this.onValueSelectCallback(value);\r\n                }\r\n            });\r\n\r\n            container.appendChild(item);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get unique values and their counts\r\n     */\r\n    private getValueCounts(): Map<string, { value: any, count: number, rawValue: any }> {\r\n        const counts = new Map<string, { value: any, count: number, rawValue: any }>();\r\n\r\n        const dataType = (this.field.dataType || '').toLowerCase();\r\n\r\n        this.items.forEach(item => {\r\n            const fv = item.fieldValues?.find((f: any) => f.fieldId === this.field.id || f.fieldName === this.field.name);\r\n            if (!fv) {\r\n                const key = '(empty)';\r\n                const existing = counts.get(key);\r\n                if (existing) existing.count++; else counts.set(key, { value: null, count: 1, rawValue: null });\r\n                return;\r\n            }\r\n\r\n            // Handle multi-value fields (labels, assignees)\r\n            if (dataType === 'labels') {\r\n                // GitHub sometimes nests labels under .labels.nodes or .labels\r\n                const labelsArr = fv.labels && Array.isArray(fv.labels.nodes) ? fv.labels.nodes : (Array.isArray(fv.labels) ? fv.labels : null);\r\n                if (Array.isArray(labelsArr) && labelsArr.length > 0) {\r\n                    labelsArr.forEach((lab: any) => {\r\n                        const name = lab && (lab.name || lab.title) ? String(lab.name || lab.title) : '(empty)';\r\n                        const key = this.formatValue(name);\r\n                        const existing = counts.get(key);\r\n                        if (existing) existing.count++; else counts.set(key, { value: name, count: 1, rawValue: lab });\r\n                    });\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (dataType === 'assignees') {\r\n                const ass = fv.assignees || (fv.assignee ? [fv.assignee] : null);\r\n                if (Array.isArray(ass) && ass.length > 0) {\r\n                    ass.forEach((a: any) => {\r\n                        const name = String(a.login || a.name || a.id || '(unknown)');\r\n                        const key = this.formatValue(name);\r\n                        const existing = counts.get(key);\r\n                        if (existing) existing.count++; else counts.set(key, { value: a, count: 1, rawValue: a });\r\n                    });\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Single-value fields and other complex types\r\n            let value: any = null;\r\n            let rawValue: any = null;\r\n\r\n            try {\r\n                if (dataType === 'single_select') {\r\n                    value = fv.option?.name || fv.name || fv.value;\r\n                    rawValue = fv;\r\n                } else if (dataType === 'iteration') {\r\n                    value = fv.iteration?.title || fv.title || fv.value;\r\n                    rawValue = fv;\r\n                } else if (dataType === 'parent_issue') {\r\n                    const p = fv.parent || fv.parentIssue || fv.issue || fv.item || fv.value || null;\r\n                    if (p) value = p.title || p.name || p.number || p.id || p.url || null;\r\n                    rawValue = p || fv;\r\n                } else if (dataType === 'milestone') {\r\n                    value = fv.milestone?.title || fv.milestone?.name || fv.value || null;\r\n                    rawValue = fv.milestone || fv;\r\n                } else if (dataType === 'repository') {\r\n                    value = fv.repository?.nameWithOwner || fv.repository?.full_name || fv.repository?.name || fv.value || null;\r\n                    rawValue = fv.repository || fv;\r\n                } else if (dataType === 'number') {\r\n                    value = fv.number != null ? fv.number : fv.value;\r\n                    rawValue = fv;\r\n                } else if (dataType === 'date') {\r\n                    value = fv.date || fv.value || null;\r\n                    rawValue = fv;\r\n                } else {\r\n                    // fallback: text, title, other simple values\r\n                    value = fv.text || fv.title || fv.value || null;\r\n                    rawValue = fv;\r\n                }\r\n            } catch (e) {\r\n                value = fv.text || fv.title || fv.value || null;\r\n                rawValue = fv;\r\n            }\r\n\r\n            const key = value === null || value === undefined || value === '' ? '(empty)' : this.formatValue(value);\r\n            const existing = counts.get(key);\r\n            if (existing) existing.count++; else counts.set(key, { value, count: 1, rawValue });\r\n        });\r\n\r\n        return counts;\r\n    }\r\n\r\n    /**\r\n     * Extract value from field value object\r\n     */\r\n    private extractValue(fieldValue: any): any {\r\n        // Deprecated: primary logic moved into getValueCounts which handles multi-value types.\r\n        const dataType = (this.field.dataType || '').toLowerCase();\r\n        if (!fieldValue) return null;\r\n        if (dataType === 'single_select') return fieldValue.option?.name || fieldValue.name || fieldValue.value;\r\n        if (dataType === 'iteration') return fieldValue.iteration?.title || fieldValue.title || fieldValue.value;\r\n        if (dataType === 'assignees') return fieldValue.assignees || fieldValue.assignee || null;\r\n        if (dataType === 'labels') return fieldValue.labels || null;\r\n        if (dataType === 'parent_issue') return fieldValue.parent || fieldValue.parentIssue || fieldValue.issue || fieldValue.item || fieldValue.value || null;\r\n        if (dataType === 'milestone') return fieldValue.milestone || fieldValue.value || null;\r\n        if (dataType === 'repository') return fieldValue.repository || fieldValue.value || null;\r\n        if (dataType === 'number') return fieldValue.number != null ? fieldValue.number : fieldValue.value;\r\n        if (dataType === 'date') return fieldValue.date || fieldValue.value || null;\r\n        return fieldValue.text || fieldValue.title || fieldValue.value || null;\r\n    }\r\n\r\n    /**\r\n     * Format value for display\r\n     */\r\n    private formatValue(value: any): string {\r\n        if (value === null || value === undefined) {\r\n            return '(empty)';\r\n        }\r\n        return String(value);\r\n    }\r\n\r\n    /**\r\n     * Register callback for value selection\r\n     */\r\n    public onValueSelect(callback: (value: any) => void): void {\r\n        this.onValueSelectCallback = callback;\r\n    }\r\n\r\n    /**\r\n     * Register callback for field change\r\n     */\r\n    public onFieldChange(callback: (field: any) => void): void {\r\n        this.onFieldChangeCallback = callback;\r\n    }\r\n\r\n    /**\r\n     * Close and remove the panel\r\n     */\r\n    public close(): void {\r\n        if (this.panelElement) {\r\n            this.panelElement.remove();\r\n            this.panelElement = null;\r\n        }\r\n    }\r\n}\r\n", "import type { FieldConfig } from \"../../../lib/types\";\r\n\r\nexport interface SortConfig {\r\n    fieldId: string;\r\n    direction: 'ASC' | 'DESC';\r\n    secondary?: {\r\n        fieldId: string;\r\n        direction: 'ASC' | 'DESC';\r\n    };\r\n}\r\n\r\n/**\r\n * Parse sortByFields from GitHub GraphQL response into SortConfig\r\n */\r\nexport function parseSortByFields(sortByFields: any): SortConfig | null {\r\n    if (!sortByFields || !sortByFields.nodes || sortByFields.nodes.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const primary = sortByFields.nodes[0];\r\n    if (!primary || !primary.field) {\r\n        return null;\r\n    }\r\n\r\n    const config: SortConfig = {\r\n        fieldId: primary.field.id || primary.field.name,\r\n        direction: primary.direction || 'ASC'\r\n    };\r\n\r\n    // Add secondary sort if available\r\n    if (sortByFields.nodes.length > 1) {\r\n        const secondary = sortByFields.nodes[1];\r\n        if (secondary && secondary.field) {\r\n            config.secondary = {\r\n                fieldId: secondary.field.id || secondary.field.name,\r\n                direction: secondary.direction || 'ASC'\r\n            };\r\n        }\r\n    }\r\n\r\n    return config;\r\n}\r\n\r\n/**\r\n * Sort items array based on sort configuration\r\n */\r\nexport function sortItems(items: any[], fields: FieldConfig[], sortConfig: SortConfig): any[] {\r\n    if (!sortConfig || items.length === 0) {\r\n        return items;\r\n    }\r\n\r\n    const field = fields.find(f => f.id === sortConfig.fieldId || f.name === sortConfig.fieldId);\r\n    if (!field) {\r\n        return items;\r\n    }\r\n\r\n    // Create a copy to avoid mutating original\r\n    const sorted = [...items];\r\n\r\n    sorted.sort((a, b) => {\r\n        // Primary sort\r\n        const primaryResult = compareFieldValues(a, b, field, sortConfig.direction);\r\n\r\n        // If equal and secondary sort exists, use secondary\r\n        if (primaryResult === 0 && sortConfig.secondary) {\r\n            const secondaryField = fields.find(f =>\r\n                f.id === sortConfig.secondary!.fieldId || f.name === sortConfig.secondary!.fieldId\r\n            );\r\n            if (secondaryField) {\r\n                return compareFieldValues(a, b, secondaryField, sortConfig.secondary.direction);\r\n            }\r\n        }\r\n\r\n        return primaryResult;\r\n    });\r\n\r\n    return sorted;\r\n}\r\n\r\n/**\r\n * Compare two items by a specific field\r\n */\r\nexport function compareFieldValues(a: any, b: any, field: FieldConfig, direction: 'ASC' | 'DESC'): number {\r\n    // Find field values for both items\r\n    const aValue = getFieldValue(a, field);\r\n    const bValue = getFieldValue(b, field);\r\n\r\n    // Handle null/undefined\r\n    if (aValue === null && bValue === null) return 0;\r\n    if (aValue === null) return direction === 'ASC' ? 1 : -1;\r\n    if (bValue === null) return direction === 'ASC' ? -1 : 1;\r\n\r\n    let result = 0;\r\n    const dataType = (field.dataType || '').toLowerCase();\r\n\r\n    switch (dataType) {\r\n        case 'text':\r\n        case 'title':\r\n            result = compareText(aValue, bValue);\r\n            break;\r\n\r\n        case 'number':\r\n            result = compareNumber(aValue, bValue);\r\n            break;\r\n\r\n        case 'date':\r\n            result = compareDate(aValue, bValue);\r\n            break;\r\n\r\n        case 'single_select':\r\n            result = compareSingleSelect(aValue, bValue, field);\r\n            break;\r\n\r\n        case 'iteration':\r\n            result = compareIteration(aValue, bValue);\r\n            break;\r\n\r\n        case 'labels':\r\n            result = compareLabels(aValue, bValue);\r\n            break;\r\n\r\n        default:\r\n            // Fallback to string comparison\r\n            result = String(aValue).localeCompare(String(bValue));\r\n    }\r\n\r\n    return direction === 'ASC' ? result : -result;\r\n}\r\n\r\n/**\r\n * Extract field value from item\r\n */\r\nfunction getFieldValue(item: any, field: FieldConfig): any {\r\n    const fieldValue = item.fieldValues?.find((fv: any) =>\r\n        fv.fieldId === field.id || fv.fieldName === field.name\r\n    );\r\n\r\n    if (!fieldValue) return null;\r\n\r\n    const dataType = (field.dataType || '').toLowerCase();\r\n\r\n    switch (dataType) {\r\n        case 'text':\r\n        case 'title':\r\n            return fieldValue.text || fieldValue.title || null;\r\n\r\n        case 'number':\r\n            return fieldValue.number !== undefined ? fieldValue.number : null;\r\n\r\n        case 'date':\r\n            return fieldValue.date || fieldValue.startDate || fieldValue.dueOn || null;\r\n\r\n        case 'single_select':\r\n            return fieldValue.option || fieldValue;\r\n\r\n        case 'iteration':\r\n            return fieldValue;\r\n\r\n        case 'labels':\r\n            return fieldValue.labels || [];\r\n\r\n        default:\r\n            return fieldValue;\r\n    }\r\n}\r\n\r\n/**\r\n * Compare text values\r\n */\r\nfunction compareText(a: any, b: any): number {\r\n    const aStr = String(a || '').toLowerCase();\r\n    const bStr = String(b || '').toLowerCase();\r\n    return aStr.localeCompare(bStr);\r\n}\r\n\r\n/**\r\n * Compare number values\r\n */\r\nfunction compareNumber(a: any, b: any): number {\r\n    const aNum = typeof a === 'number' ? a : parseFloat(a);\r\n    const bNum = typeof b === 'number' ? b : parseFloat(b);\r\n\r\n    if (isNaN(aNum) && isNaN(bNum)) return 0;\r\n    if (isNaN(aNum)) return 1;\r\n    if (isNaN(bNum)) return -1;\r\n\r\n    return aNum - bNum;\r\n}\r\n\r\n/**\r\n * Compare date values\r\n */\r\nfunction compareDate(a: any, b: any): number {\r\n    const aDate = new Date(a);\r\n    const bDate = new Date(b);\r\n\r\n    if (isNaN(aDate.getTime()) && isNaN(bDate.getTime())) return 0;\r\n    if (isNaN(aDate.getTime())) return 1;\r\n    if (isNaN(bDate.getTime())) return -1;\r\n\r\n    return aDate.getTime() - bDate.getTime();\r\n}\r\n\r\n/**\r\n * Compare single select values by option order\r\n */\r\nfunction compareSingleSelect(a: any, b: any, field: FieldConfig): number {\r\n    const aOption = a.option || a;\r\n    const bOption = b.option || b;\r\n\r\n    if (!aOption || !bOption) {\r\n        return compareText(aOption?.name || '', bOption?.name || '');\r\n    }\r\n\r\n    // If field has options array, sort by position in array\r\n    if (field.options && Array.isArray(field.options)) {\r\n        const aIndex = field.options.findIndex((opt: any) =>\r\n            opt.id === aOption.id || opt.name === aOption.name\r\n        );\r\n        const bIndex = field.options.findIndex((opt: any) =>\r\n            opt.id === bOption.id || opt.name === bOption.name\r\n        );\r\n\r\n        if (aIndex !== -1 && bIndex !== -1) {\r\n            return aIndex - bIndex;\r\n        }\r\n    }\r\n\r\n    // Fallback to name comparison\r\n    return compareText(aOption.name, bOption.name);\r\n}\r\n\r\n/**\r\n * Compare iteration values by start date\r\n */\r\nfunction compareIteration(a: any, b: any): number {\r\n    const aDate = a.startDate || a.iteration?.startDate;\r\n    const bDate = b.startDate || b.iteration?.startDate;\r\n\r\n    if (!aDate && !bDate) {\r\n        // Sort by title if no dates\r\n        return compareText(a.title || a.iteration?.title, b.title || b.iteration?.title);\r\n    }\r\n\r\n    return compareDate(aDate, bDate);\r\n}\r\n\r\n/**\r\n * Compare labels by first label name\r\n */\r\nfunction compareLabels(a: any, b: any): number {\r\n    const aLabels = Array.isArray(a) ? a : [];\r\n    const bLabels = Array.isArray(b) ? b : [];\r\n\r\n    if (aLabels.length === 0 && bLabels.length === 0) return 0;\r\n    if (aLabels.length === 0) return 1;\r\n    if (bLabels.length === 0) return -1;\r\n\r\n    return compareText(aLabels[0].name, bLabels[0].name);\r\n}\r\n", "import { renderCell } from \"../renderers/cellRenderer\";\r\nimport { normalizeColor, getContrastColor, escapeHtml } from \"../utils\";\r\nimport { ColumnHeaderMenu } from \"./ColumnHeaderMenu\";\r\nimport FieldsMenu from \"./FieldsMenu\";\r\nimport { SlicePanel } from \"./SlicePanel\";\r\nimport type { SortConfig } from \"../utils/tableSorting\";\r\nimport { sortItems } from \"../utils/tableSorting\";\r\n\r\nexport interface TableOptions {\r\n    groupingFieldName?: string;\r\n    sortConfig?: SortConfig | null;\r\n    viewKey?: string;\r\n    hiddenFields?: string[];\r\n    onSortChange?: (config: SortConfig) => void;\r\n    onGroupChange?: (fieldName: string) => void;\r\n    onSliceChange?: (field: any) => void;\r\n    onHiddenFieldsChange?: (hiddenIds: string[]) => void;\r\n}\r\n\r\nexport class ProjectTable {\r\n    private container: HTMLElement;\r\n    private allFields: any[]; // All fields including hidden\r\n    private fields: any[]; // Visible fields only\r\n    private items: any[];\r\n    private options: TableOptions;\r\n    private hiddenFieldIds: Set<string>;\r\n    private activeMenu: ColumnHeaderMenu | null = null;\r\n    private activeFieldsMenu: FieldsMenu | null = null;\r\n    private activeSlicePanel: SlicePanel | null = null;\r\n    private activeSlice: { fieldId: string, value: any } | null = null;\r\n    // Track which field the active slice panel is for (panel may be open before a value is selected)\r\n    private activeSlicePanelFieldId: string | null = null;\r\n\r\n    constructor(container: HTMLElement, fields: any[], items: any[], options: TableOptions = {}) {\r\n        this.container = container;\r\n        // Normalize all field ids to strings to avoid type mismatches\r\n        this.allFields = (fields || []).map(f => ({ ...f, id: String(f.id) }));\r\n        this.options = options;\r\n        this.items = items;\r\n\r\n        // Load hidden fields from options or localStorage\r\n        const hiddenFromStorage = this.loadHiddenFields().map(id => String(id));\r\n        const hiddenFromOptions = (options.hiddenFields || []).map(id => String(id));\r\n        this.hiddenFieldIds = new Set<string>([...hiddenFromStorage, ...hiddenFromOptions]);\r\n\r\n        // Filter visible fields (ids already normalized on allFields)\r\n        this.fields = this.allFields.filter(f => !this.hiddenFieldIds.has(f.id));\r\n\r\n        // Debug: log initial hidden/visible sets\r\n        try {\r\n            console.debug('[ProjectTable] init: allFieldIds=', this.allFields.map(f => f.id));\r\n            console.debug('[ProjectTable] init: hiddenFieldIds=', Array.from(this.hiddenFieldIds));\r\n            console.debug('[ProjectTable] init: visibleFieldIds=', this.fields.map(f => f.id));\r\n        } catch (e) { }\r\n\r\n        // Also forward debug info to the extension output channel so it's visible\r\n        try {\r\n            const dbg = { allFieldIds: this.allFields.map((f: any) => String(f.id)), hiddenFieldIds: Array.from(this.hiddenFieldIds), visibleFieldIds: this.fields.map((f: any) => String(f.id)) };\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === 'function') {\r\n                (window as any).__APP_MESSAGING__.postMessage({ command: 'debugLog', level: 'debug', message: 'ProjectTable init', data: dbg, viewKey: this.options.viewKey });\r\n            }\r\n        } catch (e) { }\r\n\r\n        // Load and apply field order if stored\r\n        this.applyFieldOrder();\r\n    }\r\n\r\n    public render() {\r\n        // Preserve slice panel if it exists\r\n        const existingSlicePanel = this.container.querySelector('.slice-panel');\r\n\r\n        this.container.innerHTML = \"\";\r\n\r\n        // Re-add slice panel if it existed\r\n        if (existingSlicePanel) {\r\n            this.container.appendChild(existingSlicePanel);\r\n        }\r\n\r\n        const tableContainer = document.createElement(\"div\");\r\n        tableContainer.className = \"table-wrapper\";\r\n        tableContainer.style.overflowX = \"auto\";\r\n        tableContainer.style.overflowY = \"auto\";\r\n        tableContainer.style.width = \"100%\";\r\n        tableContainer.style.display = \"block\";\r\n        tableContainer.style.height = \"100%\"; // Let it grow\r\n\r\n        const table = document.createElement(\"table\");\r\n        table.style.borderCollapse = \"separate\";\r\n        table.style.borderSpacing = \"0\";\r\n        // Use fixed layout so explicit <col> widths are honored and columns can be\r\n        // resized smaller than their content (content will be ellipsised).\r\n        table.style.tableLayout = \"fixed\";\r\n        // Let container control horizontal scrolling while table fills width\r\n        table.style.width = \"100%\";\r\n\r\n        this.renderColGroup(table);\r\n        this.renderHeader(table);\r\n        this.renderBody(table);\r\n\r\n        tableContainer.appendChild(table);\r\n        this.container.appendChild(tableContainer);\r\n\r\n        // Post-render: adjust column widths based on content (simple heuristic)\r\n        // This was in the original code, we can keep it or improve it.\r\n        // For now, let's keep the sticky header logic and resizers.\r\n        this.setupResizers(table);\r\n    }\r\n\r\n    private renderColGroup(table: HTMLTableElement) {\r\n        const colgroup = document.createElement(\"colgroup\");\r\n        // Index column\r\n        const colIndex = document.createElement(\"col\");\r\n        colIndex.style.width = \"40px\";\r\n        colgroup.appendChild(colIndex);\r\n\r\n        for (const field of this.fields) {\r\n            const col = document.createElement(\"col\");\r\n            col.style.width = \"150px\"; // Default width\r\n            // Attach field id so resizer can update the correct <col>\r\n            col.dataset.fieldId = field.id;\r\n            colgroup.appendChild(col);\r\n        }\r\n\r\n        // Add Field column\r\n        const colAddField = document.createElement(\"col\");\r\n        colAddField.style.width = \"50px\";\r\n        colgroup.appendChild(colAddField);\r\n\r\n        table.appendChild(colgroup);\r\n    }\r\n\r\n    private renderHeader(table: HTMLTableElement) {\r\n        const thead = document.createElement(\"thead\");\r\n        thead.style.background = \"var(--vscode-sideBar-background)\";\r\n        thead.style.position = \"sticky\";\r\n        thead.style.top = \"0\";\r\n        thead.style.zIndex = \"10\";\r\n\r\n        const tr = document.createElement(\"tr\");\r\n\r\n        // Index Header\r\n        const thIndex = document.createElement(\"th\");\r\n        thIndex.textContent = \"#\";\r\n        this.styleHeaderCell(thIndex);\r\n        tr.appendChild(thIndex);\r\n\r\n        // Field Headers\r\n        for (const field of this.fields) {\r\n            const th = document.createElement(\"th\");\r\n\r\n            // Create header content wrapper\r\n            const headerContent = document.createElement('div');\r\n            headerContent.style.display = 'flex';\r\n            headerContent.style.alignItems = 'center';\r\n            headerContent.style.justifyContent = 'space-between';\r\n            headerContent.style.width = '100%';\r\n            headerContent.style.gap = '4px';\r\n\r\n            // Field name span\r\n            const nameSpan = document.createElement('span');\r\n            let headerText = field.name || field.id || \"\";\r\n\r\n            // Add sort indicator if this field is sorted\r\n            if (this.options.sortConfig?.fieldId === field.id) {\r\n                const indicator = this.options.sortConfig?.direction === 'ASC' ? ' \u2191' : ' \u2193';\r\n                headerText += indicator;\r\n            }\r\n\r\n            nameSpan.textContent = headerText;\r\n            nameSpan.style.flex = '1';\r\n            nameSpan.style.overflow = 'hidden';\r\n            nameSpan.style.textOverflow = 'ellipsis';\r\n            nameSpan.style.whiteSpace = 'nowrap';\r\n\r\n            // Check if this field is grouped\r\n            const isGrouped = field.name?.toLowerCase() === this.options.groupingFieldName?.toLowerCase();\r\n\r\n            // Check if this field is being sliced (either a value selected, or the slice panel is open for this field)\r\n            const isSliced = (this.activeSlice && this.activeSlice.fieldId === field.id) || (this.activeSlicePanelFieldId && String(this.activeSlicePanelFieldId) === String(field.id));\r\n\r\n            // Icons container (for filter/group indicators)\r\n            const iconsContainer = document.createElement('span');\r\n            iconsContainer.style.display = 'flex';\r\n            iconsContainer.style.alignItems = 'center';\r\n            iconsContainer.style.gap = '2px';\r\n\r\n            // Add filter/funnel icon if grouped or sliced\r\n            if (isGrouped || isSliced) {\r\n                const filterIcon = document.createElement('span');\r\n                // SVG Funnel Icon - use currentColor so it matches surrounding text color\r\n                filterIcon.innerHTML = `<svg aria-hidden=\"true\" height=\"12\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"12\" data-view-component=\"true\" class=\"octicon octicon-filter\"><path fill=\"currentColor\" d=\"M.75 3h14.5a.75.75 0 0 1 .75.75v2a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1-.75-.75v-2a.75.75 0 0 1 .75-.75zm0 1.5v.5h14.5v-.5H.75zM5 9.75A.75.75 0 0 1 5.75 9h4.5a.75.75 0 0 1 .75.75v2a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-2zm1.5.5v.5h3v-.5h-3z\"></path></svg>`;\r\n                filterIcon.style.display = \"flex\";\r\n                filterIcon.style.alignItems = \"center\";\r\n                // Use CSS color so SVG inherits the same text color\r\n                filterIcon.style.color = 'var(--vscode-foreground)';\r\n                filterIcon.style.opacity = '0.7';\r\n                filterIcon.title = isGrouped ? 'Grouped by this field' : 'Sliced by this field';\r\n                // Ensure the inner svg uses currentColor (some browsers need explicit style)\r\n                const innerSvg = filterIcon.querySelector('svg');\r\n                if (innerSvg) (innerSvg as SVGElement).style.fill = 'currentColor';\r\n                iconsContainer.appendChild(filterIcon);\r\n            }\r\n\r\n            // Menu button (\u22EE)\r\n            const menuBtn = document.createElement('button');\r\n            menuBtn.textContent = '\u22EE';\r\n            menuBtn.style.background = 'transparent';\r\n            menuBtn.style.border = 'none';\r\n            menuBtn.style.cursor = 'pointer';\r\n            menuBtn.style.fontSize = '16px';\r\n            menuBtn.style.padding = '2px 4px';\r\n            menuBtn.style.color = 'var(--vscode-foreground)';\r\n            menuBtn.style.opacity = '0.6';\r\n            menuBtn.style.borderRadius = '3px';\r\n            menuBtn.title = `${field.name} options`;\r\n\r\n            // Hover effects\r\n            menuBtn.addEventListener('mouseenter', () => {\r\n                menuBtn.style.opacity = '1';\r\n                menuBtn.style.background = 'var(--vscode-toolbar-hoverBackground)';\r\n            });\r\n\r\n            menuBtn.addEventListener('mouseleave', () => {\r\n                menuBtn.style.opacity = '0.6';\r\n                menuBtn.style.background = 'transparent';\r\n            });\r\n\r\n            // Click handler for menu\r\n            menuBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                // Reset hover background in case a backdrop prevents pointerleave\r\n                (th as HTMLElement).style.background = 'var(--vscode-sideBar-background)';\r\n                this.showHeaderMenu(e, field, th);\r\n            });\r\n\r\n            headerContent.appendChild(nameSpan);\r\n            // Add icon indicator BETWEEN name and menu (only if grouped/sliced)\r\n            if (isGrouped || isSliced) {\r\n                headerContent.appendChild(iconsContainer);\r\n            }\r\n            headerContent.appendChild(menuBtn);\r\n            th.appendChild(headerContent);\r\n\r\n            // Header hover state (use pointer events and guard against sticky/backdrop interaction)\r\n            th.addEventListener('pointerenter', () => {\r\n                th.style.background = 'var(--vscode-list-hoverBackground)';\r\n            });\r\n\r\n            th.addEventListener('pointerleave', () => {\r\n                th.style.background = 'var(--vscode-sideBar-background)';\r\n            });\r\n\r\n            this.styleHeaderCell(th);\r\n            tr.appendChild(th);\r\n        }\r\n\r\n        // Add Field column (+)\r\n        const thAddField = document.createElement(\"th\");\r\n        const addFieldBtn = document.createElement('button');\r\n        addFieldBtn.textContent = '+';\r\n        addFieldBtn.style.background = 'transparent';\r\n        addFieldBtn.style.border = 'none';\r\n        addFieldBtn.style.cursor = 'pointer';\r\n        addFieldBtn.style.fontSize = '18px';\r\n        addFieldBtn.style.fontWeight = 'bold';\r\n        addFieldBtn.style.color = 'var(--vscode-foreground)';\r\n        addFieldBtn.style.width = '100%';\r\n        addFieldBtn.style.height = '100%';\r\n        addFieldBtn.title = 'Show hidden fields';\r\n\r\n        addFieldBtn.addEventListener('click', () => this.showFieldsMenu(addFieldBtn));\r\n\r\n        thAddField.appendChild(addFieldBtn);\r\n        this.styleHeaderCell(thAddField);\r\n        thAddField.style.textAlign = 'center';\r\n        thAddField.style.width = '50px';\r\n        tr.appendChild(thAddField);\r\n\r\n        thead.appendChild(tr);\r\n        table.appendChild(thead);\r\n    }\r\n\r\n    private showFieldsMenu(anchorElement: HTMLElement) {\r\n        // Hide existing menus\r\n        if (this.activeMenu) { this.activeMenu.hide(); this.activeMenu = null; }\r\n        if (this.activeFieldsMenu) { this.activeFieldsMenu.hide(); this.activeFieldsMenu = null; }\r\n\r\n        // Build visible id set from hiddenFieldIds to ensure consistent detection (normalize ids)\r\n        const visibleSet = new Set<string>(this.allFields.filter(f => !this.hiddenFieldIds.has(String(f.id))).map(f => String(f.id)));\r\n\r\n        // Debug: log current hidden/visible sets before showing menu\r\n        try {\r\n            console.debug('[ProjectTable] showFieldsMenu: hiddenFieldIds=', Array.from(this.hiddenFieldIds));\r\n            console.debug('[ProjectTable] showFieldsMenu: allFieldIds=', this.allFields.map(f => f.id));\r\n        } catch (e) { }\r\n\r\n        const menu = new FieldsMenu({\r\n            fields: this.allFields.map(f => ({ id: f.id, name: f.name, iconClass: f.iconClass })),\r\n            visibleFieldIds: visibleSet,\r\n            onToggleVisibility: (fieldId: string, visible: boolean) => {\r\n                if (visible) this.showField(fieldId);\r\n                else this.hideField(fieldId);\r\n            },\r\n            onCreateField: () => {\r\n                // Placeholder: open create field flow if available\r\n                try { console.log('Create field requested'); } catch (e) { }\r\n            }\r\n        });\r\n\r\n        this.activeFieldsMenu = menu;\r\n        menu.show(anchorElement);\r\n    }\r\n\r\n    private styleHeaderCell(th: HTMLTableCellElement) {\r\n        th.style.padding = \"8px\";\r\n        th.style.textAlign = \"left\";\r\n        th.style.whiteSpace = \"nowrap\";\r\n        th.style.overflow = \"hidden\";\r\n        th.style.textOverflow = \"ellipsis\";\r\n        th.style.borderRight = \"1px solid var(--vscode-panel-border)\";\r\n        th.style.borderBottom = \"1px solid var(--vscode-panel-border)\";\r\n        th.style.position = \"sticky\";\r\n        th.style.top = \"0\";\r\n        th.style.zIndex = \"11\";\r\n        th.style.background = \"var(--vscode-sideBar-background)\";\r\n        th.style.height = \"32px\"; // Enforce fixed height\r\n        th.style.boxSizing = \"border-box\";\r\n    }\r\n\r\n    private renderBody(table: HTMLTableElement) {\r\n        const tbody = document.createElement(\"tbody\");\r\n\r\n        // Apply sorting\r\n        let displayItems = this.items;\r\n        if (this.options.sortConfig) {\r\n            displayItems = sortItems(this.items, this.fields, this.options.sortConfig);\r\n        }\r\n\r\n        // Apply Slice Filter\r\n        if (this.activeSlice) {\r\n            displayItems = displayItems.filter(item => {\r\n                const fv = item.fieldValues.find((v: any) => String(v.fieldId) === String(this.activeSlice!.fieldId));\r\n                if (!fv) return this.activeSlice!.value === null; // Match empty if value is null\r\n\r\n                // Extract value logic similar to SlicePanel\r\n                let val = null;\r\n                if (fv.text !== undefined) val = fv.text;\r\n                else if (fv.title !== undefined) val = fv.title;\r\n                else if (fv.number !== undefined) val = fv.number;\r\n                else if (fv.date !== undefined) val = fv.date;\r\n                else if (fv.option) val = fv.option.name;\r\n                else if (fv.iteration) val = fv.iteration.title;\r\n                else val = fv.value;\r\n\r\n                return val === this.activeSlice!.value;\r\n            });\r\n        }\r\n\r\n        // Check for grouping\r\n        const groupingField = this.getGroupingField();\r\n\r\n        if (groupingField) {\r\n            this.renderGroupedRows(tbody, groupingField, displayItems);\r\n        } else {\r\n            this.renderFlatRows(tbody, displayItems);\r\n        }\r\n\r\n        table.appendChild(tbody);\r\n    }\r\n\r\n    private getGroupingField() {\r\n        // Logic to determine grouping field from options or view details\r\n        // Passed via options.groupingFieldName or similar\r\n        if (this.options.groupingFieldName) {\r\n            return this.fields.find(f =>\r\n                (f.name && f.name.toLowerCase() === this.options.groupingFieldName?.toLowerCase()) ||\r\n                (f.id && f.id === this.options.groupingFieldName)\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private renderFlatRows(tbody: HTMLTableSectionElement, items: any[]) {\r\n        items.forEach((item, index) => {\r\n            const tr = this.createRow(item, index);\r\n            tbody.appendChild(tr);\r\n        });\r\n    }\r\n\r\n    private renderGroupedRows(tbody: HTMLTableSectionElement, groupingField: any, items: any[]) {\r\n        // Group items\r\n        const groups = this.groupItems(items, groupingField);\r\n\r\n        for (const group of groups) {\r\n            // Render Group Header\r\n            const trHeader = document.createElement(\"tr\");\r\n            const tdHeader = document.createElement(\"td\");\r\n            tdHeader.colSpan = this.fields.length + 1;\r\n            tdHeader.style.padding = \"8px\";\r\n            tdHeader.style.background = \"var(--vscode-editor-background)\"; // Ensure opaque background\r\n            tdHeader.style.fontWeight = \"600\";\r\n            tdHeader.style.borderTop = \"1px solid var(--vscode-editorGroup-border)\";\r\n            tdHeader.style.borderBottom = \"1px solid var(--vscode-editorGroup-border)\";\r\n            tdHeader.style.position = \"sticky\";\r\n            tdHeader.style.top = \"32px\"; // Matches fixed header height\r\n            tdHeader.style.zIndex = \"9\";\r\n            tdHeader.style.boxShadow = \"0 1px 2px rgba(0,0,0,0.1)\"; // Add shadow for better separation\r\n\r\n            // Group Header Content\r\n            const headerContent = document.createElement(\"div\");\r\n            headerContent.style.display = \"flex\";\r\n            headerContent.style.alignItems = \"center\";\r\n            headerContent.style.gap = \"8px\";\r\n            const field = groupingField;\r\n\r\n            // Helper: find estimate field id (best-effort)\r\n            const estimateField = this.fields.find(f => (f.dataType && String(f.dataType).toLowerCase() === 'number') && String(f.name || '').toLowerCase().includes('estimate')) ||\r\n                this.fields.find(f => (f.dataType && String(f.dataType).toLowerCase() === 'number'));\r\n            const estimateFieldId = estimateField ? estimateField.id : null;\r\n\r\n            const sumEstimate = (itemsArr: any[]) => {\r\n                if (!estimateFieldId) return 0;\r\n                let sum = 0;\r\n                for (const gi of itemsArr) {\r\n                    const it = gi.item || gi;\r\n                    if (!it || !Array.isArray(it.fieldValues)) continue;\r\n                    const fv = it.fieldValues.find((v: any) => (v.fieldId && String(v.fieldId) === String(estimateFieldId)) || (v.fieldName && String(v.fieldName).toLowerCase().includes('estimate')) || v.type === 'number');\r\n                    if (fv) {\r\n                        const num = Number(fv.number != null ? fv.number : (fv.value != null ? fv.value : NaN));\r\n                        if (!isNaN(num)) sum += num;\r\n                    }\r\n                }\r\n                return sum;\r\n            };\r\n\r\n            const formatEstimate = (n: number) => {\r\n                if (!isFinite(n)) return \"\";\r\n                return String(n);\r\n            };\r\n\r\n            // Toggle Button\r\n            const toggleBtn = document.createElement(\"span\");\r\n            // SVG Icons for GitHub-like look\r\n            const iconExpanded = `<svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-triangle-down\"><path d=\"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z\"></path></svg>`;\r\n            const iconCollapsed = `<svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-triangle-right\"><path d=\"M8.573 4.604a.25.25 0 01.427-.177l3.396 3.396a.25.25 0 010 .354l-3.396 3.396a.25.25 0 01-.427-.177V4.604z\"></path></svg>`;\r\n\r\n            toggleBtn.innerHTML = iconExpanded;\r\n            toggleBtn.style.cursor = \"pointer\";\r\n            toggleBtn.style.userSelect = \"none\";\r\n            toggleBtn.style.display = \"inline-flex\";\r\n            toggleBtn.style.alignItems = \"center\";\r\n            toggleBtn.style.justifyContent = \"center\";\r\n            toggleBtn.style.width = \"16px\";\r\n            toggleBtn.style.height = \"16px\";\r\n            toggleBtn.style.fill = \"var(--vscode-foreground)\";\r\n            toggleBtn.style.opacity = \"0.7\";\r\n\r\n            // Group Name & Color\r\n            const colorDot = document.createElement(\"div\");\r\n            colorDot.style.width = \"12px\";\r\n            colorDot.style.height = \"12px\";\r\n            colorDot.style.borderRadius = \"50%\";\r\n            colorDot.style.backgroundColor = normalizeColor(group.option.color) || \"gray\";\r\n\r\n            const nameSpan = document.createElement(\"span\");\r\n            nameSpan.textContent = group.option.name || group.option.title || \"Unassigned\";\r\n\r\n            const countBadge = document.createElement(\"vscode-badge\");\r\n            countBadge.textContent = String(group.items.length);\r\n\r\n            // We'll keep the left-hand part of the group header (toggle, avatar/color, name, count)\r\n            // in a sticky left pane so it remains visible when horizontally scrolling.\r\n            const leftPane = document.createElement('div');\r\n            leftPane.style.display = 'flex';\r\n            leftPane.style.alignItems = 'center';\r\n            leftPane.style.gap = '8px';\r\n            leftPane.style.position = 'sticky';\r\n            leftPane.style.left = '0';\r\n            leftPane.style.zIndex = '12';\r\n            leftPane.style.background = tdHeader.style.background;\r\n            leftPane.style.paddingRight = '8px';\r\n\r\n            const rightPane = document.createElement('div');\r\n            rightPane.style.display = 'flex';\r\n            rightPane.style.alignItems = 'center';\r\n            rightPane.style.gap = '8px';\r\n            rightPane.style.flex = '1';\r\n\r\n            leftPane.appendChild(toggleBtn);\r\n\r\n            // For parent_issue, try to extract parent metadata from the first child item\r\n            let parentMeta: any = null;\r\n            let resolvedParentItem: any = null;\r\n            if (String(groupingField.dataType || '').toLowerCase() === 'parent_issue') {\r\n                const first = (group.items && group.items[0]) ? (group.items[0].item || group.items[0]) : null;\r\n                if (first && Array.isArray(first.fieldValues)) {\r\n                    const pfv = first.fieldValues.find((v: any) => String(v.fieldId) === String(groupingField.id) || v.fieldName === groupingField.name || v.type === 'parent_issue');\r\n                    if (pfv) {\r\n                        parentMeta = pfv.parent || pfv.parentIssue || pfv.issue || pfv.item || pfv.value || null;\r\n                    }\r\n                }\r\n\r\n                // Try to resolve the full parent item from the current items snapshot (this.items)\r\n                if (parentMeta && Array.isArray(this.items)) {\r\n                    try {\r\n                        const identifiers: string[] = [];\r\n                        if (parentMeta.number) identifiers.push(String(parentMeta.number));\r\n                        if (parentMeta.id) identifiers.push(String(parentMeta.id));\r\n                        if (parentMeta.url) identifiers.push(String(parentMeta.url));\r\n                        if (parentMeta.title) identifiers.push(String(parentMeta.title));\r\n                        // search in this.items for a matching content/raw identifiers\r\n                        const found = this.items.find((A: any) => {\r\n                            const d = (A && (A.content || (A.raw && A.raw.itemContent))) || null;\r\n                            if (!d) return false;\r\n                            const M: string[] = [];\r\n                            if (d.number) M.push(String(d.number));\r\n                            if (d.id) M.push(String(d.id));\r\n                            if (d.url) M.push(String(d.url));\r\n                            if (d.title) M.push(String(d.title));\r\n                            if (d.name) M.push(String(d.name));\r\n                            if (d.raw && d.raw.number) M.push(String(d.raw.number));\r\n                            if (d.raw && d.raw.id) M.push(String(d.raw.id));\r\n                            if (d.raw && d.raw.url) M.push(String(d.raw.url));\r\n                            for (let o of identifiers) {\r\n                                for (let m of M) {\r\n                                    if (o && m && String(o) === String(m)) return true;\r\n                                }\r\n                            }\r\n                            return false;\r\n                        });\r\n                        if (found) resolvedParentItem = found;\r\n                    } catch (e) { }\r\n                }\r\n            }\r\n\r\n            // Avatar / color dot / repo icon depending on field type\r\n            if ((group.option && group.option.avatarUrl) || (group.option && group.option.login) || (group.option && group.option.name && (String(groupingField.dataType || '').toLowerCase() === 'assignees'))) {\r\n                // Try to render avatar for assignees\r\n                const avatarEl = document.createElement('span');\r\n                const avatarUrl = (group.option && (group.option.avatarUrl || group.option.avatar || group.option.imageUrl)) || (() => {\r\n                    // try to find in items\r\n                    for (const gi of group.items) {\r\n                        const it = gi.item || gi;\r\n                        if (!it || !Array.isArray(it.fieldValues)) continue;\r\n                        const fv = it.fieldValues.find((v: any) => v.type === 'assignees' || (String(v.fieldId) === String(groupingField.id)));\r\n                        if (fv && fv.assignees && Array.isArray(fv.assignees)) {\r\n                            const match = fv.assignees.find((a: any) => String(a.login || a.name) === String(group.option.name || group.option.id));\r\n                            if (match && (match.avatarUrl || match.avatar)) return match.avatarUrl || match.avatar;\r\n                        }\r\n                    }\r\n                    return null;\r\n                })();\r\n                if (avatarUrl) {\r\n                    avatarEl.innerHTML = '<span title=\"' + (escapeHtml((group.option && (group.option.login || group.option.name)) || 'Assignee')) + '\" style=\"display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url(' + escapeHtml(avatarUrl) + ');border:2px solid var(--vscode-editor-background)\"></span>';\r\n                    leftPane.appendChild(avatarEl);\r\n                } else {\r\n                    leftPane.appendChild(colorDot);\r\n                }\r\n            } else if (String(groupingField.dataType || '').toLowerCase() === 'repository') {\r\n                // repository icon\r\n                const repoIcon = document.createElement('span');\r\n                repoIcon.innerHTML = '<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:var(--vscode-icon-foreground)\"><path fill=\"currentColor\" d=\"M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z\"/></svg>';\r\n                leftPane.appendChild(repoIcon);\r\n            } else {\r\n                leftPane.appendChild(colorDot);\r\n            }\r\n\r\n            // Name\r\n            // For parent_issue, prefer the resolved parent item's title if available, else use parentMeta\r\n            if (resolvedParentItem) {\r\n                // Try to extract title and status color from resolved parent\r\n                const content = resolvedParentItem.content || (resolvedParentItem.raw && resolvedParentItem.raw.itemContent) || null;\r\n                if (content) {\r\n                    // title\r\n                    try {\r\n                        if (content.title) nameSpan.textContent = String(content.title);\r\n                        else if (content.name) nameSpan.textContent = String(content.name);\r\n                        else if (content.number) nameSpan.textContent = String(content.number);\r\n                    } catch (e) { }\r\n\r\n                    // Try to get status color from parent's fieldValues (single_select status)\r\n                    if (Array.isArray(resolvedParentItem.fieldValues)) {\r\n                        const statusFV = resolvedParentItem.fieldValues.find((v: any) => v && v.type === 'single_select' && v.option && v.option.name);\r\n                        if (statusFV && statusFV.option) {\r\n                            // If option has color, use it; otherwise try map by name\r\n                            try {\r\n                                const c = statusFV.option.color || statusFV.option.id || statusFV.option.name || null;\r\n                                if (c) colorDot.style.backgroundColor = normalizeColor(c) || colorDot.style.backgroundColor;\r\n                            } catch (e) { }\r\n                        }\r\n                    }\r\n                }\r\n            } else if (parentMeta) {\r\n                nameSpan.textContent = parentMeta.title || parentMeta.name || parentMeta.number || parentMeta.id || nameSpan.textContent;\r\n                if (parentMeta.color) {\r\n                    try { colorDot.style.backgroundColor = normalizeColor(parentMeta.color) || colorDot.style.backgroundColor; } catch (e) { }\r\n                }\r\n            }\r\n            leftPane.appendChild(nameSpan);\r\n\r\n            // Count circle (placed before estimate pill)\r\n            const countCircle = document.createElement('span');\r\n            countCircle.style.display = 'inline-flex';\r\n            countCircle.style.alignItems = 'center';\r\n            countCircle.style.justifyContent = 'center';\r\n            countCircle.style.width = '22px';\r\n            countCircle.style.height = '22px';\r\n            countCircle.style.borderRadius = '50%';\r\n            countCircle.style.background = 'var(--vscode-input-background)';\r\n            countCircle.style.border = '1px solid var(--vscode-panel-border)';\r\n            countCircle.style.color = 'var(--vscode-foreground)';\r\n            countCircle.style.fontSize = '12px';\r\n            countCircle.style.fontWeight = '600';\r\n            countCircle.style.minWidth = '22px';\r\n            countCircle.style.boxSizing = 'border-box';\r\n            countCircle.textContent = String(group.items.length || 0);\r\n            leftPane.appendChild(countCircle);\r\n\r\n            // Estimate pill and optional extra info\r\n            const estSum = sumEstimate(group.items || []);\r\n            if (estSum && estSum > 0) {\r\n                const estEl = document.createElement('div');\r\n                estEl.style.display = 'inline-block';\r\n                estEl.style.padding = '2px 8px';\r\n                estEl.style.borderRadius = '999px';\r\n                estEl.style.border = '1px solid var(--vscode-panel-border)';\r\n                estEl.style.background = 'var(--vscode-input-background)';\r\n                estEl.style.color = 'var(--vscode-foreground)';\r\n                estEl.style.fontSize = '12px';\r\n                estEl.style.lineHeight = '18px';\r\n                estEl.style.marginLeft = '8px';\r\n                estEl.textContent = 'Estimate: ' + formatEstimate(estSum);\r\n                // Put estimate pill into the left sticky pane so it remains visible when horizontally scrolling\r\n                leftPane.appendChild(estEl);\r\n\r\n                // If parent_issue, show completed/amount + progress bar (only for real parents)\r\n                if (String(groupingField.dataType || '').toLowerCase() === 'parent_issue' && !(group.option && (group.option.name === 'Unassigned' || group.option.title === 'Unassigned'))) {\r\n                    const completedNames = ['done', 'closed', 'completed', 'finished'];\r\n\r\n                    // Helper: robust done detection for a single item\r\n                    const isDoneByHeuristics = (it: any) => {\r\n                        try {\r\n                            const content = it && (it.content || (it.raw && it.raw.itemContent));\r\n                            if (content) {\r\n                                const state = (content.state || (content.merged ? 'MERGED' : undefined) || '').toString().toUpperCase();\r\n                                if (state === 'CLOSED' || state === 'MERGED') return true;\r\n                            }\r\n\r\n                            if (Array.isArray(it.fieldValues)) {\r\n                                // single_select status matching\r\n                                const ss = it.fieldValues.find((v: any) => v && v.type === 'single_select' && v.option && v.option.name && completedNames.includes(String(v.option.name).toLowerCase()));\r\n                                if (ss) return true;\r\n\r\n                                // numeric percent-like or explicit done flag\r\n                                const percentFV = it.fieldValues.find((v: any) => v && (String(v.fieldName || '').toLowerCase().includes('progress') || String(v.fieldName || '').toLowerCase().includes('percent') || v.type === 'number' && (String(v.fieldName || '').toLowerCase().includes('progress'))));\r\n                                if (percentFV && percentFV.number != null) {\r\n                                    const pct = Number(percentFV.number || 0);\r\n                                    if (pct >= 100) return true;\r\n                                }\r\n                            }\r\n\r\n                            if (content && (content.labels && Array.isArray(content.labels.nodes))) {\r\n                                const labs = content.labels.nodes.map((l: any) => String(l.name || '').toLowerCase());\r\n                                for (const cn of completedNames) if (labs.includes(cn)) return true;\r\n                            }\r\n                        } catch (e) { }\r\n                        return false;\r\n                    };\r\n\r\n                    // Prefer parent-provided aggregate if available\r\n                    let done = 0;\r\n                    let total = 0;\r\n                    if (resolvedParentItem && Array.isArray(resolvedParentItem.fieldValues)) {\r\n                        const agg = resolvedParentItem.fieldValues.find((v: any) => v && (v.type === 'sub_issues_progress' || (v.total != null && v.done != null)));\r\n                        if (agg && agg.total != null) {\r\n                            total = Number(agg.total || 0);\r\n                            done = Number(agg.done || 0);\r\n                        }\r\n                    }\r\n\r\n                    // If no parent aggregate found, compute from children\r\n                    if (!total) {\r\n                        for (const gi of group.items) {\r\n                            const it = gi.item || gi;\r\n                            if (!it) continue;\r\n                            total++;\r\n                            if (isDoneByHeuristics(it)) done++;\r\n                        }\r\n                    }\r\n\r\n                    // show completed/total BEFORE progress bar\r\n                    const doneText = document.createElement('div');\r\n                    doneText.style.color = 'var(--vscode-descriptionForeground)';\r\n                    doneText.style.fontSize = '12px';\r\n                    doneText.style.marginLeft = '8px';\r\n                    doneText.style.fontVariantNumeric = 'tabular-nums';\r\n                    doneText.textContent = `${done}/${total}`;\r\n                    // Keep completed/total near the left sticky area so it stays visible\r\n                    leftPane.appendChild(doneText);\r\n\r\n                    // show progress bar\r\n                    const progWrapper = document.createElement('div');\r\n                    progWrapper.style.display = 'inline-flex';\r\n                    progWrapper.style.alignItems = 'center';\r\n                    progWrapper.style.gap = '8px';\r\n                    progWrapper.style.marginLeft = '8px';\r\n                    const pct = total > 0 ? Math.round((done / total) * 100) : 0;\r\n                    const bar = document.createElement('div');\r\n                    bar.style.display = 'inline-block';\r\n                    bar.style.width = '120px';\r\n                    bar.style.height = '12px';\r\n                    bar.style.background = 'transparent';\r\n                    bar.style.border = '1px solid var(--vscode-focusBorder)';\r\n                    bar.style.borderRadius = '6px';\r\n                    bar.style.overflow = 'hidden';\r\n                    const fill = document.createElement('div');\r\n                    fill.style.height = '100%';\r\n                    fill.style.width = String(pct) + '%';\r\n                    fill.style.background = 'var(--vscode-focusBorder)';\r\n                    bar.appendChild(fill);\r\n                    progWrapper.appendChild(bar);\r\n                    // Progress bar is useful summary info \u2014 keep it in the sticky left pane\r\n                    leftPane.appendChild(progWrapper);\r\n                }\r\n            }\r\n\r\n            // Single-select: show option description if available\r\n            if (String(groupingField.dataType || '').toLowerCase() === 'single_select') {\r\n                try {\r\n                    const opt = (groupingField.options || []).find((o: any) => String(o.name) === String(group.option && group.option.name));\r\n                    if (opt && opt.description) {\r\n                        const descEl = document.createElement('div');\r\n                        descEl.style.color = 'var(--vscode-descriptionForeground)';\r\n                        descEl.style.fontSize = '12px';\r\n                        descEl.style.marginLeft = '8px';\r\n                        descEl.textContent = String(opt.description).slice(0, 120);\r\n                        // Keep description fixed in the left sticky pane so it remains visible\r\n                        leftPane.appendChild(descEl);\r\n                    }\r\n                } catch (e) { }\r\n            }\r\n\r\n            // Iteration: append iteration range (start - end) if startDate/duration available, else title\r\n            if (String(groupingField.dataType || '').toLowerCase() === 'iteration') {\r\n                try {\r\n                    const opt = group.option || {};\r\n                    let iterText: string | null = null;\r\n                    const start = opt.startDate || (opt.start && opt.startDate) || null;\r\n                    const duration = opt.duration || opt.length || null;\r\n                    if (start && duration) {\r\n                        try {\r\n                            const s = new Date(start);\r\n                            const days = Number(duration) || 0;\r\n                            const e = new Date(s.getTime() + days * 24 * 60 * 60 * 1000);\r\n                            const sStr = s.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n                            const eStr = e.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n                            iterText = `${sStr} \u2014 ${eStr}`;\r\n                        } catch (e) { iterText = null; }\r\n                    }\r\n                    if (!iterText) {\r\n                        iterText = (opt.title || opt.name) ? String(opt.title || opt.name) : null;\r\n                    }\r\n                    if (iterText) {\r\n                        const iterEl = document.createElement('div');\r\n                        iterEl.style.color = 'var(--vscode-descriptionForeground)';\r\n                        iterEl.style.fontSize = '12px';\r\n                        iterEl.style.marginLeft = '8px';\r\n                        iterEl.textContent = String(iterText).slice(0, 120);\r\n                        // Keep iteration info fixed in the left sticky pane\r\n                        leftPane.appendChild(iterEl);\r\n                    }\r\n                } catch (e) { }\r\n            }\r\n\r\n            // If this group corresponds to 'Unassigned', rename to 'No <fieldname>'\r\n            if (group.option && (group.option.name === 'Unassigned' || group.option.title === 'Unassigned')) {\r\n                nameSpan.textContent = 'No ' + (groupingField.name || 'value');\r\n            }\r\n\r\n            // Compose header: leftPane (sticky) + rightPane (scrolling content)\r\n            headerContent.appendChild(leftPane);\r\n            headerContent.appendChild(rightPane);\r\n\r\n            tdHeader.appendChild(headerContent);\r\n            trHeader.appendChild(tdHeader);\r\n            tbody.appendChild(trHeader);\r\n\r\n            // Render Items\r\n            const groupRows: HTMLTableRowElement[] = [];\r\n            group.items.forEach((groupItem: any) => {\r\n                const tr = this.createRow(groupItem.item, groupItem.index);\r\n                tr.classList.add(\"group-row-\" + group.option.id); // Add class for group toggling\r\n                tbody.appendChild(tr);\r\n                groupRows.push(tr);\r\n            });\r\n\r\n            // Toggle Logic\r\n            let isCollapsed = false;\r\n            toggleBtn.addEventListener(\"click\", () => {\r\n                isCollapsed = !isCollapsed;\r\n                toggleBtn.innerHTML = isCollapsed ? iconCollapsed : iconExpanded;\r\n                groupRows.forEach(row => {\r\n                    row.style.display = isCollapsed ? \"none\" : \"table-row\";\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private groupItems(items: any[], field: any) {\r\n        // Normalize options: Single Select uses .options, Iteration uses .configuration.iterations\r\n        let options: any[] = [];\r\n        const dType = (field.dataType || \"\").toLowerCase();\r\n        if (dType === \"single_select\") {\r\n            options = field.options || [];\r\n        } else if (dType === \"iteration\") {\r\n            options = (field.configuration && field.configuration.iterations) || [];\r\n        }\r\n        // If we have explicit options (single select/iteration), use them to group.\r\n        if (options && options.length > 0) {\r\n            const groups: any[] = options.map((opt: any) => ({ option: opt, items: [] }));\r\n            const unassigned: any[] = [];\r\n\r\n            items.forEach((item, index) => {\r\n                const fv = item.fieldValues.find((v: any) => String(v.fieldId) === String(field.id) || v.fieldName === field.name);\r\n                let placed = false;\r\n\r\n                if (fv) {\r\n                    // Match logic\r\n                    let matchId: string | null = null;\r\n                    let matchName: string | null = null;\r\n\r\n                    if (dType === \"single_select\") {\r\n                        matchId = fv.optionId || (fv.option && fv.option.id);\r\n                        matchName = fv.name || (fv.option && fv.option.name);\r\n                    } else if (dType === \"iteration\") {\r\n                        matchId = fv.iterationId || (fv.iteration && fv.iteration.id) || fv.id;\r\n                        matchName = fv.title || (fv.iteration && fv.iteration.title);\r\n                    }\r\n\r\n                    if (matchId || matchName) {\r\n                        const group = groups.find((g: any) =>\r\n                            (matchId && String(g.option.id) === String(matchId)) ||\r\n                            (matchName && (String(g.option.name) === String(matchName) || String(g.option.title) === String(matchName)))\r\n                        );\r\n                        if (group) {\r\n                            group.items.push({ item, index });\r\n                            placed = true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!placed) {\r\n                    unassigned.push({ item, index });\r\n                }\r\n            });\r\n\r\n            if (unassigned.length > 0) {\r\n                groups.push({ option: { name: \"Unassigned\", title: \"Unassigned\", color: \"GRAY\" }, items: unassigned });\r\n            }\r\n\r\n            return groups.filter((g: any) => g.items.length > 0);\r\n        }\r\n\r\n        // Fallback grouping: build groups based on actual item values (useful for assignees, repository, date, number, etc.)\r\n        const map = new Map<string, { option: any, items: any[] }>();\r\n        const unassignedFallback: any[] = [];\r\n\r\n        items.forEach((item, index) => {\r\n            const fv = item.fieldValues.find((v: any) => String(v.fieldId) === String(field.id) || v.fieldName === field.name);\r\n            let val: any = null;\r\n            if (fv) {\r\n                // Text/title/number/date straightforward\r\n                if (fv.text !== undefined) val = fv.text;\r\n                else if (fv.title !== undefined) val = fv.title;\r\n                else if (fv.number !== undefined) val = fv.number;\r\n                else if (fv.date !== undefined) val = fv.date;\r\n                // single_select / option\r\n                else if (fv.option) val = fv.option.name || fv.option.title || fv.option.id;\r\n                // iteration\r\n                else if (fv.iteration) val = fv.iteration.title || fv.iteration.id;\r\n                // parent_issue - try parent/parentIssue/issue/item/value/raw\r\n                else if (fv.parent || fv.parentIssue || fv.issue || fv.item || fv.value) {\r\n                    const p = fv.parent || fv.parentIssue || fv.issue || fv.item || fv.value;\r\n                    if (p) {\r\n                        // Prefer number, then id, then url, then title\r\n                        val = p.number || p.id || (p.raw && (p.raw.number || p.raw.id)) || p.url || p.title || p.name || null;\r\n                    }\r\n                }\r\n                // assignees\r\n                else if (fv.assignees) val = Array.isArray(fv.assignees) ? fv.assignees.map((a: any) => a.login || a.name).join(\", \") : fv.assignees;\r\n                // repository\r\n                else if (fv.repository) val = fv.repository.nameWithOwner || fv.repository.name || fv.repository.full_name || fv.repository.id;\r\n                // milestone\r\n                else if (fv.milestone) val = fv.milestone.title || fv.milestone.id || fv.milestone.name;\r\n                else val = fv.value !== undefined ? fv.value : null;\r\n            }\r\n\r\n            if (val === null || val === undefined || val === \"\") {\r\n                unassignedFallback.push({ item, index });\r\n                return;\r\n            }\r\n\r\n            const key = String(val);\r\n            if (!map.has(key)) {\r\n                map.set(key, { option: { id: key, name: key, title: key }, items: [] });\r\n            }\r\n            map.get(key)!.items.push({ item, index });\r\n        });\r\n\r\n        const groupsArr = Array.from(map.values());\r\n        if (unassignedFallback.length > 0) {\r\n            groupsArr.push({ option: { name: \"Unassigned\", title: \"Unassigned\", color: \"GRAY\" }, items: unassignedFallback });\r\n        }\r\n\r\n        return groupsArr;\r\n    }\r\n\r\n    private createRow(item: any, index: number): HTMLTableRowElement {\r\n        const tr = document.createElement(\"tr\");\r\n        tr.setAttribute(\"data-gh-item-id\", item.id);\r\n\r\n        // Add row hover effect\r\n        tr.style.transition = \"background-color 0.15s ease\";\r\n        tr.addEventListener('mouseenter', () => {\r\n            tr.style.backgroundColor = 'var(--vscode-list-hoverBackground)';\r\n        });\r\n        tr.addEventListener('mouseleave', () => {\r\n            tr.style.backgroundColor = 'transparent';\r\n        });\r\n\r\n        // Index Cell\r\n        const tdIndex = document.createElement(\"td\");\r\n        tdIndex.textContent = String(index + 1);\r\n        this.styleCell(tdIndex);\r\n        tr.appendChild(tdIndex);\r\n\r\n        // Field Cells\r\n        for (let colIndex = 0; colIndex < this.fields.length; colIndex++) {\r\n            const field = this.fields[colIndex];\r\n            const td = document.createElement(\"td\");\r\n            this.styleCell(td);\r\n\r\n            const fv = item.fieldValues.find((v: any) => String(v.fieldId) === String(field.id) || v.fieldName === field.name);\r\n            if (fv) {\r\n                td.innerHTML = renderCell(fv, field, item, this.items);\r\n            }\r\n\r\n            // Make td position relative so we can position a resizer inside it\r\n            td.style.position = 'relative';\r\n\r\n            // Add a small resizer handle to every cell so columns can be resized from any row\r\n            const cellResizer = document.createElement('div');\r\n            cellResizer.className = 'column-resizer';\r\n            cellResizer.style.position = 'absolute';\r\n            cellResizer.style.top = '0';\r\n            cellResizer.style.right = '0';\r\n            cellResizer.style.width = '6px';\r\n            cellResizer.style.height = '100%';\r\n            cellResizer.style.cursor = 'col-resize';\r\n            cellResizer.style.userSelect = 'none';\r\n            cellResizer.style.zIndex = '50';\r\n\r\n            cellResizer.addEventListener('mouseenter', () => cellResizer.style.background = 'var(--vscode-focusBorder)');\r\n            cellResizer.addEventListener('mouseleave', () => cellResizer.style.background = 'transparent');\r\n\r\n            cellResizer.addEventListener('mousedown', (e: MouseEvent) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                const table = this.container.querySelector('table') as HTMLTableElement | null;\r\n                if (!table) return;\r\n                const cols = table.querySelectorAll('col');\r\n                const col = cols[colIndex + 1] as HTMLTableColElement | undefined; // +1 for index column\r\n                const startWidth = col ? (parseInt(col.style.width) || col.offsetWidth) : (td.offsetWidth);\r\n                this.beginColumnResize(table, colIndex + 1, e.pageX, startWidth);\r\n            });\r\n\r\n            td.appendChild(cellResizer);\r\n            tr.appendChild(td);\r\n        }\r\n\r\n        return tr;\r\n    }\r\n\r\n    private styleCell(td: HTMLTableCellElement) {\r\n        td.style.padding = \"8px\";\r\n        td.style.borderRight = \"1px solid var(--vscode-panel-border)\";\r\n        td.style.borderBottom = \"1px solid var(--vscode-panel-border)\";\r\n        td.style.whiteSpace = \"nowrap\";\r\n        td.style.overflow = \"hidden\";\r\n        td.style.textOverflow = \"ellipsis\";\r\n    }\r\n\r\n    private showHeaderMenu(event: MouseEvent, field: any, headerElement: HTMLElement) {\r\n        event.stopPropagation();\r\n\r\n        // Hide existing menu\r\n        if (this.activeMenu) {\r\n            this.activeMenu.hide();\r\n        }\r\n\r\n        // Determine capabilities based on field type\r\n        const dataType = (field.dataType || '').toLowerCase();\r\n        // Mapping of GitHub ProjectV2 field data types to allowed operations\r\n        // Groupable: assignees, single_select, parent_issue, iteration, number, date, milestone, repository\r\n        const groupableTypes = new Set([\r\n            'assignees',\r\n            'single_select',\r\n            'parent_issue',\r\n            'iteration',\r\n            'number',\r\n            'date',\r\n            'milestone',\r\n            'repository'\r\n        ]);\r\n\r\n        // Sliceable: same as groupable, plus labels (multi-value) which can be sliced but not grouped\r\n        const sliceableTypes = new Set([\r\n            'assignees',\r\n            'single_select',\r\n            'parent_issue',\r\n            'iteration',\r\n            'number',\r\n            'date',\r\n            'milestone',\r\n            'repository',\r\n            'labels'\r\n        ]);\r\n\r\n        const canGroup = groupableTypes.has(dataType);\r\n        const canSlice = sliceableTypes.has(dataType);\r\n\r\n        // Determine current state (grouped/sliced/sorted)\r\n        const isGrouped = !!(this.options.groupingFieldName && field.name && field.name.toLowerCase() === this.options.groupingFieldName.toLowerCase());\r\n        const isSliced = !!((this.activeSlice && this.activeSlice.fieldId === field.id) || (this.activeSlicePanelFieldId && String(this.activeSlicePanelFieldId) === String(field.id)));\r\n        const currentSort = (this.options.sortConfig && this.options.sortConfig.fieldId === field.id) ? this.options.sortConfig.direction : null;\r\n\r\n        // Create and show menu\r\n        this.activeMenu = new ColumnHeaderMenu(field, {\r\n            canGroup,\r\n            canSlice,\r\n            canFilter: false, // Optional feature for later\r\n            isGrouped,\r\n            isSliced,\r\n            currentSort,\r\n            onSort: (direction) => this.handleSort(field, direction),\r\n            onClearSort: () => this.clearSort(field),\r\n            onGroup: () => this.handleGroup(field),\r\n            onClearGroup: () => this.clearGroup(field),\r\n            onSlice: () => this.handleSlice(field),\r\n            onClearSlice: () => this.clearSlice(field),\r\n            onHide: () => this.hideField(field.id),\r\n            onMove: (direction) => this.handleMove(field, direction)\r\n        });\r\n\r\n        this.activeMenu.show(headerElement);\r\n    }\r\n\r\n    private clearGroup(field: any) {\r\n        // Clear local grouping state and notify parent\r\n        this.options.groupingFieldName = undefined;\r\n        if (this.options.onGroupChange) {\r\n            try {\r\n                // Notify parent that grouping was cleared\r\n                this.options.onGroupChange('');\r\n            } catch (e) { }\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    private clearSlice(field: any) {\r\n        this.activeSlice = null;\r\n        if (this.activeSlicePanel) {\r\n            this.activeSlicePanel.close();\r\n            this.activeSlicePanel = null;\r\n        }\r\n        this.activeSlicePanelFieldId = null;\r\n        // Reset container layout\r\n        this.container.style.display = 'block';\r\n        this.render();\r\n        if (this.options.onSliceChange) {\r\n            this.options.onSliceChange(null as any);\r\n        }\r\n    }\r\n\r\n    private clearSort(field: any) {\r\n        // Remove sort from storage and options; notify parent\r\n        const key = this.getStorageKey('sortConfig');\r\n        if (key) localStorage.removeItem(key);\r\n        if (this.options.onSortChange) {\r\n            this.options.onSortChange(null as any);\r\n        }\r\n    }\r\n\r\n    private showHiddenFieldsMenu(anchorElement: HTMLElement) {\r\n        // Hide any existing menu\r\n        if (this.activeMenu) {\r\n            this.activeMenu.hide();\r\n        }\r\n\r\n        // Get hidden fields\r\n        const hiddenFields = this.allFields.filter(f => this.hiddenFieldIds.has(String(f.id)));\r\n\r\n        if (hiddenFields.length === 0) {\r\n            // Show message that no fields are hidden\r\n            const message = document.createElement('div');\r\n            message.textContent = 'No hidden fields';\r\n            message.style.position = 'absolute';\r\n            message.style.background = 'var(--vscode-menu-background)';\r\n            message.style.border = '1px solid var(--vscode-menu-border)';\r\n            message.style.borderRadius = '4px';\r\n            message.style.padding = '12px';\r\n            message.style.fontSize = '13px';\r\n            message.style.color = 'var(--vscode-descriptionForeground)';\r\n            message.style.zIndex = '1000';\r\n\r\n            const rect = anchorElement.getBoundingClientRect();\r\n            message.style.top = `${rect.bottom + 4}px`;\r\n            message.style.left = `${rect.left}px`;\r\n\r\n            document.body.appendChild(message);\r\n\r\n            setTimeout(() => message.remove(), 2000);\r\n            return;\r\n        }\r\n\r\n        // Create simple menu for hidden fields\r\n        const menu = document.createElement('div');\r\n        menu.style.position = 'absolute';\r\n        menu.style.background = 'var(--vscode-menu-background)';\r\n        menu.style.border = '1px solid var(--vscode-menu-border)';\r\n        menu.style.borderRadius = '4px';\r\n        menu.style.padding = '4px 0';\r\n        menu.style.minWidth = '180px';\r\n        menu.style.zIndex = '1000';\r\n        menu.style.fontSize = '13px';\r\n\r\n        const rect = anchorElement.getBoundingClientRect();\r\n        menu.style.top = `${rect.bottom + 4}px`;\r\n        menu.style.left = `${rect.left}px`;\r\n\r\n        // Header\r\n        const header = document.createElement('div');\r\n        header.textContent = 'Show field';\r\n        header.style.padding = '6px 12px';\r\n        header.style.fontWeight = '600';\r\n        header.style.color = 'var(--vscode-descriptionForeground)';\r\n        header.style.fontSize = '11px';\r\n        header.style.textTransform = 'uppercase';\r\n        menu.appendChild(header);\r\n\r\n        const separator = document.createElement('div');\r\n        separator.style.height = '1px';\r\n        separator.style.background = 'var(--vscode-menu-separatorBackground)';\r\n        separator.style.margin = '4px 0';\r\n        menu.appendChild(separator);\r\n\r\n        // Field items\r\n        hiddenFields.forEach(field => {\r\n            const item = document.createElement('div');\r\n            item.textContent = field.name || field.id;\r\n            item.style.padding = '6px 12px';\r\n            item.style.cursor = 'pointer';\r\n            item.style.color = 'var(--vscode-menu-foreground)';\r\n\r\n            item.addEventListener('mouseenter', () => {\r\n                item.style.background = 'var(--vscode-menu-selectionBackground)';\r\n                item.style.color = 'var(--vscode-menu-selectionForeground)';\r\n            });\r\n\r\n            item.addEventListener('mouseleave', () => {\r\n                item.style.background = 'transparent';\r\n                item.style.color = 'var(--vscode-menu-foreground)';\r\n            });\r\n\r\n            item.addEventListener('click', () => {\r\n                this.showField(field.id);\r\n                menu.remove();\r\n                backdrop.remove();\r\n            });\r\n\r\n            menu.appendChild(item);\r\n        });\r\n\r\n        // Backdrop\r\n        const backdrop = document.createElement('div');\r\n        backdrop.style.position = 'fixed';\r\n        backdrop.style.top = '0';\r\n        backdrop.style.left = '0';\r\n        backdrop.style.right = '0';\r\n        backdrop.style.bottom = '0';\r\n        backdrop.style.zIndex = '999';\r\n\r\n        // Clicking the backdrop closes the menu\r\n        backdrop.addEventListener('click', () => {\r\n            if (menu.parentElement) menu.remove();\r\n            if (backdrop.parentElement) backdrop.remove();\r\n        });\r\n\r\n        // Append to body\r\n        document.body.appendChild(menu);\r\n        document.body.appendChild(backdrop);\r\n\r\n        // End of showHiddenFieldsMenu\r\n    }\r\n\r\n    private handleSort(field: any, direction: 'ASC' | 'DESC') {\r\n        const sortConfig: SortConfig = {\r\n            fieldId: field.id,\r\n            direction\r\n        };\r\n\r\n        // Save to localStorage\r\n        this.saveSortConfig(sortConfig);\r\n\r\n        // Notify parent component\r\n        if (this.options.onSortChange) {\r\n            this.options.onSortChange(sortConfig);\r\n        }\r\n    }\r\n\r\n    private handleGroup(field: any) {\r\n        // Update local grouping state so the UI reflects the change immediately\r\n        if (field && field.name) {\r\n            this.options.groupingFieldName = field.name;\r\n            this.render();\r\n            if (this.options.onGroupChange) {\r\n                try {\r\n                    this.options.onGroupChange(field.name);\r\n                } catch (e) { }\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleSlice(field: any) {\r\n        // Close existing panel\r\n        if (this.activeSlicePanel) {\r\n            this.activeSlicePanel.close();\r\n            this.activeSlicePanel = null;\r\n        }\r\n\r\n        // Create and show new panel in the container (left side)\r\n        this.activeSlicePanel = new SlicePanel(this.container, field, this.items, this.allFields);\r\n        this.activeSlicePanel.render();\r\n        // Remember which field the panel belongs to so header menu can show an \"unslice\" button\r\n        try { this.activeSlicePanelFieldId = String(field.id); } catch (e) { this.activeSlicePanelFieldId = null; }\r\n\r\n        // Make sure the slice panel appears before the table wrapper\r\n        const tableWrapper = this.container.querySelector('.table-wrapper');\r\n        if (tableWrapper) {\r\n            const sliceEl = this.container.querySelector('.slice-panel');\r\n            if (sliceEl) {\r\n                this.container.insertBefore(sliceEl, tableWrapper);\r\n            }\r\n        }\r\n\r\n        // Setup layout: container should use flexbox to show panel + table side by side\r\n        this.container.style.display = 'flex';\r\n        this.container.style.flexDirection = 'row';\r\n        this.container.style.gap = '0';\r\n\r\n        this.activeSlicePanel.onValueSelect((value) => {\r\n            // Filter table by this value\r\n            this.activeSlice = { fieldId: field.id, value };\r\n            this.render();\r\n        });\r\n\r\n        // Handle field change\r\n        this.activeSlicePanel.onFieldChange((newField) => {\r\n            // Update active slice field\r\n            this.activeSlice = null; // Reset slice value when changing field\r\n            this.handleSlice(newField); // Re-render with new field\r\n\r\n            // Notify parent\r\n            if (this.options.onSliceChange) {\r\n                this.options.onSliceChange(newField);\r\n            }\r\n        });\r\n\r\n        // Notify parent\r\n        if (this.options.onSliceChange) {\r\n            this.options.onSliceChange(field);\r\n        }\r\n    }\r\n\r\n    public hideField(fieldId: string) {\r\n        const fid = String(fieldId);\r\n        this.hiddenFieldIds.add(fid);\r\n        try { console.debug('[ProjectTable] hideField -> added', fid, 'hiddenFieldIds=', Array.from(this.hiddenFieldIds)); } catch (e) { }\r\n        // If a parent callback is provided (e.g. tableViewFetcher managing Save/Discard),\r\n        // notify it instead of immediately persisting to localStorage. This allows hide/unhide\r\n        // to be treated as an unsaved view-level change which can be saved/discarded by the user.\r\n        if (this.options.onHiddenFieldsChange) {\r\n            // update in-memory state and notify parent (do not persist to localStorage yet)\r\n            this.fields = this.allFields.filter(f => !this.hiddenFieldIds.has(f.id));\r\n            // Re-apply stored field order so the UI appears consistent after toggling\r\n            try { this.applyFieldOrder(); } catch (e) { }\r\n            try { this.options.onHiddenFieldsChange(Array.from(this.hiddenFieldIds)); } catch (e) { }\r\n            this.render();\r\n        } else {\r\n            this.saveHiddenFields();\r\n            this.fields = this.allFields.filter(f => !this.hiddenFieldIds.has(f.id));\r\n            try { this.applyFieldOrder(); } catch (e) { }\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    public showField(fieldId: string) {\r\n        const fid = String(fieldId);\r\n        this.hiddenFieldIds.delete(fid);\r\n        try { console.debug('[ProjectTable] showField -> removed', fid, 'hiddenFieldIds=', Array.from(this.hiddenFieldIds)); } catch (e) { }\r\n        if (this.options.onHiddenFieldsChange) {\r\n            this.fields = this.allFields.filter(f => !this.hiddenFieldIds.has(f.id));\r\n            try { this.applyFieldOrder(); } catch (e) { }\r\n            try { this.options.onHiddenFieldsChange(Array.from(this.hiddenFieldIds)); } catch (e) { }\r\n            this.render();\r\n        } else {\r\n            this.saveHiddenFields();\r\n            this.fields = this.allFields.filter(f => !this.hiddenFieldIds.has(f.id));\r\n            try { this.applyFieldOrder(); } catch (e) { }\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    private handleMove(field: any, direction: 'left' | 'right') {\r\n        const currentIndex = this.fields.findIndex(f => f.id === field.id);\r\n\r\n        if (direction === 'left' && currentIndex > 0) {\r\n            // Swap with previous\r\n            [this.fields[currentIndex], this.fields[currentIndex - 1]] =\r\n                [this.fields[currentIndex - 1], this.fields[currentIndex]];\r\n        } else if (direction === 'right' && currentIndex < this.fields.length - 1) {\r\n            // Swap with next\r\n            [this.fields[currentIndex], this.fields[currentIndex + 1]] =\r\n                [this.fields[currentIndex + 1], this.fields[currentIndex]];\r\n        }\r\n\r\n        this.saveFieldOrder();\r\n        this.render();\r\n    }\r\n\r\n    // LocalStorage persistence methods\r\n    private getStorageKey(suffix: string): string {\r\n        return this.options.viewKey ? `ghProjects.table.${this.options.viewKey}.${suffix}` : '';\r\n    }\r\n\r\n    private loadHiddenFields(): string[] {\r\n        const key = this.getStorageKey('hiddenFields');\r\n        if (!key) return [];\r\n\r\n        try {\r\n            const stored = localStorage.getItem(key);\r\n            const arr = stored ? JSON.parse(stored) : [];\r\n            // Normalize stored ids to strings\r\n            const normalized = (arr || []).map((id: any) => String(id));\r\n            try { console.debug('[ProjectTable] loadHiddenFields ->', normalized); } catch (e) { }\r\n            return normalized;\r\n        } catch (e) {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    private saveHiddenFields() {\r\n        const key = this.getStorageKey('hiddenFields');\r\n        if (!key) return;\r\n\r\n        const arr = Array.from(this.hiddenFieldIds).map(id => String(id));\r\n        try { console.debug('[ProjectTable] saveHiddenFields ->', arr); } catch (e) { }\r\n        localStorage.setItem(key, JSON.stringify(arr));\r\n    }\r\n\r\n    private saveSortConfig(config: SortConfig) {\r\n        const key = this.getStorageKey('sortConfig');\r\n        if (!key) return;\r\n\r\n        localStorage.setItem(key, JSON.stringify(config));\r\n    }\r\n\r\n    private saveFieldOrder() {\r\n        const key = this.getStorageKey('fieldOrder');\r\n        if (!key) return;\r\n\r\n        const order = this.fields.map(f => f.id);\r\n        localStorage.setItem(key, JSON.stringify(order));\r\n    }\r\n\r\n    private applyFieldOrder() {\r\n        const key = this.getStorageKey('fieldOrder');\r\n        if (!key) return;\r\n\r\n        try {\r\n            const stored = localStorage.getItem(key);\r\n            if (!stored) return;\r\n\r\n            const order: string[] = JSON.parse(stored);\r\n            const orderedFields: any[] = [];\r\n\r\n            // Add fields in stored order\r\n            for (const fieldId of order) {\r\n                const field = this.fields.find(f => String(f.id) === String(fieldId));\r\n                if (field) {\r\n                    orderedFields.push(field);\r\n                }\r\n            }\r\n\r\n            // Add any new fields not in stored order\r\n            for (const field of this.fields) {\r\n                if (!orderedFields.find(f => f.id === field.id)) {\r\n                    orderedFields.push(field);\r\n                }\r\n            }\r\n\r\n            this.fields = orderedFields;\r\n        } catch (e) {\r\n            // Ignore errors, use default order\r\n        }\r\n    }\r\n\r\n    private setupResizers(table: HTMLTableElement) {\r\n        const headers = table.querySelectorAll('th');\r\n\r\n        headers.forEach((th, index) => {\r\n            // Skip index column\r\n            if (index === 0) return;\r\n\r\n            // Create resizer element\r\n            const resizer = document.createElement('div');\r\n            resizer.className = 'column-resizer';\r\n            resizer.style.position = 'absolute';\r\n            resizer.style.top = '0';\r\n            resizer.style.right = '0';\r\n            resizer.style.width = '4px';\r\n            resizer.style.height = '100%';\r\n            resizer.style.cursor = 'col-resize';\r\n            resizer.style.userSelect = 'none';\r\n            resizer.style.zIndex = '100';\r\n\r\n            // Visual feedback on hover\r\n            resizer.addEventListener('mouseenter', () => {\r\n                resizer.style.background = 'var(--vscode-focusBorder)';\r\n            });\r\n\r\n            resizer.addEventListener('mouseleave', () => {\r\n                resizer.style.background = 'transparent';\r\n            });\r\n\r\n            // Resize logic\r\n            let startX = 0;\r\n            let startWidth = 0;\r\n\r\n            resizer.addEventListener('mousedown', (e: MouseEvent) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                const cols = table.querySelectorAll('col');\r\n                const col = cols[index] as HTMLTableColElement | undefined; // index aligns with th\r\n                const startW = col ? (parseInt(col.style.width) || col.offsetWidth) : th.offsetWidth;\r\n                this.beginColumnResize(table, index, e.pageX, startW);\r\n            });\r\n\r\n            // Make th position relative for absolute positioning\r\n            (th as HTMLElement).style.position = 'relative';\r\n            th.appendChild(resizer);\r\n        });\r\n\r\n        // Restore column widths from localStorage\r\n        this.restoreColumnWidths(table);\r\n    }\r\n\r\n    private saveColumnWidth(fieldId: string, width: number) {\r\n        const key = this.getStorageKey('columnWidths');\r\n        if (!key) return;\r\n\r\n        try {\r\n            const stored = localStorage.getItem(key);\r\n            const widths = stored ? JSON.parse(stored) : {};\r\n            widths[fieldId] = width;\r\n            localStorage.setItem(key, JSON.stringify(widths));\r\n        } catch (e) { }\r\n    }\r\n\r\n    /**\r\n     * Centralized column resizing logic. `colIndex` is the index into the <col> nodeList\r\n     * (including the index column at 0).\r\n     */\r\n    private beginColumnResize(table: HTMLTableElement, colIndex: number, startX: number, startWidth: number) {\r\n        const onMouseMove = (e: MouseEvent) => {\r\n            const newWidth = Math.max(20, startWidth + (e.pageX - startX));\r\n            const cols = table.querySelectorAll('col');\r\n            const col = cols[colIndex] as HTMLTableColElement | undefined;\r\n            if (col) {\r\n                col.style.width = `${newWidth}px`;\r\n                col.style.minWidth = `${newWidth}px`;\r\n                col.style.maxWidth = `${newWidth}px`;\r\n            }\r\n        };\r\n\r\n        const onMouseUp = (e?: MouseEvent) => {\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n\r\n            // Save mapping to field id (colIndex - 1 => fields)\r\n            const fieldIndex = colIndex - 1;\r\n            if (fieldIndex >= 0 && fieldIndex < this.fields.length) {\r\n                const cols = table.querySelectorAll('col');\r\n                const col = cols[colIndex] as HTMLTableColElement | undefined;\r\n                const widthToSave = col ? (parseInt(col.style.width) || col.offsetWidth) : undefined;\r\n                if (widthToSave) {\r\n                    this.saveColumnWidth(this.fields[fieldIndex].id, widthToSave);\r\n                }\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    }\r\n\r\n    private restoreColumnWidths(table: HTMLTableElement) {\r\n        const key = this.getStorageKey('columnWidths');\r\n        if (!key) return;\r\n\r\n        try {\r\n            const stored = localStorage.getItem(key);\r\n            if (!stored) return;\r\n\r\n            const widths = JSON.parse(stored);\r\n            const cols = table.querySelectorAll('col');\r\n\r\n            this.fields.forEach((field, index) => {\r\n                const width = widths[field.id];\r\n                if (width) {\r\n                    const col = cols[index + 1] as HTMLTableColElement; // +1 for index column\r\n                    if (col) {\r\n                        col.style.width = `${width}px`;\r\n                        col.style.minWidth = `${width}px`;\r\n                        col.style.maxWidth = `${width}px`;\r\n                    }\r\n                }\r\n            });\r\n        } catch (e) { }\r\n    }\r\n}\r\n", "/// <reference path=\"./global.d.ts\" />\r\n\r\n/**\r\n * Sends a debug log message to the extension host.\r\n */\r\nexport function logDebug(viewKey: string, message: string, data?: any) {\r\n    try {\r\n        if (\r\n            (window as any).__APP_MESSAGING__ &&\r\n            typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\r\n        ) {\r\n            (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"debugLog\",\r\n                level: \"debug\",\r\n                viewKey: viewKey,\r\n                message: message,\r\n                data: data,\r\n            });\r\n        }\r\n    } catch (e) { }\r\n    try {\r\n        if (console && console.log) {\r\n            console.log(message, data);\r\n        }\r\n    } catch (e) { }\r\n}\r\n\r\n/**\r\n * Sets the container content to a loading state.\r\n */\r\nexport function setLoadingState(container: HTMLElement, titleText: string) {\r\n    container.innerHTML =\r\n        '<div class=\"title\">' +\r\n        titleText +\r\n        '</div><div class=\"loading\"><em>Loading...</em></div>';\r\n}\r\n\r\n/**\r\n * Sets the container content to an error state.\r\n */\r\nexport function setErrorState(container: HTMLElement, titleText: string, error: string) {\r\n    container.innerHTML =\r\n        '<div class=\"title\">' +\r\n        titleText +\r\n        '</div><div style=\"color:var(--vscode-editor-foreground)\">' +\r\n        error +\r\n        \"</div>\";\r\n}\r\n\r\n/**\r\n * Creates a standardized \"Load more\" button.\r\n */\r\nexport function createLoadMoreButton(onClick: () => void): HTMLButtonElement {\r\n    const btn = document.createElement(\"button\");\r\n    btn.type = \"button\";\r\n    btn.textContent = \"Load more\";\r\n    btn.style.marginLeft = \"8px\";\r\n    btn.style.border = \"1px solid var(--vscode-editorWidget-border)\";\r\n    btn.addEventListener(\"click\", () => {\r\n        onClick();\r\n        btn.disabled = true;\r\n        btn.textContent = \"Loading...\";\r\n    });\r\n    return btn;\r\n}\r\n\r\n/**\r\n * Initializes the filter bar using the shared filterBarHelper.\r\n * Returns the barApi if successful, or null.\r\n */\r\nexport function initFilterBar(\r\n    container: HTMLElement,\r\n    viewKey: string,\r\n    options: {\r\n        suffix?: string;\r\n        step?: number;\r\n        onLoadMore?: () => void;\r\n        onSave?: (filter: any) => void;\r\n        onDiscard?: () => void;\r\n    }\r\n): any {\r\n    if (\r\n        window.filterBarHelper &&\r\n        typeof window.filterBarHelper.create === \"function\"\r\n    ) {\r\n        try {\r\n            return window.filterBarHelper.create({\r\n                parent: container,\r\n                suffix: options.suffix || viewKey,\r\n                effFilter: undefined,\r\n                viewKey: viewKey,\r\n                step: options.step || 50,\r\n                onLoadMore: options.onLoadMore,\r\n                onSave: options.onSave,\r\n                onDiscard: options.onDiscard,\r\n            });\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Toggles visibility of elements based on matched IDs from the filter.\r\n */\r\nexport function applyFilterVisibility(\r\n    root: HTMLElement | Document,\r\n    selector: string,\r\n    matchedIds: Set<string>,\r\n    displayStyle: string = \"block\"\r\n) {\r\n    try {\r\n        const elements = Array.from(root.querySelectorAll(selector));\r\n        for (let i = 0; i < elements.length; i++) {\r\n            try {\r\n                const el = elements[i] as HTMLElement;\r\n                const id = el.getAttribute(\"data-gh-item-id\");\r\n                el.style.display = matchedIds.has(String(id)) ? displayStyle : \"none\";\r\n            } catch (e) { }\r\n        }\r\n    } catch (e) { }\r\n}\r\n", "import { ProjectTable } from \"./components/ProjectTable\";\r\nimport { setLoadingState, setErrorState, initFilterBar, createLoadMoreButton, logDebug } from \"./viewFetcherUtils\";\r\nimport { parseSortByFields, sortItems } from \"./utils/tableSorting\";\r\n\r\n/// <reference path=\"./global.d.ts\" />\r\n\r\nwindow.tableViewFetcher = function (view: any, container: HTMLElement, viewKey: any) {\r\n  const viewName = (view && (view.name || view.id)) ? (view.name || view.id) : \"Table View\";\r\n  try {\r\n    setLoadingState(container, viewName);\r\n  } catch (e) { }\r\n\r\n  let itemsLimit = 30;\r\n\r\n  function render(payload: any) {\r\n    const snapshot = payload || {};\r\n    const fields = snapshot.fields || [];\r\n    const allItems = snapshot.items || [];\r\n    const items = allItems.slice(0, itemsLimit);\r\n\r\n    // Reset container layout\r\n    container.innerHTML = \"\";\r\n    container.style.margin = \"0\";\r\n    container.style.padding = \"0\";\r\n    container.style.height = \"100%\";\r\n    container.style.display = \"flex\";\r\n    container.style.flexDirection = \"column\";\r\n    container.style.overflow = \"hidden\";\r\n\r\n    // Header / Filter Bar Container\r\n    const headerContainer = document.createElement(\"div\");\r\n    headerContainer.style.flex = \"0 0 auto\";\r\n    headerContainer.style.background = \"var(--vscode-editor-background)\";\r\n    headerContainer.style.zIndex = \"20\";\r\n    headerContainer.style.position = \"relative\";\r\n    headerContainer.style.display = \"flex\";\r\n    headerContainer.style.justifyContent = \"space-between\";\r\n    headerContainer.style.alignItems = \"center\";\r\n    headerContainer.style.width = \"100%\"; // Ensure full width\r\n\r\n    // Filter Wrapper to take available space\r\n    const filterWrapper = document.createElement(\"div\");\r\n    filterWrapper.style.flex = \"1 1 auto\";\r\n    filterWrapper.style.marginRight = \"8px\";\r\n    headerContainer.appendChild(filterWrapper);\r\n\r\n    // Init Filter Bar\r\n    // Track unsaved view-level changes (grouping) and wire Save/Discard hooks\r\n    let unsavedGrouping: string | null = null;\r\n    // Track unsaved hidden fields changes (shown/hidden via the plus-column menu)\r\n    let unsavedHiddenFields: Set<string> | null = null;\r\n    // Track unsaved slice changes\r\n    let unsavedSlice: { fieldId: string, value: any } | null = null;\r\n    let barApi = initFilterBar(filterWrapper, viewKey, {\r\n      suffix: viewKey ? String(viewKey).split(\":\").pop() : \"\",\r\n      step: itemsLimit,\r\n      onLoadMore: () => {\r\n        itemsLimit += 30;\r\n        requestFields();\r\n      },\r\n      onSave: (newFilter: any) => {\r\n        try {\r\n          // Save grouping if changed\r\n          if (unsavedGrouping !== null) {\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n              (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"setViewGrouping\",\r\n                viewKey: viewKey,\r\n                grouping: unsavedGrouping,\r\n              });\r\n            }\r\n            unsavedGrouping = null;\r\n          }\r\n\r\n          // Save hidden fields if changed\r\n          if (unsavedHiddenFields !== null) {\r\n            const hiddenArr = Array.from(unsavedHiddenFields);\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n              (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"setViewHiddenFields\",\r\n                viewKey: viewKey,\r\n                hiddenFields: hiddenArr,\r\n              });\r\n            }\r\n            // Persist to localStorage as well so UI persists across reloads (server may also return updated snapshot)\r\n            try {\r\n              const key = viewKey ? `ghProjects.table.${viewKey}.hiddenFields` : null;\r\n              if (key) localStorage.setItem(key, JSON.stringify(hiddenArr));\r\n            } catch (e) { }\r\n            unsavedHiddenFields = null;\r\n          }\r\n\r\n          // Save slice if changed\r\n          if (unsavedSlice !== null) {\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n              (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"setViewSlice\",\r\n                viewKey: viewKey,\r\n                slice: unsavedSlice,\r\n              });\r\n            }\r\n            // Persist to localStorage as well\r\n            try {\r\n              const key = viewKey ? `ghProjects.table.${viewKey}.slice` : null;\r\n              if (key) localStorage.setItem(key, JSON.stringify(unsavedSlice));\r\n            } catch (e) { }\r\n            unsavedSlice = null;\r\n          }\r\n        } catch (e) { }\r\n      },\r\n      onDiscard: () => {\r\n        try {\r\n          // Discard grouping changes\r\n          if (unsavedGrouping !== null) {\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n              (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"discardViewGrouping\",\r\n                viewKey: viewKey,\r\n              });\r\n            }\r\n            unsavedGrouping = null;\r\n          }\r\n\r\n          // Discard hidden fields changes: request fresh snapshot from extension\r\n          if (unsavedHiddenFields !== null) {\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n              (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"discardViewHiddenFields\",\r\n                viewKey: viewKey,\r\n              });\r\n            }\r\n            unsavedHiddenFields = null;\r\n            // Re-request fields to refresh UI from server state\r\n            requestFields();\r\n          }\r\n\r\n          // Discard slice changes: clear slice and refresh UI\r\n          if (unsavedSlice !== null) {\r\n            if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n              (window as any).__APP_MESSAGING__.postMessage({\r\n                command: \"discardViewSlice\",\r\n                viewKey: viewKey,\r\n              });\r\n            }\r\n            unsavedSlice = null;\r\n            // Clear localStorage\r\n            try {\r\n              const key = viewKey ? `ghProjects.table.${viewKey}.slice` : null;\r\n              if (key) localStorage.removeItem(key);\r\n            } catch (e) { }\r\n            // Re-request fields to refresh UI from server state\r\n            requestFields();\r\n          }\r\n        } catch (e) { }\r\n      }\r\n    });\r\n\r\n    // Fallback Header if Filter Bar fails or returns null\r\n    if (!barApi) {\r\n      const title = document.createElement(\"div\");\r\n      title.className = \"title\";\r\n      title.textContent = viewName;\r\n      title.style.padding = \"8px\";\r\n      headerContainer.appendChild(title);\r\n\r\n      const controls = document.createElement(\"div\");\r\n      controls.style.padding = \"8px\";\r\n\r\n      if (allItems.length > itemsLimit) {\r\n        const loadMore = createLoadMoreButton(() => {\r\n          itemsLimit += 30;\r\n          requestFields();\r\n        });\r\n        controls.appendChild(loadMore);\r\n      } else {\r\n        const span = document.createElement(\"span\");\r\n        span.textContent = \"All loaded\";\r\n        span.style.color = \"var(--vscode-descriptionForeground)\";\r\n        controls.appendChild(span);\r\n      }\r\n      headerContainer.appendChild(controls);\r\n    } else {\r\n      // Update load state in barApi\r\n      if (typeof barApi.setLoadState === \"function\") {\r\n        barApi.setLoadState(\r\n          allItems.length < itemsLimit,\r\n          allItems.length >= itemsLimit ? \"Load more\" : \"All loaded\"\r\n        );\r\n      }\r\n      // Register items for filtering\r\n      if (typeof barApi.registerItems === \"function\") {\r\n        barApi.registerItems(allItems, { fields });\r\n      }\r\n    }\r\n\r\n    container.appendChild(headerContainer);\r\n\r\n    // Table Container\r\n    const tableContainer = document.createElement(\"div\");\r\n    tableContainer.style.flex = \"1 1 auto\";\r\n    tableContainer.style.overflow = \"hidden\";\r\n    tableContainer.style.position = \"relative\";\r\n    container.appendChild(tableContainer);\r\n\r\n    // Determine Grouping\r\n    const groupingFieldName = getGroupingFieldName(snapshot);\r\n\r\n    // Parse sort config from GitHub\r\n    let sortConfig = parseSortByFields(snapshot.details?.sortByFields);\r\n\r\n    // Check for local override\r\n    if (viewKey) {\r\n      try {\r\n        const stored = localStorage.getItem(`ghProjects.table.${viewKey}.sortConfig`);\r\n        if (stored) sortConfig = JSON.parse(stored);\r\n      } catch (e) { }\r\n    }\r\n\r\n    // Apply sorting\r\n    let displayItems = items;\r\n    if (sortConfig) {\r\n      displayItems = sortItems(items, fields, sortConfig);\r\n    }\r\n\r\n    // Render Table\r\n    // Use `allFields` if provided (full project fields), otherwise fall back to `fields` (view-visible fields)\r\n    const allFields = (snapshot as any).allFields && Array.isArray((snapshot as any).allFields) ? (snapshot as any).allFields : (snapshot.fields || []);\r\n\r\n    // Determine which fields the view exposes (visible). If view details contain a fields.nodes\r\n    // list, compute the hidden fields (allFields - viewFields) and pass them to ProjectTable so\r\n    // it picks up view-default hidden fields.\r\n    const viewFieldNodes = (snapshot as any).details && (snapshot as any).details.fields && Array.isArray((snapshot as any).details.fields.nodes)\r\n      ? (snapshot as any).details.fields.nodes\r\n      : null;\r\n\r\n    let viewHiddenFieldIds: string[] | undefined = undefined;\r\n    if (viewFieldNodes && Array.isArray(viewFieldNodes)) {\r\n      const visibleIds = new Set(viewFieldNodes.map((n: any) => String(n.id)));\r\n      viewHiddenFieldIds = (allFields || []).map((f: any) => String(f.id)).filter((id: string) => !visibleIds.has(id));\r\n    }\r\n\r\n    // Send debug info to extension output (via postMessage) so we can see what the webview computed\r\n    try {\r\n      const dbg = {\r\n        allFieldIds: (allFields || []).map((f: any) => String(f.id)),\r\n        viewFieldIds: viewFieldNodes ? viewFieldNodes.map((n: any) => String(n.id)) : null,\r\n        viewHiddenFieldIds,\r\n      };\r\n      if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === 'function') {\r\n        (window as any).__APP_MESSAGING__.postMessage({ command: 'debugLog', level: 'debug', message: 'tableViewFetcher field debug', data: dbg, viewKey });\r\n      }\r\n    } catch (e) { }\r\n\r\n    const table = new ProjectTable(tableContainer, allFields, displayItems, {\r\n      groupingFieldName: groupingFieldName || undefined,\r\n      sortConfig,\r\n      viewKey,\r\n      hiddenFields: viewHiddenFieldIds,\r\n      onHiddenFieldsChange: (hiddenIds: string[]) => {\r\n        try {\r\n          unsavedHiddenFields = new Set((hiddenIds || []).map((h: any) => String(h)));\r\n          // Enable Save/Discard buttons in the filter bar if present\r\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\r\n            try {\r\n              barApi.saveBtn.disabled = false;\r\n              barApi.discardBtn.disabled = false;\r\n              barApi.saveBtn.style.opacity = \"1\";\r\n              barApi.saveBtn.style.cursor = \"pointer\";\r\n              barApi.discardBtn.style.opacity = \"1\";\r\n              barApi.discardBtn.style.cursor = \"pointer\";\r\n            } catch (e) { }\r\n          }\r\n        } catch (e) { }\r\n      },\r\n      onSortChange: () => requestFields(),\r\n      onGroupChange: (fieldName: string) => {\r\n        // Defer persistence of grouping until user explicitly Saves from the filter bar\r\n        try {\r\n          unsavedGrouping = fieldName || null;\r\n          // Enable Save/Discard buttons in the filter bar if present\r\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\r\n            try {\r\n              barApi.saveBtn.disabled = false;\r\n              barApi.discardBtn.disabled = false;\r\n              barApi.saveBtn.style.opacity = \"1\";\r\n              barApi.saveBtn.style.cursor = \"pointer\";\r\n              barApi.discardBtn.style.opacity = \"1\";\r\n              barApi.discardBtn.style.cursor = \"pointer\";\r\n            } catch (e) { }\r\n          }\r\n        } catch (e) { }\r\n      },\r\n      onSliceChange: (field: any) => {\r\n        // Track slice as unsaved change (requires Save/Discard)\r\n        try {\r\n          unsavedSlice = field ? { fieldId: field.id, value: null } : null;\r\n\r\n          // Enable Save/Discard buttons in the filter bar if present\r\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\r\n            try {\r\n              barApi.saveBtn.disabled = false;\r\n              barApi.discardBtn.disabled = false;\r\n              barApi.saveBtn.style.opacity = \"1\";\r\n              barApi.saveBtn.style.cursor = \"pointer\";\r\n              barApi.discardBtn.style.opacity = \"1\";\r\n              barApi.discardBtn.style.cursor = \"pointer\";\r\n            } catch (e) { }\r\n          }\r\n\r\n          // Log for debugging\r\n          if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n            (window as any).__APP_MESSAGING__.postMessage({\r\n              command: \"debugLog\",\r\n              level: \"debug\",\r\n              message: field ? `Slice activated on field: ${field.name}` : \"Slice cleared\",\r\n              viewKey: viewKey\r\n            });\r\n          }\r\n        } catch (e) { }\r\n      }\r\n    });\r\n    table.render();\r\n\r\n    // Connect Filter to Table Visibility\r\n    if (barApi && typeof barApi.onFilterChange === \"function\") {\r\n      barApi.onFilterChange((matchedIds: Set<string>) => {\r\n        // Apply visibility to table rows\r\n        const rows = tableContainer.querySelectorAll(\"tr[data-gh-item-id]\");\r\n        rows.forEach((row: any) => {\r\n          const id = row.getAttribute(\"data-gh-item-id\");\r\n          if (id && matchedIds.has(id)) {\r\n            row.style.display = \"table-row\";\r\n          } else {\r\n            row.style.display = \"none\";\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  function onMessage(ev: MessageEvent) {\r\n    const msg = ev && ev.data ? ev.data : ev;\r\n    try {\r\n      if (msg && msg.command === \"fields\") {\r\n        if (msg.viewKey && viewKey && String(msg.viewKey) !== String(viewKey)) return;\r\n\r\n        if (msg.error) {\r\n          setErrorState(container, viewName, String(msg.error));\r\n        } else {\r\n          render(msg.payload);\r\n        }\r\n      }\r\n    } catch (e) { }\r\n  }\r\n\r\n  function requestFields() {\r\n    try {\r\n      if ((window as any).__APP_MESSAGING__ && typeof (window as any).__APP_MESSAGING__.postMessage === \"function\") {\r\n        (window as any).__APP_MESSAGING__.postMessage({\r\n          command: \"requestFields\",\r\n          first: itemsLimit,\r\n          viewKey: viewKey,\r\n        });\r\n      }\r\n    } catch (e) { }\r\n  }\r\n\r\n  try {\r\n    (window as any).__APP_MESSAGING__.onMessage(onMessage);\r\n  } catch (e) {\r\n    window.addEventListener(\"message\", onMessage);\r\n  }\r\n  requestFields();\r\n};\r\n\r\nfunction getGroupingFieldName(snapshot: any): string | null {\r\n  try {\r\n    if (snapshot && snapshot.details) {\r\n      const vgb = snapshot.details.verticalGroupByFields && snapshot.details.verticalGroupByFields.nodes;\r\n      const gb = snapshot.details.groupByFields && snapshot.details.groupByFields.nodes;\r\n\r\n      if (vgb && vgb.length > 0) return vgb[0].name || null;\r\n      if (gb && gb.length > 0) return gb[0].name || null;\r\n    }\r\n  } catch (e) { }\r\n  return null;\r\n}\r\n"],
  "mappings": "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",
  "names": ["escapeHtml", "s", "normalizeColor", "color", "n", "b", "u", "addAlpha", "alpha", "S", "v", "C", "getContrastColor", "renderCell", "e", "n", "s", "allItems", "u", "b", "S", "v", "C", "E", "W", "D", "H", "T", "_", "j", "U", "c", "i", "t", "o", "l", "r", "w", "x", "a", "normalizeColor", "p", "g", "escapeHtml", "f", "h", "addAlpha", "k", "prs", "out", "num", "titleText", "url", "rawColor", "normColor", "hasHex", "border", "bg", "fg", "getContrastColor", "itemsList", "B", "O", "$", "A", "d", "M", "V", "X", "L", "q", "parentWrapper", "totalCount", "doneCount", "pct", "ColumnHeaderMenu", "field", "options", "anchorElement", "rect", "label", "onClick", "item", "labelEl", "clearBtn", "e", "separator", "FieldsMenu", "options", "anchorElement", "rect", "menuRect", "margin", "vw", "vh", "top", "left", "title", "icon", "label", "newField", "visible", "f", "hidden", "text", "h", "r", "field", "row", "c", "s", "newVisible", "FieldsMenu_default", "SlicePanel", "container", "field", "items", "allFields", "stored", "debugOverlay", "resizer", "startX", "startWidth", "onMouseMove", "e", "dx", "newW", "onMouseUp", "ev", "header", "headerTop", "sliceLabel", "fieldButton", "arrow", "content", "anchorButton", "sliceableTypes", "sliceableFields", "f", "dataType", "dropdown", "item", "backdrop", "valueCounts", "empty", "sorted", "a", "b", "resolveParentProgress", "parentMeta", "result", "identifiers", "found", "A", "d", "M", "o", "m", "statusFV", "v", "c", "normalizeColor", "agg", "key", "value", "count", "rawValue", "parentMetaForIteration", "leftVisual", "makeColorDot", "dot", "visualAppended", "avatarUrl", "avatarEl", "escapeHtml", "repoIcon", "prog", "dotColor", "pd", "lab", "colorCandidate", "normalized", "colorVal", "iter", "it", "labelColumn", "label", "descText", "desc", "p", "titleText", "titleEl", "tspan", "displayedTitle", "summary", "doneText", "bar", "fill", "iterObj", "iterCandidate", "start", "duration", "s", "sStr", "eStr", "rangeEl", "countCircle", "counts", "fv", "existing", "labelsArr", "name", "ass", "fieldValue", "callback", "parseSortByFields", "sortByFields", "primary", "config", "secondary", "sortItems", "items", "fields", "sortConfig", "field", "f", "sorted", "a", "b", "primaryResult", "compareFieldValues", "secondaryField", "direction", "aValue", "getFieldValue", "bValue", "result", "compareText", "compareNumber", "compareDate", "compareSingleSelect", "compareIteration", "compareLabels", "item", "fieldValue", "fv", "aStr", "bStr", "aNum", "bNum", "aDate", "bDate", "aOption", "bOption", "aIndex", "opt", "bIndex", "aLabels", "bLabels", "ProjectTable", "container", "fields", "items", "options", "f", "hiddenFromStorage", "id", "hiddenFromOptions", "dbg", "existingSlicePanel", "tableContainer", "table", "colgroup", "colIndex", "field", "col", "colAddField", "thead", "tr", "thIndex", "th", "headerContent", "nameSpan", "headerText", "indicator", "isGrouped", "isSliced", "iconsContainer", "filterIcon", "innerSvg", "menuBtn", "e", "thAddField", "addFieldBtn", "anchorElement", "visibleSet", "menu", "FieldsMenu_default", "fieldId", "visible", "tbody", "displayItems", "sortItems", "item", "fv", "v", "val", "groupingField", "index", "groups", "group", "trHeader", "tdHeader", "estimateField", "estimateFieldId", "sumEstimate", "itemsArr", "sum", "gi", "it", "num", "formatEstimate", "n", "toggleBtn", "iconExpanded", "iconCollapsed", "colorDot", "normalizeColor", "countBadge", "leftPane", "rightPane", "parentMeta", "resolvedParentItem", "first", "pfv", "identifiers", "found", "A", "d", "M", "o", "m", "avatarEl", "avatarUrl", "match", "a", "escapeHtml", "repoIcon", "content", "statusFV", "c", "countCircle", "estSum", "estEl", "completedNames", "isDoneByHeuristics", "state", "percentFV", "labs", "l", "cn", "done", "total", "agg", "doneText", "progWrapper", "pct", "bar", "fill", "opt", "descEl", "iterText", "start", "duration", "s", "days", "sStr", "eStr", "iterEl", "groupRows", "groupItem", "isCollapsed", "row", "dType", "unassigned", "placed", "matchId", "matchName", "g", "map", "unassignedFallback", "p", "key", "groupsArr", "tdIndex", "td", "renderCell", "cellResizer", "startWidth", "event", "headerElement", "dataType", "groupableTypes", "sliceableTypes", "canGroup", "canSlice", "currentSort", "ColumnHeaderMenu", "direction", "hiddenFields", "message", "rect", "header", "separator", "backdrop", "sortConfig", "SlicePanel", "tableWrapper", "sliceEl", "value", "newField", "fid", "currentIndex", "suffix", "stored", "normalized", "arr", "config", "order", "orderedFields", "resizer", "startX", "startW", "width", "widths", "onMouseMove", "newWidth", "onMouseUp", "fieldIndex", "widthToSave", "cols", "setLoadingState", "container", "titleText", "setErrorState", "error", "createLoadMoreButton", "onClick", "btn", "initFilterBar", "viewKey", "options", "view", "container", "viewKey", "viewName", "setLoadingState", "itemsLimit", "render", "payload", "snapshot", "fields", "allItems", "items", "headerContainer", "filterWrapper", "unsavedGrouping", "unsavedHiddenFields", "unsavedSlice", "barApi", "initFilterBar", "requestFields", "newFilter", "hiddenArr", "key", "title", "controls", "loadMore", "createLoadMoreButton", "span", "tableContainer", "groupingFieldName", "getGroupingFieldName", "sortConfig", "parseSortByFields", "stored", "displayItems", "sortItems", "allFields", "viewFieldNodes", "viewHiddenFieldIds", "visibleIds", "n", "f", "id", "dbg", "ProjectTable", "hiddenIds", "h", "fieldName", "field", "matchedIds", "row", "onMessage", "ev", "msg", "setErrorState", "vgb", "gb"]
}
