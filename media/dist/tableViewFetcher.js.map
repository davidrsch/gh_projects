{
  "version": 3,
  "sources": ["../../src/webviews/client/components/ColumnHeaderMenu.ts", "../../src/webviews/client/renderers/columnHeaderRenderer.ts", "../../src/webviews/client/components/FieldsMenu.ts", "../../src/webviews/client/utils.ts", "../../src/webviews/client/components/SlicePanel.ts", "../../src/webviews/client/utils/tableSorting.ts", "../../src/webviews/client/services/GroupDataService.ts", "../../src/webviews/client/icons/iconRegistry.ts", "../../src/webviews/client/renderers/strategies.ts", "../../src/webviews/client/renderers/cellRenderer.ts", "../../src/webviews/client/renderers/RowRenderer.ts", "../../src/webviews/client/renderers/GroupRenderer.ts", "../../src/webviews/client/components/TableResizer.ts", "../../src/webviews/client/components/ProjectTable.ts", "../../src/webviews/client/utils/domUtils.ts", "../../src/webviews/client/viewFetcherUtils.ts", "../../src/webviews/client/tableViewFetcher.ts"],
  "sourcesContent": ["/**\n * Column Header Dropdown Menu Component\n * Shows context menu when clicking column header with actions like sort, group, slice, hide, move\n */\n\nexport interface MenuOptions {\n  canGroup: boolean;\n  canSlice: boolean;\n  canFilter: boolean;\n  isGrouped?: boolean;\n  isSliced?: boolean;\n  currentSort?: \"ASC\" | \"DESC\" | null;\n  onSort?: (direction: \"ASC\" | \"DESC\") => void;\n  onGroup?: () => void;\n  onSlice?: () => void;\n  onClearGroup?: () => void;\n  onClearSlice?: () => void;\n  onClearSort?: () => void;\n  onHide?: () => void;\n  onMove?: (direction: \"left\" | \"right\") => void;\n  onFilter?: () => void;\n  // positional info for disabling move actions\n  isFirst?: boolean;\n  isLast?: boolean;\n}\n\nexport class ColumnHeaderMenu {\n  private field: any;\n  private options: MenuOptions;\n  private menuElement: HTMLElement | null = null;\n  private backdropElement: HTMLElement | null = null;\n\n  constructor(field: any, options: MenuOptions) {\n    this.field = field;\n    this.options = options;\n  }\n\n  /**\n   * Helper to get icon SVG from registry\n   */\n  private getIconSvg(iconName: string): string {\n    if (typeof (window as any).getIconSvg === \"function\") {\n      return (window as any).getIconSvg(iconName);\n    }\n    return \"\";\n  }\n\n  /**\n   * Show the menu anchored below the header element\n   */\n  public show(anchorElement: HTMLElement): void {\n    // Hide any existing menu\n    this.hide();\n\n    // Create backdrop to detect outside clicks\n    this.backdropElement = document.createElement(\"div\");\n    this.backdropElement.style.position = \"fixed\";\n    this.backdropElement.style.top = \"0\";\n    this.backdropElement.style.left = \"0\";\n    this.backdropElement.style.right = \"0\";\n    this.backdropElement.style.bottom = \"0\";\n    this.backdropElement.style.zIndex = \"999\";\n    this.backdropElement.addEventListener(\"click\", () => this.hide());\n    document.body.appendChild(this.backdropElement);\n\n    // Create menu\n    this.menuElement = document.createElement(\"div\");\n    this.menuElement.className = \"column-header-menu\";\n    this.menuElement.style.position = \"absolute\";\n    this.menuElement.style.background = \"var(--vscode-menu-background)\";\n    this.menuElement.style.border = \"1px solid var(--vscode-menu-border)\";\n    this.menuElement.style.borderRadius = \"4px\";\n    this.menuElement.style.boxShadow = \"0 2px 8px rgba(0, 0, 0, 0.15)\";\n    this.menuElement.style.minWidth = \"180px\";\n    this.menuElement.style.padding = \"4px 0\";\n    this.menuElement.style.zIndex = \"1000\";\n    this.menuElement.style.fontSize = \"13px\";\n\n    // Position below anchor\n    const rect = anchorElement.getBoundingClientRect();\n    this.menuElement.style.top = `${rect.bottom + 4}px`;\n    this.menuElement.style.left = `${rect.left}px`;\n\n    // Build menu items\n    this.buildMenuItems();\n\n    document.body.appendChild(this.menuElement);\n  }\n\n  /**\n   * Hide and remove the menu\n   */\n  public hide(): void {\n    if (this.menuElement) {\n      this.menuElement.remove();\n      this.menuElement = null;\n    }\n    if (this.backdropElement) {\n      this.backdropElement.remove();\n      this.backdropElement = null;\n    }\n  }\n\n  /**\n   * Build menu items based on options\n   */\n  private buildMenuItems(): void {\n    if (!this.menuElement) return;\n\n    // Header\n    this.addMenuItem(\"Select column\", null, { isHeader: true });\n    this.addSeparator();\n\n    // Sort options (always available). If the column is currently sorted, show an 'x' clear button\n    this.addMenuItem(\n      \"Sort ascending\",\n      () => {\n        this.options.onSort?.(\"ASC\");\n        this.hide();\n      },\n      {\n        icon: this.getIconSvg(\"sort-asc\"),\n        showClear: !!(this.options.currentSort === \"ASC\"),\n        clearAction: this.options.onClearSort,\n      },\n    );\n\n    this.addMenuItem(\n      \"Sort descending\",\n      () => {\n        this.options.onSort?.(\"DESC\");\n        this.hide();\n      },\n      {\n        icon: this.getIconSvg(\"sort-desc\"),\n        showClear: !!(this.options.currentSort === \"DESC\"),\n        clearAction: this.options.onClearSort,\n      },\n    );\n\n    this.addSeparator();\n\n    // Group by (conditional)\n    if (this.options.canGroup) {\n      this.addMenuItem(\n        \"Group by values\",\n        () => {\n          this.options.onGroup?.();\n          this.hide();\n        },\n        {\n          icon: this.getIconSvg(\"rows\"),\n          showClear: !!this.options.isGrouped,\n          clearAction: this.options.onClearGroup,\n        },\n      );\n    }\n\n    // Slice by (conditional)\n    if (this.options.canSlice) {\n      this.addMenuItem(\n        \"Slice by values\",\n        () => {\n          this.options.onSlice?.();\n          this.hide();\n        },\n        {\n          icon: this.getIconSvg(\"sliceby\"),\n          showClear: !!this.options.isSliced,\n          clearAction: this.options.onClearSlice,\n        },\n      );\n    }\n\n    // Filter (conditional)\n    if (this.options.canFilter) {\n      this.addMenuItem(\"Filter by values...\", () => {\n        this.options.onFilter?.();\n        this.hide();\n      });\n    }\n\n    // Always available actions\n    if (\n      this.options.canGroup ||\n      this.options.canSlice ||\n      this.options.canFilter\n    ) {\n      this.addSeparator();\n    }\n\n    // Do not show hide for title fields\n    const isTitle = !!(\n      this.field &&\n      (this.field.type === \"title\" ||\n        String(this.field.name || \"\").toLowerCase() === \"title\" ||\n        String(this.field.id || \"\").toLowerCase() === \"title\")\n    );\n    if (!isTitle) {\n      this.addMenuItem(\n        \"Hide field\",\n        () => {\n          this.options.onHide?.();\n          this.hide();\n        },\n        {\n          icon: this.getIconSvg(\"eye-closed\"),\n        },\n      );\n    }\n\n    this.addSeparator();\n\n    const disableLeft = !!this.options.isFirst;\n    const disableRight = !!this.options.isLast;\n\n    this.addMenuItem(\n      \"Move left\",\n      () => {\n        if (disableLeft) return;\n        this.options.onMove?.(\"left\");\n        this.hide();\n      },\n      {\n        icon: this.getIconSvg(\"arrow-left\"),\n        disabled: disableLeft,\n      },\n    );\n\n    this.addMenuItem(\n      \"Move right\",\n      () => {\n        if (disableRight) return;\n        this.options.onMove?.(\"right\");\n        this.hide();\n      },\n      {\n        icon: this.getIconSvg(\"arrow-right\"),\n        disabled: disableRight,\n      },\n    );\n  }\n\n  /**\n   * Add a menu item\n   */\n  private addMenuItem(\n    label: string,\n    onClick: (() => void) | null,\n    options?: {\n      isHeader?: boolean;\n      icon?: string;\n      showClear?: boolean;\n      clearAction?: (() => void) | null;\n      disabled?: boolean;\n    },\n  ): void {\n    if (!this.menuElement) return;\n    const item = document.createElement(\"div\");\n    item.className = \"menu-item\";\n\n    if (options?.isHeader) {\n      item.textContent = label;\n      item.style.padding = \"6px 12px\";\n      item.style.fontWeight = \"600\";\n      item.style.color = \"var(--vscode-descriptionForeground)\";\n      item.style.fontSize = \"11px\";\n      item.style.textTransform = \"uppercase\";\n      item.style.cursor = \"default\";\n      this.menuElement.appendChild(item);\n      return;\n    }\n\n    // Non-header item layout: optional icon on left, label, optional clear 'x' button on the right\n    item.style.display = \"flex\";\n    item.style.alignItems = \"center\";\n    item.style.justifyContent = \"space-between\";\n    item.style.padding = \"6px 12px\";\n    item.style.cursor = \"pointer\";\n    item.style.color = \"var(--vscode-menu-foreground)\";\n\n    // Left icon\n    if (options?.icon) {\n      const iconEl = document.createElement(\"span\");\n      iconEl.className = \"menu-item-icon\";\n      iconEl.style.display = \"inline-block\";\n      iconEl.style.width = \"14px\";\n      iconEl.style.marginRight = \"8px\";\n      iconEl.style.flex = \"0 0 auto\";\n      // allow callers to pass either a short glyph or full SVG string\n      iconEl.innerHTML = options.icon;\n      item.appendChild(iconEl);\n    }\n\n    const labelEl = document.createElement(\"span\");\n    labelEl.textContent = label;\n    labelEl.style.flex = \"1\";\n    labelEl.style.whiteSpace = \"nowrap\";\n    labelEl.style.overflow = \"hidden\";\n    labelEl.style.textOverflow = \"ellipsis\";\n\n    item.appendChild(labelEl);\n\n    // Optional clear 'x' button\n    if (options?.showClear && options?.clearAction) {\n      const clearBtn = document.createElement(\"button\");\n      clearBtn.type = \"button\";\n      clearBtn.textContent = \"\u2715\";\n      clearBtn.title = \"Clear\";\n      clearBtn.style.border = \"none\";\n      clearBtn.style.background = \"transparent\";\n      clearBtn.style.cursor = \"pointer\";\n      clearBtn.style.padding = \"2px 6px\";\n      clearBtn.style.marginLeft = \"8px\";\n      clearBtn.style.color = \"var(--vscode-menu-foreground)\";\n\n      clearBtn.addEventListener(\"mouseenter\", () => {\n        clearBtn.style.color = \"var(--vscode-menu-selectionForeground)\";\n        clearBtn.style.background = \"var(--vscode-menu-selectionBackground)\";\n      });\n      clearBtn.addEventListener(\"mouseleave\", () => {\n        clearBtn.style.color = \"var(--vscode-menu-foreground)\";\n        clearBtn.style.background = \"transparent\";\n      });\n\n      clearBtn.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        options.clearAction && options.clearAction();\n        this.hide();\n      });\n\n      item.appendChild(clearBtn);\n    }\n\n    // Disabled state\n    if (options?.disabled) {\n      item.style.opacity = \"0.5\";\n      item.style.cursor = \"default\";\n    }\n\n    if (onClick) {\n      item.addEventListener(\"mouseenter\", () => {\n        item.style.background = \"var(--vscode-menu-selectionBackground)\";\n        item.style.color = \"var(--vscode-menu-selectionForeground)\";\n      });\n\n      item.addEventListener(\"mouseleave\", () => {\n        item.style.background = \"transparent\";\n        item.style.color = \"var(--vscode-menu-foreground)\";\n      });\n\n      item.addEventListener(\"click\", () => {\n        if (options?.disabled) return;\n        onClick();\n      });\n    }\n\n    this.menuElement.appendChild(item);\n  }\n\n  /**\n   * Add menu separator\n   */\n  private addSeparator(): void {\n    if (!this.menuElement) return;\n\n    const separator = document.createElement(\"div\");\n    separator.style.height = \"1px\";\n    separator.style.background = \"var(--vscode-menu-separatorBackground)\";\n    separator.style.margin = \"4px 0\";\n\n    this.menuElement.appendChild(separator);\n  }\n}\n", "export interface ColumnHeaderOptions {\n  fields: any[];\n  sortConfig: any;\n  groupingFieldName?: string;\n  activeSlice: any;\n  activeSlicePanelFieldId: string | null;\n  onHeaderMenu: (e: MouseEvent, field: any, th: HTMLElement) => void;\n  onShowFieldsMenu: (anchor: HTMLElement) => void;\n  onClearGroup: (field: any) => void;\n  onClearSlice: (field: any) => void;\n}\n\nexport class ColumnHeaderRenderer {\n  constructor(private options: ColumnHeaderOptions) {}\n\n  /**\n   * Helper to get icon SVG from registry\n   */\n  private getIconSvg(iconName: string): string {\n    if (typeof (window as any).getIconSvg === \"function\") {\n      return (window as any).getIconSvg(iconName);\n    }\n    return \"\";\n  }\n\n  public render(table: HTMLTableElement) {\n    const thead = document.createElement(\"thead\");\n    thead.style.background = \"var(--vscode-sideBar-background)\";\n    thead.style.position = \"sticky\";\n    thead.style.top = \"0\";\n    thead.style.zIndex = \"10\";\n\n    const tr = document.createElement(\"tr\");\n\n    // Index Header\n    const thIndex = document.createElement(\"th\");\n    thIndex.textContent = \"#\";\n    this.styleHeaderCell(thIndex);\n    tr.appendChild(thIndex);\n\n    // Field Headers\n    for (const field of this.options.fields) {\n      const th = document.createElement(\"th\");\n\n      // Create header content wrapper\n      const headerContent = document.createElement(\"div\");\n      headerContent.style.display = \"flex\";\n      headerContent.style.alignItems = \"center\";\n      headerContent.style.justifyContent = \"space-between\";\n      headerContent.style.width = \"100%\";\n      headerContent.style.gap = \"4px\";\n\n      // Field name span\n      const nameSpan = document.createElement(\"span\");\n      const headerText = field.name || field.id || \"\";\n      nameSpan.textContent = headerText;\n      nameSpan.style.flex = \"1\";\n      nameSpan.style.overflow = \"hidden\";\n      nameSpan.style.textOverflow = \"ellipsis\";\n      nameSpan.style.whiteSpace = \"nowrap\";\n\n      // Check if this field is grouped\n      const isGrouped =\n        field.name?.toLowerCase() ===\n        this.options.groupingFieldName?.toLowerCase();\n\n      // Check if this field is being sliced\n      const isSliced =\n        (this.options.activeSlice &&\n          this.options.activeSlice.fieldId === field.id) ||\n        (this.options.activeSlicePanelFieldId &&\n          String(this.options.activeSlicePanelFieldId) === String(field.id));\n\n      // Check if this field is sorted\n      const isSorted = this.options.sortConfig?.fieldId === field.id;\n\n      // Icons container (for sort / group / slice indicators)\n      const iconsContainer = document.createElement(\"span\");\n      iconsContainer.style.display = \"flex\";\n      iconsContainer.style.alignItems = \"center\";\n      iconsContainer.style.gap = \"6px\";\n\n      // Show Sort icon\n      if (isSorted) {\n        const sortIcon = document.createElement(\"span\");\n        sortIcon.className = \"column-sort-icon\";\n        const direction =\n          this.options.sortConfig?.direction === \"ASC\"\n            ? \"sort-asc\"\n            : \"sort-desc\";\n        sortIcon.innerHTML = this.getIconSvg(direction);\n        sortIcon.style.display = \"inline-flex\";\n        sortIcon.style.alignItems = \"center\";\n        sortIcon.style.color = \"var(--vscode-foreground)\";\n        sortIcon.style.opacity = \"0.85\";\n        sortIcon.title =\n          this.options.sortConfig?.direction === \"ASC\"\n            ? \"Sorted ascending\"\n            : \"Sorted descending\";\n        iconsContainer.appendChild(sortIcon);\n      }\n\n      // Show Group icon\n      if (isGrouped) {\n        const groupIcon = document.createElement(\"span\");\n        groupIcon.className = \"column-group-icon\";\n        groupIcon.innerHTML = this.getIconSvg(\"rows\");\n        groupIcon.style.display = \"inline-flex\";\n        groupIcon.style.alignItems = \"center\";\n        groupIcon.style.color = \"var(--vscode-foreground)\";\n        groupIcon.style.opacity = \"0.85\";\n        groupIcon.title = \"Grouped by this field (click to clear)\";\n        groupIcon.style.cursor = \"pointer\";\n        groupIcon.addEventListener(\"click\", (ev) => {\n          ev.stopPropagation();\n          this.options.onClearGroup(field);\n        });\n        iconsContainer.appendChild(groupIcon);\n      }\n\n      // Show Slice icon\n      if (isSliced) {\n        const sliceIcon = document.createElement(\"span\");\n        sliceIcon.className = \"column-slice-icon\";\n        sliceIcon.innerHTML = this.getIconSvg(\"sliceby\");\n        sliceIcon.style.display = \"inline-flex\";\n        sliceIcon.style.alignItems = \"center\";\n        sliceIcon.style.color = \"var(--vscode-foreground)\";\n        sliceIcon.style.opacity = \"0.85\";\n        sliceIcon.title = \"Sliced by this field (click to clear)\";\n        sliceIcon.style.cursor = \"pointer\";\n        sliceIcon.addEventListener(\"click\", (ev) => {\n          ev.stopPropagation();\n          this.options.onClearSlice(field);\n        });\n        iconsContainer.appendChild(sliceIcon);\n      }\n\n      // Menu button (\u22EE)\n      const menuBtn = document.createElement(\"button\");\n      menuBtn.textContent = \"\u22EE\";\n      menuBtn.style.background = \"transparent\";\n      menuBtn.style.border = \"none\";\n      menuBtn.style.cursor = \"pointer\";\n      menuBtn.style.fontSize = \"16px\";\n      menuBtn.style.padding = \"2px 4px\";\n      menuBtn.style.color = \"var(--vscode-foreground)\";\n      menuBtn.style.opacity = \"0.6\";\n      menuBtn.style.borderRadius = \"3px\";\n      menuBtn.title = `${field.name} options`;\n\n      menuBtn.addEventListener(\"mouseenter\", () => {\n        menuBtn.style.opacity = \"1\";\n        menuBtn.style.background = \"var(--vscode-toolbar-hoverBackground)\";\n      });\n\n      menuBtn.addEventListener(\"mouseleave\", () => {\n        menuBtn.style.opacity = \"0.6\";\n        menuBtn.style.background = \"transparent\";\n      });\n\n      menuBtn.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        (th as HTMLElement).style.background =\n          \"var(--vscode-sideBar-background)\";\n        this.options.onHeaderMenu(e, field, th);\n      });\n\n      headerContent.appendChild(nameSpan);\n      if (isSorted || isGrouped || isSliced) {\n        headerContent.appendChild(iconsContainer);\n      }\n      headerContent.appendChild(menuBtn);\n      th.appendChild(headerContent);\n\n      th.addEventListener(\"pointerenter\", () => {\n        th.style.background = \"var(--vscode-list-hoverBackground)\";\n      });\n\n      th.addEventListener(\"pointerleave\", () => {\n        th.style.background = \"var(--vscode-sideBar-background)\";\n      });\n\n      this.styleHeaderCell(th);\n      tr.appendChild(th);\n    }\n\n    // Add Field column (+)\n    const thAddField = document.createElement(\"th\");\n    const addFieldBtn = document.createElement(\"button\");\n    addFieldBtn.textContent = \"+\";\n    addFieldBtn.style.background = \"transparent\";\n    addFieldBtn.style.border = \"none\";\n    addFieldBtn.style.cursor = \"pointer\";\n    addFieldBtn.style.fontSize = \"18px\";\n    addFieldBtn.style.fontWeight = \"bold\";\n    addFieldBtn.style.color = \"var(--vscode-foreground)\";\n    addFieldBtn.style.width = \"100%\";\n    addFieldBtn.style.height = \"100%\";\n    addFieldBtn.title = \"Show hidden fields\";\n\n    addFieldBtn.addEventListener(\"click\", () =>\n      this.options.onShowFieldsMenu(addFieldBtn),\n    );\n\n    thAddField.appendChild(addFieldBtn);\n    this.styleHeaderCell(thAddField);\n    thAddField.style.textAlign = \"center\";\n    thAddField.style.width = \"50px\";\n    tr.appendChild(thAddField);\n\n    thead.appendChild(tr);\n    table.appendChild(thead);\n  }\n\n  private styleHeaderCell(th: HTMLTableCellElement) {\n    th.style.padding = \"8px\";\n    th.style.textAlign = \"left\";\n    th.style.whiteSpace = \"nowrap\";\n    th.style.overflow = \"hidden\";\n    th.style.textOverflow = \"ellipsis\";\n    th.style.borderRight = \"1px solid var(--vscode-panel-border)\";\n    th.style.borderBottom = \"1px solid var(--vscode-panel-border)\";\n    th.style.position = \"sticky\";\n    th.style.top = \"0\";\n    th.style.zIndex = \"11\";\n    th.style.background = \"var(--vscode-sideBar-background)\";\n    th.style.height = \"32px\";\n    th.style.boxSizing = \"border-box\";\n  }\n}\n", "/**\n * Fields Menu\n * Dropdown used from table plus-column. Shows project fields split into Visible / Hidden sections\n * First item is a \"+ New field\" button. Visible fields show a leading checkmark.\n */\n\nexport interface FieldItem {\n  id: string;\n  name: string;\n  iconClass?: string;\n  dataType?: string;\n}\n\nexport interface FieldsMenuOptions {\n  fields: FieldItem[];\n  visibleFieldIds: Set<string>;\n  onToggleVisibility?: (fieldId: string, visible: boolean) => void;\n  onCreateField?: () => void;\n}\n\nexport class FieldsMenu {\n  private options: FieldsMenuOptions;\n  private menuElement: HTMLElement | null = null;\n  private backdropElement: HTMLElement | null = null;\n\n  constructor(options: FieldsMenuOptions) {\n    this.options = options;\n  }\n\n  public show(anchorElement: HTMLElement) {\n    this.hide();\n\n    // Backdrop to detect outside clicks\n    this.backdropElement = document.createElement(\"div\");\n    this.backdropElement.style.position = \"fixed\";\n    this.backdropElement.style.top = \"0\";\n    this.backdropElement.style.left = \"0\";\n    this.backdropElement.style.right = \"0\";\n    this.backdropElement.style.bottom = \"0\";\n    this.backdropElement.style.zIndex = \"998\";\n    this.backdropElement.addEventListener(\"click\", () => this.hide());\n    document.body.appendChild(this.backdropElement);\n\n    // Create menu offscreen first so we can measure size and pick best placement\n    this.menuElement = document.createElement(\"div\");\n    this.menuElement.className = \"fields-menu\";\n    this.menuElement.style.position = \"absolute\";\n    this.menuElement.style.visibility = \"hidden\";\n    this.menuElement.style.left = \"0px\";\n    this.menuElement.style.top = \"0px\";\n    this.menuElement.style.background = \"var(--vscode-menu-background)\";\n    this.menuElement.style.border = \"1px solid var(--vscode-menu-border)\";\n    this.menuElement.style.borderRadius = \"4px\";\n    this.menuElement.style.boxShadow = \"0 2px 8px rgba(0,0,0,0.15)\";\n    this.menuElement.style.minWidth = \"220px\";\n    this.menuElement.style.padding = \"6px 0\";\n    // When there are many fields, allow the menu to scroll vertically instead of growing off-screen\n    this.menuElement.style.maxHeight = \"60vh\";\n    this.menuElement.style.overflowY = \"auto\";\n    this.menuElement.style.boxSizing = \"border-box\";\n    this.menuElement.style.zIndex = \"1000\";\n    this.menuElement.style.fontSize = \"13px\";\n\n    // Append hidden, build, measure, then position\n    document.body.appendChild(this.menuElement);\n    this.buildMenu();\n\n    const rect = anchorElement.getBoundingClientRect();\n    const menuRect = this.menuElement.getBoundingClientRect();\n    const margin = 8;\n    const vw = window.innerWidth || document.documentElement.clientWidth;\n    const vh = window.innerHeight || document.documentElement.clientHeight;\n\n    // Vertical placement: prefer below, otherwise above, else clamp\n    let top = rect.bottom + margin;\n    if (rect.bottom + menuRect.height + margin > vh) {\n      // try above\n      if (rect.top - menuRect.height - margin >= 0) {\n        top = rect.top - menuRect.height - margin;\n      } else {\n        // clamp within viewport\n        top = Math.max(\n          margin,\n          Math.min(vh - menuRect.height - margin, rect.bottom + margin),\n        );\n      }\n    }\n\n    // Horizontal placement: align left by default, but adjust if overflowing\n    let left = rect.left;\n    if (rect.left + menuRect.width + margin > vw) {\n      // try align to right edge of anchor\n      left = Math.max(margin, rect.right - menuRect.width);\n    }\n    // Clamp left\n    left = Math.max(margin, Math.min(left, vw - menuRect.width - margin));\n\n    this.menuElement.style.top = `${Math.round(top)}px`;\n    this.menuElement.style.left = `${Math.round(left)}px`;\n    this.menuElement.style.visibility = \"visible\";\n  }\n\n  public hide() {\n    if (this.menuElement) {\n      this.menuElement.remove();\n      this.menuElement = null;\n    }\n    if (this.backdropElement) {\n      this.backdropElement.remove();\n      this.backdropElement = null;\n    }\n  }\n\n  private buildMenu() {\n    if (!this.menuElement) return;\n\n    // Header\n    const title = document.createElement(\"div\");\n    title.style.display = \"flex\";\n    title.style.alignItems = \"center\";\n    title.style.padding = \"6px 12px\";\n    title.style.fontWeight = \"600\";\n    title.style.color = \"var(--vscode-descriptionForeground)\";\n    title.style.fontSize = \"12px\";\n    title.style.textTransform = \"uppercase\";\n\n    const icon = document.createElement(\"i\");\n    icon.className = \"octicon octicon-note\";\n    icon.style.marginRight = \"8px\";\n    title.appendChild(icon);\n\n    const label = document.createElement(\"span\");\n    label.textContent = \"Fields\";\n    title.appendChild(label);\n\n    this.menuElement.appendChild(title);\n    this.addSeparator();\n\n    // + New field\n    const newField = document.createElement(\"div\");\n    newField.style.display = \"flex\";\n    newField.style.alignItems = \"center\";\n    newField.style.padding = \"6px 12px\";\n    newField.style.cursor = \"pointer\";\n    newField.style.color = \"var(--vscode-menu-foreground)\";\n    newField.innerHTML = `<span style=\"margin-right:8px;font-weight:700\">+</span><span>New field</span>`;\n    newField.addEventListener(\"mouseenter\", () => {\n      newField.style.background = \"var(--vscode-menu-selectionBackground)\";\n      newField.style.color = \"var(--vscode-menu-selectionForeground)\";\n    });\n    newField.addEventListener(\"mouseleave\", () => {\n      newField.style.background = \"transparent\";\n      newField.style.color = \"var(--vscode-menu-foreground)\";\n    });\n    newField.addEventListener(\"click\", () => {\n      this.options.onCreateField?.();\n      this.hide();\n    });\n    this.menuElement.appendChild(newField);\n\n    this.addSeparator();\n\n    const visible = this.options.fields.filter((f) =>\n      this.options.visibleFieldIds.has(f.id),\n    );\n    const hidden = this.options.fields.filter(\n      (f) => !this.options.visibleFieldIds.has(f.id),\n    );\n\n    this.addSectionHeader(\"Visible fields\");\n    if (visible.length === 0) this.addEmptyRow(\"No visible fields\");\n    else visible.forEach((f) => this.addFieldRow(f, true));\n\n    this.addSeparator();\n\n    this.addSectionHeader(\"Hidden fields\");\n    if (hidden.length === 0) this.addEmptyRow(\"No hidden fields\");\n    else hidden.forEach((f) => this.addFieldRow(f, false));\n  }\n\n  private addSectionHeader(text: string) {\n    if (!this.menuElement) return;\n    const h = document.createElement(\"div\");\n    h.textContent = text;\n    h.style.padding = \"6px 12px\";\n    h.style.fontSize = \"11px\";\n    h.style.fontWeight = \"600\";\n    h.style.color = \"var(--vscode-descriptionForeground)\";\n    h.style.textTransform = \"uppercase\";\n    this.menuElement.appendChild(h);\n  }\n  private addEmptyRow(text: string) {\n    if (!this.menuElement) return;\n    const r = document.createElement(\"div\");\n    r.textContent = text;\n    r.style.padding = \"6px 12px\";\n    r.style.color = \"var(--vscode-menu-foreground)\";\n    r.style.opacity = \"0.8\";\n    this.menuElement.appendChild(r);\n  }\n\n  private addFieldRow(field: FieldItem, visible: boolean) {\n    if (!this.menuElement) return;\n    const row = document.createElement(\"div\");\n    row.style.display = \"flex\";\n    row.style.alignItems = \"center\";\n    row.style.padding = \"6px 12px\";\n    row.style.cursor = \"pointer\";\n    row.style.color = \"var(--vscode-menu-foreground)\";\n\n    if (visible) {\n      const c = document.createElement(\"span\");\n      c.textContent = \"\u2713\";\n      c.style.marginRight = \"8px\";\n      c.style.color = \"var(--vscode-menu-selectionForeground)\";\n      row.appendChild(c);\n    } else {\n      const s = document.createElement(\"span\");\n      s.style.display = \"inline-block\";\n      s.style.width = \"14px\";\n      s.style.marginRight = \"8px\";\n      row.appendChild(s);\n    }\n\n    // Determine icon SVG based on field dataType or provided iconClass. Use placeholder tokens for octicon paths so user can replace them later.\n    const iconHtml = this.getIconForField(field);\n    const icon = document.createElement(\"span\");\n    icon.innerHTML = iconHtml;\n    icon.style.marginRight = \"8px\";\n    icon.style.display = \"inline-flex\";\n    icon.style.alignItems = \"center\";\n    row.appendChild(icon);\n    const label = document.createElement(\"span\");\n    label.textContent = field.name;\n    label.style.flex = \"1\";\n    label.style.whiteSpace = \"nowrap\";\n    label.style.overflow = \"hidden\";\n    label.style.textOverflow = \"ellipsis\";\n    row.appendChild(label);\n\n    row.addEventListener(\"mouseenter\", () => {\n      row.style.background = \"var(--vscode-menu-selectionBackground)\";\n      row.style.color = \"var(--vscode-menu-selectionForeground)\";\n    });\n    row.addEventListener(\"mouseleave\", () => {\n      row.style.background = \"transparent\";\n      row.style.color = \"var(--vscode-menu-foreground)\";\n    });\n    row.addEventListener(\"click\", () => {\n      const newVisible = !visible;\n      this.options.onToggleVisibility?.(field.id, newVisible);\n      if (newVisible) this.options.visibleFieldIds.add(field.id);\n      else this.options.visibleFieldIds.delete(field.id);\n      this.menuElement && ((this.menuElement.innerHTML = \"\"), this.buildMenu());\n    });\n\n    this.menuElement.appendChild(row);\n  }\n\n  private addSeparator() {\n    if (!this.menuElement) return;\n    const s = document.createElement(\"div\");\n    s.style.height = \"1px\";\n    s.style.background = \"var(--vscode-menu-separatorBackground)\";\n    s.style.margin = \"6px 0\";\n    this.menuElement.appendChild(s);\n  }\n\n  /**\n   * Return inline SVG HTML for the given field using the icon registry.\n   */\n  private getIconForField(field: FieldItem): string {\n    const dataType = (field.dataType || \"\").toString().toLowerCase();\n\n    // If getIconNameForDataType is available from the icon registry, use it\n    if (\n      typeof (window as any).getIconNameForDataType === \"function\" &&\n      typeof (window as any).getIconSvg === \"function\"\n    ) {\n      const iconName = (window as any).getIconNameForDataType(dataType);\n      return (window as any).getIconSvg(iconName);\n    }\n\n    // Fallback: use provided CSS iconClass if available\n    if (field.iconClass) {\n      return `<i class=\"${field.iconClass}\"></i>`;\n    }\n\n    // Ultimate fallback: empty span\n    return \"<span></span>\";\n  }\n}\n\nexport default FieldsMenu;\n", "export function escapeHtml(s: any): string {\n  return s\n    ? String(s)\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n    : \"\";\n}\n\nexport function normalizeColor(color: any): string | null {\n  if (!color) return null;\n  let n = String(color).trim();\n  if (\n    /^#?[0-9a-f]{3}$/i.test(n) ||\n    /^#?[0-9a-f]{6}$/i.test(n) ||\n    /^#?[0-9a-f]{8}$/i.test(n)\n  ) {\n    let b = n[0] === \"#\" ? n.slice(1) : n;\n    return \"#\" + (b.length === 8 ? b.substring(0, 6) : b);\n  }\n  let s = {\n    GRAY: \"#848d97\",\n    RED: \"#f85149\",\n    ORANGE: \"#db6d28\",\n    YELLOW: \"#d29922\",\n    GREEN: \"#3fb950\",\n    BLUE: \"#2f81f7\",\n    PURPLE: \"#a371f7\",\n    PINK: \"#db61a2\",\n    BLACK: \"#000000\",\n    WHITE: \"#ffffff\",\n  };\n  let u = n.toUpperCase();\n  return (s as any)[u] || null;\n}\n\nexport function addAlpha(color: any, alpha: any): string | null {\n  if (!color) return null;\n  let s = color.replace(\"#\", \"\");\n  let u = (b: any) => parseInt(b, 16);\n  if (s.length === 3) {\n    let b = u(s[0] + s[0]),\n      S = u(s[1] + s[1]),\n      v = u(s[2] + s[2]);\n    return \"rgba(\" + b + \",\" + S + \",\" + v + \",\" + alpha + \")\";\n  }\n  if (s.length === 6 || s.length === 8) {\n    let b = s.length === 8 ? s.substring(0, 6) : s,\n      S = u(s.substring(0, 2)),\n      v = u(b.substring(2, 4)),\n      C = u(b.substring(4, 6));\n    return \"rgba(\" + S + \",\" + v + \",\" + C + \",\" + alpha + \")\";\n  }\n  return null;\n}\n\nexport function getContrastColor(color: any): string {\n  if (!color) return \"#333333\";\n  let n = color.replace(\"#\", \"\");\n  let s = (C: any) => parseInt(C, 16);\n  let u, b, S;\n  if (n.length === 3)\n    ((u = s(n[0] + n[0])), (b = s(n[1] + n[1])), (S = s(n[2] + n[2])));\n  else if (n.length === 6 || n.length === 8) {\n    let C = n.length === 8 ? n.substring(0, 6) : n;\n    ((u = s(C.substring(0, 2))),\n      (b = s(C.substring(2, 4))),\n      (S = s(C.substring(4, 6))));\n  } else return \"#333333\";\n  return 0.2126 * (u / 255) + 0.7152 * (b / 255) + 0.0722 * (S / 255) > 0.6\n    ? \"#111111\"\n    : \"#ffffff\";\n}\n", "/**\n * Slice Panel Component\n * Shows unique values for a field with counts, allowing quick filtering\n */\n\nimport { normalizeColor, escapeHtml } from \"../utils\";\n\nexport class SlicePanel {\n  private container: HTMLElement;\n  private field: any;\n  private items: any[];\n  private panelElement: HTMLElement | null = null;\n  private onValueSelectCallback?: (value: any) => void;\n  private onFieldChangeCallback?: (field: any) => void;\n  private allFields: any[];\n\n  constructor(\n    container: HTMLElement,\n    field: any,\n    items: any[],\n    allFields?: any[],\n  ) {\n    this.container = container;\n    this.field = field;\n    this.items = items;\n    this.allFields = allFields || [];\n  }\n\n  /**\n   * Render the slice panel\n   */\n  public render(): void {\n    this.close(); // Close any existing panel\n\n    // Create panel\n    this.panelElement = document.createElement(\"div\");\n    this.panelElement.className = \"slice-panel\";\n    this.panelElement.style.position = \"relative\";\n    this.panelElement.style.float = \"left\";\n    // Restore persisted width if available\n    try {\n      const stored = localStorage.getItem(\"ghProjects.slicePanel.width\");\n      if (stored) this.panelElement.style.width = stored;\n      else this.panelElement.style.width = \"280px\";\n    } catch (e) {\n      this.panelElement.style.width = \"280px\";\n    }\n    this.panelElement.style.marginRight = \"12px\";\n    this.panelElement.style.background = \"var(--vscode-sideBar-background)\";\n    this.panelElement.style.border = \"1px solid var(--vscode-sideBar-border)\";\n    this.panelElement.style.borderRadius = \"6px\";\n    this.panelElement.style.display = \"flex\";\n    this.panelElement.style.flexDirection = \"column\";\n    this.panelElement.style.overflow = \"hidden\";\n    this.panelElement.style.maxHeight = \"600px\";\n\n    // Temporary debug overlay: shows last resolved parent metadata and progress\n    const debugOverlay = document.createElement(\"pre\");\n    debugOverlay.className = \"slice-panel-debug-overlay\";\n    debugOverlay.style.position = \"absolute\";\n    debugOverlay.style.left = \"8px\";\n    debugOverlay.style.bottom = \"8px\";\n    debugOverlay.style.right = \"8px\";\n    debugOverlay.style.maxHeight = \"120px\";\n    debugOverlay.style.overflow = \"auto\";\n    debugOverlay.style.background = \"rgba(0,0,0,0.6)\";\n    debugOverlay.style.color = \"white\";\n    debugOverlay.style.fontSize = \"11px\";\n    debugOverlay.style.padding = \"8px\";\n    debugOverlay.style.borderRadius = \"6px\";\n    debugOverlay.style.zIndex = \"200\";\n    debugOverlay.style.display = \"none\"; // hidden by default\n    debugOverlay.title = \"SlicePanel debug (click to show/hide)\";\n    debugOverlay.addEventListener(\"click\", () => {\n      debugOverlay.style.display =\n        debugOverlay.style.display === \"none\" ? \"block\" : \"none\";\n    });\n    this.panelElement.appendChild(debugOverlay);\n\n    // Add resizer on the right edge to allow adjusting panel width\n    const resizer = document.createElement(\"div\");\n    resizer.className = \"slice-panel-resizer\";\n    resizer.style.position = \"absolute\";\n    resizer.style.top = \"0\";\n    resizer.style.right = \"0\";\n    resizer.style.bottom = \"0\";\n    resizer.style.width = \"6px\";\n    resizer.style.cursor = \"col-resize\";\n    resizer.style.zIndex = \"100\";\n    this.panelElement.appendChild(resizer);\n\n    let startX: number | null = null;\n    let startWidth: number | null = null;\n\n    const onMouseMove = (e: MouseEvent) => {\n      if (startX == null || startWidth == null) return;\n      const dx = e.pageX - startX;\n      const newW = Math.max(160, startWidth + dx);\n      this.panelElement!.style.width = newW + \"px\";\n    };\n\n    const onMouseUp = () => {\n      if (startX == null) return;\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      try {\n        localStorage.setItem(\n          \"ghProjects.slicePanel.width\",\n          this.panelElement!.style.width,\n        );\n      } catch (e) {}\n      startX = null;\n      startWidth = null;\n    };\n\n    resizer.addEventListener(\"mousedown\", (ev: MouseEvent) => {\n      ev.preventDefault();\n      startX = ev.pageX;\n      startWidth = this.panelElement ? this.panelElement.offsetWidth : 280;\n      document.addEventListener(\"mousemove\", onMouseMove);\n      document.addEventListener(\"mouseup\", onMouseUp);\n    });\n\n    // Header with dropdown\n    const header = document.createElement(\"div\");\n    header.style.padding = \"12px\";\n    header.style.borderBottom = \"1px solid var(--vscode-sideBar-border)\";\n    header.style.display = \"flex\";\n    header.style.flexDirection = \"column\";\n    header.style.gap = \"8px\";\n\n    const headerTop = document.createElement(\"div\");\n    headerTop.style.display = \"flex\";\n    headerTop.style.alignItems = \"center\";\n    headerTop.style.gap = \"8px\";\n\n    const sliceLabel = document.createElement(\"span\");\n    sliceLabel.textContent = \"Slice by\";\n    sliceLabel.style.fontSize = \"11px\";\n    sliceLabel.style.fontWeight = \"600\";\n    sliceLabel.style.color = \"var(--vscode-descriptionForeground)\";\n    sliceLabel.style.textTransform = \"uppercase\";\n    sliceLabel.style.letterSpacing = \"0.5px\";\n    headerTop.appendChild(sliceLabel);\n\n    // Field dropdown/button\n    const fieldButton = document.createElement(\"button\");\n    fieldButton.textContent = this.field.name;\n    fieldButton.style.flex = \"1\";\n    fieldButton.style.padding = \"6px 12px\";\n    fieldButton.style.background = \"var(--vscode-button-secondaryBackground)\";\n    fieldButton.style.color = \"var(--vscode-button-secondaryForeground)\";\n    fieldButton.style.border = \"1px solid var(--vscode-button-border)\";\n    fieldButton.style.borderRadius = \"4px\";\n    fieldButton.style.cursor = \"pointer\";\n    fieldButton.style.fontSize = \"13px\";\n    fieldButton.style.fontWeight = \"500\";\n    fieldButton.style.textAlign = \"left\";\n    fieldButton.style.display = \"flex\";\n    fieldButton.style.justifyContent = \"space-between\";\n    fieldButton.style.alignItems = \"center\";\n\n    // Add dropdown arrow\n    const arrow = document.createElement(\"span\");\n    arrow.textContent = \"\u25BC\";\n    arrow.style.fontSize = \"10px\";\n    arrow.style.marginLeft = \"auto\";\n    fieldButton.appendChild(arrow);\n\n    // Add dropdown menu on click\n    fieldButton.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      this.showFieldDropdown(fieldButton);\n    });\n\n    headerTop.appendChild(fieldButton);\n    header.appendChild(headerTop);\n\n    this.panelElement.appendChild(header);\n\n    // Content\n    const content = document.createElement(\"div\");\n    content.style.flex = \"1\";\n    content.style.overflow = \"auto\";\n    content.style.padding = \"8px\";\n\n    this.renderValues(content);\n\n    this.panelElement.appendChild(content);\n    this.container.appendChild(this.panelElement);\n  }\n\n  /**\n   * Show dropdown menu to select a different field\n   */\n  private showFieldDropdown(anchorButton: HTMLElement): void {\n    // Get sliceable fields\n    const sliceableTypes = new Set([\n      \"assignees\",\n      \"single_select\",\n      \"parent_issue\",\n      \"iteration\",\n      \"number\",\n      \"date\",\n      \"milestone\",\n      \"repository\",\n      \"labels\",\n    ]);\n\n    const sliceableFields = this.allFields.filter((f) => {\n      const dataType = (f.dataType || \"\").toLowerCase();\n      return sliceableTypes.has(dataType);\n    });\n\n    if (sliceableFields.length === 0) return;\n\n    // Create dropdown\n    const dropdown = document.createElement(\"div\");\n    dropdown.style.position = \"absolute\";\n    dropdown.style.top = `${anchorButton.getBoundingClientRect().bottom + 4}px`;\n    dropdown.style.left = `${anchorButton.getBoundingClientRect().left}px`;\n    dropdown.style.minWidth = `${anchorButton.offsetWidth}px`;\n    dropdown.style.background = \"var(--vscode-dropdown-background)\";\n    dropdown.style.border = \"1px solid var(--vscode-dropdown-border)\";\n    dropdown.style.borderRadius = \"4px\";\n    dropdown.style.boxShadow = \"0 4px 8px rgba(0,0,0,0.2)\";\n    dropdown.style.zIndex = \"1000\";\n    dropdown.style.maxHeight = \"300px\";\n    dropdown.style.overflowY = \"auto\";\n\n    sliceableFields.forEach((field) => {\n      const item = document.createElement(\"div\");\n      item.style.display = \"flex\";\n      item.style.alignItems = \"center\";\n\n      // Icon for field type\n      const iconSpan = document.createElement(\"span\");\n      iconSpan.style.display = \"inline-flex\";\n      iconSpan.style.alignItems = \"center\";\n      iconSpan.style.justifyContent = \"center\";\n      iconSpan.style.width = \"18px\";\n      iconSpan.style.marginRight = \"8px\";\n      iconSpan.innerHTML = this.getIconForDataType(\n        (field.dataType || \"\").toString().toLowerCase(),\n      );\n      item.appendChild(iconSpan);\n\n      const labelSpan = document.createElement(\"span\");\n      labelSpan.textContent = field.name;\n      item.appendChild(labelSpan);\n      item.style.padding = \"8px 12px\";\n      item.style.cursor = \"pointer\";\n      item.style.fontSize = \"13px\";\n      item.style.color = \"var(--vscode-dropdown-foreground)\";\n\n      if (field.id === this.field.id) {\n        item.style.background = \"var(--vscode-list-activeSelectionBackground)\";\n        item.style.color = \"var(--vscode-list-activeSelectionForeground)\";\n      }\n\n      item.addEventListener(\"mouseenter\", () => {\n        if (field.id !== this.field.id) {\n          item.style.background = \"var(--vscode-list-hoverBackground)\";\n        }\n      });\n\n      item.addEventListener(\"mouseleave\", () => {\n        if (field.id !== this.field.id) {\n          item.style.background = \"transparent\";\n        }\n      });\n\n      item.addEventListener(\"click\", () => {\n        this.field = field;\n        dropdown.remove();\n        backdrop.remove();\n        this.render();\n        if (this.onFieldChangeCallback) {\n          this.onFieldChangeCallback(field);\n        }\n      });\n\n      dropdown.appendChild(item);\n    });\n\n    // Backdrop to close dropdown\n    const backdrop = document.createElement(\"div\");\n    backdrop.style.position = \"fixed\";\n    backdrop.style.top = \"0\";\n    backdrop.style.left = \"0\";\n    backdrop.style.right = \"0\";\n    backdrop.style.bottom = \"0\";\n    backdrop.style.zIndex = \"999\";\n\n    backdrop.addEventListener(\"click\", () => {\n      dropdown.remove();\n      backdrop.remove();\n    });\n\n    document.body.appendChild(backdrop);\n    document.body.appendChild(dropdown);\n  }\n\n  /**\n   * Return inline SVG HTML for a given dataType using the icon registry.\n   */\n  private getIconForDataType(dataType: string): string {\n    // Use the icon registry if available (shared with FieldsMenu)\n    if (\n      typeof (window as any).getIconNameForDataType === \"function\" &&\n      typeof (window as any).getIconSvg === \"function\"\n    ) {\n      const iconName = (window as any).getIconNameForDataType(dataType);\n      return (window as any).getIconSvg(iconName);\n    }\n\n    // Fallback: empty span\n    return \"<span></span>\";\n  }\n\n  /**\n   * Render the list of unique values with counts\n   */\n  private renderValues(container: HTMLElement): void {\n    // Get unique values and their counts\n    const valueCounts = this.getValueCounts();\n\n    if (valueCounts.size === 0) {\n      const empty = document.createElement(\"div\");\n      empty.textContent = \"No values\";\n      empty.style.padding = \"8px\";\n      empty.style.color = \"var(--vscode-descriptionForeground)\";\n      container.appendChild(empty);\n      return;\n    }\n\n    // Sort by count (descending)\n    const sorted = Array.from(valueCounts.entries()).sort(\n      (a, b) => b[1].count - a[1].count,\n    );\n\n    // Helper: resolve parent item and compute progress (done/total/pct)\n    const resolveParentProgress = (parentMeta: any) => {\n      const result: any = {\n        resolved: null,\n        statusColor: null,\n        number: null,\n        title: null,\n        done: 0,\n        total: 0,\n        pct: 0,\n      };\n      if (!parentMeta) return result;\n\n      // Build identifier list from parentMeta\n      const identifiers: string[] = [];\n      if (parentMeta.number) identifiers.push(String(parentMeta.number));\n      if (parentMeta.id) identifiers.push(String(parentMeta.id));\n      if (parentMeta.url) identifiers.push(String(parentMeta.url));\n      if (parentMeta.title) identifiers.push(String(parentMeta.title));\n\n      // Try to find a matching item in this.items (same logic as grouping header resolution)\n      const found = this.items.find((A: any) => {\n        const d = (A && (A.content || (A.raw && A.raw.itemContent))) || null;\n        if (!d) return false;\n        const M: string[] = [];\n        if (d.number) M.push(String(d.number));\n        if (d.id) M.push(String(d.id));\n        if (d.url) M.push(String(d.url));\n        if (d.title) M.push(String(d.title));\n        if (d.name) M.push(String(d.name));\n        if (d.raw && d.raw.number) M.push(String(d.raw.number));\n        if (d.raw && d.raw.id) M.push(String(d.raw.id));\n        if (d.raw && d.raw.url) M.push(String(d.raw.url));\n        for (let o of identifiers) {\n          for (let m of M) {\n            if (o && m && String(o) === String(m)) return true;\n          }\n        }\n        return false;\n      });\n\n      if (!found) return result; // single strategy: only use resolved item in snapshot\n\n      result.resolved = found;\n      const content =\n        found.content || (found.raw && found.raw.itemContent) || null;\n      result.title =\n        content && (content.title || content.name)\n          ? content.title || content.name\n          : found.title || found.name || null;\n      result.number =\n        content && content.number\n          ? String(content.number)\n          : found.number || found.id || null;\n\n      // Determine status color from single_select field in parent (if present)\n      if (Array.isArray(found.fieldValues)) {\n        const statusFV = found.fieldValues.find(\n          (v: any) =>\n            v && v.type === \"single_select\" && v.option && v.option.name,\n        );\n        if (statusFV && statusFV.option) {\n          try {\n            const c =\n              statusFV.option.color ||\n              statusFV.option.id ||\n              statusFV.option.name ||\n              null;\n            result.statusColor = normalizeColor(c) || null;\n          } catch (e) {}\n        }\n\n        // Try to read aggregate progress field (sub_issues_progress or synthesized with total/done)\n        const agg = found.fieldValues.find(\n          (v: any) =>\n            v &&\n            (v.type === \"sub_issues_progress\" ||\n              (v.total != null && v.done != null)),\n        );\n        if (agg && agg.total != null) {\n          result.total = Number(agg.total || 0);\n          result.done = Number(agg.done || 0);\n          result.pct =\n            result.total > 0\n              ? Math.round((result.done / result.total) * 100)\n              : 0;\n        }\n      }\n\n      return result;\n    };\n\n    // Render each value with grouping-style presentation\n    sorted.forEach(([key, { value, count, rawValue }]) => {\n      const item = document.createElement(\"div\");\n      item.className = \"slice-value-item\";\n      item.style.padding = \"10px 12px\";\n      item.style.cursor = \"pointer\";\n      item.style.borderRadius = \"4px\";\n      item.style.marginBottom = \"4px\";\n      item.style.display = \"flex\";\n      item.style.alignItems = \"center\";\n      item.style.gap = \"8px\";\n      item.style.transition = \"background-color 0.15s ease\";\n\n      const dataType = (this.field.dataType || \"\").toLowerCase();\n\n      // Normalize parent meta for this iteration so both visual and label rendering use the same source\n      let parentMetaForIteration: any = null;\n      if (dataType === \"parent_issue\" && rawValue) {\n        parentMetaForIteration =\n          rawValue.parent ||\n          rawValue.parentIssue ||\n          rawValue.issue ||\n          rawValue.item ||\n          rawValue.value ||\n          rawValue;\n      }\n\n      // Left visual area: avatar / color dot / repo icon\n      const leftVisual = document.createElement(\"div\");\n      leftVisual.style.display = \"flex\";\n      leftVisual.style.alignItems = \"center\";\n      leftVisual.style.gap = \"8px\";\n      leftVisual.style.flex = \"0 0 auto\";\n\n      // Helper: create a color dot\n      const makeColorDot = (c: string | null) => {\n        const dot = document.createElement(\"span\");\n        dot.style.display = \"inline-block\";\n        dot.style.width = \"12px\";\n        dot.style.height = \"12px\";\n        dot.style.borderRadius = \"50%\";\n        dot.style.flexShrink = \"0\";\n        dot.style.backgroundColor = c || \"var(--vscode-descriptionForeground)\";\n        return dot;\n      };\n\n      let visualAppended = false;\n\n      // Assignees: rawValue may be an individual assignee object (from getValueCounts)\n      if (dataType === \"assignees\" && rawValue) {\n        const a = rawValue;\n        const avatarUrl =\n          a && (a.avatarUrl || a.avatar || a.imageUrl || a.avatar_url);\n        if (avatarUrl) {\n          const avatarEl = document.createElement(\"span\");\n          avatarEl.innerHTML =\n            '<span title=\"' +\n            escapeHtml(a.login || a.name || a.id || \"\") +\n            '\" style=\"display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url(' +\n            escapeHtml(avatarUrl) +\n            ');border:2px solid var(--vscode-editor-background)\"></span>';\n          leftVisual.appendChild(avatarEl);\n          visualAppended = true;\n        } else {\n          // fallback color dot\n          leftVisual.appendChild(makeColorDot(null));\n          visualAppended = true;\n        }\n      }\n\n      // Repository: show repo icon\n      if (!visualAppended && dataType === \"repository\") {\n        const repoIcon = document.createElement(\"span\");\n        repoIcon.innerHTML =\n          '<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:var(--vscode-icon-foreground)\"><path fill=\"currentColor\" d=\"M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z\"/></svg>';\n        leftVisual.appendChild(repoIcon);\n        visualAppended = true;\n      }\n\n      // Parent issue: try to extract parent title and show a color dot (use resolved parent status color if possible)\n      if (!visualAppended && dataType === \"parent_issue\") {\n        const prog = parentMetaForIteration\n          ? resolveParentProgress(parentMetaForIteration)\n          : null;\n        // Prefer status color from resolved parent progress, then try parentMeta.option/color fields\n        let dotColor = prog && prog.statusColor ? prog.statusColor : null;\n        if (!dotColor && parentMetaForIteration) {\n          dotColor =\n            normalizeColor(\n              parentMetaForIteration.color ||\n                (parentMetaForIteration.option &&\n                  parentMetaForIteration.option.color) ||\n                parentMetaForIteration.statusColor ||\n                parentMetaForIteration.status?.color,\n            ) || null;\n        }\n\n        if (\n          parentMetaForIteration &&\n          (parentMetaForIteration.title ||\n            parentMetaForIteration.name ||\n            parentMetaForIteration.number ||\n            (prog && (prog.title || prog.number)))\n        ) {\n          const pd = makeColorDot(dotColor);\n          leftVisual.appendChild(pd);\n          visualAppended = true;\n        }\n      }\n\n      // Labels: ensure label color dot comes from label metadata\n      if (!visualAppended && dataType === \"labels\" && rawValue) {\n        // rawValue here is the individual label object\n        const lab = rawValue;\n        const colorCandidate =\n          lab && (lab.color || lab.colorName || lab.hex || lab.name);\n        const normalized = normalizeColor(colorCandidate);\n        leftVisual.appendChild(makeColorDot(normalized));\n        visualAppended = true;\n      }\n\n      // If still no specialized visual, fall back to normalized color from options/iterations\n      if (!visualAppended) {\n        let colorVal: any = null;\n        if (dataType === \"single_select\" && rawValue && rawValue.option) {\n          colorVal =\n            rawValue.option.color || rawValue.option.name || rawValue.option.id;\n        }\n        // If repository/parent/iteration/milestone provide color directly, prefer it\n        if (!colorVal && rawValue && (rawValue.color || rawValue.colorName)) {\n          colorVal = rawValue.color || rawValue.colorName;\n        }\n        if (!colorVal && Array.isArray(this.field.options)) {\n          try {\n            const found = (this.field.options || []).find(\n              (o: any) =>\n                String(o.name) === String(key) ||\n                String(o.id) ===\n                  String(\n                    rawValue &&\n                      (rawValue.optionId ||\n                        (rawValue.option && rawValue.option.id)),\n                  ),\n            );\n            if (found) colorVal = found.color || found.name || found.id;\n          } catch (e) {}\n        }\n        if (\n          !colorVal &&\n          this.field &&\n          this.field.configuration &&\n          Array.isArray(this.field.configuration.iterations)\n        ) {\n          try {\n            const iter = (this.field.configuration.iterations || []).find(\n              (it: any) =>\n                String(it.title) === String(key) ||\n                String(it.id) ===\n                  String(\n                    rawValue &&\n                      (rawValue.iterationId ||\n                        (rawValue.iteration && rawValue.iteration.id)),\n                  ),\n            );\n            if (iter)\n              colorVal = iter.color || iter.name || iter.title || iter.id;\n          } catch (e) {}\n        }\n        const normalized = normalizeColor(colorVal);\n        leftVisual.appendChild(makeColorDot(normalized));\n      }\n\n      item.appendChild(leftVisual);\n\n      // Label column\n      const labelColumn = document.createElement(\"div\");\n      labelColumn.style.flex = \"1\";\n      labelColumn.style.display = \"flex\";\n      labelColumn.style.flexDirection = \"column\";\n      labelColumn.style.minWidth = \"0\";\n\n      // For parent_issue we render a custom header below (avoid duplicating the generic label)\n      let label: HTMLElement | null = null;\n      if (dataType !== \"parent_issue\") {\n        label = document.createElement(\"span\");\n        label.textContent = key;\n        label.style.fontSize = \"13px\";\n        label.style.fontWeight = \"500\";\n        // Allow wrapping to next line instead of overflowing\n        label.style.whiteSpace = \"normal\";\n        label.style.wordBreak = \"break-word\";\n        label.style.overflow = \"hidden\";\n        labelColumn.appendChild(label);\n      }\n\n      // Add description for single_select\n      if (dataType === \"single_select\") {\n        // Prefer metadata description from field.options if available, else rawValue.option.description\n        let descText: string | null = null;\n        try {\n          if (rawValue && rawValue.option && rawValue.option.description)\n            descText = rawValue.option.description;\n          else if (Array.isArray(this.field.options)) {\n            const found = (this.field.options || []).find(\n              (o: any) =>\n                String(o.name) === String(key) ||\n                String(o.id) ===\n                  String(\n                    rawValue &&\n                      (rawValue.optionId ||\n                        (rawValue.option && rawValue.option.id)),\n                  ),\n            );\n            if (found && found.description) descText = found.description;\n          }\n        } catch (e) {}\n\n        if (descText) {\n          const desc = document.createElement(\"span\");\n          desc.textContent = descText;\n          desc.style.fontSize = \"11px\";\n          desc.style.color = \"var(--vscode-descriptionForeground)\";\n          desc.style.whiteSpace = \"normal\";\n          desc.style.wordBreak = \"break-word\";\n          desc.style.overflow = \"hidden\";\n          desc.style.maxHeight = \"3.6em\";\n          labelColumn.appendChild(desc);\n        }\n      }\n\n      // For parent_issue, show title snippet if available\n      if (dataType === \"parent_issue\" && rawValue) {\n        const p =\n          parentMetaForIteration ||\n          rawValue.parent ||\n          rawValue.parentIssue ||\n          rawValue.issue ||\n          rawValue.item ||\n          rawValue.value ||\n          null;\n        const prog = resolveParentProgress(p);\n        // Title + number\n        const titleText = prog.title || (p && (p.title || p.name)) || key;\n        const titleEl = document.createElement(\"div\");\n        titleEl.style.display = \"flex\";\n        titleEl.style.gap = \"8px\";\n        titleEl.style.alignItems = \"baseline\";\n        const tspan = document.createElement(\"span\");\n        // Append number inline into the title text so it appears immediately after the title\n        const displayedTitle = String(titleText).slice(0, 120);\n        tspan.textContent = prog.number\n          ? `${displayedTitle} #${String(prog.number)}`\n          : displayedTitle;\n        tspan.style.fontSize = \"13px\";\n        tspan.style.fontWeight = \"600\";\n        tspan.style.whiteSpace = \"normal\";\n        tspan.style.wordBreak = \"break-word\";\n        titleEl.appendChild(tspan);\n        labelColumn.appendChild(titleEl);\n\n        // Progress summary and bar\n        if (prog.total && prog.total > 0) {\n          const summary = document.createElement(\"div\");\n          summary.style.display = \"flex\";\n          summary.style.alignItems = \"center\";\n          summary.style.gap = \"8px\";\n          summary.style.marginTop = \"6px\";\n\n          const doneText = document.createElement(\"div\");\n          doneText.textContent = `${prog.done}/${prog.total}`;\n          doneText.style.color = \"var(--vscode-descriptionForeground)\";\n          doneText.style.fontSize = \"12px\";\n          doneText.style.fontVariantNumeric = \"tabular-nums\";\n          summary.appendChild(doneText);\n\n          const bar = document.createElement(\"div\");\n          bar.style.display = \"inline-block\";\n          bar.style.width = \"120px\";\n          bar.style.height = \"10px\";\n          bar.style.background = \"transparent\";\n          bar.style.border = \"1px solid var(--vscode-focusBorder)\";\n          bar.style.borderRadius = \"6px\";\n          bar.style.overflow = \"hidden\";\n          const fill = document.createElement(\"div\");\n          fill.style.height = \"100%\";\n          fill.style.width = String(prog.pct) + \"%\";\n          fill.style.background = \"var(--vscode-focusBorder)\";\n          bar.appendChild(fill);\n          summary.appendChild(bar);\n\n          labelColumn.appendChild(summary);\n        }\n      }\n\n      // Iteration: show date range if available\n      if (dataType === \"iteration\") {\n        try {\n          // rawValue may be an FV with iteration object, or we can look up field.configuration.iterations\n          const iterObj =\n            (rawValue &&\n              (rawValue.iteration || rawValue.configuration || rawValue)) ||\n            null;\n          let iterCandidate: any = null;\n          if (\n            iterObj &&\n            iterObj.startDate &&\n            (iterObj.duration || iterObj.length)\n          ) {\n            iterCandidate = iterObj;\n          } else if (\n            this.field &&\n            this.field.configuration &&\n            Array.isArray(this.field.configuration.iterations)\n          ) {\n            const found = (this.field.configuration.iterations || []).find(\n              (it: any) =>\n                String(it.title || it.name) === String(key) ||\n                String(it.id) ===\n                  String(\n                    rawValue &&\n                      (rawValue.iterationId ||\n                        (rawValue.iteration && rawValue.iteration.id)),\n                  ),\n            );\n            if (found) iterCandidate = found;\n          }\n\n          if (iterCandidate) {\n            const start = iterCandidate.startDate || iterCandidate.start;\n            const duration =\n              iterCandidate.duration ||\n              iterCandidate.length ||\n              iterCandidate.days;\n            if (start && duration) {\n              const s = new Date(start);\n              const e = new Date(\n                s.getTime() + Number(duration || 0) * 24 * 60 * 60 * 1000,\n              );\n              const sStr = s.toLocaleDateString(\"en-US\", {\n                month: \"short\",\n                day: \"numeric\",\n              });\n              const eStr = e.toLocaleDateString(\"en-US\", {\n                month: \"short\",\n                day: \"numeric\",\n              });\n              const rangeEl = document.createElement(\"div\");\n              rangeEl.textContent = `${sStr} \u2014 ${eStr}`;\n              rangeEl.style.fontSize = \"11px\";\n              rangeEl.style.color = \"var(--vscode-descriptionForeground)\";\n              rangeEl.style.marginTop = \"4px\";\n              labelColumn.appendChild(rangeEl);\n            }\n          }\n        } catch (e) {}\n      }\n\n      item.appendChild(labelColumn);\n\n      // Count circle (like grouping)\n      const countCircle = document.createElement(\"span\");\n      countCircle.style.display = \"inline-flex\";\n      countCircle.style.alignItems = \"center\";\n      countCircle.style.justifyContent = \"center\";\n      countCircle.style.minWidth = \"24px\";\n      countCircle.style.height = \"24px\";\n      countCircle.style.borderRadius = \"50%\";\n      countCircle.style.background = \"var(--vscode-input-background)\";\n      countCircle.style.border = \"1px solid var(--vscode-panel-border)\";\n      countCircle.style.color = \"var(--vscode-foreground)\";\n      countCircle.style.fontSize = \"12px\";\n      countCircle.style.fontWeight = \"600\";\n      countCircle.style.padding = \"0 6px\";\n      countCircle.style.boxSizing = \"border-box\";\n      countCircle.textContent = String(count);\n\n      item.appendChild(countCircle);\n\n      // Hover effect\n      item.addEventListener(\"mouseenter\", () => {\n        item.style.background = \"var(--vscode-list-hoverBackground)\";\n      });\n\n      item.addEventListener(\"mouseleave\", () => {\n        item.style.background = \"transparent\";\n      });\n\n      // Click handler\n      item.addEventListener(\"click\", () => {\n        if (this.onValueSelectCallback) {\n          this.onValueSelectCallback(value);\n        }\n      });\n\n      container.appendChild(item);\n    });\n  }\n\n  /**\n   * Get unique values and their counts\n   */\n  private getValueCounts(): Map<\n    string,\n    { value: any; count: number; rawValue: any }\n  > {\n    const counts = new Map<\n      string,\n      { value: any; count: number; rawValue: any }\n    >();\n\n    const dataType = (this.field.dataType || \"\").toLowerCase();\n\n    this.items.forEach((item) => {\n      const fv = item.fieldValues?.find(\n        (f: any) =>\n          f.fieldId === this.field.id || f.fieldName === this.field.name,\n      );\n      if (!fv) {\n        const key = \"(empty)\";\n        const existing = counts.get(key);\n        if (existing) existing.count++;\n        else counts.set(key, { value: null, count: 1, rawValue: null });\n        return;\n      }\n\n      // Handle multi-value fields (labels, assignees)\n      if (dataType === \"labels\") {\n        // GitHub sometimes nests labels under .labels.nodes or .labels\n        const labelsArr =\n          fv.labels && Array.isArray(fv.labels.nodes)\n            ? fv.labels.nodes\n            : Array.isArray(fv.labels)\n              ? fv.labels\n              : null;\n        if (Array.isArray(labelsArr) && labelsArr.length > 0) {\n          labelsArr.forEach((lab: any) => {\n            const name =\n              lab && (lab.name || lab.title)\n                ? String(lab.name || lab.title)\n                : \"(empty)\";\n            const key = this.formatValue(name);\n            const existing = counts.get(key);\n            if (existing) existing.count++;\n            else counts.set(key, { value: name, count: 1, rawValue: lab });\n          });\n          return;\n        }\n      }\n\n      if (dataType === \"assignees\") {\n        const ass = fv.assignees || (fv.assignee ? [fv.assignee] : null);\n        if (Array.isArray(ass) && ass.length > 0) {\n          ass.forEach((a: any) => {\n            const name = String(a.login || a.name || a.id || \"(unknown)\");\n            const key = this.formatValue(name);\n            const existing = counts.get(key);\n            if (existing) existing.count++;\n            else counts.set(key, { value: a, count: 1, rawValue: a });\n          });\n          return;\n        }\n      }\n\n      // Single-value fields and other complex types\n      let value: any = null;\n      let rawValue: any = null;\n\n      try {\n        if (dataType === \"single_select\") {\n          value = fv.option?.name || fv.name || fv.value;\n          rawValue = fv;\n        } else if (dataType === \"iteration\") {\n          value = fv.iteration?.title || fv.title || fv.value;\n          rawValue = fv;\n        } else if (dataType === \"parent_issue\") {\n          const p =\n            fv.parent ||\n            fv.parentIssue ||\n            fv.issue ||\n            fv.item ||\n            fv.value ||\n            null;\n          if (p) value = p.title || p.name || p.number || p.id || p.url || null;\n          rawValue = p || fv;\n        } else if (dataType === \"milestone\") {\n          value = fv.milestone?.title || fv.milestone?.name || fv.value || null;\n          rawValue = fv.milestone || fv;\n        } else if (dataType === \"repository\") {\n          value =\n            fv.repository?.nameWithOwner ||\n            fv.repository?.full_name ||\n            fv.repository?.name ||\n            fv.value ||\n            null;\n          rawValue = fv.repository || fv;\n        } else if (dataType === \"number\") {\n          value = fv.number != null ? fv.number : fv.value;\n          rawValue = fv;\n        } else if (dataType === \"date\") {\n          value = fv.date || fv.value || null;\n          rawValue = fv;\n        } else {\n          // fallback: text, title, other simple values\n          value = fv.text || fv.title || fv.value || null;\n          rawValue = fv;\n        }\n      } catch (e) {\n        value = fv.text || fv.title || fv.value || null;\n        rawValue = fv;\n      }\n\n      const key =\n        value === null || value === undefined || value === \"\"\n          ? \"(empty)\"\n          : this.formatValue(value);\n      const existing = counts.get(key);\n      if (existing) existing.count++;\n      else counts.set(key, { value, count: 1, rawValue });\n    });\n\n    return counts;\n  }\n\n  /**\n   * Extract value from field value object\n   */\n  private extractValue(fieldValue: any): any {\n    // Deprecated: primary logic moved into getValueCounts which handles multi-value types.\n    const dataType = (this.field.dataType || \"\").toLowerCase();\n    if (!fieldValue) return null;\n    if (dataType === \"single_select\")\n      return fieldValue.option?.name || fieldValue.name || fieldValue.value;\n    if (dataType === \"iteration\")\n      return (\n        fieldValue.iteration?.title || fieldValue.title || fieldValue.value\n      );\n    if (dataType === \"assignees\")\n      return fieldValue.assignees || fieldValue.assignee || null;\n    if (dataType === \"labels\") return fieldValue.labels || null;\n    if (dataType === \"parent_issue\")\n      return (\n        fieldValue.parent ||\n        fieldValue.parentIssue ||\n        fieldValue.issue ||\n        fieldValue.item ||\n        fieldValue.value ||\n        null\n      );\n    if (dataType === \"milestone\")\n      return fieldValue.milestone || fieldValue.value || null;\n    if (dataType === \"repository\")\n      return fieldValue.repository || fieldValue.value || null;\n    if (dataType === \"number\")\n      return fieldValue.number != null ? fieldValue.number : fieldValue.value;\n    if (dataType === \"date\") return fieldValue.date || fieldValue.value || null;\n    return fieldValue.text || fieldValue.title || fieldValue.value || null;\n  }\n\n  /**\n   * Format value for display\n   */\n  private formatValue(value: any): string {\n    if (value === null || value === undefined) {\n      return \"(empty)\";\n    }\n    return String(value);\n  }\n\n  /**\n   * Register callback for value selection\n   */\n  public onValueSelect(callback: (value: any) => void): void {\n    this.onValueSelectCallback = callback;\n  }\n\n  /**\n   * Register callback for field change\n   */\n  public onFieldChange(callback: (field: any) => void): void {\n    this.onFieldChangeCallback = callback;\n  }\n\n  /**\n   * Close and remove the panel\n   */\n  public close(): void {\n    if (this.panelElement) {\n      this.panelElement.remove();\n      this.panelElement = null;\n    }\n  }\n}\n", "import type { FieldConfig } from \"../../../lib/types\";\n\nexport interface SortConfig {\n  fieldId: string;\n  direction: \"ASC\" | \"DESC\";\n  secondary?: {\n    fieldId: string;\n    direction: \"ASC\" | \"DESC\";\n  };\n}\n\n/**\n * Parse sortByFields from GitHub GraphQL response into SortConfig\n */\nexport function parseSortByFields(sortByFields: any): SortConfig | null {\n  if (!sortByFields || !sortByFields.nodes || sortByFields.nodes.length === 0) {\n    return null;\n  }\n\n  const primary = sortByFields.nodes[0];\n  if (!primary || !primary.field) {\n    return null;\n  }\n\n  const config: SortConfig = {\n    fieldId: primary.field.id || primary.field.name,\n    direction: primary.direction || \"ASC\",\n  };\n\n  // Add secondary sort if available\n  if (sortByFields.nodes.length > 1) {\n    const secondary = sortByFields.nodes[1];\n    if (secondary && secondary.field) {\n      config.secondary = {\n        fieldId: secondary.field.id || secondary.field.name,\n        direction: secondary.direction || \"ASC\",\n      };\n    }\n  }\n\n  return config;\n}\n\n/**\n * Sort items array based on sort configuration\n */\nexport function sortItems(\n  items: any[],\n  fields: FieldConfig[],\n  sortConfig: SortConfig,\n): any[] {\n  if (!sortConfig || items.length === 0) {\n    return items;\n  }\n\n  const field = fields.find(\n    (f) => f.id === sortConfig.fieldId || f.name === sortConfig.fieldId,\n  );\n  if (!field) {\n    return items;\n  }\n\n  // Create a copy to avoid mutating original\n  const sorted = [...items];\n\n  sorted.sort((a, b) => {\n    // Primary sort\n    const primaryResult = compareFieldValues(a, b, field, sortConfig.direction);\n\n    // If equal and secondary sort exists, use secondary\n    if (primaryResult === 0 && sortConfig.secondary) {\n      const secondaryField = fields.find(\n        (f) =>\n          f.id === sortConfig.secondary!.fieldId ||\n          f.name === sortConfig.secondary!.fieldId,\n      );\n      if (secondaryField) {\n        return compareFieldValues(\n          a,\n          b,\n          secondaryField,\n          sortConfig.secondary.direction,\n        );\n      }\n    }\n\n    return primaryResult;\n  });\n\n  return sorted;\n}\n\n/**\n * Compare two items by a specific field\n */\nexport function compareFieldValues(\n  a: any,\n  b: any,\n  field: FieldConfig,\n  direction: \"ASC\" | \"DESC\",\n): number {\n  // Find field values for both items\n  const aValue = getFieldValue(a, field);\n  const bValue = getFieldValue(b, field);\n\n  // Handle null/undefined\n  if (aValue === null && bValue === null) return 0;\n  if (aValue === null) return direction === \"ASC\" ? 1 : -1;\n  if (bValue === null) return direction === \"ASC\" ? -1 : 1;\n\n  let result = 0;\n  const dataType = (field.dataType || \"\").toLowerCase();\n\n  switch (dataType) {\n    case \"text\":\n    case \"title\":\n      result = compareText(aValue, bValue);\n      break;\n\n    case \"number\":\n      result = compareNumber(aValue, bValue);\n      break;\n\n    case \"date\":\n      result = compareDate(aValue, bValue);\n      break;\n\n    case \"single_select\":\n      result = compareSingleSelect(aValue, bValue, field);\n      break;\n\n    case \"iteration\":\n      result = compareIteration(aValue, bValue);\n      break;\n\n    case \"labels\":\n      result = compareLabels(aValue, bValue);\n      break;\n\n    case \"assignees\":\n    case \"repository\":\n    case \"milestone\":\n    case \"issue_type\":\n    case \"parent_issue\":\n    case \"tracked_by\":\n    case \"tracks\":\n    case \"reviewers\":\n      result = compareText(aValue, bValue);\n      break;\n\n    case \"linked_pull_requests\":\n    case \"sub_issues_progress\":\n      result = compareNumber(aValue, bValue);\n      break;\n\n    default:\n      // For unsupported data types, do not apply custom sorting\n      // and treat items as equal so their relative order is preserved.\n      result = 0;\n  }\n\n  return direction === \"ASC\" ? result : -result;\n}\n\n/**\n * Extract field value from item\n */\nfunction getFieldValue(item: any, field: FieldConfig): any {\n  const fieldValue = item.fieldValues?.find(\n    (fv: any) => fv.fieldId === field.id || fv.fieldName === field.name,\n  );\n\n  if (!fieldValue) return null;\n\n  const dataType = (field.dataType || \"\").toLowerCase();\n\n  switch (dataType) {\n    case \"text\": {\n      // Normal text fields use .text, but some Title-like fields may be\n      // mis-typed as TEXT while still carrying a structured title object.\n      if (fieldValue.text != null) return fieldValue.text;\n      return extractTitleLikeString(fieldValue, item);\n    }\n\n    case \"title\": {\n      // Title fields store a structured object; prefer a human-friendly string\n      return extractTitleLikeString(fieldValue, item);\n    }\n\n    case \"number\":\n      return fieldValue.number !== undefined ? fieldValue.number : null;\n\n    case \"date\":\n      return (\n        fieldValue.date || fieldValue.startDate || fieldValue.dueOn || null\n      );\n\n    case \"single_select\":\n      return fieldValue.option || fieldValue;\n\n    case \"iteration\":\n      return fieldValue;\n\n    case \"labels\":\n      return fieldValue.labels || [];\n\n    case \"assignees\": {\n      const list = fieldValue.assignees;\n      if (Array.isArray(list) && list.length > 0) {\n        const first = list[0];\n        return first.login || first.name || null;\n      }\n      return null;\n    }\n\n    case \"repository\": {\n      const repo = fieldValue.repository;\n      if (!repo) return null;\n      return (\n        repo.nameWithOwner || repo.name || repo.full_name || repo.id || null\n      );\n    }\n\n    case \"milestone\": {\n      const m = fieldValue.milestone;\n      if (!m) return null;\n      // Prefer due date when present (ISO date strings sort lexicographically),\n      // otherwise fall back to title/name.\n      return m.dueOn || m.title || m.name || null;\n    }\n\n    case \"issue_type\": {\n      if (fieldValue.text) return fieldValue.text;\n      if (fieldValue.option) {\n        return fieldValue.option.name || fieldValue.option.title || null;\n      }\n      return null;\n    }\n\n    case \"parent_issue\": {\n      const parent = fieldValue.parent;\n      if (!parent) return null;\n      if (parent.title) return parent.title;\n      if (typeof parent.number === \"number\") return String(parent.number);\n      return parent.id || null;\n    }\n\n    case \"linked_pull_requests\": {\n      const prs = fieldValue.pullRequests;\n      if (Array.isArray(prs) && prs.length > 0) {\n        const first = prs[0];\n        if (typeof first.number === \"number\") return first.number;\n        return first.title || null;\n      }\n      return null;\n    }\n\n    case \"reviewers\": {\n      const list = fieldValue.reviewers;\n      if (Array.isArray(list) && list.length > 0) {\n        const first = list[0];\n        return first.login || first.name || first.id || null;\n      }\n      return null;\n    }\n\n    case \"sub_issues_progress\": {\n      if (typeof fieldValue.percent === \"number\") return fieldValue.percent;\n      if (\n        typeof fieldValue.done === \"number\" &&\n        typeof fieldValue.total === \"number\" &&\n        fieldValue.total > 0\n      ) {\n        return (fieldValue.done / fieldValue.total) * 100;\n      }\n      return null;\n    }\n\n    case \"tracked_by\":\n    case \"tracks\": {\n      const issues = fieldValue.issues;\n      if (Array.isArray(issues) && issues.length > 0) {\n        const first = issues[0];\n        if (first.title) return first.title;\n        if (typeof first.number === \"number\") return String(first.number);\n        return first.id || null;\n      }\n      return null;\n    }\n\n    default:\n      return fieldValue;\n  }\n}\n\nfunction extractTitleLikeString(fieldValue: any, item: any): string | null {\n  if (!fieldValue) return null;\n\n  // Prefer the underlying raw node's text when present\n  const rawNode =\n    (fieldValue.title && fieldValue.title.raw) || fieldValue.raw || null;\n  if (rawNode && typeof rawNode.text === \"string\" && rawNode.text.trim()) {\n    return rawNode.text;\n  }\n\n  // Then look at the content object which often carries title/name\n  const content =\n    (fieldValue.title && fieldValue.title.content) ||\n    fieldValue.content ||\n    (rawNode && rawNode.itemContent) ||\n    (item && item.content) ||\n    null;\n\n  if (content) {\n    if (typeof content === \"string\" && content.trim()) {\n      return content;\n    }\n    if (typeof content.title === \"string\" && content.title.trim()) {\n      return content.title;\n    }\n    if (typeof content.name === \"string\" && content.name.trim()) {\n      return content.name;\n    }\n  }\n\n  // Fallbacks: occasionally a plain text field is reused\n  if (typeof fieldValue.text === \"string\" && fieldValue.text.trim()) {\n    return fieldValue.text;\n  }\n  if (rawNode && typeof rawNode.title === \"string\" && rawNode.title.trim()) {\n    return rawNode.title;\n  }\n\n  return null;\n}\n\n/**\n * Compare text values\n */\nfunction compareText(a: any, b: any): number {\n  const aStr = String(a || \"\").toLowerCase();\n  const bStr = String(b || \"\").toLowerCase();\n  return aStr.localeCompare(bStr);\n}\n\n/**\n * Compare number values\n */\nfunction compareNumber(a: any, b: any): number {\n  const aNum = typeof a === \"number\" ? a : parseFloat(a);\n  const bNum = typeof b === \"number\" ? b : parseFloat(b);\n\n  if (isNaN(aNum) && isNaN(bNum)) return 0;\n  if (isNaN(aNum)) return 1;\n  if (isNaN(bNum)) return -1;\n\n  return aNum - bNum;\n}\n\n/**\n * Compare date values\n */\nfunction compareDate(a: any, b: any): number {\n  const aDate = new Date(a);\n  const bDate = new Date(b);\n\n  if (isNaN(aDate.getTime()) && isNaN(bDate.getTime())) return 0;\n  if (isNaN(aDate.getTime())) return 1;\n  if (isNaN(bDate.getTime())) return -1;\n\n  return aDate.getTime() - bDate.getTime();\n}\n\n/**\n * Compare single select values by option order\n */\nfunction compareSingleSelect(a: any, b: any, field: FieldConfig): number {\n  const aOption = a.option || a;\n  const bOption = b.option || b;\n\n  if (!aOption || !bOption) {\n    return compareText(aOption?.name || \"\", bOption?.name || \"\");\n  }\n\n  // If field has options array, sort by position in array\n  if (field.options && Array.isArray(field.options)) {\n    const aIndex = field.options.findIndex(\n      (opt: any) => opt.id === aOption.id || opt.name === aOption.name,\n    );\n    const bIndex = field.options.findIndex(\n      (opt: any) => opt.id === bOption.id || opt.name === bOption.name,\n    );\n\n    if (aIndex !== -1 && bIndex !== -1) {\n      return aIndex - bIndex;\n    }\n  }\n\n  // Fallback to name comparison\n  return compareText(aOption.name, bOption.name);\n}\n\n/**\n * Compare iteration values by start date\n */\nfunction compareIteration(a: any, b: any): number {\n  const aDate = a.startDate || a.iteration?.startDate;\n  const bDate = b.startDate || b.iteration?.startDate;\n\n  if (!aDate && !bDate) {\n    // Sort by title if no dates\n    return compareText(\n      a.title || a.iteration?.title,\n      b.title || b.iteration?.title,\n    );\n  }\n\n  return compareDate(aDate, bDate);\n}\n\n/**\n * Compare labels by first label name\n */\nfunction compareLabels(a: any, b: any): number {\n  const aLabels = Array.isArray(a) ? a : [];\n  const bLabels = Array.isArray(b) ? b : [];\n\n  if (aLabels.length === 0 && bLabels.length === 0) return 0;\n  if (aLabels.length === 0) return 1;\n  if (bLabels.length === 0) return -1;\n\n  return compareText(aLabels[0].name, bLabels[0].name);\n}\n", "export class GroupDataService {\n  public static groupItems(items: any[], field: any): any[] {\n    // Normalize options: Single Select uses .options, Iteration uses .configuration.iterations\n    let options: any[] = [];\n    const dType = (field.dataType || \"\").toLowerCase();\n    if (dType === \"single_select\") {\n      options = field.options || [];\n    } else if (dType === \"iteration\") {\n      options = (field.configuration && field.configuration.iterations) || [];\n    }\n    // If we have explicit options (single select/iteration), use them to group.\n    if (options && options.length > 0) {\n      const groups: any[] = options.map((opt: any) => ({\n        option: opt,\n        items: [],\n      }));\n      const unassigned: any[] = [];\n\n      items.forEach((item, index) => {\n        const fv = item.fieldValues.find(\n          (v: any) =>\n            String(v.fieldId) === String(field.id) ||\n            v.fieldName === field.name,\n        );\n        let placed = false;\n\n        if (fv) {\n          // Match logic\n          let matchId: string | null = null;\n          let matchName: string | null = null;\n\n          if (dType === \"single_select\") {\n            matchId = fv.optionId || (fv.option && fv.option.id);\n            matchName = fv.name || (fv.option && fv.option.name);\n          } else if (dType === \"iteration\") {\n            matchId =\n              fv.iterationId || (fv.iteration && fv.iteration.id) || fv.id;\n            matchName = fv.title || (fv.iteration && fv.iteration.title);\n          }\n\n          if (matchId || matchName) {\n            const group = groups.find(\n              (g: any) =>\n                (matchId && String(g.option.id) === String(matchId)) ||\n                (matchName &&\n                  (String(g.option.name) === String(matchName) ||\n                    String(g.option.title) === String(matchName))),\n            );\n            if (group) {\n              group.items.push({ item, index });\n              placed = true;\n            }\n          }\n        }\n\n        if (!placed) {\n          unassigned.push({ item, index });\n        }\n      });\n\n      if (unassigned.length > 0) {\n        groups.push({\n          option: { name: \"Unassigned\", title: \"Unassigned\", color: \"GRAY\" },\n          items: unassigned,\n        });\n      }\n\n      return groups.filter((g: any) => g.items.length > 0);\n    }\n\n    // Fallback grouping: build groups based on actual item values (useful for assignees, repository, date, number, etc.)\n    const map = new Map<string, { option: any; items: any[] }>();\n    const unassignedFallback: any[] = [];\n\n    items.forEach((item, index) => {\n      const fv = item.fieldValues.find(\n        (v: any) =>\n          String(v.fieldId) === String(field.id) || v.fieldName === field.name,\n      );\n      let val: any = null;\n      if (fv) {\n        // Text/title/number/date straightforward\n        if (fv.text !== undefined) val = fv.text;\n        else if (fv.title !== undefined) val = fv.title;\n        else if (fv.number !== undefined) val = fv.number;\n        else if (fv.date !== undefined) val = fv.date;\n        // single_select / option\n        else if (fv.option)\n          val = fv.option.name || fv.option.title || fv.option.id;\n        // iteration\n        else if (fv.iteration) val = fv.iteration.title || fv.iteration.id;\n        // parent_issue - try parent/parentIssue/issue/item/value/raw\n        else if (\n          fv.parent ||\n          fv.parentIssue ||\n          fv.issue ||\n          fv.item ||\n          fv.value\n        ) {\n          const p =\n            fv.parent || fv.parentIssue || fv.issue || fv.item || fv.value;\n          if (p) {\n            // Prefer number, then id, then url, then title\n            val =\n              p.number ||\n              p.id ||\n              (p.raw && (p.raw.number || p.raw.id)) ||\n              p.url ||\n              p.title ||\n              p.name ||\n              null;\n          }\n        }\n        // assignees\n        else if (fv.assignees)\n          val = Array.isArray(fv.assignees)\n            ? fv.assignees.map((a: any) => a.login || a.name).join(\", \")\n            : fv.assignees;\n        // repository\n        else if (fv.repository)\n          val =\n            fv.repository.nameWithOwner ||\n            fv.repository.name ||\n            fv.repository.full_name ||\n            fv.repository.id;\n        // milestone\n        else if (fv.milestone)\n          val = fv.milestone.title || fv.milestone.id || fv.milestone.name;\n        else val = fv.value !== undefined ? fv.value : null;\n      }\n\n      if (val === null || val === undefined || val === \"\") {\n        unassignedFallback.push({ item, index });\n        return;\n      }\n\n      const key = String(val);\n      if (!map.has(key)) {\n        map.set(key, { option: { id: key, name: key, title: key }, items: [] });\n      }\n      map.get(key)!.items.push({ item, index });\n    });\n\n    const groupsArr = Array.from(map.values());\n    if (unassignedFallback.length > 0) {\n      groupsArr.push({\n        option: { name: \"Unassigned\", title: \"Unassigned\", color: \"GRAY\" },\n        items: unassignedFallback,\n      });\n    }\n\n    return groupsArr;\n  }\n}\n", "/**\n * Icon Registry\n * Central registry for all GitHub-style Octicon SVGs used in webviews.\n * Uses official GitHub Octicons SVG paths for consistency.\n */\n\n/**\n * All available icon names in the registry\n */\nexport type IconName =\n  // View layouts\n  | \"table\"\n  | \"project\"\n  | \"board\"\n  | \"roadmap\"\n  // Field types\n  | \"list\"\n  | \"people\"\n  | \"tag\"\n  | \"single-select\"\n  | \"issue-tracks\"\n  | \"issue-tracked-by\"\n  | \"iterations\"\n  | \"number\"\n  | \"calendar\"\n  | \"pull-request\"\n  | \"milestone\"\n  | \"repo\"\n  | \"typography\"\n  // Issues and pull requests\n  | \"issue-opened\"\n  | \"issue-closed\"\n  | \"issue-draft\"\n  | \"git-pull-request\"\n  | \"git-pull-request-closed\"\n  | \"git-pull-request-draft\"\n  | \"git-merge\"\n  | \"blocked\"\n  // Sorting and grouping\n  | \"sort-asc\"\n  | \"sort-desc\"\n  | \"rows\"\n  | \"sliceby\"\n  // Navigation and actions\n  | \"eye-closed\"\n  | \"arrow-left\"\n  | \"arrow-right\"\n  | \"triangle-down\"\n  | \"triangle-right\"\n  | \"note\";\n\n/**\n * Icon definition with SVG path data and metadata\n */\ninterface IconDefinition {\n  /**\n   * SVG path data (d attribute) or full inner HTML for multi-path icons\n   */\n  path: string;\n  /**\n   * ViewBox dimensions (default: \"0 0 16 16\")\n   */\n  viewBox?: string;\n  /**\n   * Whether this is full inner HTML (multiple paths/elements) vs single path\n   */\n  isInnerHTML?: boolean;\n}\n\n/**\n * Registry of all icon definitions with official GitHub Octicons SVG paths\n */\nconst ICON_DEFINITIONS: Record<IconName, IconDefinition> = {\n  // View layouts\n  table: {\n    path: \"M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H6.5V5Zm-13 1.5v7.75c0 .138.112.25.25.25H5v-8ZM5 5V1.5H1.75a.25.25 0 0 0-.25.25V5Z\",\n  },\n  project: {\n    path: \"M1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0ZM1.5 1.75v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25ZM11.75 3a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5a.75.75 0 0 1 .75-.75Zm-8.25.75a.75.75 0 0 1 1.5 0v5.5a.75.75 0 0 1-1.5 0ZM8 3a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 3Z\",\n  },\n  board: {\n    // Same as project icon\n    path: \"M1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0ZM1.5 1.75v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25ZM11.75 3a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5a.75.75 0 0 1 .75-.75Zm-8.25.75a.75.75 0 0 1 1.5 0v5.5a.75.75 0 0 1-1.5 0ZM8 3a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 3Z\",\n  },\n  roadmap: {\n    path: '<path d=\"M4.75 7a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5ZM5 4.75A.75.75 0 0 1 5.75 4h5.5a.75.75 0 0 1 0 1.5h-5.5A.75.75 0 0 1 5 4.75ZM6.75 10a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5Z\"></path><path d=\"M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25Z\"></path>',\n    isInnerHTML: true,\n  },\n\n  // Field types\n  list: {\n    path: \"M5.75 2.5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2 14a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-6a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM2 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\",\n  },\n  people: {\n    path: \"M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z\",\n  },\n  tag: {\n    path: '<path d=\"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25\"></path>',\n    isInnerHTML: true,\n  },\n  \"single-select\": {\n    path: '<path d=\"m5.06 7.356 2.795 2.833c.08.081.21.081.29 0l2.794-2.833c.13-.131.038-.356-.145-.356H5.206c-.183 0-.275.225-.145.356Z\"></path><path d=\"M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Z\"></path>',\n    isInnerHTML: true,\n  },\n  \"issue-tracks\": {\n    path: '<path d=\"M1.5 8a6.5 6.5 0 0 1 13 0A.75.75 0 0 0 16 8a8 8 0 1 0-8 8 .75.75 0 0 0 0-1.5A6.5 6.5 0 0 1 1.5 8Z\"></path><path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm3.573 5.823-2.896-2.896a.25.25 0 0 1 0-.354l2.896-2.896a.25.25 0 0 1 .427.177V11.5h3.25a.75.75 0 0 1 0 1.5H12v2.146a.25.25 0 0 1-.427.177Z\"></path>',\n    isInnerHTML: true,\n  },\n  \"issue-tracked-by\": {\n    path: '<path d=\"M1.5 8a6.5 6.5 0 0 1 13 0A.75.75 0 0 0 16 8a8 8 0 1 0-8 8 .75.75 0 0 0 0-1.5A6.5 6.5 0 0 1 1.5 8Z\"></path><path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm1.5 1.75a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm2.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z\"></path>',\n    isInnerHTML: true,\n  },\n  iterations: {\n    path: \"M2.5 7.25a4.75 4.75 0 0 1 9.5 0 .75.75 0 0 0 1.5 0 6.25 6.25 0 1 0-6.25 6.25H12v2.146c0 .223.27.335.427.177l2.896-2.896a.25.25 0 0 0 0-.354l-2.896-2.896a.25.25 0 0 0-.427.177V12H7.25A4.75 4.75 0 0 1 2.5 7.25Z\",\n  },\n  number: {\n    path: \"M9 4.75A.75.75 0 0 1 9.75 4h4a.75.75 0 0 1 .53 1.28l-1.89 1.892c.312.076.604.18.867.319.742.391 1.244 1.063 1.244 2.005 0 .653-.231 1.208-.629 1.627-.386.408-.894.653-1.408.777-1.01.243-2.225.063-3.124-.527a.751.751 0 0 1 .822-1.254c.534.35 1.32.474 1.951.322.306-.073.53-.201.67-.349.129-.136.218-.32.218-.596 0-.308-.123-.509-.444-.678-.373-.197-.98-.318-1.806-.318a.75.75 0 0 1-.53-1.28l1.72-1.72H9.75A.75.75 0 0 1 9 4.75Zm-3.587 5.763c-.35-.05-.77.113-.983.572a.75.75 0 1 1-1.36-.632c.508-1.094 1.589-1.565 2.558-1.425 1 .145 1.872.945 1.872 2.222 0 1.433-1.088 2.192-1.79 2.681-.308.216-.571.397-.772.573H7a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75c0-.69.3-1.211.67-1.61.348-.372.8-.676 1.15-.92.8-.56 1.18-.904 1.18-1.474 0-.473-.267-.69-.587-.737ZM5.604.089A.75.75 0 0 1 6 .75v4.77h.711a.75.75 0 0 1 0 1.5H3.759a.75.75 0 0 1 0-1.5H4.5V2.15l-.334.223a.75.75 0 0 1-.832-1.248l1.5-1a.75.75 0 0 1 .77-.037Z\",\n  },\n  calendar: {\n    path: \"M4.75 0a.75.75 0 0 1 .75.75V2h5V.75a.75.75 0 0 1 1.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 0 1 4.75 0ZM2.5 7.5v6.75c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V7.5Zm10.75-4H2.75a.25.25 0 0 0-.25.25V6h11V3.75a.25.25 0 0 0-.25-.25Z\",\n  },\n  \"pull-request\": {\n    path: \"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\",\n  },\n  milestone: {\n    path: \"M7.75 0a.75.75 0 0 1 .75.75V3h3.634c.414 0 .814.147 1.13.414l2.07 1.75a1.75 1.75 0 0 1 0 2.672l-2.07 1.75a1.75 1.75 0 0 1-1.13.414H8.5v5.25a.75.75 0 0 1-1.5 0V10H2.75A1.75 1.75 0 0 1 1 8.25v-3.5C1 3.784 1.784 3 2.75 3H7V.75A.75.75 0 0 1 7.75 0Zm4.384 8.5a.25.25 0 0 0 .161-.06l2.07-1.75a.248.248 0 0 0 0-.38l-2.07-1.75a.25.25 0 0 0-.161-.06H2.75a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h9.384Z\",\n  },\n  repo: {\n    path: \"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z\",\n  },\n  typography: {\n    path: \"M6.71 10H2.332l-.874 2.498a.75.75 0 0 1-1.415-.496l3.39-9.688a1.217 1.217 0 0 1 2.302.018l3.227 9.681a.75.75 0 0 1-1.423.474Zm3.13-4.358C10.53 4.374 11.87 4 13 4c1.5 0 3 .939 3 2.601v5.649a.75.75 0 0 1-1.448.275C13.995 12.82 13.3 13 12.5 13c-.77 0-1.514-.231-2.078-.709-.577-.488-.922-1.199-.922-2.041 0-.694.265-1.411.887-1.944C11 7.78 11.88 7.5 13 7.5h1.5v-.899c0-.54-.5-1.101-1.5-1.101-.869 0-1.528.282-1.84.858a.75.75 0 1 1-1.32-.716ZM6.21 8.5 4.574 3.594 2.857 8.5Zm8.29.5H13c-.881 0-1.375.22-1.637.444-.253.217-.363.5-.363.806 0 .408.155.697.39.896.249.21.63.354 1.11.354.732 0 1.26-.209 1.588-.449.35-.257.412-.495.412-.551Z\",\n  },\n\n  // Issues and pull requests\n  \"issue-opened\": {\n    path: '<path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\"></path><path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z\"></path>',\n    isInnerHTML: true,\n  },\n  \"issue-closed\": {\n    path: '<path d=\"M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z\"></path><path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z\"></path>',\n    isInnerHTML: true,\n  },\n  \"issue-draft\": {\n    path: '<path d=\"M14.307 11.655a.75.75 0 0 1 .165 1.048 8.05 8.05 0 0 1-1.769 1.77.75.75 0 0 1-.883-1.214 6.552 6.552 0 0 0 1.44-1.439.75.75 0 0 1 1.047-.165Zm-2.652-9.962a.75.75 0 0 1 1.048-.165 8.05 8.05 0 0 1 1.77 1.769.75.75 0 0 1-1.214.883 6.552 6.552 0 0 0-1.439-1.44.75.75 0 0 1-.165-1.047ZM6.749.097a8.074 8.074 0 0 1 2.502 0 .75.75 0 1 1-.233 1.482 6.558 6.558 0 0 0-2.036 0A.751.751 0 0 1 6.749.097ZM.955 6.125a.75.75 0 0 1 .624.857 6.558 6.558 0 0 0 0 2.036.75.75 0 1 1-1.482.233 8.074 8.074 0 0 1 0-2.502.75.75 0 0 1 .858-.624Zm14.09 0a.75.75 0 0 1 .858.624c.13.829.13 1.673 0 2.502a.75.75 0 1 1-1.482-.233 6.558 6.558 0 0 0 0-2.036.75.75 0 0 1 .624-.857Zm-8.92 8.92a.75.75 0 0 1 .857-.624 6.558 6.558 0 0 0 2.036 0 .75.75 0 1 1 .233 1.482c-.829.13-1.673.13-2.502 0a.75.75 0 0 1-.624-.858Zm-4.432-3.39a.75.75 0 0 1 1.048.165 6.552 6.552 0 0 0 1.439 1.44.751.751 0 0 1-.883 1.212 8.05 8.05 0 0 1-1.77-1.769.75.75 0 0 1 .166-1.048Zm2.652-9.962A.75.75 0 0 1 4.18 2.74a6.556 6.556 0 0 0-1.44 1.44.751.751 0 0 1-1.212-.883 8.05 8.05 0 0 1 1.769-1.77.75.75 0 0 1 1.048.166Z\"></path>',\n    isInnerHTML: true,\n  },\n  \"git-pull-request\": {\n    path: \"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\",\n  },\n  \"git-pull-request-closed\": {\n    path: \"M3.25 1A2.25 2.25 0 0 1 4 5.372v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.251 2.251 0 0 1 3.25 1Zm9.5 5.5a.75.75 0 0 1 .75.75v3.378a2.251 2.251 0 1 1-1.5 0V7.25a.75.75 0 0 1 .75-.75Zm-2.03-5.273a.75.75 0 0 1 1.06 0l.97.97.97-.97a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.97.97.97.97a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-.97-.97-.97.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l.97-.97-.97-.97a.75.75 0 0 1 0-1.06ZM2.5 3.25a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0ZM3.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm9.5 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\",\n  },\n  \"git-pull-request-draft\": {\n    path: \"M3.25 1A2.25 2.25 0 0 1 4 5.372v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.251 2.251 0 0 1 3.25 1Zm9.5 14a2.25 2.25 0 1 1 0-4.5 2.25 2.25 0 0 1 0 4.5ZM2.5 3.25a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0ZM3.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm9.5 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM14 7.5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0Zm0-4.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0Z\",\n  },\n  \"git-merge\": {\n    path: \"M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z\",\n  },\n  blocked: {\n    path: \"M4.467.22a.749.749 0 0 1 .53-.22h6.006c.199 0 .389.079.53.22l4.247 4.247c.141.14.22.331.22.53v6.006a.749.749 0 0 1-.22.53l-4.247 4.247a.749.749 0 0 1-.53.22H4.997a.749.749 0 0 1-.53-.22L.22 11.533a.749.749 0 0 1-.22-.53V4.997c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.308v5.384L5.308 14.5h5.384l3.808-3.808V5.308L10.692 1.5ZM4 7.75A.75.75 0 0 1 4.75 7h6.5a.75.75 0 0 1 0 1.5h-6.5A.75.75 0 0 1 4 7.75Z\",\n  },\n\n  // Sorting and grouping\n  \"sort-asc\": {\n    path: \"m12.927 2.573 3 3A.25.25 0 0 1 15.75 6H13.5v6.75a.75.75 0 0 1-1.5 0V6H9.75a.25.25 0 0 1-.177-.427l3-3a.25.25 0 0 1 .354 0ZM0 12.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75Zm0-4a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 8.25Zm0-4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 4.25Z\",\n  },\n  \"sort-desc\": {\n    path: \"M0 4.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 4.25Zm0 4a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 8.25Zm0 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75ZM13.5 10h2.25a.25.25 0 0 1 .177.427l-3 3a.25.25 0 0 1-.354 0l-3-3A.25.25 0 0 1 9.75 10H12V3.75a.75.75 0 0 1 1.5 0V10Z\",\n  },\n  rows: {\n    path: \"M16 10.75v2.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25v-2.5C0 9.784.784 9 1.75 9h12.5c.966 0 1.75.784 1.75 1.75Zm0-8v2.5A1.75 1.75 0 0 1 14.25 7H1.75A1.75 1.75 0 0 1 0 5.25v-2.5C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75Zm-1.75-.25H1.75a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Zm0 8H1.75a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Z\",\n  },\n  sliceby: {\n    path: \"M14.5 1.5H6.5V5H10C10.4142 5 10.75 5.33579 10.75 5.75C10.75 6.16421 10.4142 6.5 10 6.5H6.5V7.75C6.5 8.16421 6.16421 8.5 5.75 8.5C5.33579 8.5 5 8.16421 5 7.75V6.5H1.5V14.5H5V12.75C5 12.3358 5.33579 12 5.75 12C6.16421 12 6.5 12.3358 6.5 12.75V14.5H14.5V1.5ZM5 1.5V5H1.5V1.5H5ZM0 14.5V5.75V1.5C0 0.671573 0.671573 0 1.5 0H5.75H14.5C15.3284 0 16 0.671573 16 1.5V14.5C16 15.3284 15.3284 16 14.5 16H5.75H1.5C0.671573 16 0 15.3284 0 14.5ZM9.62012 9.58516C10.8677 9.59206 11.8826 8.58286 11.8826 7.33544V6.32279C11.8826 5.90857 12.2184 5.57279 12.6326 5.57279C13.0468 5.57279 13.3826 5.90857 13.3826 6.32279V7.33544C13.3826 9.4147 11.6909 11.0966 9.61182 11.0851L9.3826 11.0839L9.3826 12.9995C9.3826 13.2178 9.12245 13.3312 8.96248 13.1827L6.07989 10.506C5.97337 10.4071 5.97337 10.2385 6.07989 10.1396L8.96248 7.46291C9.12245 7.31438 9.3826 7.42782 9.3826 7.64611V9.58384L9.62012 9.58516Z\",\n  },\n\n  // Navigation and actions\n  \"eye-closed\": {\n    path: \"M.143 2.31a.75.75 0 0 1 1.047-.167l14.5 10.5a.75.75 0 1 1-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.67-.992-4.933-2.078C1.797 10.832.88 9.577.43 8.9a1.619 1.619 0 0 1 0-1.797c.353-.533.995-1.42 1.868-2.305L.31 3.357A.75.75 0 0 1 .143 2.31Zm1.536 5.622A.12.12 0 0 0 1.657 8c0 .021.006.045.022.068.412.621 1.242 1.75 2.366 2.717C5.175 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 0 1 6.058 7.52L3.529 5.688a14.207 14.207 0 0 0-1.85 2.244ZM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 1 1-.473-1.423A6.207 6.207 0 0 1 8 2c1.981 0 3.67.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.11.166-.248.365-.41.587a.75.75 0 1 1-1.21-.887c.148-.201.272-.382.371-.53a.119.119 0 0 0 0-.137c-.412-.621-1.242-1.75-2.366-2.717C10.825 4.242 9.473 3.5 8 3.5Z\",\n  },\n  \"arrow-left\": {\n    path: \"M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06Z\",\n  },\n  \"arrow-right\": {\n    path: \"M8.22 2.97a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l2.97-2.97H3.75a.75.75 0 0 1 0-1.5h7.44L8.22 4.03a.75.75 0 0 1 0-1.06Z\",\n  },\n  \"triangle-down\": {\n    path: \"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z\",\n  },\n  \"triangle-right\": {\n    path: \"M8.573 4.604a.25.25 0 01.427-.177l3.396 3.396a.25.25 0 010 .354l-3.396 3.396a.25.25 0 01-.427-.177V4.604z\",\n  },\n  note: {\n    path: \"M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25ZM3.5 6.25a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5h-4Z\",\n  },\n};\n\n/**\n * Options for customizing icon rendering\n */\nexport interface IconOptions {\n  /**\n   * Icon size (width and height in pixels, default: 14)\n   */\n  size?: number;\n  /**\n   * Additional CSS class names\n   */\n  className?: string;\n  /**\n   * Color fill (default: currentColor)\n   */\n  fill?: string;\n  /**\n   * ARIA label for accessibility (makes icon visible to screen readers)\n   */\n  ariaLabel?: string;\n  /**\n   * Title text for tooltip\n   */\n  title?: string;\n}\n\n/**\n * Get an inline SVG string for the specified icon\n * @param name - The icon name from the registry\n * @param options - Optional customization options\n * @returns HTML string containing the SVG element\n */\nexport function getIconSvg(name: IconName, options: IconOptions = {}): string {\n  const icon = ICON_DEFINITIONS[name];\n  if (!icon) {\n    console.warn(`Icon \"${name}\" not found in registry`);\n    return \"\";\n  }\n\n  const size = options.size ?? 14;\n  const className = options.className\n    ? `octicon octicon-${name} ${options.className}`\n    : `octicon octicon-${name}`;\n  const fill = options.fill ?? \"currentColor\";\n  const viewBox = icon.viewBox ?? \"0 0 16 16\";\n  const ariaHidden = options.ariaLabel ? \"false\" : \"true\";\n  const ariaLabel = options.ariaLabel\n    ? ` aria-label=\"${escapeHtml(options.ariaLabel)}\"`\n    : \"\";\n  const title = options.title\n    ? `<title>${escapeHtml(options.title)}</title>`\n    : \"\";\n\n  // Build SVG string\n  let innerContent: string;\n  if (icon.isInnerHTML) {\n    innerContent = icon.path;\n  } else {\n    innerContent = `<path d=\"${icon.path}\"/>`;\n  }\n\n  return `<svg class=\"${className}\" viewBox=\"${viewBox}\" width=\"${size}\" height=\"${size}\" fill=\"${fill}\" aria-hidden=\"${ariaHidden}\"${ariaLabel} focusable=\"false\">${title}${innerContent}</svg>`;\n}\n\n/**\n * Create a DOM element for the specified icon\n * @param name - The icon name from the registry\n * @param options - Optional customization options\n * @returns HTMLElement containing the icon\n */\nexport function createIconElement(\n  name: IconName,\n  options: IconOptions = {},\n): HTMLElement {\n  const wrapper = document.createElement(\"span\");\n  wrapper.innerHTML = getIconSvg(name, options);\n  return wrapper.firstElementChild as HTMLElement;\n}\n\n/**\n * Helper function to escape HTML special characters\n */\nfunction escapeHtml(text: string): string {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Map field data types to icon names\n * @param dataType - The field data type\n * @returns The corresponding icon name\n */\nexport function getIconNameForDataType(dataType: string): IconName {\n  const normalized = (dataType || \"\").toLowerCase();\n\n  switch (normalized) {\n    case \"title\":\n      return \"list\";\n    case \"assignees\":\n    case \"reviewers\":\n      return \"people\";\n    case \"single_select\":\n      return \"single-select\";\n    case \"labels\":\n      return \"tag\";\n    case \"parent_issue\":\n      return \"issue-tracks\";\n    case \"sub_issues_progress\":\n      return \"issue-tracked-by\";\n    case \"iteration\":\n      return \"iterations\";\n    case \"number\":\n    case \"numeric\":\n      return \"number\";\n    case \"date\":\n      return \"calendar\";\n    case \"linked_pull_request\":\n    case \"linked_pull_requests\":\n    case \"pull_request\":\n      return \"pull-request\";\n    case \"milestone\":\n      return \"milestone\";\n    case \"repository\":\n      return \"repo\";\n    case \"text\":\n    case \"string\":\n      return \"typography\";\n    default:\n      return \"tag\"; // fallback\n  }\n}\n", "import {\n  escapeHtml,\n  normalizeColor,\n  getContrastColor,\n  addAlpha,\n} from \"../../client/utils\";\nimport { getIconSvg } from \"../icons/iconRegistry\";\n\nexport interface CellRendererStrategy {\n  render(value: any, field: any, item: any, allItems: any): string;\n}\n\nexport class TitleRenderer implements CellRendererStrategy {\n  render(value: any, field: any, item: any, allItems: any): string {\n    let t =\n      (value &&\n        value.title &&\n        ((value.title.raw && value.title.raw.text) ||\n          (value.title.content &&\n            (value.title.content.title || value.title.content.name)) ||\n          (typeof value.title == \"string\" && value.title))) ||\n      (value && value.content && (value.content.title || value.content.name)) ||\n      (value && value.raw && value.raw.text) ||\n      \"\";\n    let o =\n      (value &&\n        value.title &&\n        value.title.content &&\n        value.title.content.number) ||\n      (value &&\n        value.raw &&\n        value.raw.itemContent &&\n        value.raw.itemContent.number) ||\n      (item && item.content && item.content.number) ||\n      \"\";\n    let l =\n      (value &&\n        value.title &&\n        value.title.content &&\n        value.title.content.url) ||\n      (value &&\n        value.raw &&\n        value.raw.itemContent &&\n        value.raw.itemContent.url) ||\n      (item && item.content && item.content.url) ||\n      \"\";\n    let r = null;\n    if (item && Array.isArray(item.fieldValues)) {\n      let w = item.fieldValues.find(\n        (x: any) =>\n          x &&\n          x.type === \"single_select\" &&\n          ((x.raw &&\n            x.raw.field &&\n            String(x.raw.field.name || \"\").toLowerCase() === \"status\") ||\n            (x.fieldName &&\n              String(x.fieldName || \"\").toLowerCase() === \"status\") ||\n            (x.field &&\n              x.field.name &&\n              String(x.field.name || \"\").toLowerCase() === \"status\")),\n      );\n      w &&\n        (r =\n          (w.option && (w.option.color || w.option.id || w.option.name)) ||\n          (w.raw && w.raw.color) ||\n          null);\n    }\n    let a = normalizeColor(r) || null,\n      p = a && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(a) ? a : \"#666666\",\n      g = escapeHtml(String(t || \"\")),\n      f = o ? escapeHtml(String(o)) : \"\";\n\n    // Determine high-level content type (issue vs pull request) and state\n    const content =\n      (value && value.title && value.title.content) ||\n      (value && value.raw && value.raw.itemContent) ||\n      (item && item.content) ||\n      null;\n\n    let isPullRequest = false;\n    let isDraft = false;\n    let isClosed = false;\n    let isMerged = false;\n    let isBlocked = false;\n\n    let parentIsDoneByStatus = false;\n    try {\n      if (content && typeof content.__typename === \"string\") {\n        const tname = String(content.__typename).toLowerCase();\n        if (tname.includes(\"pullrequest\")) isPullRequest = true;\n      }\n      if (!isPullRequest && content && typeof content.state === \"string\") {\n        const st = String(content.state).toUpperCase();\n        if (st === \"CLOSED\") isClosed = true;\n        if (st === \"MERGED\") isMerged = true;\n      }\n      if (isPullRequest) {\n        if (typeof (content as any).isDraft === \"boolean\") {\n          isDraft = !!(content as any).isDraft;\n        }\n        const st =\n          (content as any).state &&\n          String((content as any).state).toUpperCase();\n        if (st === \"CLOSED\") isClosed = true;\n        if ((content as any).merged) isMerged = true;\n      }\n      const completedNames = [\"done\", \"closed\", \"completed\", \"finished\"];\n\n      // Heuristic for blocked: label named \"blocked\" or status option named \"blocked\"\n      const hasBlockedLabel = !!(\n        content &&\n        content.labels &&\n        Array.isArray(content.labels.nodes) &&\n        content.labels.nodes.some(\n          (l: any) =>\n            l &&\n            typeof l.name === \"string\" &&\n            String(l.name).toLowerCase() === \"blocked\",\n        )\n      );\n      let hasBlockedStatus = false;\n      let hasDoneFromStatus = false;\n      if (Array.isArray(item && item.fieldValues)) {\n        const statusFv = (item.fieldValues as any[]).find((fv: any) => {\n          if (!fv || fv.type !== \"single_select\") return false;\n          const fname =\n            (fv.raw && fv.raw.field && fv.raw.field.name) ||\n            fv.fieldName ||\n            (fv.field && fv.field.name) ||\n            \"\";\n          return String(fname || \"\").toLowerCase() === \"status\";\n        });\n        if (statusFv && statusFv.option && statusFv.option.name) {\n          const optNameLower = String(statusFv.option.name).toLowerCase();\n          hasBlockedStatus = optNameLower === \"blocked\";\n          if (completedNames.includes(optNameLower)) {\n            hasDoneFromStatus = true;\n          }\n        }\n      }\n      isBlocked = hasBlockedLabel || hasBlockedStatus;\n\n      // Treat issues/PRs as effectively closed when status or labels indicate \"done\"-like states\n      const hasDoneLabel = !!(\n        content &&\n        content.labels &&\n        Array.isArray(content.labels.nodes) &&\n        content.labels.nodes.some((l: any) =>\n          completedNames.includes(\n            String((l && l.name) || \"\").toLowerCase(),\n          ),\n        )\n      );\n\n      if (hasDoneFromStatus || hasDoneLabel) {\n        // Do not override \"merged\" (PRs still show merge icon),\n        // but otherwise consider this effectively closed for icon purposes.\n        if (!isMerged) {\n          isClosed = true;\n        }\n      }\n    } catch (e) {}\n\n    // Choose base icon based on type/state\n    let iconName = \"issue-opened\";\n    if (isPullRequest) {\n      if (isMerged) iconName = \"git-merge\";\n      else if (isClosed) iconName = \"git-pull-request-closed\";\n      else if (isDraft) iconName = \"git-pull-request-draft\";\n      else iconName = \"git-pull-request\";\n    } else {\n      if (isClosed) iconName = \"issue-closed\";\n      else if (isDraft) iconName = \"issue-draft\";\n      else iconName = \"issue-opened\";\n    }\n\n    const baseIcon = getIconSvg(iconName as any, {\n      size: 14,\n      className: \"field-icon title-icon\",\n      fill: p,\n    });\n\n    const blockedIcon = isBlocked\n      ? getIconSvg(\"blocked\" as any, {\n          size: 10,\n          className: \"field-icon blocked-icon\",\n          fill: \"#dc3545\",\n        })\n      : \"\";\n\n    return (\n      '<a href=\"' +\n      escapeHtml(String(l || \"\")) +\n      '\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"text-decoration:none;color:inherit;display:inline-flex;align-items:center;gap:8px;width:100%;\">' +\n      \"<span style='position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0'>\" +\n      baseIcon +\n      (blockedIcon\n        ? \"<span class='blocked-overlay' style='position:absolute;right:-2px;bottom:-2px'>\" +\n          blockedIcon +\n          \"</span>\"\n        : \"\") +\n      \"</span>\" +\n      '<span style=\"flex:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block\">' +\n      g +\n      \"</span>\" +\n      (f\n        ? '<span style=\"flex:none;margin-left:6px;color:var(--vscode-descriptionForeground);white-space:nowrap\">#' +\n          f +\n          \"</span>\"\n        : \"\") +\n      \"</a>\"\n    );\n  }\n}\n\nexport class TextRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    return (\n      \"<div>\" +\n      escapeHtml((value && value.text) != null ? value.text : \"\") +\n      \"</div>\"\n    );\n  }\n}\n\nexport class NumberRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    let t =\n      value.number !== void 0 && value.number !== null\n        ? String(value.number)\n        : \"\";\n    return (\n      '<div style=\"text-align:right;font-variant-numeric:tabular-nums\">' +\n      escapeHtml(t) +\n      \"</div>\"\n    );\n  }\n}\n\nexport class DateRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    let t = value.date || value.startDate || value.dueOn || null;\n    if (!t) return \"<div></div>\";\n    try {\n      let o = new Date(t);\n      if (isNaN(o.getTime())) return \"<div>\" + escapeHtml(String(t)) + \"</div>\";\n      let l = o.toLocaleDateString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n        year: \"numeric\",\n      });\n      return \"<div>\" + escapeHtml(l) + \"</div>\";\n    } catch (e) {\n      return \"<div>\" + escapeHtml(String(t)) + \"</div>\";\n    }\n  }\n}\n\nexport class SingleSelectRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    let n =\n      (value && value.option && value.option.name) ||\n      (value && value.name) ||\n      \"\";\n    if (!n) return \"<div></div>\";\n    let c =\n      (value && value.option && (value.option.color || value.option.id)) ||\n      (value && value.color) ||\n      null;\n    // Match visual style of label field pills\n    let p = normalizeColor(c) || null,\n      hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p)),\n      border = p || \"#999999\",\n      bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\",\n      fg = p || \"#333333\";\n    return (\n      \"<span style='display:inline-block;padding:2px 8px;margin-right:6px;border-radius:999px;border:1px solid \" +\n      escapeHtml(border) +\n      \";background:\" +\n      escapeHtml(bg) +\n      \";color:\" +\n      escapeHtml(fg) +\n      \";font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis'>\" +\n      escapeHtml(n) +\n      \"</span>\"\n    );\n  }\n}\n\nexport class IterationRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    let i = value.iteration || value;\n    if (!i || !i.title) return \"<div></div>\";\n    // Use same pill design as labels/single-select fields\n    const name = String(i.title || \"\");\n    const rawColor = i.color || i.colour || null;\n    let p = normalizeColor(rawColor) || null,\n      hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p)),\n      border = p || \"#999999\",\n      bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\",\n      // Ensure text color matches the pill border color\n      fg = border;\n    return (\n      \"<span style='display:inline-block;padding:2px 8px;margin-right:6px;border-radius:999px;border:1px solid \" +\n      escapeHtml(border) +\n      \";background:\" +\n      escapeHtml(bg) +\n      \";color:\" +\n      escapeHtml(fg) +\n      \";font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis'>\" +\n      escapeHtml(name) +\n      \"</span>\"\n    );\n  }\n}\n\nexport class RepositoryRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    const r = value && (value.repository || value);\n    if (!r) return \"<div></div>\";\n\n    const name =\n      (r && (r.nameWithOwner || r.full_name || r.name || r.id || \"\")) || \"\";\n\n    if (!name) return \"<div></div>\";\n\n    const icon = getIconSvg(\"repo\", {\n      size: 16,\n      className: \"field-icon\",\n      ariaLabel: \"Repository\",\n    });\n\n    return (\n      '<div style=\"display:flex;align-items:center;gap:6px\">' +\n      icon +\n      \"<span>\" +\n      escapeHtml(String(name)) +\n      \"</span></div>\"\n    );\n  }\n}\n\n// Helper for contrast color (duplicated from utils to avoid circular deps if utils imports this, but utils is safe)\n// Removed local getContrastColor since we import it.\n\nexport class LabelsRenderer implements CellRendererStrategy {\n  render(value: any, field: any, item: any, allItems: any): string {\n    return (\n      \"<div>\" +\n      (value.labels || [])\n        .map((o: any) => {\n          let l = escapeHtml(o.name || \"\"),\n            r =\n              (item &&\n                ((item.content &&\n                  item.content.repository &&\n                  item.content.repository.nameWithOwner) ||\n                  (item.repository && item.repository.nameWithOwner))) ||\n              (value.raw &&\n                value.raw.itemContent &&\n                value.raw.itemContent.repository &&\n                value.raw.itemContent.repository.nameWithOwner) ||\n              null,\n            a = o.color || o.colour || null;\n          if (field && field.repoOptions && r && field.repoOptions[r]) {\n            let k = field.repoOptions[r].find(\n              (L: any) => L && L.name === o.name,\n            );\n            k && (a = k.color || k.colour || a);\n          }\n          let p = normalizeColor(a) || null,\n            g = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p)),\n            f = p || \"#999999\",\n            h = (g && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\",\n            w = p || \"#333333\";\n          return (\n            \"<span style='display:inline-block;padding:2px 8px;margin-right:6px;border-radius:999px;border:1px solid \" +\n            escapeHtml(f) +\n            \";background:\" +\n            escapeHtml(h) +\n            \";color:\" +\n            escapeHtml(w) +\n            \";font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis'>\" +\n            l +\n            \"</span>\"\n          );\n        })\n        .join(\"\") +\n      \"</div>\"\n    );\n  }\n}\n\nexport class PullRequestRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    const prs = value.pullRequests || [];\n    if (!prs || prs.length === 0) return \"\";\n    let out =\n      \"<div style='display:flex;flex-wrap:wrap;gap:6px;align-items:center'>\";\n    for (let i = 0; i < prs.length; i++) {\n      let p = prs[i];\n      let num = escapeHtml(String((p && p.number) || \"\"));\n      let titleText = escapeHtml((p && p.title) || \"\");\n      let url = escapeHtml((p && p.url) || \"\");\n      let rawColor =\n        (p && (p.state_color || p.color || p.colour || p.state)) || null;\n      let normColor = normalizeColor(rawColor) || null;\n      let hasHex = !!(\n        normColor && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(normColor)\n      );\n      let border = normColor || \"#999999\";\n      let bg = (hasHex && addAlpha(normColor, 0.12)) || \"rgba(0,0,0,0.06)\";\n      let fg = getContrastColor(normColor) || \"#333333\";\n      const isDraft = !!(p && (p as any).isDraft);\n      const state = (p && p.state && String(p.state).toUpperCase()) || \"\";\n      const isMerged = !!(p && p.merged);\n      const isClosed = !isMerged && state === \"CLOSED\";\n\n      let iconName = \"git-pull-request\";\n      if (isMerged) iconName = \"git-merge\";\n      else if (isClosed) iconName = \"git-pull-request-closed\";\n      else if (isDraft) iconName = \"git-pull-request-draft\";\n\n      const baseIcon = getIconSvg(iconName as any, {\n        size: 12,\n        className: \"field-icon pr-icon\",\n        fill: normColor || \"#666\",\n      });\n\n      // Blocked heuristic for PR: label named \"blocked\"\n      const hasBlockedLabel = !!(\n        p &&\n        Array.isArray(p.labels) &&\n        p.labels.some(\n          (l: any) =>\n            l &&\n            typeof l.name === \"string\" &&\n            String(l.name).toLowerCase() === \"blocked\",\n        )\n      );\n\n      const blockedIcon = hasBlockedLabel\n        ? getIconSvg(\"blocked\" as any, {\n            size: 9,\n            className: \"field-icon blocked-icon\",\n            fill: \"#dc3545\",\n          })\n        : \"\";\n\n      out +=\n        \"<a href='\" +\n        url +\n        \"' target='_blank' rel='noopener noreferrer' style='text-decoration:none;color:inherit'>\" +\n        \"<span title='\" +\n        titleText +\n        \"' style='display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid \" +\n        escapeHtml(border) +\n        \";background:\" +\n        escapeHtml(bg) +\n        \";color:\" +\n        escapeHtml(fg) +\n        \";font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;max-width:160px'>\" +\n        \"<span style='position:relative;display:inline-flex;align-items:center;justify-content:center'>\" +\n        baseIcon +\n        (blockedIcon\n          ? \"<span class='blocked-overlay' style='position:absolute;right:-2px;bottom:-2px'>\" +\n            blockedIcon +\n            \"</span>\"\n          : \"\") +\n        \"</span>\" +\n        \"<span style='flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap'>#\" +\n        num +\n        \"</span></span></a>\";\n    }\n    out += \"</div>\";\n    return out;\n  }\n}\n\nexport class IssueRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    return (value.issues || [])\n      .map(\n        (t: any) =>\n          \"<a href='\" +\n          escapeHtml(t.url || \"\") +\n          \"' target='_blank' rel='noopener noreferrer'>#\" +\n          escapeHtml(String(t.number || \"\")) +\n          \" \" +\n          escapeHtml(t.title || \"\") +\n          \"</a>\",\n      )\n      .join(\"<br/>\");\n  }\n}\n\nexport class AssigneesRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    let t = value.assignees || [];\n    if (t.length === 0) return \"<div></div>\";\n    let l = t\n        .slice(0, 3)\n        .map((g: any, f: any) => {\n          let h = escapeHtml(g.avatarUrl || g.avatar || \"\"),\n            w = f === 0 ? \"0px\" : f === 1 ? \"-8px\" : \"-14px\",\n            x = Math.max(1, 3 - f);\n          if (h)\n            return (\n              \"<span title='\" +\n              escapeHtml(g.login || g.name || \"\") +\n              \"' style='display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url(\" +\n              h +\n              \");border:2px solid var(--vscode-editor-background);margin-left:\" +\n              w +\n              \";vertical-align:middle;position:relative;z-index:\" +\n              x +\n              \"'></span>\"\n            );\n          let k = escapeHtml(\n            (g.name || g.login || \"\")\n              .split(\" \")\n              .map((L: any) => L[0] || \"\")\n              .join(\"\")\n              .toUpperCase()\n              .slice(0, 2),\n          );\n          return (\n            \"<span title='\" +\n            escapeHtml(g.login || g.name || \"\") +\n            \"' style='display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;background:#777;color:#fff;font-size:11px;border:2px solid var(--vscode-editor-background);margin-left:\" +\n            w +\n            \";vertical-align:middle;position:relative;z-index:\" +\n            x +\n            \"'>\" +\n            k +\n            \"</span>\"\n          );\n        })\n        .join(\"\"),\n      r = t.map((g: any) => g.login || g.name || \"\"),\n      a = \"\";\n    if (r.length === 1) a = r[0];\n    else if (r.length === 2) a = r[0] + \" and \" + r[1];\n    else a = r.slice(0, -1).join(\", \") + \" and \" + r.slice(-1)[0];\n\n    return (\n      \"<div style='display:flex;align-items:center;gap:8px'><span style='display:flex;align-items:center'>\" +\n      (\"<span style='display:inline-block;vertical-align:middle;height:20px;line-height:20px;margin-right:8px;'>\" +\n        l +\n        \"</span>\") +\n      \"</span><span style='white-space:nowrap;overflow:hidden;text-overflow:ellipsis'>\" +\n      escapeHtml(a) +\n      \"</span></div>\"\n    );\n  }\n}\n\nexport class RequestedReviewersRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    return (\n      \"<div>\" +\n      escapeHtml(\n        (value.reviewers || [])\n          .map((t: any) => t.login || t.name || t.kind || \"\")\n          .join(\", \"),\n      ) +\n      \"</div>\"\n    );\n  }\n}\n\nexport class MilestoneRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    return (\n      \"<div>\" +\n      escapeHtml((value.milestone && value.milestone.title) || \"\") +\n      \"</div>\"\n    );\n  }\n}\n\nexport class SubIssuesProgressRenderer implements CellRendererStrategy {\n  render(value: any): string {\n    try {\n      if (!value || value.total == null || Number(value.total) <= 0) return \"\";\n      const totalCount = Math.max(0, Math.floor(Number(value.total) || 0));\n      const doneCount = Math.max(0, Math.floor(Number(value.done || 0)));\n      if (totalCount === 0) return \"\";\n      let pct = null;\n      if (value.percent !== void 0 && value.percent !== null)\n        pct = Number(value.percent);\n      else pct = Math.round((doneCount / totalCount) * 100);\n      if (pct == null || !isFinite(pct)) return \"\";\n      pct = Math.max(0, Math.min(100, pct));\n      const barHtml =\n        \"<div class='sub-issues-progress' style='display:flex;align-items:center;gap:8px;width:100%;'>\" +\n        \"<div class='sub-issues-progress-bar' style='flex:1;min-width:0'>\" +\n        \"<div style='width:100%;height:12px;border-radius:6px;border:1px solid var(--vscode-focusBorder);overflow:hidden;background:transparent;box-sizing:border-box'>\" +\n        \"<div style='height:100%;width:\" +\n        String(pct) +\n        \"%;background:var(--vscode-focusBorder)'></div>\" +\n        \"</div>\" +\n        \"</div>\" +\n        \"<div class='sub-issues-progress-pct' style='min-width:44px;text-align:right;font-variant-numeric:tabular-nums;color:var(--vscode-descriptionForeground)'>\" +\n        escapeHtml(String(pct) + \"%\") +\n        \"</div>\" +\n        \"</div>\";\n      return barHtml;\n    } catch (e) {\n      return \"\";\n    }\n  }\n}\n\nexport class ParentIssueRenderer implements CellRendererStrategy {\n  render(value: any, field: any, item: any, allItems: any): string {\n    const completedNames = [\"done\", \"closed\", \"completed\", \"finished\"];\n    let parentIsDoneByStatus = false;\n\n    let t =\n        (value &&\n          (value.parent ||\n            value.parentIssue ||\n            value.issue ||\n            value.option ||\n            value.item ||\n            value.value)) ||\n        (value &&\n          value.raw &&\n          (value.raw.parent || value.raw.itemContent || value.raw.item)) ||\n        null,\n      o =\n        (t &&\n          (t.number || t.id || (t.raw && t.raw.number)) &&\n          (t.number || (t.raw && t.raw.number))) ||\n        \"\",\n      l =\n        (t &&\n          (t.title || t.name || (t.raw && t.raw.title)) &&\n          (t.title || t.name || (t.raw && t.raw.title))) ||\n        \"\",\n      r =\n        (t &&\n          (t.url || t.html_url || (t.raw && t.raw.url)) &&\n          (t.url || t.html_url || (t.raw && t.raw.url))) ||\n        \"\",\n      a = escapeHtml(String(l || \"\")),\n      p = o ? escapeHtml(String(o)) : \"\",\n      g = escapeHtml(String(r || \"\")),\n      f = null;\n    try {\n      var itemsList = Array.isArray(allItems) ? allItems : allItems || [];\n      if (Array.isArray(itemsList) && itemsList.length > 0 && (o || t)) {\n        let B =\n            (t &&\n              t.repository &&\n              (t.repository.nameWithOwner || t.repository.name)) ||\n            (t &&\n              t.content &&\n              t.content.repository &&\n              t.content.repository.nameWithOwner) ||\n            null,\n          O: string[] = [];\n        (o && O.push(String(o)),\n          t &&\n            (t.id || (t.raw && t.raw.id)) &&\n            O.push(String(t.id || (t.raw && t.raw.id))),\n          t &&\n            (t.url || (t.raw && t.raw.url)) &&\n            O.push(String(t.url || (t.raw && t.raw.url))),\n          t && (t.title || t.name) && O.push(String(t.title || t.name)));\n        let $ = itemsList.find((A) => {\n          let d = (A && (A.content || (A.raw && A.raw.itemContent))) || null;\n          if (!d) return !1;\n          let M = [];\n          if (\n            (d.number && M.push(String(d.number)),\n            d.id && M.push(String(d.id)),\n            d.url && M.push(String(d.url)),\n            d.title && M.push(String(d.title)),\n            d.name && M.push(String(d.name)),\n            d.raw && d.raw.number && M.push(String(d.raw.number)),\n            d.raw && d.raw.id && M.push(String(d.raw.id)),\n            d.raw && d.raw.url && M.push(String(d.raw.url)),\n            B)\n          ) {\n            let V =\n              (d.repository &&\n                (d.repository.nameWithOwner || d.repository.name)) ||\n              null;\n            if (V && String(V) !== String(B)) return !1;\n          }\n          for (let V = 0; V < O.length; V++)\n            for (let X = 0; X < M.length; X++)\n              if (O[V] && M[X] && String(O[V]) === String(M[X])) return !0;\n          return !1;\n        });\n        if ($ && Array.isArray($.fieldValues)) {\n          let A = $.fieldValues.find(\n            (d: any) =>\n              d &&\n              d.type === \"single_select\" &&\n              ((d.raw &&\n                d.raw.field &&\n                String(d.raw.field.name || \"\").toLowerCase() === \"status\") ||\n                (d.fieldName &&\n                  String(d.fieldName || \"\").toLowerCase() === \"status\") ||\n                (d.field &&\n                  d.field.name &&\n                  String(d.field.name || \"\").toLowerCase() === \"status\")),\n          );\n          if (A) {\n            f =\n              (A.option && (A.option.color || A.option.id || A.option.name)) ||\n              (A.raw && A.raw.color) ||\n              null;\n\n            // If the parent issue's Status option is a completed-like state,\n            // treat it as closed for icon purposes.\n            if (A.option && A.option.name) {\n              const optNameLower = String(A.option.name).toLowerCase();\n              if (completedNames.includes(optNameLower)) {\n                parentIsDoneByStatus = true;\n              }\n            }\n          }\n        }\n      }\n    } catch (e) {}\n    f ||\n      (f =\n        (t &&\n          ((t.option && (t.option.color || t.option.id || t.option.name)) ||\n            t.color ||\n            t.colour)) ||\n        null);\n    let h = normalizeColor(f) || null,\n      w = !!(h && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(h)),\n      x = h || \"#999999\",\n      k = (w && addAlpha(h, 0.12)) || \"rgba(0,0,0,0.06)\",\n      L = getContrastColor(h) || \"#333333\";\n\n    // Determine icon for parent issue based on state and blocked heuristics\n    let isClosed = false;\n    let isDraft = false;\n    let isBlocked = false;\n    try {\n      const state =\n        (t && t.state && String(t.state).toUpperCase()) ||\n        (t &&\n          t.parent &&\n          t.parent.state &&\n          String(t.parent.state).toUpperCase()) ||\n        \"\";\n      if (state === \"CLOSED\") isClosed = true;\n\n      const hasBlockedLabel = !!(\n        t &&\n        Array.isArray(t.labels) &&\n        t.labels.some(\n          (l: any) =>\n            l &&\n            typeof l.name === \"string\" &&\n            String(l.name).toLowerCase() === \"blocked\",\n        )\n      );\n      isBlocked = hasBlockedLabel;\n\n      // Treat parent issue as effectively closed when status or labels indicate\n      // \"done\"-like states, mirroring the TitleRenderer heuristics.\n      const hasDoneLabel = !!(\n        t &&\n        Array.isArray(t.labels) &&\n        t.labels.some((l: any) =>\n          completedNames.includes(String((l && l.name) || \"\").toLowerCase()),\n        )\n      );\n\n      if (hasDoneLabel || parentIsDoneByStatus) {\n        isClosed = true;\n      }\n    } catch (e) {}\n\n    let parentIconName = \"issue-opened\";\n    if (isClosed) parentIconName = \"issue-closed\";\n    else if (isDraft) parentIconName = \"issue-draft\";\n\n    const parentIcon = getIconSvg(parentIconName as any, {\n      size: 14,\n      className: \"field-icon parent-issue-icon\",\n      fill: h || \"#666\",\n    });\n\n    const blockedIcon = isBlocked\n      ? getIconSvg(\"blocked\" as any, {\n          size: 9,\n          className: \"field-icon blocked-icon\",\n          fill: \"#dc3545\",\n        })\n      : \"\";\n\n    let q =\n      \"<span style='display:block;width:100%;box-sizing:border-box'>\" +\n      \"<div style='display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border:1px solid \" +\n      escapeHtml(x) +\n      \";border-radius:999px;color:\" +\n      escapeHtml(L) +\n      \";background:\" +\n      escapeHtml(k) +\n      \";font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;width:100%'>\" +\n      \"<span style='position:relative;display:inline-flex;align-items:center;justify-content:center'>\" +\n      parentIcon +\n      (blockedIcon\n        ? \"<span class='blocked-overlay' style='position:absolute;right:-2px;bottom:-2px'>\" +\n          blockedIcon +\n          \"</span>\"\n        : \"\") +\n      \"</span>\" +\n      \"<span class='parent-issue-title' style='flex:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block'>\" +\n      a +\n      \"</span>\" +\n      (p\n        ? \"<span style='margin-left:6px;color:var(--vscode-descriptionForeground);white-space:nowrap'>#\" +\n          p +\n          \"</span>\"\n        : \"\") +\n      \"</div></span>\";\n    const parentWrapper =\n      \"<span data-gh-open='\" +\n      (g || \"\") +\n      \"' class='parent-issue-wrapper' style='display:block;width:100%;cursor:\" +\n      (g ? \"pointer\" : \"default\") +\n      \"'>\";\n    return g ? parentWrapper + q + \"</span>\" : q;\n  }\n}\n", "import {\n  CellRendererStrategy,\n  TitleRenderer,\n  TextRenderer,\n  NumberRenderer,\n  DateRenderer,\n  SingleSelectRenderer,\n  IterationRenderer,\n  RepositoryRenderer,\n  LabelsRenderer,\n  PullRequestRenderer,\n  IssueRenderer,\n  AssigneesRenderer,\n  RequestedReviewersRenderer,\n  MilestoneRenderer,\n  SubIssuesProgressRenderer,\n  ParentIssueRenderer,\n} from \"./strategies\";\n\nconst strategies: Record<string, CellRendererStrategy> = {\n  title: new TitleRenderer(),\n  text: new TextRenderer(),\n  number: new NumberRenderer(),\n  date: new DateRenderer(),\n  single_select: new SingleSelectRenderer(),\n  iteration: new IterationRenderer(),\n  repository: new RepositoryRenderer(),\n  labels: new LabelsRenderer(),\n  pull_request: new PullRequestRenderer(),\n  issue: new IssueRenderer(),\n  assignees: new AssigneesRenderer(),\n  reviewers: new RequestedReviewersRenderer(),\n  milestone: new MilestoneRenderer(),\n  sub_issues_progress: new SubIssuesProgressRenderer(),\n  parent_issue: new ParentIssueRenderer(),\n  linked_pull_requests: new PullRequestRenderer(),\n  tracks: new IssueRenderer(),\n};\n\nexport function renderCell(e: any, n: any, s: any, allItems: any) {\n  if (!e) return \"\";\n  try {\n    const strategy = strategies[e.type];\n    if (strategy) {\n      return strategy.render(e, n, s, allItems);\n    }\n    return \"\";\n  } catch (err) {\n    console.error(\"Error rendering cell\", err);\n    return \"\";\n  }\n}\n", "import { renderCell } from \"../renderers/cellRenderer\";\n\nexport class RowRenderer {\n  constructor(\n    private fields: any[],\n    private allItems: any[],\n    private onResizeStart: (\n      colIndex: number,\n      pageX: number,\n      startWidth: number,\n    ) => void,\n  ) {}\n\n  public createRow(item: any, index: number): HTMLTableRowElement {\n    const tr = document.createElement(\"tr\");\n    tr.classList.add(\"table-row\");\n    tr.setAttribute(\"data-gh-item-id\", item.id);\n\n    // Add row hover effect\n    tr.style.transition = \"background-color 0.15s ease\";\n    tr.addEventListener(\"mouseenter\", () => {\n      tr.style.backgroundColor = \"var(--vscode-list-hoverBackground)\";\n    });\n    tr.addEventListener(\"mouseleave\", () => {\n      tr.style.backgroundColor = \"transparent\";\n    });\n\n    // Index Cell\n    const tdIndex = document.createElement(\"td\");\n    tdIndex.textContent = String(index + 1);\n    this.styleCell(tdIndex);\n    tr.appendChild(tdIndex);\n\n    // Field Cells\n    for (let colIndex = 0; colIndex < this.fields.length; colIndex++) {\n      const field = this.fields[colIndex];\n      const td = document.createElement(\"td\");\n      this.styleCell(td);\n\n      const fv = item.fieldValues.find(\n        (v: any) =>\n          String(v.fieldId) === String(field.id) || v.fieldName === field.name,\n      );\n      if (fv) {\n        td.innerHTML = renderCell(fv, field, item, this.allItems);\n      }\n\n      // Make td position relative so we can position a resizer inside it\n      td.style.position = \"relative\";\n\n      // Add a small resizer handle to every cell so columns can be resized from any row\n      const cellResizer = document.createElement(\"div\");\n      cellResizer.className = \"column-resizer\";\n      cellResizer.style.position = \"absolute\";\n      cellResizer.style.top = \"0\";\n      cellResizer.style.right = \"0\";\n      cellResizer.style.width = \"6px\";\n      cellResizer.style.height = \"100%\";\n      cellResizer.style.cursor = \"col-resize\";\n      cellResizer.style.userSelect = \"none\";\n      cellResizer.style.zIndex = \"50\";\n\n      cellResizer.addEventListener(\n        \"mouseenter\",\n        () => (cellResizer.style.background = \"var(--vscode-focusBorder)\"),\n      );\n      cellResizer.addEventListener(\n        \"mouseleave\",\n        () => (cellResizer.style.background = \"transparent\"),\n      );\n\n      cellResizer.addEventListener(\"mousedown\", (e: MouseEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        // We need to find the table and column width.\n        // Since the row is attached to the table when this runs, we can find closest table.\n        const table = tr.closest(\"table\") as HTMLTableElement | null;\n        if (!table) return;\n\n        const cols = table.querySelectorAll(\"col\");\n        const col = cols[colIndex + 1] as HTMLTableColElement | undefined; // +1 for index column\n        const startWidth = col\n          ? parseInt(col.style.width) || col.offsetWidth\n          : td.offsetWidth;\n\n        this.onResizeStart(colIndex + 1, e.pageX, startWidth);\n      });\n\n      td.appendChild(cellResizer);\n      tr.appendChild(td);\n    }\n\n    return tr;\n  }\n\n  private styleCell(td: HTMLTableCellElement) {\n    td.style.padding = \"8px\";\n    td.style.borderRight = \"1px solid var(--vscode-panel-border)\";\n    td.style.borderBottom = \"1px solid var(--vscode-panel-border)\";\n    td.style.whiteSpace = \"nowrap\";\n    td.style.overflow = \"hidden\";\n    td.style.textOverflow = \"ellipsis\";\n  }\n}\n", "import { normalizeColor, escapeHtml } from \"../utils\";\nimport { RowRenderer } from \"./RowRenderer\";\n\nexport class GroupRenderer {\n  constructor(\n    private fields: any[],\n    private allItems: any[],\n  ) {}\n\n  /**\n   * Helper to get icon SVG from registry\n   */\n  private getIconSvg(iconName: string, size: number = 14): string {\n    if (typeof (window as any).getIconSvg === \"function\") {\n      return (window as any).getIconSvg(iconName, { size });\n    }\n    return \"\";\n  }\n\n  public renderGroup(\n    tbody: HTMLTableSectionElement,\n    group: any,\n    groupingField: any,\n    rowRenderer: RowRenderer,\n  ) {\n    // Render Group Header\n    const trHeader = document.createElement(\"tr\");\n    const tdHeader = document.createElement(\"td\");\n    tdHeader.colSpan = this.fields.length + 1;\n    tdHeader.style.padding = \"8px\";\n    tdHeader.style.background = \"var(--vscode-editor-background)\"; // Ensure opaque background\n    tdHeader.style.fontWeight = \"600\";\n    tdHeader.style.borderTop = \"1px solid var(--vscode-editorGroup-border)\";\n    tdHeader.style.borderBottom = \"1px solid var(--vscode-editorGroup-border)\";\n    tdHeader.style.position = \"sticky\";\n    tdHeader.style.top = \"32px\"; // Matches fixed header height\n    tdHeader.style.zIndex = \"9\";\n    tdHeader.style.boxShadow = \"0 1px 2px rgba(0,0,0,0.1)\"; // Add shadow for better separation\n\n    // Group Header Content\n    const headerContent = document.createElement(\"div\");\n    headerContent.style.display = \"flex\";\n    headerContent.style.alignItems = \"center\";\n    headerContent.style.gap = \"8px\";\n\n    // Helper: find estimate field id (best-effort)\n    const estimateField =\n      this.fields.find(\n        (f) =>\n          f.dataType &&\n          String(f.dataType).toLowerCase() === \"number\" &&\n          String(f.name || \"\")\n            .toLowerCase()\n            .includes(\"estimate\"),\n      ) ||\n      this.fields.find(\n        (f) => f.dataType && String(f.dataType).toLowerCase() === \"number\",\n      );\n    const estimateFieldId = estimateField ? estimateField.id : null;\n\n    const sumEstimate = (itemsArr: any[]) => {\n      if (!estimateFieldId) return 0;\n      let sum = 0;\n      for (const gi of itemsArr) {\n        const it = gi.item || gi;\n        if (!it || !Array.isArray(it.fieldValues)) continue;\n        const fv = it.fieldValues.find(\n          (v: any) =>\n            (v.fieldId && String(v.fieldId) === String(estimateFieldId)) ||\n            (v.fieldName &&\n              String(v.fieldName).toLowerCase().includes(\"estimate\")) ||\n            v.type === \"number\",\n        );\n        if (fv) {\n          const num = Number(\n            fv.number != null ? fv.number : fv.value != null ? fv.value : NaN,\n          );\n          if (!isNaN(num)) sum += num;\n        }\n      }\n      return sum;\n    };\n\n    const formatEstimate = (n: number) => {\n      if (!isFinite(n)) return \"\";\n      return String(n);\n    };\n\n    // Toggle Button\n    const toggleBtn = document.createElement(\"span\");\n    // SVG Icons for GitHub-like look from icon registry\n    const iconExpanded = this.getIconSvg(\"triangle-down\", 16);\n    const iconCollapsed = this.getIconSvg(\"triangle-right\", 16);\n\n    toggleBtn.innerHTML = iconExpanded;\n    toggleBtn.style.cursor = \"pointer\";\n    toggleBtn.style.userSelect = \"none\";\n    toggleBtn.style.display = \"inline-flex\";\n    toggleBtn.style.alignItems = \"center\";\n    toggleBtn.style.justifyContent = \"center\";\n    toggleBtn.style.width = \"16px\";\n    toggleBtn.style.height = \"16px\";\n    toggleBtn.style.fill = \"var(--vscode-foreground)\";\n    toggleBtn.style.opacity = \"0.7\";\n\n    // Group Name & Color\n    const colorDot = document.createElement(\"div\");\n    colorDot.style.width = \"12px\";\n    colorDot.style.height = \"12px\";\n    colorDot.style.borderRadius = \"50%\";\n    colorDot.style.backgroundColor =\n      normalizeColor(group.option.color) || \"gray\";\n\n    const nameSpan = document.createElement(\"span\");\n    nameSpan.textContent =\n      group.option.name || group.option.title || \"Unassigned\";\n\n    // We'll keep the left-hand part of the group header (toggle, avatar/color, name, count)\n    // in a sticky left pane so it remains visible when horizontally scrolling.\n    const leftPane = document.createElement(\"div\");\n    leftPane.style.display = \"flex\";\n    leftPane.style.alignItems = \"center\";\n    leftPane.style.gap = \"8px\";\n    leftPane.style.position = \"sticky\";\n    leftPane.style.left = \"0\";\n    leftPane.style.zIndex = \"12\";\n    leftPane.style.background = tdHeader.style.background;\n    leftPane.style.paddingRight = \"8px\";\n\n    const rightPane = document.createElement(\"div\");\n    rightPane.style.display = \"flex\";\n    rightPane.style.alignItems = \"center\";\n    rightPane.style.gap = \"8px\";\n    rightPane.style.flex = \"1\";\n\n    leftPane.appendChild(toggleBtn);\n\n    // For parent_issue, try to extract parent metadata from the first child item\n    let parentMeta: any = null;\n    let resolvedParentItem: any = null;\n    if (String(groupingField.dataType || \"\").toLowerCase() === \"parent_issue\") {\n      const first =\n        group.items && group.items[0]\n          ? group.items[0].item || group.items[0]\n          : null;\n      if (first && Array.isArray(first.fieldValues)) {\n        const pfv = first.fieldValues.find(\n          (v: any) =>\n            String(v.fieldId) === String(groupingField.id) ||\n            v.fieldName === groupingField.name ||\n            v.type === \"parent_issue\",\n        );\n        if (pfv) {\n          parentMeta =\n            pfv.parent ||\n            pfv.parentIssue ||\n            pfv.issue ||\n            pfv.item ||\n            pfv.value ||\n            null;\n        }\n      }\n\n      // Try to resolve the full parent item from the current items snapshot (this.allItems)\n      if (parentMeta && Array.isArray(this.allItems)) {\n        try {\n          const identifiers: string[] = [];\n          if (parentMeta.number) identifiers.push(String(parentMeta.number));\n          if (parentMeta.id) identifiers.push(String(parentMeta.id));\n          if (parentMeta.url) identifiers.push(String(parentMeta.url));\n          if (parentMeta.title) identifiers.push(String(parentMeta.title));\n          // search in this.allItems for a matching content/raw identifiers\n          const found = this.allItems.find((A: any) => {\n            const d =\n              (A && (A.content || (A.raw && A.raw.itemContent))) || null;\n            if (!d) return false;\n            const M: string[] = [];\n            if (d.number) M.push(String(d.number));\n            if (d.id) M.push(String(d.id));\n            if (d.url) M.push(String(d.url));\n            if (d.title) M.push(String(d.title));\n            if (d.name) M.push(String(d.name));\n            if (d.raw && d.raw.number) M.push(String(d.raw.number));\n            if (d.raw && d.raw.id) M.push(String(d.raw.id));\n            if (d.raw && d.raw.url) M.push(String(d.raw.url));\n            for (let o of identifiers) {\n              for (let m of M) {\n                if (o && m && String(o) === String(m)) return true;\n              }\n            }\n            return false;\n          });\n          if (found) resolvedParentItem = found;\n        } catch (e) {}\n      }\n    }\n\n    // Avatar / color dot / repo icon depending on field type\n    if (\n      (group.option && group.option.avatarUrl) ||\n      (group.option && group.option.login) ||\n      (group.option &&\n        group.option.name &&\n        String(groupingField.dataType || \"\").toLowerCase() === \"assignees\")\n    ) {\n      // Try to render avatar for assignees\n      const avatarEl = document.createElement(\"span\");\n      const avatarUrl =\n        (group.option &&\n          (group.option.avatarUrl ||\n            group.option.avatar ||\n            group.option.imageUrl)) ||\n        (() => {\n          // try to find in items\n          for (const gi of group.items) {\n            const it = gi.item || gi;\n            if (!it || !Array.isArray(it.fieldValues)) continue;\n            const fv = it.fieldValues.find(\n              (v: any) =>\n                v.type === \"assignees\" ||\n                String(v.fieldId) === String(groupingField.id),\n            );\n            if (fv && fv.assignees && Array.isArray(fv.assignees)) {\n              const match = fv.assignees.find(\n                (a: any) =>\n                  String(a.login || a.name) ===\n                  String(group.option.name || group.option.id),\n              );\n              if (match && (match.avatarUrl || match.avatar))\n                return match.avatarUrl || match.avatar;\n            }\n          }\n          return null;\n        })();\n      if (avatarUrl) {\n        avatarEl.innerHTML =\n          '<span title=\"' +\n          escapeHtml(\n            (group.option && (group.option.login || group.option.name)) ||\n              \"Assignee\",\n          ) +\n          '\" style=\"display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url(' +\n          escapeHtml(avatarUrl) +\n          ');border:2px solid var(--vscode-editor-background)\"></span>';\n        leftPane.appendChild(avatarEl);\n      } else {\n        leftPane.appendChild(colorDot);\n      }\n    } else if (\n      String(groupingField.dataType || \"\").toLowerCase() === \"repository\"\n    ) {\n      // repository icon\n      const repoIcon = document.createElement(\"span\");\n      repoIcon.innerHTML =\n        '<svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"flex-shrink:0;color:var(--vscode-icon-foreground)\"><path fill=\"currentColor\" d=\"M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z\"/></svg>';\n      leftPane.appendChild(repoIcon);\n    } else {\n      leftPane.appendChild(colorDot);\n    }\n\n    // Name\n    // For parent_issue, prefer the resolved parent item's title if available, else use parentMeta\n    if (resolvedParentItem) {\n      // Try to extract title and status color from resolved parent\n      const content =\n        resolvedParentItem.content ||\n        (resolvedParentItem.raw && resolvedParentItem.raw.itemContent) ||\n        null;\n      if (content) {\n        // title\n        try {\n          if (content.title) nameSpan.textContent = String(content.title);\n          else if (content.name) nameSpan.textContent = String(content.name);\n          else if (content.number)\n            nameSpan.textContent = String(content.number);\n        } catch (e) {}\n\n        // Try to get status color from parent's fieldValues (single_select status)\n        if (Array.isArray(resolvedParentItem.fieldValues)) {\n          const statusFV = resolvedParentItem.fieldValues.find(\n            (v: any) =>\n              v && v.type === \"single_select\" && v.option && v.option.name,\n          );\n          if (statusFV && statusFV.option) {\n            // If option has color, use it; otherwise try map by name\n            try {\n              const c =\n                statusFV.option.color ||\n                statusFV.option.id ||\n                statusFV.option.name ||\n                null;\n              if (c)\n                colorDot.style.backgroundColor =\n                  normalizeColor(c) || colorDot.style.backgroundColor;\n            } catch (e) {}\n          }\n        }\n      }\n    } else if (parentMeta) {\n      nameSpan.textContent =\n        parentMeta.title ||\n        parentMeta.name ||\n        parentMeta.number ||\n        parentMeta.id ||\n        nameSpan.textContent;\n      if (parentMeta.color) {\n        try {\n          colorDot.style.backgroundColor =\n            normalizeColor(parentMeta.color) || colorDot.style.backgroundColor;\n        } catch (e) {}\n      }\n    }\n    leftPane.appendChild(nameSpan);\n\n    // Count circle (placed before estimate pill)\n    const countCircle = document.createElement(\"span\");\n    countCircle.style.display = \"inline-flex\";\n    countCircle.style.alignItems = \"center\";\n    countCircle.style.justifyContent = \"center\";\n    countCircle.style.width = \"22px\";\n    countCircle.style.height = \"22px\";\n    countCircle.style.borderRadius = \"50%\";\n    countCircle.style.background = \"var(--vscode-input-background)\";\n    countCircle.style.border = \"1px solid var(--vscode-panel-border)\";\n    countCircle.style.color = \"var(--vscode-foreground)\";\n    countCircle.style.fontSize = \"12px\";\n    countCircle.style.fontWeight = \"600\";\n    countCircle.style.minWidth = \"22px\";\n    countCircle.style.boxSizing = \"border-box\";\n    countCircle.textContent = String(group.items.length || 0);\n    leftPane.appendChild(countCircle);\n\n    // Estimate pill and optional extra info\n    const estSum = sumEstimate(group.items || []);\n    if (estSum && estSum > 0) {\n      const estEl = document.createElement(\"div\");\n      estEl.style.display = \"inline-block\";\n      estEl.style.padding = \"2px 8px\";\n      estEl.style.borderRadius = \"999px\";\n      estEl.style.border = \"1px solid var(--vscode-panel-border)\";\n      estEl.style.background = \"var(--vscode-input-background)\";\n      estEl.style.color = \"var(--vscode-foreground)\";\n      estEl.style.fontSize = \"12px\";\n      estEl.style.lineHeight = \"18px\";\n      estEl.style.marginLeft = \"8px\";\n      estEl.textContent = \"Estimate: \" + formatEstimate(estSum);\n      // Put estimate pill into the left sticky pane so it remains visible when horizontally scrolling\n      leftPane.appendChild(estEl);\n\n      // If parent_issue, show completed/amount + progress bar (only for real parents)\n      if (\n        String(groupingField.dataType || \"\").toLowerCase() === \"parent_issue\" &&\n        !(\n          group.option &&\n          (group.option.name === \"Unassigned\" ||\n            group.option.title === \"Unassigned\")\n        )\n      ) {\n        const completedNames = [\"done\", \"closed\", \"completed\", \"finished\"];\n\n        // Helper: robust done detection for a single item\n        const isDoneByHeuristics = (it: any) => {\n          try {\n            const content =\n              it && (it.content || (it.raw && it.raw.itemContent));\n            if (content) {\n              const state = (\n                content.state ||\n                (content.merged ? \"MERGED\" : undefined) ||\n                \"\"\n              )\n                .toString()\n                .toUpperCase();\n              if (state === \"CLOSED\" || state === \"MERGED\") return true;\n            }\n\n            if (Array.isArray(it.fieldValues)) {\n              // single_select status matching\n              const ss = it.fieldValues.find(\n                (v: any) =>\n                  v &&\n                  v.type === \"single_select\" &&\n                  v.option &&\n                  v.option.name &&\n                  completedNames.includes(String(v.option.name).toLowerCase()),\n              );\n              if (ss) return true;\n\n              // numeric percent-like or explicit done flag\n              const percentFV = it.fieldValues.find(\n                (v: any) =>\n                  v &&\n                  (String(v.fieldName || \"\")\n                    .toLowerCase()\n                    .includes(\"progress\") ||\n                    String(v.fieldName || \"\")\n                      .toLowerCase()\n                      .includes(\"percent\") ||\n                    (v.type === \"number\" &&\n                      String(v.fieldName || \"\")\n                        .toLowerCase()\n                        .includes(\"progress\"))),\n              );\n              if (percentFV && percentFV.number != null) {\n                const pct = Number(percentFV.number || 0);\n                if (pct >= 100) return true;\n              }\n            }\n\n            if (\n              content &&\n              content.labels &&\n              Array.isArray(content.labels.nodes)\n            ) {\n              const labs = content.labels.nodes.map((l: any) =>\n                String(l.name || \"\").toLowerCase(),\n              );\n              for (const cn of completedNames)\n                if (labs.includes(cn)) return true;\n            }\n          } catch (e) {}\n          return false;\n        };\n\n        // Prefer parent-provided aggregate if available\n        let done = 0;\n        let total = 0;\n        if (\n          resolvedParentItem &&\n          Array.isArray(resolvedParentItem.fieldValues)\n        ) {\n          const agg = resolvedParentItem.fieldValues.find(\n            (v: any) =>\n              v &&\n              (v.type === \"sub_issues_progress\" ||\n                (v.total != null && v.done != null)),\n          );\n          if (agg && agg.total != null) {\n            total = Number(agg.total || 0);\n            done = Number(agg.done || 0);\n          }\n        }\n\n        // If no parent aggregate found, compute from children\n        if (!total) {\n          for (const gi of group.items) {\n            const it = gi.item || gi;\n            if (!it) continue;\n            total++;\n            if (isDoneByHeuristics(it)) done++;\n          }\n        }\n\n        // show completed/total BEFORE progress bar\n        const doneText = document.createElement(\"div\");\n        doneText.style.color = \"var(--vscode-descriptionForeground)\";\n        doneText.style.fontSize = \"12px\";\n        doneText.style.marginLeft = \"8px\";\n        doneText.style.fontVariantNumeric = \"tabular-nums\";\n        doneText.textContent = `${done}/${total}`;\n        // Keep completed/total near the left sticky area so it stays visible\n        leftPane.appendChild(doneText);\n\n        // show progress bar\n        const progWrapper = document.createElement(\"div\");\n        progWrapper.style.display = \"inline-flex\";\n        progWrapper.style.alignItems = \"center\";\n        progWrapper.style.gap = \"8px\";\n        progWrapper.style.marginLeft = \"8px\";\n        const pct = total > 0 ? Math.round((done / total) * 100) : 0;\n        const bar = document.createElement(\"div\");\n        bar.style.display = \"inline-block\";\n        bar.style.width = \"120px\";\n        bar.style.height = \"12px\";\n        bar.style.background = \"transparent\";\n        bar.style.border = \"1px solid var(--vscode-focusBorder)\";\n        bar.style.borderRadius = \"6px\";\n        bar.style.overflow = \"hidden\";\n        const fill = document.createElement(\"div\");\n        fill.style.height = \"100%\";\n        fill.style.width = String(pct) + \"%\";\n        fill.style.background = \"var(--vscode-focusBorder)\";\n        bar.appendChild(fill);\n        progWrapper.appendChild(bar);\n        // Progress bar is useful summary info \u2014 keep it in the sticky left pane\n        leftPane.appendChild(progWrapper);\n      }\n    }\n\n    // Single-select: show option description if available\n    if (\n      String(groupingField.dataType || \"\").toLowerCase() === \"single_select\"\n    ) {\n      try {\n        const opt = (groupingField.options || []).find(\n          (o: any) =>\n            String(o.name) === String(group.option && group.option.name),\n        );\n        if (opt && opt.description) {\n          const descEl = document.createElement(\"div\");\n          descEl.style.color = \"var(--vscode-descriptionForeground)\";\n          descEl.style.fontSize = \"12px\";\n          descEl.style.marginLeft = \"8px\";\n          descEl.textContent = String(opt.description).slice(0, 120);\n          // Keep description fixed in the left sticky pane so it remains visible\n          leftPane.appendChild(descEl);\n        }\n      } catch (e) {}\n    }\n\n    // Iteration: append iteration range (start - end) if startDate/duration available, else title\n    if (String(groupingField.dataType || \"\").toLowerCase() === \"iteration\") {\n      try {\n        const opt = group.option || {};\n        let iterText: string | null = null;\n        const start = opt.startDate || (opt.start && opt.startDate) || null;\n        const duration = opt.duration || opt.length || null;\n        if (start && duration) {\n          try {\n            const s = new Date(start);\n            const days = Number(duration) || 0;\n            const e = new Date(s.getTime() + days * 24 * 60 * 60 * 1000);\n            const sStr = s.toLocaleDateString(\"en-US\", {\n              month: \"short\",\n              day: \"numeric\",\n            });\n            const eStr = e.toLocaleDateString(\"en-US\", {\n              month: \"short\",\n              day: \"numeric\",\n            });\n            iterText = `${sStr} \u2014 ${eStr}`;\n          } catch (e) {\n            iterText = null;\n          }\n        }\n        if (!iterText) {\n          iterText =\n            opt.title || opt.name ? String(opt.title || opt.name) : null;\n        }\n        if (iterText) {\n          const iterEl = document.createElement(\"div\");\n          iterEl.style.color = \"var(--vscode-descriptionForeground)\";\n          iterEl.style.fontSize = \"12px\";\n          iterEl.style.marginLeft = \"8px\";\n          iterEl.textContent = String(iterText).slice(0, 120);\n          // Keep iteration info fixed in the left sticky pane\n          leftPane.appendChild(iterEl);\n        }\n      } catch (e) {}\n    }\n\n    // If this group corresponds to 'Unassigned', rename to 'No <fieldname>'\n    if (\n      group.option &&\n      (group.option.name === \"Unassigned\" ||\n        group.option.title === \"Unassigned\")\n    ) {\n      nameSpan.textContent = \"No \" + (groupingField.name || \"value\");\n    }\n\n    // Compose header: leftPane (sticky) + rightPane (scrolling content)\n    headerContent.appendChild(leftPane);\n    headerContent.appendChild(rightPane);\n\n    tdHeader.appendChild(headerContent);\n    trHeader.appendChild(tdHeader);\n    tbody.appendChild(trHeader);\n\n    // Render Items\n    const groupRows: HTMLTableRowElement[] = [];\n    group.items.forEach((groupItem: any) => {\n      const tr = rowRenderer.createRow(groupItem.item, groupItem.index);\n      tr.classList.add(\"group-row-\" + group.option.id); // Add class for group toggling\n      tbody.appendChild(tr);\n      groupRows.push(tr);\n    });\n\n    // Toggle Logic\n    let isCollapsed = false;\n    toggleBtn.addEventListener(\"click\", () => {\n      isCollapsed = !isCollapsed;\n      toggleBtn.innerHTML = isCollapsed ? iconCollapsed : iconExpanded;\n      groupRows.forEach((row) => {\n        row.style.display = isCollapsed ? \"none\" : \"table-row\";\n      });\n    });\n  }\n}\n", "export class TableResizer {\n  constructor(\n    private table: HTMLTableElement,\n    private fields: any[],\n    private options: any,\n  ) {}\n\n  public setupResizers() {\n    const headers = this.table.querySelectorAll(\"th\");\n\n    headers.forEach((th, index) => {\n      // Skip index column\n      if (index === 0) return;\n\n      // Create resizer element\n      const resizer = document.createElement(\"div\");\n      resizer.className = \"column-resizer\";\n      resizer.style.position = \"absolute\";\n      resizer.style.top = \"0\";\n      resizer.style.right = \"0\";\n      resizer.style.width = \"4px\";\n      resizer.style.height = \"100%\";\n      resizer.style.cursor = \"col-resize\";\n      resizer.style.userSelect = \"none\";\n      resizer.style.zIndex = \"100\";\n\n      // Visual feedback on hover\n      resizer.addEventListener(\"mouseenter\", () => {\n        resizer.style.background = \"var(--vscode-focusBorder)\";\n      });\n\n      resizer.addEventListener(\"mouseleave\", () => {\n        resizer.style.background = \"transparent\";\n      });\n\n      // Resize logic\n      resizer.addEventListener(\"mousedown\", (e: MouseEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const cols = this.table.querySelectorAll(\"col\");\n        const col = cols[index] as HTMLTableColElement | undefined; // index aligns with th\n        const startW = col\n          ? parseInt(col.style.width) || col.offsetWidth\n          : th.offsetWidth;\n        this.beginColumnResize(index, e.pageX, startW);\n      });\n\n      // Make th position relative for absolute positioning\n      (th as HTMLElement).style.position = \"relative\";\n      th.appendChild(resizer);\n    });\n\n    // Restore column widths from localStorage\n    this.restoreColumnWidths();\n  }\n\n  public beginColumnResize(\n    colIndex: number,\n    startX: number,\n    startWidth: number,\n  ) {\n    const onMouseMove = (e: MouseEvent) => {\n      const newWidth = Math.max(20, startWidth + (e.pageX - startX));\n      const cols = this.table.querySelectorAll(\"col\");\n      const col = cols[colIndex] as HTMLTableColElement | undefined;\n      if (col) {\n        col.style.width = `${newWidth}px`;\n        col.style.minWidth = `${newWidth}px`;\n        col.style.maxWidth = `${newWidth}px`;\n      }\n    };\n\n    const onMouseUp = (e?: MouseEvent) => {\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n\n      // Save mapping to field id (colIndex - 1 => fields)\n      const fieldIndex = colIndex - 1;\n      if (fieldIndex >= 0 && fieldIndex < this.fields.length) {\n        const cols = this.table.querySelectorAll(\"col\");\n        const col = cols[colIndex] as HTMLTableColElement | undefined;\n        const widthToSave = col\n          ? parseInt(col.style.width) || col.offsetWidth\n          : undefined;\n        if (widthToSave) {\n          this.saveColumnWidth(this.fields[fieldIndex].id, widthToSave);\n        }\n      }\n    };\n\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n  }\n\n  private saveColumnWidth(fieldId: string, width: number) {\n    const key = this.getStorageKey(\"columnWidths\");\n    if (!key) return;\n\n    try {\n      const stored = localStorage.getItem(key);\n      const widths = stored ? JSON.parse(stored) : {};\n      widths[fieldId] = width;\n      localStorage.setItem(key, JSON.stringify(widths));\n    } catch (e) {}\n  }\n\n  private restoreColumnWidths() {\n    const key = this.getStorageKey(\"columnWidths\");\n    if (!key) return;\n\n    try {\n      const stored = localStorage.getItem(key);\n      if (!stored) return;\n\n      const widths = JSON.parse(stored);\n      const cols = this.table.querySelectorAll(\"col\");\n\n      this.fields.forEach((field, index) => {\n        const width = widths[field.id];\n        if (width) {\n          const col = cols[index + 1] as HTMLTableColElement; // +1 for index column\n          if (col) {\n            col.style.width = `${width}px`;\n            col.style.minWidth = `${width}px`;\n            col.style.maxWidth = `${width}px`;\n          }\n        }\n      });\n    } catch (e) {}\n  }\n\n  private getStorageKey(suffix: string): string {\n    return this.options.viewKey\n      ? `ghProjects.table.${this.options.viewKey}.${suffix}`\n      : \"\";\n  }\n}\n", "import { renderCell } from \"../renderers/cellRenderer\";\nimport { normalizeColor, getContrastColor, escapeHtml } from \"../utils\";\nimport { ColumnHeaderMenu } from \"./ColumnHeaderMenu\";\nimport { ColumnHeaderRenderer } from \"../renderers/columnHeaderRenderer\";\nimport FieldsMenu from \"./FieldsMenu\";\nimport { SlicePanel } from \"./SlicePanel\";\nimport type { SortConfig } from \"../utils/tableSorting\";\nimport { sortItems } from \"../utils/tableSorting\";\nimport { GroupDataService } from \"../services/GroupDataService\";\nimport { RowRenderer } from \"../renderers/RowRenderer\";\nimport { GroupRenderer } from \"../renderers/GroupRenderer\";\nimport { TableResizer } from \"./TableResizer\";\n\nexport interface TableOptions {\n  groupingFieldName?: string;\n  sortConfig?: SortConfig | null;\n  viewKey?: string;\n  hiddenFields?: string[];\n  onSortChange?: (config: SortConfig) => void;\n  onGroupChange?: (fieldName: string) => void;\n  onSliceChange?: (field: any) => void;\n  onHiddenFieldsChange?: (hiddenIds: string[]) => void;\n}\n\nexport class ProjectTable {\n  private container: HTMLElement;\n  private allFields: any[]; // All fields including hidden\n  private fields: any[]; // Visible fields only\n  private items: any[];\n  private options: TableOptions;\n  private hiddenFieldIds: Set<string>;\n  private activeMenu: ColumnHeaderMenu | null = null;\n  private activeFieldsMenu: FieldsMenu | null = null;\n  private activeSlicePanel: SlicePanel | null = null;\n  private activeSlice: { fieldId: string; value: any } | null = null;\n  // Track which field the active slice panel is for (panel may be open before a value is selected)\n  private activeSlicePanelFieldId: string | null = null;\n  private tableResizer: TableResizer | null = null;\n\n  constructor(\n    container: HTMLElement,\n    fields: any[],\n    items: any[],\n    options: TableOptions = {},\n  ) {\n    this.container = container;\n    // Normalize all field ids to strings to avoid type mismatches\n    this.allFields = (fields || []).map((f) => ({ ...f, id: String(f.id) }));\n    this.options = options;\n    this.items = items;\n\n    // Load hidden fields from options or localStorage\n    const hiddenFromStorage = this.loadHiddenFields().map((id) => String(id));\n    const hiddenFromOptions = (options.hiddenFields || []).map((id) =>\n      String(id),\n    );\n    this.hiddenFieldIds = new Set<string>([\n      ...hiddenFromStorage,\n      ...hiddenFromOptions,\n    ]);\n\n    // Filter visible fields (ids already normalized on allFields)\n    this.fields = this.allFields.filter((f) => !this.hiddenFieldIds.has(f.id));\n\n    // Debug: log initial hidden/visible sets\n    try {\n      console.debug(\n        \"[ProjectTable] init: allFieldIds=\",\n        this.allFields.map((f) => f.id),\n      );\n      console.debug(\n        \"[ProjectTable] init: hiddenFieldIds=\",\n        Array.from(this.hiddenFieldIds),\n      );\n      console.debug(\n        \"[ProjectTable] init: visibleFieldIds=\",\n        this.fields.map((f) => f.id),\n      );\n    } catch (e) {}\n\n    // Also forward debug info to the extension output channel so it's visible\n    try {\n      const dbg = {\n        allFieldIds: this.allFields.map((f: any) => String(f.id)),\n        hiddenFieldIds: Array.from(this.hiddenFieldIds),\n        visibleFieldIds: this.fields.map((f: any) => String(f.id)),\n      };\n      if (\n        (window as any).__APP_MESSAGING__ &&\n        typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\n      ) {\n        (window as any).__APP_MESSAGING__.postMessage({\n          command: \"debugLog\",\n          level: \"debug\",\n          message: \"ProjectTable init\",\n          data: dbg,\n          viewKey: this.options.viewKey,\n        });\n      }\n    } catch (e) {}\n\n    // Load and apply field order if stored\n    this.applyFieldOrder();\n  }\n\n  public render() {\n    // Preserve slice panel if it exists\n    const existingSlicePanel = this.container.querySelector(\".slice-panel\");\n\n    this.container.innerHTML = \"\";\n\n    // Re-add slice panel if it existed\n    if (existingSlicePanel) {\n      this.container.appendChild(existingSlicePanel);\n    }\n\n    const tableContainer = document.createElement(\"div\");\n    tableContainer.className = \"table-wrapper\";\n    tableContainer.style.overflowX = \"auto\";\n    tableContainer.style.overflowY = \"auto\";\n    tableContainer.style.width = \"100%\";\n    tableContainer.style.display = \"block\";\n    tableContainer.style.height = \"100%\"; // Let it grow\n\n    const table = document.createElement(\"table\");\n    table.style.borderCollapse = \"separate\";\n    table.style.borderSpacing = \"0\";\n    // Use fixed layout so explicit <col> widths are honored and columns can be\n    // resized smaller than their content (content will be ellipsised).\n    table.style.tableLayout = \"fixed\";\n    // Let container control horizontal scrolling while table fills width\n    table.style.width = \"100%\";\n\n    this.renderColGroup(table);\n    new ColumnHeaderRenderer({\n      fields: this.fields,\n      sortConfig: this.options.sortConfig,\n      groupingFieldName: this.options.groupingFieldName,\n      activeSlice: this.activeSlice,\n      activeSlicePanelFieldId: this.activeSlicePanelFieldId,\n      onHeaderMenu: this.showHeaderMenu.bind(this),\n      onShowFieldsMenu: this.showFieldsMenu.bind(this),\n      onClearGroup: this.clearGroup.bind(this),\n      onClearSlice: this.clearSlice.bind(this),\n    }).render(table);\n    this.renderBody(table);\n\n    tableContainer.appendChild(table);\n    this.container.appendChild(tableContainer);\n\n    // Post-render: adjust column widths based on content (simple heuristic)\n    // This was in the original code, we can keep it or improve it.\n    // For now, let's keep the sticky header logic and resizers.\n    this.tableResizer = new TableResizer(table, this.fields, this.options);\n    this.tableResizer.setupResizers();\n  }\n\n  private renderColGroup(table: HTMLTableElement) {\n    const colgroup = document.createElement(\"colgroup\");\n    // Index column\n    const colIndex = document.createElement(\"col\");\n    colIndex.style.width = \"40px\";\n    colgroup.appendChild(colIndex);\n\n    for (const field of this.fields) {\n      const col = document.createElement(\"col\");\n      col.style.width = \"150px\"; // Default width\n      // Attach field id so resizer can update the correct <col>\n      col.dataset.fieldId = field.id;\n      colgroup.appendChild(col);\n    }\n\n    // Add Field column\n    const colAddField = document.createElement(\"col\");\n    colAddField.style.width = \"50px\";\n    colgroup.appendChild(colAddField);\n\n    table.appendChild(colgroup);\n  }\n\n  private showFieldsMenu(anchorElement: HTMLElement) {\n    // Hide existing menus\n    if (this.activeMenu) {\n      this.activeMenu.hide();\n      this.activeMenu = null;\n    }\n    if (this.activeFieldsMenu) {\n      this.activeFieldsMenu.hide();\n      this.activeFieldsMenu = null;\n    }\n\n    // Build visible id set from hiddenFieldIds to ensure consistent detection (normalize ids)\n    const visibleSet = new Set<string>(\n      this.allFields\n        .filter((f) => !this.hiddenFieldIds.has(String(f.id)))\n        .map((f) => String(f.id)),\n    );\n\n    // Debug: log current hidden/visible sets before showing menu\n    try {\n      console.debug(\n        \"[ProjectTable] showFieldsMenu: hiddenFieldIds=\",\n        Array.from(this.hiddenFieldIds),\n      );\n      console.debug(\n        \"[ProjectTable] showFieldsMenu: allFieldIds=\",\n        this.allFields.map((f) => f.id),\n      );\n    } catch (e) {}\n\n    const menu = new FieldsMenu({\n      fields: this.allFields.map((f) => ({\n        id: f.id,\n        name: f.name,\n        iconClass: f.iconClass,\n        dataType: f.dataType || f.type,\n      })),\n      visibleFieldIds: visibleSet,\n      onToggleVisibility: (fieldId: string, visible: boolean) => {\n        if (visible) this.showField(fieldId);\n        else this.hideField(fieldId);\n      },\n      onCreateField: () => {\n        // Placeholder: open create field flow if available\n        try {\n          console.log(\"Create field requested\");\n        } catch (e) {}\n      },\n    });\n\n    this.activeFieldsMenu = menu;\n    menu.show(anchorElement);\n  }\n\n  private renderBody(table: HTMLTableElement) {\n    const tbody = document.createElement(\"tbody\");\n\n    // Apply sorting\n    let displayItems = this.items;\n    if (this.options.sortConfig) {\n      displayItems = sortItems(\n        this.items,\n        this.fields,\n        this.options.sortConfig,\n      );\n    }\n\n    // Apply Slice Filter\n    if (this.activeSlice) {\n      displayItems = displayItems.filter((item) => {\n        const fv = item.fieldValues.find(\n          (v: any) => String(v.fieldId) === String(this.activeSlice!.fieldId),\n        );\n        if (!fv) return this.activeSlice!.value === null; // Match empty if value is null\n\n        // Extract value logic similar to SlicePanel\n        let val = null;\n        if (fv.text !== undefined) val = fv.text;\n        else if (fv.title !== undefined) val = fv.title;\n        else if (fv.number !== undefined) val = fv.number;\n        else if (fv.date !== undefined) val = fv.date;\n        else if (fv.option) val = fv.option.name;\n        else if (fv.iteration) val = fv.iteration.title;\n        else val = fv.value;\n\n        return val === this.activeSlice!.value;\n      });\n    }\n\n    // Check for grouping\n    const groupingField = this.getGroupingField();\n    const rowRenderer = new RowRenderer(\n      this.fields,\n      this.items,\n      (colIndex, pageX, startWidth) => {\n        if (this.tableResizer) {\n          this.tableResizer.beginColumnResize(colIndex, pageX, startWidth);\n        }\n      },\n    );\n\n    if (groupingField) {\n      this.renderGroupedRows(tbody, groupingField, displayItems, rowRenderer);\n    } else {\n      this.renderFlatRows(tbody, displayItems, rowRenderer);\n    }\n\n    table.appendChild(tbody);\n  }\n\n  private getGroupingField() {\n    // Logic to determine grouping field from options or view details\n    // Passed via options.groupingFieldName or similar\n    if (this.options.groupingFieldName) {\n      return this.fields.find(\n        (f) =>\n          (f.name &&\n            f.name.toLowerCase() ===\n              this.options.groupingFieldName?.toLowerCase()) ||\n          (f.id && f.id === this.options.groupingFieldName),\n      );\n    }\n    return null;\n  }\n\n  private renderFlatRows(\n    tbody: HTMLTableSectionElement,\n    items: any[],\n    rowRenderer: RowRenderer,\n  ) {\n    items.forEach((item, index) => {\n      const tr = rowRenderer.createRow(item, index);\n      tbody.appendChild(tr);\n    });\n  }\n\n  private renderGroupedRows(\n    tbody: HTMLTableSectionElement,\n    groupingField: any,\n    items: any[],\n    rowRenderer: RowRenderer,\n  ) {\n    // Group items\n    const groups = GroupDataService.groupItems(items, groupingField);\n    const groupRenderer = new GroupRenderer(this.fields, this.items);\n\n    for (const group of groups) {\n      groupRenderer.renderGroup(tbody, group, groupingField, rowRenderer);\n    }\n  }\n\n  private showHeaderMenu(\n    event: MouseEvent,\n    field: any,\n    headerElement: HTMLElement,\n  ) {\n    event.stopPropagation();\n\n    // Hide existing menu\n    if (this.activeMenu) {\n      this.activeMenu.hide();\n    }\n\n    // Determine capabilities based on field type\n    const dataType = (field.dataType || \"\").toLowerCase();\n    // Mapping of GitHub ProjectV2 field data types to allowed operations\n    // Groupable: assignees, single_select, parent_issue, iteration, number, date, milestone, repository\n    const groupableTypes = new Set([\n      \"assignees\",\n      \"single_select\",\n      \"parent_issue\",\n      \"iteration\",\n      \"number\",\n      \"date\",\n      \"milestone\",\n      \"repository\",\n    ]);\n\n    // Sliceable: same as groupable, plus labels (multi-value) which can be sliced but not grouped\n    const sliceableTypes = new Set([\n      \"assignees\",\n      \"single_select\",\n      \"parent_issue\",\n      \"iteration\",\n      \"number\",\n      \"date\",\n      \"milestone\",\n      \"repository\",\n      \"labels\",\n    ]);\n\n    const canGroup = groupableTypes.has(dataType);\n    const canSlice = sliceableTypes.has(dataType);\n\n    // Determine current state (grouped/sliced/sorted)\n    const isGrouped = !!(\n      this.options.groupingFieldName &&\n      field.name &&\n      field.name.toLowerCase() === this.options.groupingFieldName.toLowerCase()\n    );\n    const isSliced = !!(\n      (this.activeSlice && this.activeSlice.fieldId === field.id) ||\n      (this.activeSlicePanelFieldId &&\n        String(this.activeSlicePanelFieldId) === String(field.id))\n    );\n    const currentSort =\n      this.options.sortConfig && this.options.sortConfig.fieldId === field.id\n        ? this.options.sortConfig.direction\n        : null;\n\n    // Create and show menu\n    const fieldIndex = this.fields.findIndex((f) => f.id === field.id);\n    const isFirst = fieldIndex === 0;\n    const isLast = fieldIndex === this.fields.length - 1;\n\n    this.activeMenu = new ColumnHeaderMenu(field, {\n      canGroup,\n      canSlice,\n      canFilter: false, // Optional feature for later\n      isGrouped,\n      isSliced,\n      currentSort,\n      isFirst,\n      isLast,\n      onSort: (direction) => this.handleSort(field, direction),\n      onClearSort: () => this.clearSort(field),\n      onGroup: () => this.handleGroup(field),\n      onClearGroup: () => this.clearGroup(field),\n      onSlice: () => this.handleSlice(field),\n      onClearSlice: () => this.clearSlice(field),\n      onHide: () => this.hideField(field.id),\n      onMove: (direction) => this.handleMove(field, direction),\n    });\n\n    this.activeMenu.show(headerElement);\n  }\n\n  private clearGroup(field: any) {\n    // Clear local grouping state and notify parent\n    this.options.groupingFieldName = undefined;\n    if (this.options.onGroupChange) {\n      try {\n        // Notify parent that grouping was cleared\n        this.options.onGroupChange(\"\");\n      } catch (e) {}\n    }\n    this.render();\n  }\n\n  private clearSlice(field: any) {\n    this.activeSlice = null;\n    if (this.activeSlicePanel) {\n      this.activeSlicePanel.close();\n      this.activeSlicePanel = null;\n    }\n    this.activeSlicePanelFieldId = null;\n    // Reset container layout\n    this.container.style.display = \"block\";\n    this.render();\n    if (this.options.onSliceChange) {\n      this.options.onSliceChange(null as any);\n    }\n  }\n\n  private clearSort(field: any) {\n    // Clear local sort state; persistence and discard are managed by the caller\n    this.options.sortConfig = undefined;\n    this.render();\n    if (this.options.onSortChange) {\n      this.options.onSortChange(null as any);\n    }\n  }\n\n  private showHiddenFieldsMenu(anchorElement: HTMLElement) {\n    // Hide any existing menu\n    if (this.activeMenu) {\n      this.activeMenu.hide();\n    }\n\n    // Get hidden fields\n    const hiddenFields = this.allFields.filter((f) =>\n      this.hiddenFieldIds.has(String(f.id)),\n    );\n\n    if (hiddenFields.length === 0) {\n      // Show message that no fields are hidden\n      const message = document.createElement(\"div\");\n      message.textContent = \"No hidden fields\";\n      message.style.position = \"absolute\";\n      message.style.background = \"var(--vscode-menu-background)\";\n      message.style.border = \"1px solid var(--vscode-menu-border)\";\n      message.style.borderRadius = \"4px\";\n      message.style.padding = \"12px\";\n      message.style.fontSize = \"13px\";\n      message.style.color = \"var(--vscode-descriptionForeground)\";\n      message.style.zIndex = \"1000\";\n\n      const rect = anchorElement.getBoundingClientRect();\n      message.style.top = `${rect.bottom + 4}px`;\n      message.style.left = `${rect.left}px`;\n\n      document.body.appendChild(message);\n\n      setTimeout(() => message.remove(), 2000);\n      return;\n    }\n\n    // Create simple menu for hidden fields\n    const menu = document.createElement(\"div\");\n    menu.style.position = \"absolute\";\n    menu.style.background = \"var(--vscode-menu-background)\";\n    menu.style.border = \"1px solid var(--vscode-menu-border)\";\n    menu.style.borderRadius = \"4px\";\n    menu.style.padding = \"4px 0\";\n    menu.style.minWidth = \"180px\";\n    menu.style.zIndex = \"1000\";\n    menu.style.fontSize = \"13px\";\n\n    const rect = anchorElement.getBoundingClientRect();\n    menu.style.top = `${rect.bottom + 4}px`;\n    menu.style.left = `${rect.left}px`;\n\n    // Header\n    const header = document.createElement(\"div\");\n    header.textContent = \"Show field\";\n    header.style.padding = \"6px 12px\";\n    header.style.fontWeight = \"600\";\n    header.style.color = \"var(--vscode-descriptionForeground)\";\n    header.style.fontSize = \"11px\";\n    header.style.textTransform = \"uppercase\";\n    menu.appendChild(header);\n\n    const separator = document.createElement(\"div\");\n    separator.style.height = \"1px\";\n    separator.style.background = \"var(--vscode-menu-separatorBackground)\";\n    separator.style.margin = \"4px 0\";\n    menu.appendChild(separator);\n\n    // Field items\n    hiddenFields.forEach((field) => {\n      const item = document.createElement(\"div\");\n      item.textContent = field.name || field.id;\n      item.style.padding = \"6px 12px\";\n      item.style.cursor = \"pointer\";\n      item.style.color = \"var(--vscode-menu-foreground)\";\n\n      item.addEventListener(\"mouseenter\", () => {\n        item.style.background = \"var(--vscode-menu-selectionBackground)\";\n        item.style.color = \"var(--vscode-menu-selectionForeground)\";\n      });\n\n      item.addEventListener(\"mouseleave\", () => {\n        item.style.background = \"transparent\";\n        item.style.color = \"var(--vscode-menu-foreground)\";\n      });\n\n      item.addEventListener(\"click\", () => {\n        this.showField(field.id);\n        menu.remove();\n        backdrop.remove();\n      });\n\n      menu.appendChild(item);\n    });\n\n    // Backdrop\n    const backdrop = document.createElement(\"div\");\n    backdrop.style.position = \"fixed\";\n    backdrop.style.top = \"0\";\n    backdrop.style.left = \"0\";\n    backdrop.style.right = \"0\";\n    backdrop.style.bottom = \"0\";\n    backdrop.style.zIndex = \"999\";\n\n    // Clicking the backdrop closes the menu\n    backdrop.addEventListener(\"click\", () => {\n      if (menu.parentElement) menu.remove();\n      if (backdrop.parentElement) backdrop.remove();\n    });\n\n    // Append to body\n    document.body.appendChild(menu);\n    document.body.appendChild(backdrop);\n\n    // End of showHiddenFieldsMenu\n  }\n\n  private handleSort(field: any, direction: \"ASC\" | \"DESC\") {\n    const sortConfig: SortConfig = {\n      fieldId: field.id,\n      direction,\n    };\n\n    // Update local sort state so the UI reflects the change immediately\n    this.options.sortConfig = sortConfig;\n    this.render();\n\n    // Notify parent component so it can track unsaved sort state\n    if (this.options.onSortChange) {\n      this.options.onSortChange(sortConfig);\n    }\n  }\n\n  private handleGroup(field: any) {\n    // Update local grouping state so the UI reflects the change immediately\n    if (field && field.name) {\n      this.options.groupingFieldName = field.name;\n      this.render();\n      if (this.options.onGroupChange) {\n        try {\n          this.options.onGroupChange(field.name);\n        } catch (e) {}\n      }\n    }\n  }\n\n  private handleSlice(field: any) {\n    // Close existing panel\n    if (this.activeSlicePanel) {\n      this.activeSlicePanel.close();\n      this.activeSlicePanel = null;\n    }\n\n    // Create and show new panel in the container (left side)\n    this.activeSlicePanel = new SlicePanel(\n      this.container,\n      field,\n      this.items,\n      this.allFields,\n    );\n    this.activeSlicePanel.render();\n    // Remember which field the panel belongs to so header menu can show an \"unslice\" button\n    try {\n      this.activeSlicePanelFieldId = String(field.id);\n    } catch (e) {\n      this.activeSlicePanelFieldId = null;\n    }\n\n    // Make sure the slice panel appears before the table wrapper\n    const tableWrapper = this.container.querySelector(\".table-wrapper\");\n    if (tableWrapper) {\n      const sliceEl = this.container.querySelector(\".slice-panel\");\n      if (sliceEl) {\n        this.container.insertBefore(sliceEl, tableWrapper);\n      }\n    }\n\n    // Setup layout: container should use flexbox to show panel + table side by side\n    this.container.style.display = \"flex\";\n    this.container.style.flexDirection = \"row\";\n    this.container.style.gap = \"0\";\n\n    // Re-render so header reflects the active slice panel (shows slice icon)\n    // We preserve the existing slice panel in render(), so this is safe.\n    this.render();\n\n    this.activeSlicePanel.onValueSelect((value) => {\n      // Filter table by this value\n      this.activeSlice = { fieldId: field.id, value };\n      this.render();\n    });\n\n    // Handle field change\n    this.activeSlicePanel.onFieldChange((newField) => {\n      // Update active slice field\n      this.activeSlice = null; // Reset slice value when changing field\n      this.handleSlice(newField); // Re-render with new field\n\n      // Notify parent\n      if (this.options.onSliceChange) {\n        this.options.onSliceChange(newField);\n      }\n    });\n\n    // Notify parent\n    if (this.options.onSliceChange) {\n      this.options.onSliceChange(field);\n    }\n  }\n\n  public hideField(fieldId: string) {\n    const fid = String(fieldId);\n    this.hiddenFieldIds.add(fid);\n    try {\n      console.debug(\n        \"[ProjectTable] hideField -> added\",\n        fid,\n        \"hiddenFieldIds=\",\n        Array.from(this.hiddenFieldIds),\n      );\n    } catch (e) {}\n    // If a parent callback is provided (e.g. tableViewFetcher managing Save/Discard),\n    // notify it instead of immediately persisting to localStorage. This allows hide/unhide\n    // to be treated as an unsaved view-level change which can be saved/discarded by the user.\n    if (this.options.onHiddenFieldsChange) {\n      // update in-memory state and notify parent (do not persist to localStorage yet)\n      this.fields = this.allFields.filter(\n        (f) => !this.hiddenFieldIds.has(f.id),\n      );\n      // Re-apply stored field order so the UI appears consistent after toggling\n      try {\n        this.applyFieldOrder();\n      } catch (e) {}\n      try {\n        this.options.onHiddenFieldsChange(Array.from(this.hiddenFieldIds));\n      } catch (e) {}\n      this.render();\n    } else {\n      this.saveHiddenFields();\n      this.fields = this.allFields.filter(\n        (f) => !this.hiddenFieldIds.has(f.id),\n      );\n      try {\n        this.applyFieldOrder();\n      } catch (e) {}\n      this.render();\n    }\n  }\n\n  public showField(fieldId: string) {\n    const fid = String(fieldId);\n    this.hiddenFieldIds.delete(fid);\n    try {\n      console.debug(\n        \"[ProjectTable] showField -> removed\",\n        fid,\n        \"hiddenFieldIds=\",\n        Array.from(this.hiddenFieldIds),\n      );\n    } catch (e) {}\n    if (this.options.onHiddenFieldsChange) {\n      this.fields = this.allFields.filter(\n        (f) => !this.hiddenFieldIds.has(f.id),\n      );\n      try {\n        this.applyFieldOrder();\n      } catch (e) {}\n      try {\n        this.options.onHiddenFieldsChange(Array.from(this.hiddenFieldIds));\n      } catch (e) {}\n      this.render();\n    } else {\n      this.saveHiddenFields();\n      this.fields = this.allFields.filter(\n        (f) => !this.hiddenFieldIds.has(f.id),\n      );\n      try {\n        this.applyFieldOrder();\n      } catch (e) {}\n      this.render();\n    }\n  }\n\n  private handleMove(field: any, direction: \"left\" | \"right\") {\n    const currentIndex = this.fields.findIndex((f) => f.id === field.id);\n\n    if (direction === \"left\" && currentIndex > 0) {\n      // Swap with previous\n      [this.fields[currentIndex], this.fields[currentIndex - 1]] = [\n        this.fields[currentIndex - 1],\n        this.fields[currentIndex],\n      ];\n    } else if (direction === \"right\" && currentIndex < this.fields.length - 1) {\n      // Swap with next\n      [this.fields[currentIndex], this.fields[currentIndex + 1]] = [\n        this.fields[currentIndex + 1],\n        this.fields[currentIndex],\n      ];\n    }\n\n    this.saveFieldOrder();\n    this.render();\n  }\n\n  // LocalStorage persistence methods\n  private getStorageKey(suffix: string): string {\n    return this.options.viewKey\n      ? `ghProjects.table.${this.options.viewKey}.${suffix}`\n      : \"\";\n  }\n\n  private loadHiddenFields(): string[] {\n    const key = this.getStorageKey(\"hiddenFields\");\n    if (!key) return [];\n\n    try {\n      const stored = localStorage.getItem(key);\n      const arr = stored ? JSON.parse(stored) : [];\n      // Normalize stored ids to strings\n      const normalized = (arr || []).map((id: any) => String(id));\n      try {\n        console.debug(\"[ProjectTable] loadHiddenFields ->\", normalized);\n      } catch (e) {}\n      return normalized;\n    } catch (e) {\n      return [];\n    }\n  }\n\n  private saveHiddenFields() {\n    const key = this.getStorageKey(\"hiddenFields\");\n    if (!key) return;\n\n    const arr = Array.from(this.hiddenFieldIds).map((id) => String(id));\n    try {\n      console.debug(\"[ProjectTable] saveHiddenFields ->\", arr);\n    } catch (e) {}\n    localStorage.setItem(key, JSON.stringify(arr));\n  }\n\n  private saveSortConfig(config: SortConfig) {\n    const key = this.getStorageKey(\"sortConfig\");\n    if (!key) return;\n\n    localStorage.setItem(key, JSON.stringify(config));\n  }\n\n  private saveFieldOrder() {\n    const key = this.getStorageKey(\"fieldOrder\");\n    if (!key) return;\n\n    const order = this.fields.map((f) => f.id);\n    localStorage.setItem(key, JSON.stringify(order));\n  }\n\n  private applyFieldOrder() {\n    const key = this.getStorageKey(\"fieldOrder\");\n    if (!key) return;\n\n    try {\n      const stored = localStorage.getItem(key);\n      if (!stored) return;\n\n      const order: string[] = JSON.parse(stored);\n      const orderedFields: any[] = [];\n\n      // Add fields in stored order\n      for (const fieldId of order) {\n        const field = this.fields.find((f) => String(f.id) === String(fieldId));\n        if (field) {\n          orderedFields.push(field);\n        }\n      }\n\n      // Add any new fields not in stored order\n      for (const field of this.fields) {\n        if (!orderedFields.find((f) => f.id === field.id)) {\n          orderedFields.push(field);\n        }\n      }\n\n      this.fields = orderedFields;\n    } catch (e) {\n      // Ignore errors, use default order\n    }\n  }\n}\n", "export function setLoadingState(container: HTMLElement, titleText: string) {\n  container.innerHTML =\n    '<div class=\"title\">' +\n    titleText +\n    '</div><div class=\"loading\"><em>Loading...</em></div>';\n}\n\nexport function setErrorState(\n  container: HTMLElement,\n  titleText: string,\n  error: string,\n) {\n  container.innerHTML =\n    '<div class=\"title\">' +\n    titleText +\n    '</div><div style=\"color:var(--vscode-editor-foreground)\">' +\n    error +\n    \"</div>\";\n}\n\nexport function createLoadMoreButton(onClick: () => void): HTMLButtonElement {\n  const btn = document.createElement(\"button\");\n  btn.type = \"button\";\n  btn.textContent = \"Load more\";\n  btn.style.marginLeft = \"8px\";\n  btn.style.border = \"1px solid var(--vscode-editorWidget-border)\";\n  btn.addEventListener(\"click\", () => {\n    onClick();\n    btn.disabled = true;\n    btn.textContent = \"Loading...\";\n  });\n  return btn;\n}\n\nexport function clearElement(element: HTMLElement) {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n}\n\nexport function toggleClass(\n  element: HTMLElement,\n  className: string,\n  force?: boolean,\n) {\n  element.classList.toggle(className, force);\n}\n", "/// <reference path=\"./global.d.ts\" />\nimport { logDebug } from \"./utils/logger\";\nimport {\n  setLoadingState,\n  setErrorState,\n  createLoadMoreButton,\n} from \"./utils/domUtils\";\n\nexport { logDebug, setLoadingState, setErrorState, createLoadMoreButton };\n\n/**\n * Initializes the filter bar using the shared filterBarHelper.\n * Returns the barApi if successful, or null.\n */\nexport function initFilterBar(\n  container: HTMLElement,\n  viewKey: string,\n  options: {\n    suffix?: string;\n    step?: number;\n    effFilter?: string;\n    onLoadMore?: () => void;\n    onSave?: (filter: any) => void;\n    onDiscard?: () => void;\n  },\n): any {\n  if (\n    window.filterBarHelper &&\n    typeof window.filterBarHelper.create === \"function\"\n  ) {\n    try {\n      return window.filterBarHelper.create({\n        parent: container,\n        suffix: options.suffix || viewKey,\n        effFilter:\n          typeof options.effFilter === \"string\" ? options.effFilter : undefined,\n        viewKey: viewKey,\n        step: options.step || 50,\n        onLoadMore: options.onLoadMore,\n        onSave: options.onSave,\n        onDiscard: options.onDiscard,\n      });\n    } catch (e) {\n      return null;\n    }\n  }\n  return null;\n}\n\n/**\n * Toggles visibility of elements based on matched IDs from the filter.\n */\nexport function applyFilterVisibility(\n  root: HTMLElement | Document,\n  selector: string,\n  matchedIds: Set<string>,\n  displayStyle: string = \"block\",\n) {\n  try {\n    const elements = Array.from(root.querySelectorAll(selector));\n    for (let i = 0; i < elements.length; i++) {\n      try {\n        const el = elements[i] as HTMLElement;\n        const id = el.getAttribute(\"data-gh-item-id\");\n        el.style.display = matchedIds.has(String(id)) ? displayStyle : \"none\";\n      } catch (e) {}\n    }\n  } catch (e) {}\n}\n", "import { ProjectTable } from \"./components/ProjectTable\";\nimport {\n  setLoadingState,\n  setErrorState,\n  initFilterBar,\n  createLoadMoreButton,\n  logDebug,\n} from \"./viewFetcherUtils\";\nimport { parseSortByFields, sortItems } from \"./utils/tableSorting\";\nimport type { SortConfig } from \"./utils/tableSorting\";\n\n/// <reference path=\"./global.d.ts\" />\n\nwindow.tableViewFetcher = function (\n  view: any,\n  container: HTMLElement,\n  viewKey: any,\n) {\n  const viewName =\n    view && (view.name || view.id) ? view.name || view.id : \"Table View\";\n  try {\n    setLoadingState(container, viewName);\n  } catch (e) {}\n\n  let itemsLimit = 30;\n\n  function render(payload: any, effectiveFilter?: string) {\n    const snapshot = payload || {};\n    const fields = snapshot.fields || [];\n    const allItems = snapshot.items || [];\n    const items = allItems.slice(0, itemsLimit);\n\n    // Reset container layout\n    container.innerHTML = \"\";\n    container.style.margin = \"0\";\n    container.style.padding = \"0\";\n    container.style.height = \"100%\";\n    container.style.display = \"flex\";\n    container.style.flexDirection = \"column\";\n    container.style.overflow = \"hidden\";\n\n    // Header / Filter Bar Container\n    const headerContainer = document.createElement(\"div\");\n    headerContainer.style.flex = \"0 0 auto\";\n    headerContainer.style.background = \"var(--vscode-editor-background)\";\n    headerContainer.style.zIndex = \"20\";\n    headerContainer.style.position = \"relative\";\n    headerContainer.style.display = \"flex\";\n    headerContainer.style.justifyContent = \"space-between\";\n    headerContainer.style.alignItems = \"center\";\n    headerContainer.style.width = \"100%\"; // Ensure full width\n\n    // Filter Wrapper to take available space\n    const filterWrapper = document.createElement(\"div\");\n    filterWrapper.style.flex = \"1 1 auto\";\n    filterWrapper.style.marginRight = \"8px\";\n    headerContainer.appendChild(filterWrapper);\n\n    // Init Filter Bar\n    // Track unsaved view-level changes (grouping) and wire Save/Discard hooks\n    let unsavedGrouping: string | null = null;\n    // Track unsaved hidden fields changes (shown/hidden via the plus-column menu)\n    let unsavedHiddenFields: Set<string> | null = null;\n    // Track unsaved slice changes\n    let unsavedSlice: { fieldId: string; value: any } | null = null;\n    // Track unsaved sort changes (local-only view state). We use\n    // `undefined` = no pending change, non-null = new sort, null = clear sort.\n    let unsavedSort: SortConfig | null | undefined = undefined;\n    let barApi = initFilterBar(filterWrapper, viewKey, {\n      suffix: viewKey ? String(viewKey).split(\":\").pop() : \"\",\n      step: itemsLimit,\n      onLoadMore: () => {\n        itemsLimit += 30;\n        requestFields();\n      },\n      onSave: (newFilter: any) => {\n        try {\n          // Save grouping if changed\n          if (unsavedGrouping !== null) {\n            if (\n              (window as any).__APP_MESSAGING__ &&\n              typeof (window as any).__APP_MESSAGING__.postMessage ===\n                \"function\"\n            ) {\n              (window as any).__APP_MESSAGING__.postMessage({\n                command: \"setViewGrouping\",\n                viewKey: viewKey,\n                grouping: unsavedGrouping,\n              });\n            }\n            unsavedGrouping = null;\n          }\n\n          // Save hidden fields if changed\n          if (unsavedHiddenFields !== null) {\n            const hiddenArr = Array.from(unsavedHiddenFields);\n            if (\n              (window as any).__APP_MESSAGING__ &&\n              typeof (window as any).__APP_MESSAGING__.postMessage ===\n                \"function\"\n            ) {\n              (window as any).__APP_MESSAGING__.postMessage({\n                command: \"setViewHiddenFields\",\n                viewKey: viewKey,\n                hiddenFields: hiddenArr,\n              });\n            }\n            // Persist to localStorage as well so UI persists across reloads (server may also return updated snapshot)\n            try {\n              const key = viewKey\n                ? `ghProjects.table.${viewKey}.hiddenFields`\n                : null;\n              if (key) localStorage.setItem(key, JSON.stringify(hiddenArr));\n            } catch (e) {}\n            unsavedHiddenFields = null;\n          }\n\n          // Save slice if changed\n          if (unsavedSlice !== null) {\n            if (\n              (window as any).__APP_MESSAGING__ &&\n              typeof (window as any).__APP_MESSAGING__.postMessage ===\n                \"function\"\n            ) {\n              (window as any).__APP_MESSAGING__.postMessage({\n                command: \"setViewSlice\",\n                viewKey: viewKey,\n                slice: unsavedSlice,\n              });\n            }\n            // Persist to localStorage as well\n            try {\n              const key = viewKey ? `ghProjects.table.${viewKey}.slice` : null;\n              if (key) localStorage.setItem(key, JSON.stringify(unsavedSlice));\n            } catch (e) {}\n            unsavedSlice = null;\n          }\n\n          // Save sort if changed (persist local override only)\n          if (unsavedSort !== undefined) {\n            try {\n              const key = viewKey\n                ? `ghProjects.table.${viewKey}.sortConfig`\n                : null;\n              if (key) {\n                if (unsavedSort === null) {\n                  // User cleared sort: remove override\n                  localStorage.removeItem(key);\n                } else {\n                  // User set a new sort: store override\n                  localStorage.setItem(key, JSON.stringify(unsavedSort));\n                }\n              }\n            } catch (e) {}\n            unsavedSort = undefined;\n          }\n        } catch (e) {}\n      },\n      onDiscard: () => {\n        try {\n          // Discard grouping changes\n          if (unsavedGrouping !== null) {\n            if (\n              (window as any).__APP_MESSAGING__ &&\n              typeof (window as any).__APP_MESSAGING__.postMessage ===\n                \"function\"\n            ) {\n              (window as any).__APP_MESSAGING__.postMessage({\n                command: \"discardViewGrouping\",\n                viewKey: viewKey,\n              });\n            }\n            unsavedGrouping = null;\n          }\n\n          // Discard hidden fields changes: request fresh snapshot from extension\n          if (unsavedHiddenFields !== null) {\n            if (\n              (window as any).__APP_MESSAGING__ &&\n              typeof (window as any).__APP_MESSAGING__.postMessage ===\n                \"function\"\n            ) {\n              (window as any).__APP_MESSAGING__.postMessage({\n                command: \"discardViewHiddenFields\",\n                viewKey: viewKey,\n              });\n            }\n            unsavedHiddenFields = null;\n            // Re-request fields to refresh UI from server state\n            requestFields();\n          }\n\n          // Discard slice changes: clear slice and refresh UI\n          if (unsavedSlice !== null) {\n            if (\n              (window as any).__APP_MESSAGING__ &&\n              typeof (window as any).__APP_MESSAGING__.postMessage ===\n                \"function\"\n            ) {\n              (window as any).__APP_MESSAGING__.postMessage({\n                command: \"discardViewSlice\",\n                viewKey: viewKey,\n              });\n            }\n            unsavedSlice = null;\n            // Clear localStorage\n            try {\n              const key = viewKey ? `ghProjects.table.${viewKey}.slice` : null;\n              if (key) localStorage.removeItem(key);\n            } catch (e) {}\n            // Re-request fields to refresh UI from server state\n            requestFields();\n          }\n\n          // Discard sort changes: forget pending change and\n          // refresh UI from persisted server/local override state.\n          if (unsavedSort !== undefined) {\n            unsavedSort = undefined;\n            // Re-request fields to refresh UI from server/default + stored sort\n            requestFields();\n          }\n        } catch (e) {}\n      },\n    });\n\n    // If the server provided an effective filter, apply it via the bar API\n    // rather than passing it in the options object. This avoids typing\n    // mismatches while still initializing the input value at runtime.\n    try {\n      if (\n        effectiveFilter &&\n        barApi &&\n        typeof barApi.setEffectiveFilter === \"function\"\n      ) {\n        try {\n          barApi.setEffectiveFilter(effectiveFilter);\n        } catch (e) {}\n      }\n    } catch (e) {}\n\n    // Fallback Header if Filter Bar fails or returns null\n    if (!barApi) {\n      const title = document.createElement(\"div\");\n      title.className = \"title\";\n      title.textContent = viewName;\n      title.style.padding = \"8px\";\n      headerContainer.appendChild(title);\n\n      const controls = document.createElement(\"div\");\n      controls.style.padding = \"8px\";\n\n      if (allItems.length > itemsLimit) {\n        const loadMore = createLoadMoreButton(() => {\n          itemsLimit += 30;\n          requestFields();\n        });\n        controls.appendChild(loadMore);\n      } else {\n        const span = document.createElement(\"span\");\n        span.textContent = \"All loaded\";\n        span.style.color = \"var(--vscode-descriptionForeground)\";\n        controls.appendChild(span);\n      }\n      headerContainer.appendChild(controls);\n    } else {\n      // Update load state in barApi\n      if (typeof barApi.setLoadState === \"function\") {\n        barApi.setLoadState(\n          allItems.length < itemsLimit,\n          allItems.length >= itemsLimit ? \"Load more\" : \"All loaded\",\n        );\n      }\n      // Register items for filtering\n      if (typeof barApi.registerItems === \"function\") {\n        barApi.registerItems(allItems, { fields });\n      }\n    }\n\n    container.appendChild(headerContainer);\n\n    // Table Container\n    const tableContainer = document.createElement(\"div\");\n    tableContainer.style.flex = \"1 1 auto\";\n    tableContainer.style.overflow = \"hidden\";\n    tableContainer.style.position = \"relative\";\n    container.appendChild(tableContainer);\n\n    // Determine Grouping\n    const groupingFieldName = getGroupingFieldName(snapshot);\n\n    // Parse sort config from GitHub\n    let sortConfig = parseSortByFields(snapshot.details?.sortByFields);\n\n    // Check for local override\n    if (viewKey) {\n      try {\n        const stored = localStorage.getItem(\n          `ghProjects.table.${viewKey}.sortConfig`,\n        );\n        if (stored) sortConfig = JSON.parse(stored);\n      } catch (e) {}\n    }\n\n    // Apply sorting\n    let displayItems = items;\n    if (sortConfig) {\n      displayItems = sortItems(items, fields, sortConfig);\n    }\n\n    // Render Table\n    // Use `allFields` if provided (full project fields), otherwise fall back to `fields` (view-visible fields)\n    const allFields =\n      (snapshot as any).allFields && Array.isArray((snapshot as any).allFields)\n        ? (snapshot as any).allFields\n        : snapshot.fields || [];\n\n    // Determine which fields the view exposes (visible). If view details contain a fields.nodes\n    // list, compute the hidden fields (allFields - viewFields) and pass them to ProjectTable so\n    // it picks up view-default hidden fields.\n    const viewFieldNodes =\n      (snapshot as any).details &&\n      (snapshot as any).details.fields &&\n      Array.isArray((snapshot as any).details.fields.nodes)\n        ? (snapshot as any).details.fields.nodes\n        : null;\n\n    let viewHiddenFieldIds: string[] | undefined = undefined;\n    if (viewFieldNodes && Array.isArray(viewFieldNodes)) {\n      const visibleIds = new Set(viewFieldNodes.map((n: any) => String(n.id)));\n      viewHiddenFieldIds = (allFields || [])\n        .map((f: any) => String(f.id))\n        .filter((id: string) => !visibleIds.has(id));\n    }\n\n    // Send debug info to extension output (via postMessage) so we can see what the webview computed\n    try {\n      const dbg = {\n        allFieldIds: (allFields || []).map((f: any) => String(f.id)),\n        viewFieldIds: viewFieldNodes\n          ? viewFieldNodes.map((n: any) => String(n.id))\n          : null,\n        viewHiddenFieldIds,\n      };\n      if (\n        (window as any).__APP_MESSAGING__ &&\n        typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\n      ) {\n        (window as any).__APP_MESSAGING__.postMessage({\n          command: \"debugLog\",\n          level: \"debug\",\n          message: \"tableViewFetcher field debug\",\n          data: dbg,\n          viewKey,\n        });\n      }\n    } catch (e) {}\n\n    const table = new ProjectTable(tableContainer, allFields, displayItems, {\n      groupingFieldName: groupingFieldName || undefined,\n      sortConfig,\n      viewKey,\n      hiddenFields: viewHiddenFieldIds,\n      onHiddenFieldsChange: (hiddenIds: string[]) => {\n        try {\n          unsavedHiddenFields = new Set(\n            (hiddenIds || []).map((h: any) => String(h)),\n          );\n          // Enable Save/Discard buttons in the filter bar if present\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\n            try {\n              barApi.saveBtn.disabled = false;\n              barApi.discardBtn.disabled = false;\n              barApi.saveBtn.style.opacity = \"1\";\n              barApi.saveBtn.style.cursor = \"pointer\";\n              barApi.discardBtn.style.opacity = \"1\";\n              barApi.discardBtn.style.cursor = \"pointer\";\n            } catch (e) {}\n          }\n        } catch (e) {}\n      },\n      onSortChange: (config: SortConfig | null) => {\n        try {\n          unsavedSort = config || null;\n          // Enable Save/Discard buttons in the filter bar if present\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\n            try {\n              barApi.saveBtn.disabled = false;\n              barApi.discardBtn.disabled = false;\n              barApi.saveBtn.style.opacity = \"1\";\n              barApi.saveBtn.style.cursor = \"pointer\";\n              barApi.discardBtn.style.opacity = \"1\";\n              barApi.discardBtn.style.cursor = \"pointer\";\n            } catch (e) {}\n          }\n        } catch (e) {}\n      },\n      onGroupChange: (fieldName: string) => {\n        // Defer persistence of grouping until user explicitly Saves from the filter bar\n        try {\n          unsavedGrouping = fieldName || null;\n          // Enable Save/Discard buttons in the filter bar if present\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\n            try {\n              barApi.saveBtn.disabled = false;\n              barApi.discardBtn.disabled = false;\n              barApi.saveBtn.style.opacity = \"1\";\n              barApi.saveBtn.style.cursor = \"pointer\";\n              barApi.discardBtn.style.opacity = \"1\";\n              barApi.discardBtn.style.cursor = \"pointer\";\n            } catch (e) {}\n          }\n        } catch (e) {}\n      },\n      onSliceChange: (field: any) => {\n        // Track slice as unsaved change (requires Save/Discard)\n        try {\n          unsavedSlice = field ? { fieldId: field.id, value: null } : null;\n\n          // Enable Save/Discard buttons in the filter bar if present\n          if (barApi && barApi.saveBtn && barApi.discardBtn) {\n            try {\n              barApi.saveBtn.disabled = false;\n              barApi.discardBtn.disabled = false;\n              barApi.saveBtn.style.opacity = \"1\";\n              barApi.saveBtn.style.cursor = \"pointer\";\n              barApi.discardBtn.style.opacity = \"1\";\n              barApi.discardBtn.style.cursor = \"pointer\";\n            } catch (e) {}\n          }\n\n          // Log for debugging\n          if (\n            (window as any).__APP_MESSAGING__ &&\n            typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\n          ) {\n            (window as any).__APP_MESSAGING__.postMessage({\n              command: \"debugLog\",\n              level: \"debug\",\n              message: field\n                ? `Slice activated on field: ${field.name}`\n                : \"Slice cleared\",\n              viewKey: viewKey,\n            });\n          }\n        } catch (e) {}\n      },\n    });\n    table.render();\n\n    // Connect Filter to Table Visibility\n    if (barApi && typeof barApi.onFilterChange === \"function\") {\n      barApi.onFilterChange((matchedIds: Set<string>) => {\n        // Apply visibility to table rows\n        const rows = tableContainer.querySelectorAll(\"tr[data-gh-item-id]\");\n        rows.forEach((row: any) => {\n          const id = row.getAttribute(\"data-gh-item-id\");\n          if (id && matchedIds.has(id)) {\n            row.style.display = \"table-row\";\n          } else {\n            row.style.display = \"none\";\n          }\n        });\n      });\n    }\n  }\n\n  function onMessage(ev: MessageEvent) {\n    const msg = ev && ev.data ? ev.data : ev;\n    try {\n      if (msg && msg.command === \"fields\") {\n        if (msg.viewKey && viewKey && String(msg.viewKey) !== String(viewKey))\n          return;\n\n        if (msg.error) {\n          setErrorState(container, viewName, String(msg.error));\n        } else {\n          render(msg.payload, msg.effectiveFilter);\n        }\n      }\n    } catch (e) {}\n  }\n\n  function requestFields() {\n    try {\n      if (\n        (window as any).__APP_MESSAGING__ &&\n        typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\n      ) {\n        (window as any).__APP_MESSAGING__.postMessage({\n          command: \"requestFields\",\n          first: itemsLimit,\n          viewKey: viewKey,\n        });\n      }\n    } catch (e) {}\n  }\n\n  try {\n    (window as any).__APP_MESSAGING__.onMessage(onMessage);\n  } catch (e) {\n    window.addEventListener(\"message\", onMessage);\n  }\n  requestFields();\n};\n\nfunction getGroupingFieldName(snapshot: any): string | null {\n  try {\n    if (snapshot && snapshot.details) {\n      const vgb =\n        snapshot.details.verticalGroupByFields &&\n        snapshot.details.verticalGroupByFields.nodes;\n      const gb =\n        snapshot.details.groupByFields && snapshot.details.groupByFields.nodes;\n\n      if (vgb && vgb.length > 0) return vgb[0].name || null;\n      if (gb && gb.length > 0) return gb[0].name || null;\n    }\n  } catch (e) {}\n  return null;\n}\n"],
  "mappings": "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",
  "names": ["ColumnHeaderMenu", "field", "options", "iconName", "anchorElement", "rect", "disableLeft", "disableRight", "label", "onClick", "item", "iconEl", "labelEl", "clearBtn", "e", "separator", "ColumnHeaderRenderer", "options", "iconName", "table", "thead", "tr", "thIndex", "field", "th", "headerContent", "nameSpan", "headerText", "isGrouped", "isSliced", "isSorted", "iconsContainer", "sortIcon", "direction", "groupIcon", "ev", "sliceIcon", "menuBtn", "e", "thAddField", "addFieldBtn", "FieldsMenu", "options", "anchorElement", "rect", "menuRect", "margin", "vw", "vh", "top", "left", "title", "icon", "label", "newField", "visible", "f", "hidden", "text", "h", "r", "field", "row", "c", "iconHtml", "newVisible", "s", "dataType", "iconName", "FieldsMenu_default", "escapeHtml", "s", "normalizeColor", "color", "n", "b", "u", "addAlpha", "alpha", "S", "v", "C", "getContrastColor", "SlicePanel", "container", "field", "items", "allFields", "stored", "debugOverlay", "resizer", "startX", "startWidth", "onMouseMove", "e", "dx", "newW", "onMouseUp", "ev", "header", "headerTop", "sliceLabel", "fieldButton", "arrow", "content", "anchorButton", "sliceableTypes", "sliceableFields", "f", "dataType", "dropdown", "item", "iconSpan", "labelSpan", "backdrop", "iconName", "valueCounts", "empty", "sorted", "a", "b", "resolveParentProgress", "parentMeta", "result", "identifiers", "found", "A", "d", "M", "o", "m", "statusFV", "v", "c", "normalizeColor", "agg", "key", "value", "count", "rawValue", "parentMetaForIteration", "leftVisual", "makeColorDot", "dot", "visualAppended", "avatarUrl", "avatarEl", "escapeHtml", "repoIcon", "prog", "dotColor", "pd", "lab", "colorCandidate", "normalized", "colorVal", "iter", "it", "labelColumn", "label", "descText", "desc", "p", "titleText", "titleEl", "tspan", "displayedTitle", "summary", "doneText", "bar", "fill", "iterObj", "iterCandidate", "start", "duration", "s", "sStr", "eStr", "rangeEl", "countCircle", "counts", "fv", "existing", "labelsArr", "name", "ass", "fieldValue", "callback", "parseSortByFields", "sortByFields", "primary", "config", "secondary", "sortItems", "items", "fields", "sortConfig", "field", "f", "sorted", "a", "b", "primaryResult", "compareFieldValues", "secondaryField", "direction", "aValue", "getFieldValue", "bValue", "result", "compareText", "compareNumber", "compareDate", "compareSingleSelect", "compareIteration", "compareLabels", "item", "fieldValue", "fv", "extractTitleLikeString", "list", "first", "repo", "m", "parent", "prs", "issues", "rawNode", "content", "aStr", "bStr", "aNum", "bNum", "aDate", "bDate", "aOption", "bOption", "aIndex", "opt", "bIndex", "aLabels", "bLabels", "GroupDataService", "items", "field", "options", "dType", "groups", "opt", "unassigned", "item", "index", "fv", "v", "placed", "matchId", "matchName", "group", "g", "map", "unassignedFallback", "val", "p", "a", "key", "groupsArr", "ICON_DEFINITIONS", "getIconSvg", "name", "options", "icon", "size", "className", "fill", "viewBox", "ariaHidden", "ariaLabel", "escapeHtml", "title", "innerContent", "escapeHtml", "text", "div", "TitleRenderer", "value", "field", "item", "allItems", "t", "l", "r", "w", "x", "normalizeColor", "p", "g", "escapeHtml", "f", "content", "isPullRequest", "isDraft", "isClosed", "isMerged", "isBlocked", "parentIsDoneByStatus", "st", "completedNames", "hasBlockedLabel", "hasBlockedStatus", "hasDoneFromStatus", "statusFv", "fv", "fname", "optNameLower", "hasDoneLabel", "iconName", "baseIcon", "getIconSvg", "blockedIcon", "TextRenderer", "NumberRenderer", "DateRenderer", "o", "SingleSelectRenderer", "n", "c", "hasHex", "border", "bg", "addAlpha", "fg", "IterationRenderer", "i", "name", "rawColor", "RepositoryRenderer", "LabelsRenderer", "a", "k", "L", "h", "PullRequestRenderer", "prs", "out", "num", "titleText", "url", "normColor", "getContrastColor", "state", "IssueRenderer", "AssigneesRenderer", "RequestedReviewersRenderer", "MilestoneRenderer", "SubIssuesProgressRenderer", "totalCount", "doneCount", "pct", "ParentIssueRenderer", "itemsList", "B", "O", "$", "A", "d", "M", "V", "X", "parentIconName", "parentIcon", "q", "parentWrapper", "strategies", "TitleRenderer", "TextRenderer", "NumberRenderer", "DateRenderer", "SingleSelectRenderer", "IterationRenderer", "RepositoryRenderer", "LabelsRenderer", "PullRequestRenderer", "IssueRenderer", "AssigneesRenderer", "RequestedReviewersRenderer", "MilestoneRenderer", "SubIssuesProgressRenderer", "ParentIssueRenderer", "renderCell", "e", "n", "s", "allItems", "strategy", "err", "RowRenderer", "fields", "allItems", "onResizeStart", "item", "index", "tr", "tdIndex", "colIndex", "field", "td", "fv", "v", "renderCell", "cellResizer", "e", "table", "col", "startWidth", "GroupRenderer", "fields", "allItems", "iconName", "size", "tbody", "group", "groupingField", "rowRenderer", "trHeader", "tdHeader", "headerContent", "estimateField", "f", "estimateFieldId", "sumEstimate", "itemsArr", "sum", "gi", "it", "fv", "v", "num", "formatEstimate", "n", "toggleBtn", "iconExpanded", "iconCollapsed", "colorDot", "normalizeColor", "nameSpan", "leftPane", "rightPane", "parentMeta", "resolvedParentItem", "first", "pfv", "identifiers", "found", "A", "d", "M", "o", "m", "avatarEl", "avatarUrl", "match", "a", "escapeHtml", "repoIcon", "content", "statusFV", "c", "countCircle", "estSum", "estEl", "completedNames", "isDoneByHeuristics", "state", "percentFV", "labs", "l", "cn", "done", "total", "agg", "doneText", "progWrapper", "pct", "bar", "fill", "opt", "descEl", "iterText", "start", "duration", "s", "days", "e", "sStr", "eStr", "iterEl", "groupRows", "groupItem", "tr", "isCollapsed", "row", "TableResizer", "table", "fields", "options", "th", "index", "resizer", "e", "col", "startW", "colIndex", "startX", "startWidth", "onMouseMove", "newWidth", "onMouseUp", "fieldIndex", "widthToSave", "fieldId", "width", "key", "stored", "widths", "cols", "field", "suffix", "ProjectTable", "container", "fields", "items", "options", "f", "hiddenFromStorage", "id", "hiddenFromOptions", "dbg", "existingSlicePanel", "tableContainer", "table", "ColumnHeaderRenderer", "TableResizer", "colgroup", "colIndex", "field", "col", "colAddField", "anchorElement", "visibleSet", "menu", "FieldsMenu_default", "fieldId", "visible", "tbody", "displayItems", "sortItems", "item", "fv", "v", "val", "groupingField", "rowRenderer", "RowRenderer", "pageX", "startWidth", "index", "tr", "groups", "GroupDataService", "groupRenderer", "GroupRenderer", "group", "event", "headerElement", "dataType", "groupableTypes", "sliceableTypes", "canGroup", "canSlice", "isGrouped", "isSliced", "currentSort", "fieldIndex", "isFirst", "isLast", "ColumnHeaderMenu", "direction", "hiddenFields", "message", "rect", "header", "separator", "backdrop", "sortConfig", "SlicePanel", "tableWrapper", "sliceEl", "value", "newField", "fid", "currentIndex", "suffix", "key", "stored", "normalized", "arr", "config", "order", "orderedFields", "setLoadingState", "container", "titleText", "setErrorState", "error", "createLoadMoreButton", "onClick", "btn", "initFilterBar", "container", "viewKey", "options", "view", "container", "viewKey", "viewName", "setLoadingState", "itemsLimit", "render", "payload", "effectiveFilter", "snapshot", "fields", "allItems", "items", "headerContainer", "filterWrapper", "unsavedGrouping", "unsavedHiddenFields", "unsavedSlice", "unsavedSort", "barApi", "initFilterBar", "requestFields", "newFilter", "hiddenArr", "key", "title", "controls", "loadMore", "createLoadMoreButton", "span", "tableContainer", "groupingFieldName", "getGroupingFieldName", "sortConfig", "parseSortByFields", "stored", "displayItems", "sortItems", "allFields", "viewFieldNodes", "viewHiddenFieldIds", "visibleIds", "n", "f", "id", "dbg", "ProjectTable", "hiddenIds", "h", "config", "fieldName", "field", "matchedIds", "row", "onMessage", "ev", "msg", "setErrorState", "vgb", "gb"]
}
