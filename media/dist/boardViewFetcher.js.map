{
  "version": 3,
  "sources": ["../../src/webviews/client/components/AddItemMenu.ts", "../../src/webviews/client/utils.ts", "../../src/webviews/client/utils/logger.ts", "../../src/webviews/client/utils/domUtils.ts", "../../src/webviews/client/viewFetcherUtils.ts", "../../src/webviews/client/renderers/BoardCardRenderer.ts", "../../src/webviews/client/utils/tableSorting.ts", "../../src/webviews/client/boardViewFetcher.ts"],
  "sourcesContent": ["export interface AddItemMenuOptions {\r\n  anchorElement: HTMLElement;\r\n  onCreateIssue: () => void;\r\n  onAddFromRepo: () => void;\r\n}\r\n\r\nexport class AddItemMenu {\r\n  private options: AddItemMenuOptions;\r\n  private menuElement: HTMLElement | null = null;\r\n  private backdropElement: HTMLElement | null = null;\r\n\r\n  constructor(options: AddItemMenuOptions) {\r\n    this.options = options;\r\n  }\r\n\r\n  public show() {\r\n    this.hide();\r\n\r\n    this.backdropElement = document.createElement(\"div\");\r\n    this.backdropElement.style.position = \"fixed\";\r\n    this.backdropElement.style.top = \"0\";\r\n    this.backdropElement.style.left = \"0\";\r\n    this.backdropElement.style.right = \"0\";\r\n    this.backdropElement.style.bottom = \"0\";\r\n    this.backdropElement.style.zIndex = \"998\";\r\n    this.backdropElement.addEventListener(\"click\", () => this.hide());\r\n    document.body.appendChild(this.backdropElement);\r\n\r\n    this.menuElement = document.createElement(\"div\");\r\n    this.menuElement.className = \"add-item-menu\";\r\n    this.menuElement.style.position = \"absolute\";\r\n    this.menuElement.style.background = \"var(--vscode-menu-background)\";\r\n    this.menuElement.style.border = \"1px solid var(--vscode-menu-border)\";\r\n    this.menuElement.style.borderRadius = \"4px\";\r\n    this.menuElement.style.boxShadow = \"0 2px 8px rgba(0,0,0,0.15)\";\r\n    this.menuElement.style.minWidth = \"220px\";\r\n    this.menuElement.style.padding = \"4px 0\";\r\n    this.menuElement.style.zIndex = \"1000\";\r\n    this.menuElement.style.fontSize = \"13px\";\r\n\r\n    document.body.appendChild(this.menuElement);\r\n    this.buildMenu();\r\n\r\n    const rect = this.options.anchorElement.getBoundingClientRect();\r\n    const menuRect = this.menuElement.getBoundingClientRect();\r\n    const margin = 8;\r\n    const vw = window.innerWidth || document.documentElement.clientWidth;\r\n    const vh = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n    let top = rect.bottom + margin;\r\n    if (rect.bottom + menuRect.height + margin > vh) {\r\n      if (rect.top - menuRect.height - margin >= 0) {\r\n        top = rect.top - menuRect.height - margin;\r\n      } else {\r\n        top = Math.max(\r\n          margin,\r\n          Math.min(vh - menuRect.height - margin, rect.bottom + margin),\r\n        );\r\n      }\r\n    }\r\n\r\n    let left = rect.left;\r\n    if (rect.left + menuRect.width + margin > vw) {\r\n      left = Math.max(margin, rect.right - menuRect.width);\r\n    }\r\n    left = Math.max(margin, Math.min(left, vw - menuRect.width - margin));\r\n\r\n    this.menuElement.style.top = `${Math.round(top)}px`;\r\n    this.menuElement.style.left = `${Math.round(left)}px`;\r\n  }\r\n\r\n  public hide() {\r\n    if (this.menuElement) {\r\n      this.menuElement.remove();\r\n      this.menuElement = null;\r\n    }\r\n    if (this.backdropElement) {\r\n      this.backdropElement.remove();\r\n      this.backdropElement = null;\r\n    }\r\n  }\r\n\r\n  private buildMenu() {\r\n    if (!this.menuElement) return;\r\n\r\n    const mkItem = (\r\n      iconName: string,\r\n      label: string,\r\n      description: string,\r\n      onClick: () => void,\r\n    ) => {\r\n      const row = document.createElement(\"div\");\r\n      row.className = \"add-item-menu-item\";\r\n      row.style.display = \"flex\";\r\n      row.style.alignItems = \"center\";\r\n      row.style.padding = \"6px 12px\";\r\n      row.style.cursor = \"pointer\";\r\n      row.style.color = \"var(--vscode-menu-foreground)\";\r\n\r\n      const iconSpan = document.createElement(\"span\");\r\n      iconSpan.style.display = \"inline-flex\";\r\n      iconSpan.style.alignItems = \"center\";\r\n      iconSpan.style.justifyContent = \"center\";\r\n      iconSpan.style.marginRight = \"8px\";\r\n      iconSpan.innerHTML = (window as any).getIconSvg?.(iconName as any) || \"\";\r\n      row.appendChild(iconSpan);\r\n\r\n      const textContainer = document.createElement(\"div\");\r\n      textContainer.style.display = \"flex\";\r\n      textContainer.style.flexDirection = \"column\";\r\n      textContainer.style.flex = \"1\";\r\n\r\n      const titleEl = document.createElement(\"div\");\r\n      titleEl.textContent = label;\r\n      titleEl.style.fontWeight = \"500\";\r\n      textContainer.appendChild(titleEl);\r\n\r\n      if (description) {\r\n        const descEl = document.createElement(\"div\");\r\n        descEl.textContent = description;\r\n        descEl.style.fontSize = \"11px\";\r\n        descEl.style.color = \"var(--vscode-descriptionForeground)\";\r\n        textContainer.appendChild(descEl);\r\n      }\r\n\r\n      row.appendChild(textContainer);\r\n\r\n      row.addEventListener(\"mouseenter\", () => {\r\n        row.style.background = \"var(--vscode-menu-selectionBackground)\";\r\n        row.style.color = \"var(--vscode-menu-selectionForeground)\";\r\n      });\r\n      row.addEventListener(\"mouseleave\", () => {\r\n        row.style.background = \"transparent\";\r\n        row.style.color = \"var(--vscode-menu-foreground)\";\r\n      });\r\n\r\n      row.addEventListener(\"click\", () => {\r\n        onClick();\r\n        this.hide();\r\n      });\r\n\r\n      this.menuElement!.appendChild(row);\r\n    };\r\n\r\n    mkItem(\r\n      \"issue-opened\",\r\n      \"Create new issue\",\r\n      \"Create a project issue in a repository.\",\r\n      this.options.onCreateIssue,\r\n    );\r\n\r\n    mkItem(\r\n      \"repo\",\r\n      \"Add item from repository\",\r\n      \"Attach an existing issue or pull request from a repo.\",\r\n      this.options.onAddFromRepo,\r\n    );\r\n  }\r\n}\r\n", "export function escapeHtml(s: any): string {\r\n  return s\r\n    ? String(s)\r\n        .replace(/&/g, \"&amp;\")\r\n        .replace(/</g, \"&lt;\")\r\n        .replace(/>/g, \"&gt;\")\r\n    : \"\";\r\n}\r\n\r\nexport function normalizeColor(color: any): string | null {\r\n  if (!color) return null;\r\n  let n = String(color).trim();\r\n  if (\r\n    /^#?[0-9a-f]{3}$/i.test(n) ||\r\n    /^#?[0-9a-f]{6}$/i.test(n) ||\r\n    /^#?[0-9a-f]{8}$/i.test(n)\r\n  ) {\r\n    let b = n[0] === \"#\" ? n.slice(1) : n;\r\n    return \"#\" + (b.length === 8 ? b.substring(0, 6) : b);\r\n  }\r\n  let s = {\r\n    GRAY: \"#848d97\",\r\n    RED: \"#f85149\",\r\n    ORANGE: \"#db6d28\",\r\n    YELLOW: \"#d29922\",\r\n    GREEN: \"#3fb950\",\r\n    BLUE: \"#2f81f7\",\r\n    PURPLE: \"#a371f7\",\r\n    PINK: \"#db61a2\",\r\n    BLACK: \"#000000\",\r\n    WHITE: \"#ffffff\",\r\n  };\r\n  let u = n.toUpperCase();\r\n  return (s as any)[u] || null;\r\n}\r\n\r\nexport function addAlpha(color: any, alpha: any): string | null {\r\n  if (!color) return null;\r\n  let s = color.replace(\"#\", \"\");\r\n  let u = (b: any) => parseInt(b, 16);\r\n  if (s.length === 3) {\r\n    let b = u(s[0] + s[0]),\r\n      S = u(s[1] + s[1]),\r\n      v = u(s[2] + s[2]);\r\n    return \"rgba(\" + b + \",\" + S + \",\" + v + \",\" + alpha + \")\";\r\n  }\r\n  if (s.length === 6 || s.length === 8) {\r\n    let b = s.length === 8 ? s.substring(0, 6) : s,\r\n      S = u(s.substring(0, 2)),\r\n      v = u(b.substring(2, 4)),\r\n      C = u(b.substring(4, 6));\r\n    return \"rgba(\" + S + \",\" + v + \",\" + C + \",\" + alpha + \")\";\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function getContrastColor(color: any): string {\r\n  if (!color) return \"#333333\";\r\n  let n = color.replace(\"#\", \"\");\r\n  let s = (C: any) => parseInt(C, 16);\r\n  let u, b, S;\r\n  if (n.length === 3)\r\n    ((u = s(n[0] + n[0])), (b = s(n[1] + n[1])), (S = s(n[2] + n[2])));\r\n  else if (n.length === 6 || n.length === 8) {\r\n    let C = n.length === 8 ? n.substring(0, 6) : n;\r\n    ((u = s(C.substring(0, 2))),\r\n      (b = s(C.substring(2, 4))),\r\n      (S = s(C.substring(4, 6))));\r\n  } else return \"#333333\";\r\n  return 0.2126 * (u / 255) + 0.7152 * (b / 255) + 0.0722 * (S / 255) > 0.6\r\n    ? \"#111111\"\r\n    : \"#ffffff\";\r\n}\r\n", "/// <reference path=\"../global.d.ts\" />\r\n\r\nexport function logDebug(viewKey: string, message: string, data?: any) {\r\n  try {\r\n    if (\r\n      (window as any).__APP_MESSAGING__ &&\r\n      typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\r\n    ) {\r\n      (window as any).__APP_MESSAGING__.postMessage({\r\n        command: \"debugLog\",\r\n        level: \"debug\",\r\n        viewKey: viewKey,\r\n        message: message,\r\n        data: data,\r\n      });\r\n    }\r\n  } catch (e) {}\r\n  try {\r\n    if (console && console.log) {\r\n      console.log(message, data);\r\n    }\r\n  } catch (e) {}\r\n}\r\n", "export function setLoadingState(container: HTMLElement, titleText: string) {\r\n  container.innerHTML =\r\n    '<div class=\"title\">' +\r\n    titleText +\r\n    '</div><div class=\"loading\"><em>Loading...</em></div>';\r\n}\r\n\r\nexport function setErrorState(\r\n  container: HTMLElement,\r\n  titleText: string,\r\n  error: string,\r\n) {\r\n  container.innerHTML =\r\n    '<div class=\"title\">' +\r\n    titleText +\r\n    '</div><div style=\"color:var(--vscode-editor-foreground)\">' +\r\n    error +\r\n    \"</div>\";\r\n}\r\n\r\nexport function createLoadMoreButton(onClick: () => void): HTMLButtonElement {\r\n  const btn = document.createElement(\"button\");\r\n  btn.type = \"button\";\r\n  btn.textContent = \"Load more\";\r\n  btn.style.marginLeft = \"8px\";\r\n  btn.style.border = \"1px solid var(--vscode-editorWidget-border)\";\r\n  btn.addEventListener(\"click\", () => {\r\n    onClick();\r\n    btn.disabled = true;\r\n    btn.textContent = \"Loading...\";\r\n  });\r\n  return btn;\r\n}\r\n\r\nexport function clearElement(element: HTMLElement) {\r\n  while (element.firstChild) {\r\n    element.removeChild(element.firstChild);\r\n  }\r\n}\r\n\r\nexport function toggleClass(\r\n  element: HTMLElement,\r\n  className: string,\r\n  force?: boolean,\r\n) {\r\n  element.classList.toggle(className, force);\r\n}\r\n", "/// <reference path=\"./global.d.ts\" />\r\nimport { logDebug } from \"./utils/logger\";\r\nimport {\r\n  setLoadingState,\r\n  setErrorState,\r\n  createLoadMoreButton,\r\n} from \"./utils/domUtils\";\r\n\r\nexport { logDebug, setLoadingState, setErrorState, createLoadMoreButton };\r\n\r\n/**\r\n * Initializes the filter bar using the shared filterBarHelper.\r\n * Returns the barApi if successful, or null.\r\n */\r\nexport function initFilterBar(\r\n  container: HTMLElement,\r\n  viewKey: string,\r\n  options: {\r\n    suffix?: string;\r\n    step?: number;\r\n    effFilter?: string;\r\n    onLoadMore?: () => void;\r\n    onSave?: (filter: any) => void;\r\n    onDiscard?: () => void;\r\n  },\r\n): any {\r\n  if (\r\n    window.filterBarHelper &&\r\n    typeof window.filterBarHelper.create === \"function\"\r\n  ) {\r\n    try {\r\n      return window.filterBarHelper.create({\r\n        parent: container,\r\n        suffix: options.suffix || viewKey,\r\n        effFilter:\r\n          typeof options.effFilter === \"string\" ? options.effFilter : undefined,\r\n        viewKey: viewKey,\r\n        step: options.step || 50,\r\n        onLoadMore: options.onLoadMore,\r\n        onSave: options.onSave,\r\n        onDiscard: options.onDiscard,\r\n      });\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Toggles visibility of elements based on matched IDs from the filter.\r\n */\r\nexport function applyFilterVisibility(\r\n  root: HTMLElement | Document,\r\n  selector: string,\r\n  matchedIds: Set<string>,\r\n  displayStyle: string = \"block\",\r\n) {\r\n  try {\r\n    const elements = Array.from(root.querySelectorAll(selector));\r\n    for (let i = 0; i < elements.length; i++) {\r\n      try {\r\n        const el = elements[i] as HTMLElement;\r\n        const id = el.getAttribute(\"data-gh-item-id\");\r\n        el.style.display = matchedIds.has(String(id)) ? displayStyle : \"none\";\r\n      } catch (e) {}\r\n    }\r\n  } catch (e) {}\r\n}\r\n", "import {\r\n  normalizeColor,\r\n  escapeHtml,\r\n  addAlpha,\r\n  getContrastColor,\r\n} from \"../utils\";\r\n\r\n/**\r\n * BoardCardRenderer - Renders board view cards grouped by column field\r\n * Each card represents a column option (from single_select or iteration field)\r\n */\r\nexport class BoardCardRenderer {\r\n  constructor(\r\n    private fields: any[],\r\n    private allItems: any[],\r\n    private visibleFieldIds?: string[],\r\n    private onFilter?: (filter: string) => void,\r\n    private onAction?: (action: string, item: any, args?: any) => void,\r\n  ) {\r\n    // Bind methods\r\n    this.handlePillClick = this.handlePillClick.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Handle pill click for filtering\r\n   */\r\n  private handlePillClick(e: MouseEvent, field: string, value: string) {\r\n    e.stopPropagation(); // Prevent opening item\r\n    e.preventDefault();\r\n    if (this.onFilter) {\r\n      const safeValue = value.includes(\" \")\r\n        ? `\"${value.replace(/\"/g, '\\\\\"')}\"`\r\n        : value;\r\n      // Quote field if it contains spaces\r\n      const safeField = field.includes(\" \")\r\n        ? `\"${field.replace(/\"/g, '\\\\\"')}\"`\r\n        : field;\r\n      this.onFilter(`${safeField}:${safeValue}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Helper to get icon SVG from registry\r\n   */\r\n  private getIconSvg(\r\n    iconName: string,\r\n    size: number = 14,\r\n    fill?: string,\r\n  ): string {\r\n    if ((window as any).getIconSvg) {\r\n      return (window as any).getIconSvg(iconName, { size, fill });\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Find estimate field (prioritize fields with \"estimate\" in name)\r\n   */\r\n  private getEstimateField(): any {\r\n    return (\r\n      this.fields.find(\r\n        (f) =>\r\n          f.dataType &&\r\n          String(f.dataType).toLowerCase() === \"number\" &&\r\n          String(f.name || \"\")\r\n            .toLowerCase()\r\n            .includes(\"estimate\"),\r\n      ) ||\r\n      this.fields.find(\r\n        (f) => f.dataType && String(f.dataType).toLowerCase() === \"number\",\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sum estimate values for a list of items\r\n   */\r\n  public sumEstimate(items: any[]): number {\r\n    const estimateField = this.getEstimateField();\r\n    if (!estimateField) return 0;\r\n\r\n    let sum = 0;\r\n    for (const item of items) {\r\n      if (!item || !Array.isArray(item.fieldValues)) continue;\r\n      const fv = item.fieldValues.find(\r\n        (v: any) =>\r\n          (v.fieldId && String(v.fieldId) === String(estimateField.id)) ||\r\n          (v.fieldName &&\r\n            String(v.fieldName).toLowerCase().includes(\"estimate\")) ||\r\n          v.type === \"number\",\r\n      );\r\n      if (fv) {\r\n        const num = Number(\r\n          fv.number != null ? fv.number : fv.value != null ? fv.value : NaN,\r\n        );\r\n        if (!isNaN(num)) sum += num;\r\n      }\r\n    }\r\n    return sum;\r\n  }\r\n\r\n  /**\r\n   * Format estimate number for display\r\n   */\r\n  private formatEstimate(n: number): string {\r\n    if (!isFinite(n)) return \"\";\r\n    return String(n);\r\n  }\r\n\r\n  /**\r\n   * Group items by column field value\r\n   */\r\n  public groupItemsByColumn(\r\n    items: any[],\r\n    columnField: any,\r\n  ): Map<string, { option: any; items: any[] }> {\r\n    const groups = new Map<string, { option: any; items: any[] }>();\r\n    const dataType = String(columnField.dataType || \"\").toLowerCase();\r\n\r\n    // Get all options from the field configuration\r\n    let options: any[] = [];\r\n    if (dataType === \"single_select\" && Array.isArray(columnField.options)) {\r\n      options = columnField.options;\r\n    } else if (\r\n      dataType === \"iteration\" &&\r\n      columnField.configuration?.iterations\r\n    ) {\r\n      options = columnField.configuration.iterations.map((it: any) => ({\r\n        id: it.id,\r\n        name: it.title,\r\n        title: it.title,\r\n        color: it.color || null,\r\n        startDate: it.startDate,\r\n        duration: it.duration,\r\n      }));\r\n    }\r\n\r\n    // Initialize groups for each option in order\r\n    for (const opt of options) {\r\n      const key = String(opt.id || opt.name || \"\");\r\n      if (key) {\r\n        groups.set(key, { option: opt, items: [] });\r\n      }\r\n    }\r\n\r\n    // Add \"No value\" group\r\n    groups.set(\"__no_value__\", {\r\n      option: {\r\n        id: \"__no_value__\",\r\n        name: `No ${columnField.name}`,\r\n        color: null,\r\n      },\r\n      items: [],\r\n    });\r\n\r\n    // Assign items to groups\r\n    for (const item of items) {\r\n      if (!item || !Array.isArray(item.fieldValues)) {\r\n        groups.get(\"__no_value__\")!.items.push(item);\r\n        continue;\r\n      }\r\n\r\n      const fv = item.fieldValues.find(\r\n        (v: any) =>\r\n          String(v.fieldId) === String(columnField.id) ||\r\n          String(v.fieldName).toLowerCase() === String(columnField.name).toLowerCase()\r\n      );\r\n\r\n      let groupKey = \"__no_value__\";\r\n\r\n      if (fv) {\r\n        if (dataType === \"single_select\") {\r\n          const optId = fv.optionId || (fv.option && fv.option.id);\r\n          const optName = fv.name || (fv.option && fv.option.name);\r\n          if (optId && groups.has(String(optId))) {\r\n            groupKey = String(optId);\r\n          } else if (optName) {\r\n            for (const [key, group] of groups) {\r\n              if (String(group.option.name).toLowerCase() === String(optName).toLowerCase()) {\r\n                groupKey = key;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        } else if (dataType === \"iteration\") {\r\n          const itId = fv.iterationId || (fv.iteration && fv.iteration.id) || fv.id;\r\n          const itTitle = fv.title || (fv.iteration && fv.iteration.title);\r\n          if (itId && groups.has(String(itId))) {\r\n            groupKey = String(itId);\r\n          } else if (itTitle) {\r\n            for (const [key, group] of groups) {\r\n              if (String(group.option.title).toLowerCase() === String(itTitle).toLowerCase() ||\r\n                String(group.option.name).toLowerCase() === String(itTitle).toLowerCase()) {\r\n                groupKey = key;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (groups.has(groupKey)) {\r\n        groups.get(groupKey)!.items.push(item);\r\n      } else {\r\n        groups.get(\"__no_value__\")!.items.push(item);\r\n      }\r\n    }\r\n\r\n    return groups;\r\n  }\r\n\r\n  /**\r\n   * Get iteration date range string\r\n   */\r\n  private getIterationRange(option: any): string | null {\r\n    const start = option.startDate || option.start;\r\n    const duration = option.duration || option.length;\r\n\r\n    if (!start || !duration) return null;\r\n\r\n    try {\r\n      const startDate = new Date(start);\r\n      const endDate = new Date(\r\n        startDate.getTime() + Number(duration) * 24 * 60 * 60 * 1000,\r\n      );\r\n\r\n      const formatDate = (d: Date) =>\r\n        d.toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" });\r\n\r\n      return `${formatDate(startDate)} \u2014 ${formatDate(endDate)}`;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a single card for a column\r\n   */\r\n  public renderCard(option: any, items: any[], columnField: any): HTMLElement {\r\n    const card = document.createElement(\"div\");\r\n    card.className = \"board-card\";\r\n    card.setAttribute(\"data-column-id\", String(option.id || option.name || \"\"));\r\n    card.style.width = \"350px\";\r\n    card.style.minWidth = \"350px\";\r\n    card.style.maxWidth = \"350px\";\r\n    card.style.background = \"var(--vscode-editorWidget-background)\";\r\n    card.style.border = \"1px solid var(--vscode-editorWidget-border)\";\r\n    card.style.borderRadius = \"0\";\r\n    card.style.display = \"flex\";\r\n    card.style.flexDirection = \"column\";\r\n    card.style.flexShrink = \"0\";\r\n\r\n    // Card Header\r\n    const header = this.renderColumnHeaderOnly(option, items, columnField);\r\n    header.style.borderBottom = \"1px solid var(--vscode-editorWidget-border)\";\r\n    card.appendChild(header);\r\n\r\n    // Card Items - with scroll for overflow\r\n    const itemsContainer = document.createElement(\"div\");\r\n    itemsContainer.className = \"board-card-items\";\r\n    itemsContainer.style.padding = \"8px\";\r\n    itemsContainer.style.overflowY = \"auto\";\r\n    itemsContainer.style.flex = \"1\";\r\n    itemsContainer.style.minHeight = \"0\"; // Important for flex scroll\r\n\r\n    // Get the column option color for items\r\n    const columnColor = normalizeColor(option.color) || \"#666666\";\r\n\r\n    for (const item of items) {\r\n      const itemEl = this.renderItem(item, columnField, columnColor);\r\n      itemsContainer.appendChild(itemEl);\r\n    }\r\n\r\n    card.appendChild(itemsContainer);\r\n\r\n    // Card Footer - Add item button\r\n    const footer = this.renderColumnFooterOnly(option, columnField);\r\n    card.appendChild(footer);\r\n\r\n    return card;\r\n  }\r\n\r\n  /**\r\n   * Render only the column header\r\n   */\r\n  private renderColumnHeaderOnly(\r\n    option: any,\r\n    items: any[],\r\n    columnField: any,\r\n  ): HTMLElement {\r\n    const dataType = String(columnField.dataType || \"\").toLowerCase();\r\n    const header = document.createElement(\"div\");\r\n    header.className = \"board-card-header\";\r\n    header.style.padding = \"12px\";\r\n    header.style.background = \"var(--vscode-sideBar-background)\";\r\n    header.style.flexShrink = \"0\";\r\n\r\n    // Header Row 1: Color dot + Title + Count + Estimate\r\n    const headerRow = document.createElement(\"div\");\r\n    headerRow.className = \"board-card-header-row\";\r\n    headerRow.style.display = \"flex\";\r\n    headerRow.style.alignItems = \"center\";\r\n    headerRow.style.gap = \"8px\";\r\n\r\n    // Color dot\r\n    const colorDot = document.createElement(\"span\");\r\n    colorDot.className = \"board-card-color-dot\";\r\n    colorDot.style.width = \"12px\";\r\n    colorDot.style.height = \"12px\";\r\n    colorDot.style.borderRadius = \"50%\";\r\n    colorDot.style.flexShrink = \"0\";\r\n    const normalizedColor = normalizeColor(option.color) || \"#666666\";\r\n    colorDot.style.backgroundColor = normalizedColor;\r\n    headerRow.appendChild(colorDot);\r\n\r\n    // Title\r\n    const title = document.createElement(\"span\");\r\n    title.className = \"board-card-title\";\r\n    title.style.fontWeight = \"600\";\r\n    title.style.flex = \"1\";\r\n    title.style.overflow = \"hidden\";\r\n    title.style.textOverflow = \"ellipsis\";\r\n    title.style.whiteSpace = \"nowrap\";\r\n    title.textContent = option.name || option.title || \"Unnamed\";\r\n    headerRow.appendChild(title);\r\n\r\n    // Count badge\r\n    const count = document.createElement(\"span\");\r\n    count.className = \"board-card-count\";\r\n    count.style.fontSize = \"12px\";\r\n    count.style.color = \"var(--vscode-descriptionForeground)\";\r\n    count.style.fontVariantNumeric = \"tabular-nums\";\r\n    count.textContent = String(items.length);\r\n    headerRow.appendChild(count);\r\n\r\n    // Estimate pill\r\n    const estSum = this.sumEstimate(items);\r\n    if (estSum > 0) {\r\n      const estimatePill = document.createElement(\"span\");\r\n      estimatePill.className = \"board-card-estimate\";\r\n      estimatePill.style.display = \"inline-block\";\r\n      estimatePill.style.padding = \"2px 8px\";\r\n      estimatePill.style.borderRadius = \"999px\";\r\n      estimatePill.style.background = \"var(--vscode-input-background)\";\r\n      estimatePill.style.border = \"1px solid var(--vscode-panel-border)\";\r\n      estimatePill.style.fontSize = \"12px\";\r\n      estimatePill.style.lineHeight = \"18px\";\r\n      estimatePill.textContent = this.formatEstimate(estSum);\r\n      headerRow.appendChild(estimatePill);\r\n    }\r\n\r\n    header.appendChild(headerRow);\r\n\r\n    // Header Row 2: Description or Iteration Range\r\n    let description: string | null = null;\r\n    if (dataType === \"single_select\" && option.description) {\r\n      description = String(option.description).slice(0, 120);\r\n    } else if (dataType === \"iteration\") {\r\n      description = this.getIterationRange(option);\r\n    }\r\n\r\n    if (description) {\r\n      const descRow = document.createElement(\"div\");\r\n      descRow.className = \"board-card-description\";\r\n      descRow.style.fontSize = \"12px\";\r\n      descRow.style.color = \"var(--vscode-descriptionForeground)\";\r\n      descRow.style.marginTop = \"4px\";\r\n      descRow.style.overflow = \"hidden\";\r\n      descRow.style.textOverflow = \"ellipsis\";\r\n      descRow.style.whiteSpace = \"nowrap\";\r\n      descRow.textContent = description;\r\n      header.appendChild(descRow);\r\n    }\r\n\r\n    return header;\r\n  }\r\n\r\n  /**\r\n   * Render only the column footer (Add item button)\r\n   */\r\n  private renderColumnFooterOnly(option: any, columnField: any): HTMLElement {\r\n    const footer = document.createElement(\"div\");\r\n    footer.className = \"board-card-footer\";\r\n    footer.style.padding = \"8px 12px\";\r\n    footer.style.borderTop = \"1px solid var(--vscode-editorWidget-border)\";\r\n    footer.style.cursor = \"pointer\";\r\n    footer.style.userSelect = \"none\";\r\n    footer.style.flexShrink = \"0\";\r\n    footer.style.transition = \"background-color 0.15s ease\";\r\n    footer.setAttribute(\"data-column-field-id\", String(columnField.id || \"\"));\r\n    footer.setAttribute(\"data-column-value-id\", String(option.id || \"\"));\r\n    footer.setAttribute(\r\n      \"data-column-value-name\",\r\n      String(option.name || option.title || \"\"),\r\n    );\r\n\r\n    const addLabel = document.createElement(\"span\");\r\n    addLabel.textContent = \"+ Add item\";\r\n    addLabel.style.opacity = \"0.9\";\r\n    addLabel.style.fontSize = \"13px\";\r\n    footer.appendChild(addLabel);\r\n\r\n    footer.addEventListener(\"mouseenter\", () => {\r\n      footer.style.backgroundColor = \"var(--vscode-list-hoverBackground)\";\r\n    });\r\n    footer.addEventListener(\"mouseleave\", () => {\r\n      footer.style.backgroundColor = \"transparent\";\r\n    });\r\n\r\n    footer.addEventListener(\"click\", (e) => {\r\n      e.stopPropagation();\r\n      if (this.onAction) {\r\n        this.onAction(\r\n          \"add-item-to-column\",\r\n          {\r\n            columnFieldId: columnField.id,\r\n            columnValueId: option.id,\r\n            columnValueName: option.name || option.title,\r\n          },\r\n          {\r\n            anchorElement: footer,\r\n          },\r\n        );\r\n      }\r\n    });\r\n\r\n    return footer;\r\n  }\r\n\r\n  /**\r\n   * Render a single item within a card with full details\r\n   */\r\n  private renderItem(\r\n    item: any,\r\n    columnField: any,\r\n    columnColor: string,\r\n  ): HTMLElement {\r\n    const el = document.createElement(\"div\");\r\n    el.className = \"board-item\";\r\n    el.setAttribute(\"data-gh-item-id\", String(item?.id || \"\"));\r\n    el.style.padding = \"10px\";\r\n    el.style.border = \"1px solid var(--vscode-editorWidget-border)\";\r\n    el.style.borderRadius = \"0\";\r\n    el.style.marginBottom = \"8px\";\r\n    el.style.background = \"var(--vscode-editor-background)\";\r\n    el.style.cursor = \"pointer\";\r\n    el.style.position = \"relative\";\r\n\r\n    // Extract content information\r\n    const content =\r\n      item?.content || (item?.raw && item.raw.itemContent) || null;\r\n    const titleText =\r\n      (item?.content && (item.content.title || item.content.name)) ||\r\n      item?.title ||\r\n      (item?.raw && item.raw.title) ||\r\n      \"Untitled\";\r\n\r\n    const number =\r\n      (item?.content && item.content.number) ||\r\n      (item?.raw && item.raw.itemContent && item.raw.itemContent.number) ||\r\n      null;\r\n\r\n    const url =\r\n      (item?.content && item.content.url) ||\r\n      (item?.raw && item.raw.itemContent && item.raw.itemContent.url) ||\r\n      null;\r\n\r\n    // Determine icon based on content type\r\n    let iconName = \"issue-opened\";\r\n    let isPR = false;\r\n    if (content) {\r\n      const typename = String(content.__typename || \"\").toLowerCase();\r\n      const state = String(content.state || \"\").toUpperCase();\r\n      isPR = typename.includes(\"pullrequest\");\r\n      const isClosed = state === \"CLOSED\";\r\n      const isMerged = content.merged === true;\r\n      const isDraft = content.isDraft === true;\r\n\r\n      if (isPR) {\r\n        if (isMerged) iconName = \"git-merge\";\r\n        else if (isClosed) iconName = \"git-pull-request-closed\";\r\n        else if (isDraft) iconName = \"git-pull-request-draft\";\r\n        else iconName = \"git-pull-request\";\r\n      } else {\r\n        if (isClosed) iconName = \"issue-closed\";\r\n        else if (isDraft) iconName = \"issue-draft\";\r\n        else iconName = \"issue-opened\";\r\n      }\r\n    }\r\n\r\n    // Determine blocked status\r\n    let isBlocked = false;\r\n    try {\r\n      const deps =\r\n        content && (content as any).issueDependenciesSummary\r\n          ? (content as any).issueDependenciesSummary\r\n          : null;\r\n      const blockedByCount =\r\n        deps && typeof deps.blockedBy === \"number\" ? deps.blockedBy : 0;\r\n      isBlocked = blockedByCount > 0;\r\n    } catch (_) { }\r\n\r\n    // Use column color for the icon (matches column header)\r\n    const iconColor = columnColor;\r\n\r\n    // Extract assignees for top-right corner\r\n    const assignees = this.extractAssignees(item);\r\n\r\n    // Build item HTML\r\n    const mainContent = document.createElement(\"div\");\r\n    mainContent.style.display = \"flex\";\r\n    mainContent.style.flexDirection = \"column\";\r\n    mainContent.style.gap = \"6px\";\r\n\r\n    // Row 1: Icon with column color and blocked overlay\r\n    const iconRow = document.createElement(\"div\");\r\n    iconRow.style.display = \"flex\";\r\n    iconRow.style.justifyContent = \"flex-start\";\r\n    iconRow.style.alignItems = \"center\";\r\n\r\n    const baseIcon = this.getIconSvg(iconName, 16, iconColor);\r\n    const blockedOverlay = isBlocked\r\n      ? `<span class='blocked-overlay' style='position:absolute;right:-3px;bottom:-3px;width:14px;height:14px;border-radius:999px;background:var(--vscode-editor-background);display:flex;align-items:center;justify-content:center;box-sizing:border-box;'>${this.getIconSvg(\"blocked\", 9, \"#dc3545\")}</span>`\r\n      : \"\";\r\n\r\n    iconRow.innerHTML = `<span style=\"position:relative;display:inline-flex;align-items:center;justify-content:center;color:${escapeHtml(iconColor)};\">${baseIcon}${blockedOverlay}</span>`;\r\n\r\n    // Add menu button\r\n    const menuBtn = document.createElement(\"span\");\r\n    menuBtn.className = \"board-item-menu-btn\";\r\n    menuBtn.setAttribute(\"data-item-id\", String(item?.id || \"\"));\r\n    menuBtn.style.marginLeft = \"6px\"; // Position after icon\r\n    menuBtn.style.color = \"var(--vscode-descriptionForeground)\";\r\n    menuBtn.innerHTML =\r\n      this.getIconSvg(\"kebab-horizontal\", 14) || \"<span>...</span>\";\r\n    iconRow.appendChild(menuBtn);\r\n\r\n    mainContent.appendChild(iconRow);\r\n\r\n    // Row 2: Title + #number\r\n    const titleRow = document.createElement(\"div\");\r\n    titleRow.style.fontWeight = \"500\";\r\n    titleRow.style.lineHeight = \"1.3\";\r\n    titleRow.innerHTML = `${escapeHtml(titleText)}${number ? ` <span style=\"color:var(--vscode-descriptionForeground);font-weight:400;\">#${escapeHtml(String(number))}</span>` : \"\"}`;\r\n    mainContent.appendChild(titleRow);\r\n\r\n    // Row 3: Field values (except sub_issues_progress and assignees)\r\n    const fieldsRow = this.renderFieldValues(item, columnField);\r\n    if (fieldsRow) {\r\n      mainContent.appendChild(fieldsRow);\r\n    }\r\n\r\n    // Row 4: Sub-issues progress (if applicable)\r\n    const subIssuesProgress = this.renderSubIssuesProgress(item);\r\n    if (subIssuesProgress) {\r\n      mainContent.appendChild(subIssuesProgress);\r\n    }\r\n\r\n    el.appendChild(mainContent);\r\n\r\n    // Top-right corner: Assignee avatars\r\n    if (assignees && assignees.length > 0) {\r\n      const avatarsContainer = this.renderAssigneeAvatars(assignees);\r\n      avatarsContainer.style.position = \"absolute\";\r\n      avatarsContainer.style.top = \"10px\";\r\n      avatarsContainer.style.right = \"10px\";\r\n      el.appendChild(avatarsContainer);\r\n    }\r\n\r\n    // Add click handler if URL available\r\n    if (url) {\r\n      el.setAttribute(\"data-gh-open\", url);\r\n      el.title = `${titleText}${number ? ` #${number}` : \"\"}`;\r\n    }\r\n\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Helper: Get field name from value or lookup in fields definition\r\n   */\r\n  private getFieldName(fv: any): string {\r\n    if (fv.fieldName) return fv.fieldName;\r\n    if (fv.field?.name) return fv.field.name;\r\n    if (fv.fieldId && this.fields) {\r\n      const found = this.fields.find(\r\n        (f) => String(f.id) === String(fv.fieldId),\r\n      );\r\n      if (found && found.name) return found.name;\r\n    }\r\n    return \"Field\";\r\n  }\r\n\r\n  /**\r\n   * Extract assignees from item\r\n   */\r\n  private extractAssignees(item: any): any[] {\r\n    if (!item) return [];\r\n\r\n    // Try content.assignees first\r\n    if (item.content?.assignees?.nodes) {\r\n      return item.content.assignees.nodes;\r\n    }\r\n    if (item.content?.assignees && Array.isArray(item.content.assignees)) {\r\n      return item.content.assignees;\r\n    }\r\n\r\n    // Try fieldValues\r\n    if (Array.isArray(item.fieldValues)) {\r\n      const assigneesFv = item.fieldValues.find(\r\n        (v: any) => v?.type === \"assignees\" || v?.assignees,\r\n      );\r\n      if (assigneesFv?.assignees) {\r\n        return Array.isArray(assigneesFv.assignees)\r\n          ? assigneesFv.assignees\r\n          : [];\r\n      }\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Extract linked pull requests from item\r\n   */\r\n  private extractLinkedPullRequests(item: any): any[] {\r\n    console.log(\r\n      \"[BoardCard] extractLinkedPullRequests called with item:\",\r\n      item?.id,\r\n      \"fieldValues:\",\r\n      item?.fieldValues?.length,\r\n    );\r\n    if (!item) return [];\r\n\r\n    // Try fieldValues first (most common location)\r\n    if (Array.isArray(item.fieldValues)) {\r\n      console.log(\r\n        \"[BoardCard] Checking fieldValues, types:\",\r\n        item.fieldValues.map((v: any) => v?.type),\r\n      );\r\n      const prFv = item.fieldValues.find(\r\n        (v: any) =>\r\n          v?.type === \"linked_pull_requests\" || v?.type === \"pull_request\",\r\n      );\r\n      if (prFv) {\r\n        console.log(\"[BoardCard] Found PR field value:\", prFv);\r\n        // Check for direct array first (matches table view)\r\n        if (Array.isArray(prFv.pullRequests)) {\r\n          console.log(\"[BoardCard] Returning direct array:\", prFv.pullRequests);\r\n          return prFv.pullRequests;\r\n        }\r\n        // Then check for nodes structure\r\n        if (\r\n          prFv.pullRequests?.nodes &&\r\n          Array.isArray(prFv.pullRequests.nodes)\r\n        ) {\r\n          console.log(\r\n            \"[BoardCard] Returning nodes array:\",\r\n            prFv.pullRequests.nodes,\r\n          );\r\n          return prFv.pullRequests.nodes;\r\n        }\r\n      } else {\r\n        console.log(\"[BoardCard] No PR field found in fieldValues\");\r\n      }\r\n    }\r\n\r\n    // Try content.linkedPullRequests as fallback\r\n    if (item.content?.linkedPullRequests) {\r\n      if (Array.isArray(item.content.linkedPullRequests)) {\r\n        return item.content.linkedPullRequests;\r\n      }\r\n      if (Array.isArray(item.content.linkedPullRequests.nodes)) {\r\n        return item.content.linkedPullRequests.nodes;\r\n      }\r\n    }\r\n\r\n    console.log(\"[BoardCard] Returning empty array for linkedPRs\");\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Render assignee avatars for top-right corner\r\n   */\r\n  private renderAssigneeAvatars(assignees: any[]): HTMLElement {\r\n    const container = document.createElement(\"div\");\r\n    container.className = \"board-item-assignees\";\r\n    container.style.display = \"flex\";\r\n    container.style.alignItems = \"center\";\r\n\r\n    const maxAvatars = 3;\r\n    const displayed = assignees.slice(0, maxAvatars);\r\n\r\n    displayed.forEach((assignee, index) => {\r\n      const login = assignee.login || assignee.name || \"Unknown\";\r\n      const avatarUrl = assignee.avatarUrl || \"\";\r\n      if (!avatarUrl) return;\r\n\r\n      const img = document.createElement(\"img\");\r\n      img.src = avatarUrl;\r\n      img.className = \"board-pill\"; // Use board-pill class for click handling\r\n      img.setAttribute(\"data-filter-field\", \"Assignees\");\r\n      img.setAttribute(\"data-filter-value\", login);\r\n      img.title = login;\r\n      img.style.width = \"16px\";\r\n      img.style.height = \"16px\";\r\n      img.style.borderRadius = \"50%\";\r\n      img.style.border = \"1px solid var(--vscode-editorWidget-border)\";\r\n      img.style.cursor = \"pointer\";\r\n      img.style.marginLeft = index === 0 ? \"0\" : \"-6px\";\r\n      img.style.zIndex = String(maxAvatars - index);\r\n      img.style.position = \"relative\";\r\n\r\n      container.appendChild(img);\r\n    });\r\n\r\n    // If more assignees, show +N\r\n    if (assignees.length > maxAvatars) {\r\n      const more = document.createElement(\"span\");\r\n      more.className = \"board-pill\";\r\n      more.setAttribute(\"data-filter-field\", \"Assignees\"); // Can filter by \"Assignees\" generic? No, value missing.\r\n      // Maybe just cosmetic or filter by \"Assignees:HasAny\"?\r\n      // For now just cosmetic.\r\n      more.style.marginLeft = \"-6px\";\r\n      more.style.width = \"22px\";\r\n      more.style.height = \"22px\";\r\n      more.style.borderRadius = \"50%\";\r\n      more.style.background = \"var(--vscode-badge-background)\";\r\n      more.style.color = \"var(--vscode-badge-foreground)\";\r\n      more.style.fontSize = \"10px\";\r\n      more.style.display = \"flex\";\r\n      more.style.alignItems = \"center\";\r\n      more.style.justifyContent = \"center\";\r\n      more.style.fontWeight = \"bold\";\r\n      more.style.lineHeight = \"1\";\r\n      more.textContent = `+${assignees.length - maxAvatars}`;\r\n      more.title = \"More assignees\";\r\n      container.appendChild(more);\r\n    }\r\n\r\n    return container;\r\n  }\r\n\r\n  /**\r\n   * Render visible field values (excluding sub_issues_progress and assignees)\r\n   */\r\n  private renderFieldValues(item: any, columnField: any): HTMLElement | null {\r\n    if (!item || !Array.isArray(item.fieldValues)) return null;\r\n\r\n    const excludeTypes = [\r\n      \"sub_issues_progress\",\r\n      \"assignees\",\r\n      \"title\",\r\n      \"status\",\r\n    ];\r\n    const excludeFieldNames = [\"sub issues progress\", \"assignees\", \"title\"];\r\n    const columnFieldId = columnField?.id;\r\n\r\n    const valuePills: string[] = [];\r\n\r\n    // Add linked pull requests if they exist\r\n    const linkedPRs = this.extractLinkedPullRequests(item);\r\n    if (linkedPRs.length > 0) {\r\n      const prHtml = linkedPRs\r\n        .map((pr: any) => {\r\n          const num = escapeHtml(String(pr.number || \"\"));\r\n          const titleText = escapeHtml(pr.title || \"\");\r\n          const url = escapeHtml(pr.url || \"\");\r\n          const rawColor =\r\n            pr.state_color || pr.color || pr.colour || pr.state || null;\r\n          const normColor = normalizeColor(rawColor) || null;\r\n          const hasHex = !!(\r\n            normColor && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(normColor)\r\n          );\r\n          const border = normColor || \"#999999\";\r\n          const bg =\r\n            (hasHex && addAlpha(normColor, 0.12)) || \"rgba(0,0,0,0.06)\";\r\n          const fg = getContrastColor(normColor) || \"#333333\";\r\n\r\n          const isDraft = !!pr.isDraft;\r\n          const state = (pr.state && String(pr.state).toUpperCase()) || \"\";\r\n          const isMerged = !!pr.merged;\r\n          const isClosed = !isMerged && state === \"CLOSED\";\r\n\r\n          let iconName = \"git-pull-request\";\r\n          if (isMerged) iconName = \"git-merge\";\r\n          else if (isClosed) iconName = \"git-pull-request-closed\";\r\n          else if (isDraft) iconName = \"git-pull-request-draft\";\r\n\r\n          const icon = this.getIconSvg(iconName, 12);\r\n          const tooltip = titleText\r\n            ? escapeHtml(`#${pr.number} ${pr.title}`)\r\n            : escapeHtml(`#${pr.number}`);\r\n\r\n          return `<a href=\"${url}\" title=\"${tooltip}\" data-gh-open=\"${url}\" style=\"cursor:pointer;text-decoration:none;color:inherit\"><span class=\"board-pill\" style=\"display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid ${escapeHtml(border)};background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;max-width:160px\"><span style=\"position:relative;display:inline-flex;align-items:center;justify-content:center\">${icon}</span><span style=\"flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap\">#${num}</span></span></a>`;\r\n        })\r\n        .join(\"\");\r\n      valuePills.push(prHtml);\r\n    }\r\n\r\n    for (const fv of item.fieldValues) {\r\n      if (!fv) continue;\r\n\r\n      const fieldType = String(fv.type || \"\").toLowerCase();\r\n      const fieldName = String(\r\n        fv.fieldName || fv.field?.name || \"\",\r\n      ).toLowerCase();\r\n\r\n      // Skip excluded types\r\n      if (excludeTypes.includes(fieldType)) continue;\r\n      if (excludeFieldNames.includes(fieldName)) continue;\r\n\r\n      // Skip column field (already shown in grouping)\r\n      if (columnFieldId && String(fv.fieldId) === String(columnFieldId))\r\n        continue;\r\n\r\n      // Skip invisible fields (if visibility list is provided)\r\n      if (this.visibleFieldIds && this.visibleFieldIds.length > 0) {\r\n        const fid = fv.fieldId || (fv.field && fv.field.id);\r\n        if (fid && !this.visibleFieldIds.includes(String(fid))) {\r\n          continue;\r\n        }\r\n      }\r\n\r\n      // Skip empty values\r\n      const hasValue = this.hasFieldValue(fv);\r\n      if (!hasValue) continue;\r\n\r\n      // Render based on field type\r\n      const rendered = this.renderFieldValue(fv);\r\n      if (rendered) {\r\n        valuePills.push(rendered);\r\n      }\r\n    }\r\n\r\n    if (valuePills.length === 0) return null;\r\n\r\n    const container = document.createElement(\"div\");\r\n    container.className = \"board-item-fields\";\r\n    container.style.display = \"flex\";\r\n    container.style.flexWrap = \"wrap\";\r\n    container.style.gap = \"4px\";\r\n    container.style.marginTop = \"4px\";\r\n    container.innerHTML = valuePills.join(\"\");\r\n\r\n    return container;\r\n  }\r\n\r\n  /**\r\n   * Check if field value has content\r\n   */\r\n  private hasFieldValue(fv: any): boolean {\r\n    const type = String(fv.type || \"\").toLowerCase();\r\n\r\n    switch (type) {\r\n      case \"single_select\":\r\n        return !!(fv.option?.name || fv.name);\r\n      case \"iteration\":\r\n        return !!(fv.iteration?.title || fv.title);\r\n      case \"labels\":\r\n        return Array.isArray(fv.labels) && fv.labels.length > 0;\r\n      case \"milestone\":\r\n        return !!fv.milestone?.title;\r\n      case \"repository\":\r\n        return !!(fv.repository?.nameWithOwner || fv.repository?.name);\r\n      case \"parent_issue\":\r\n        return !!(fv.parent || fv.parentIssue);\r\n      case \"number\":\r\n        return fv.number != null && fv.number !== \"\";\r\n      case \"date\":\r\n        return !!(fv.date || fv.startDate);\r\n      case \"text\":\r\n        return !!fv.text;\r\n      case \"pull_request\":\r\n      case \"linked_pull_requests\":\r\n        return !!(\r\n          fv.pullRequests?.nodes?.length > 0 ||\r\n          (Array.isArray(fv.pullRequests) && fv.pullRequests.length > 0)\r\n        );\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a single field value as HTML\r\n   */\r\n  private renderFieldValue(fv: any): string {\r\n    const type = String(fv.type || \"\").toLowerCase();\r\n\r\n    switch (type) {\r\n      case \"single_select\":\r\n        return this.renderSingleSelectPill(fv);\r\n      case \"labels\":\r\n        return this.renderLabelsPills(fv);\r\n      case \"iteration\":\r\n        return this.renderIterationPill(fv);\r\n      case \"milestone\":\r\n        return this.renderMilestonePill(fv);\r\n      case \"repository\":\r\n        return this.renderRepositoryPill(fv);\r\n      case \"parent_issue\":\r\n        return this.renderParentIssuePill(fv);\r\n      case \"number\":\r\n        return this.renderNumberPill(fv);\r\n      case \"text\":\r\n        return this.renderTextPill(fv);\r\n      case \"date\":\r\n        return this.renderDatePill(fv);\r\n      case \"pull_request\":\r\n      case \"linked_pull_requests\":\r\n        return this.renderLinkedPullRequests(fv);\r\n      default:\r\n        return \"\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render single select as colored pill\r\n   */\r\n  private renderSingleSelectPill(fv: any): string {\r\n    const name = fv.option?.name || fv.name || \"\";\r\n    if (!name) return \"\";\r\n\r\n    const rawColor = fv.option?.color || fv.color || null;\r\n    const p = normalizeColor(rawColor) || null;\r\n    const hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p));\r\n    const border = p || \"#999999\";\r\n    const bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\";\r\n    const fg = p || \"#333333\";\r\n\r\n    const fName = this.getFieldName(fv);\r\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fName)}\" data-filter-value=\"${escapeHtml(name)}\" style=\"display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid ${escapeHtml(border)};background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(name)}\">${escapeHtml(name)}</span>`;\r\n  }\r\n\r\n  /**\r\n   * Render labels as colored pills\r\n   */\r\n  private renderLabelsPills(fv: any): string {\r\n    const labels = fv.labels || [];\r\n    if (!labels || labels.length === 0) return \"\";\r\n\r\n    return labels\r\n      .slice(0, 3) // Limit to 3 labels\r\n      .map((label: any) => {\r\n        const name = label.name || \"\";\r\n        const rawColor = label.color || label.colour || null;\r\n        const p = normalizeColor(rawColor) || null;\r\n        const hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p));\r\n        const border = p || \"#999999\";\r\n        const bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\";\r\n        const fg = p || \"#333333\";\r\n\r\n        return `<span class=\"board-pill\" data-filter-field=\"Labels\" data-filter-value=\"${escapeHtml(name)}\" style=\"display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid ${escapeHtml(border)};background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:11px;line-height:16px;white-space:nowrap;max-width:80px;overflow:hidden;text-overflow:ellipsis;\">${escapeHtml(name)}</span>`;\r\n      })\r\n      .join(\"\");\r\n  }\r\n\r\n  /**\r\n   * Render iteration with icon\r\n   */\r\n  private renderIterationPill(fv: any): string {\r\n    const iteration = fv.iteration || fv;\r\n    const title = iteration?.title || \"\";\r\n    if (!title) return \"\";\r\n\r\n    const icon = this.getIconSvg(\"iterations\", 12);\r\n    return `<span class=\"board-pill\" data-filter-field=\"Iteration\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(title)}\">${icon}<span>${escapeHtml(title)}</span></span>`;\r\n  }\r\n\r\n  /**\r\n   * Render milestone with icon\r\n   */\r\n  private renderMilestonePill(fv: any): string {\r\n    const title = fv.milestone?.title || \"\";\r\n    if (!title) return \"\";\r\n\r\n    const icon = this.getIconSvg(\"milestone\", 12);\r\n    return `<span class=\"board-pill\" data-filter-field=\"Milestone\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(title)}\">${icon}<span>${escapeHtml(title)}</span></span>`;\r\n  }\r\n\r\n  /**\r\n   * Render repository with icon\r\n   */\r\n  private renderRepositoryPill(fv: any): string {\r\n    const repo = fv.repository || fv;\r\n    const name = repo?.nameWithOwner || repo?.name || \"\";\r\n    if (!name) return \"\";\r\n\r\n    const icon = this.getIconSvg(\"repo\", 12);\r\n    return `<span class=\"board-pill\" data-filter-field=\"repo\" data-filter-value=\"${escapeHtml(name)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;\" title=\"${escapeHtml(name)}\">${icon}<span style=\"max-width:100px;overflow:hidden;text-overflow:ellipsis;\">${escapeHtml(name)}</span></span>`;\r\n  }\r\n\r\n  /**\r\n   * Render number field with field name\r\n   */\r\n  private renderNumberPill(fv: any): string {\r\n    const value = fv.number;\r\n    if (value == null || value === \"\") return \"\";\r\n\r\n    const fieldName = this.getFieldName(fv);\r\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fieldName)}\" data-filter-value=\"${escapeHtml(String(value))}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;\"><span style=\"color:var(--vscode-descriptionForeground);\">${escapeHtml(fieldName)}:</span><span>${escapeHtml(String(value))}</span></span>`;\r\n  }\r\n\r\n  /**\r\n   * Render text field with field name\r\n   */\r\n  private renderTextPill(fv: any): string {\r\n    const value = fv.text || \"\";\r\n    if (!value) return \"\";\r\n\r\n    const fieldName = this.getFieldName(fv);\r\n    const truncated = String(value).slice(0, 30);\r\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fieldName)}\" data-filter-value=\"${escapeHtml(value)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:150px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(value)}\"><span style=\"color:var(--vscode-descriptionForeground);\">${escapeHtml(fieldName)}:</span><span>${escapeHtml(truncated)}</span></span>`;\r\n  }\r\n\r\n  /**\r\n   * Render date field with field name\r\n   */\r\n  private renderDatePill(fv: any): string {\r\n    const dateValue = fv.date || fv.startDate || null;\r\n    if (!dateValue) return \"\";\r\n\r\n    const fieldName = this.getFieldName(fv);\r\n    let formatted = dateValue;\r\n    let filterVal = dateValue;\r\n    try {\r\n      const d = new Date(dateValue);\r\n      if (!isNaN(d.getTime())) {\r\n        formatted = d.toLocaleDateString(\"en-US\", {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        });\r\n        filterVal = d.toISOString().split(\"T\")[0]; // YYYY-MM-DD\r\n      }\r\n    } catch (e) {\r\n      // Use raw value\r\n    }\r\n\r\n    const icon = this.getIconSvg(\"calendar\", 12);\r\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fieldName)}\" data-filter-value=\"${escapeHtml(String(filterVal))}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;\"><span style=\"color:var(--vscode-descriptionForeground);\">${escapeHtml(fieldName)}:</span>${icon}<span>${escapeHtml(String(formatted))}</span></span>`;\r\n  }\r\n\r\n  /**\r\n   * Render parent issue with colored pill (matching table view style)\r\n   */\r\n  private renderParentIssuePill(fv: any): string {\r\n    const parent = fv.parent || fv.parentIssue || fv.issue || null;\r\n    if (!parent) return \"\";\r\n\r\n    const title = parent.title || parent.name || \"\";\r\n    const number = parent.number || \"\";\r\n    const url = parent.url || parent.html_url || \"\";\r\n    if (!title && !number) return \"\";\r\n\r\n    // Get color - try to find status color from parent issue look up\r\n    let color = \"#999999\";\r\n    let parentIsDoneByStatus = false;\r\n    const completedNames = [\"done\", \"closed\", \"completed\", \"finished\"];\r\n\r\n    // Try to find the parent item in allItems to get its Status\r\n    let parentItem: any = null;\r\n    if (this.allItems && this.allItems.length > 0) {\r\n      const parentId = parent.id || (parent.raw && parent.raw.id);\r\n      const parentUrl =\r\n        parent.url || parent.html_url || (parent.raw && parent.raw.url);\r\n      const parentNum = parent.number || (parent.raw && parent.raw.number);\r\n\r\n      // Fuzzy match logic similar to strategies.ts\r\n      parentItem = this.allItems.find((item: any) => {\r\n        const c = item.content || (item.raw && item.raw.itemContent);\r\n        if (!c) return false;\r\n        if (parentId && String(c.id) === String(parentId)) return true;\r\n        if (parentUrl && String(c.url) === String(parentUrl)) return true;\r\n        if (parentNum && String(c.number) === String(parentNum)) {\r\n          // Check repo match if possible\r\n          const itemRepo = c.repository?.nameWithOwner || c.repository?.name;\r\n          const parentRepo =\r\n            parent.repository?.nameWithOwner || parent.repository?.name;\r\n          if (itemRepo && parentRepo && itemRepo !== parentRepo) return false;\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (parentItem && Array.isArray(parentItem.fieldValues)) {\r\n        // Find status field\r\n        // Find status field - robust check like strategies.ts\r\n        const statusFv = parentItem.fieldValues.find(\r\n          (d: any) =>\r\n            d &&\r\n            d.type === \"single_select\" &&\r\n            ((d.raw &&\r\n              d.raw.field &&\r\n              String(d.raw.field.name || \"\").toLowerCase() === \"status\") ||\r\n              (d.fieldName &&\r\n                String(d.fieldName || \"\").toLowerCase() === \"status\") ||\r\n              (d.field &&\r\n                d.field.name &&\r\n                String(d.field.name || \"\").toLowerCase() === \"status\")),\r\n        );\r\n\r\n        if (statusFv) {\r\n          const foundColor =\r\n            (statusFv.option &&\r\n              (statusFv.option.color ||\r\n                statusFv.option.id ||\r\n                statusFv.option.name)) ||\r\n            (statusFv.raw && statusFv.raw.color) ||\r\n            null;\r\n\r\n          if (foundColor) color = normalizeColor(foundColor) || color;\r\n\r\n          if (statusFv.option && statusFv.option.name) {\r\n            const optNameLower = String(statusFv.option.name).toLowerCase();\r\n            if (completedNames.includes(optNameLower)) {\r\n              parentIsDoneByStatus = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Fallback to embedded color\r\n    if (color === \"#999999\") {\r\n      if (parent.statusColor) {\r\n        color = normalizeColor(parent.statusColor) || color;\r\n      } else if (parent.color) {\r\n        color = normalizeColor(parent.color) || color;\r\n      }\r\n    }\r\n\r\n    const p = color;\r\n    const hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p));\r\n    const border = p || \"#999999\";\r\n    const bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\";\r\n    const fg = getContrastColor(p) || \"#333333\";\r\n\r\n    // Determine icon (assume issue)\r\n    let isClosed = String(parent.state || \"\").toUpperCase() === \"CLOSED\";\r\n    if (parentIsDoneByStatus) isClosed = true;\r\n\r\n    // Determine blocked status for parent\r\n    let isBlocked = false;\r\n    try {\r\n      // Check specific blocked label\r\n      const hasBlockedLabel = !!(\r\n        parent.labels &&\r\n        Array.isArray(parent.labels) &&\r\n        parent.labels.some(\r\n          (l: any) => String(l.name || \"\").toLowerCase() === \"blocked\",\r\n        )\r\n      );\r\n      // Check parentItem dependency summary if available\r\n      let blockedBy = 0;\r\n      if (\r\n        parentItem &&\r\n        parentItem.content &&\r\n        parentItem.content.issueDependenciesSummary\r\n      ) {\r\n        blockedBy = parentItem.content.issueDependenciesSummary.blockedBy || 0;\r\n      }\r\n      if (hasBlockedLabel || blockedBy > 0) isBlocked = true;\r\n    } catch (e) { }\r\n\r\n    const iconName = isClosed ? \"issue-closed\" : \"issue-opened\";\r\n    const icon = this.getIconSvg(iconName, 12, p);\r\n\r\n    const blockedOverlay = isBlocked\r\n      ? `<span class='blocked-overlay' style='position:absolute;right:-3px;bottom:-3px;width:14px;height:14px;border-radius:999px;background:var(--vscode-editor-background);display:flex;align-items:center;justify-content:center;box-sizing:border-box;'>${this.getIconSvg(\"blocked\", 9, \"#dc3545\")}</span>`\r\n      : \"\";\r\n\r\n    // Build pill similar to ParentIssueRenderer in strategies.ts\r\n    let html = `<span class=\"board-pill\" data-filter-field=\"parent\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border:1px solid ${escapeHtml(border)};border-radius:999px;background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:11px;line-height:16px;max-width:150px;\" title=\"${escapeHtml(title + (number ? \" #\" + number : \"\"))}\"${url ? ` data-gh-open=\"${escapeHtml(url)}\"` : \"\"}>`;\r\n    html += `<span style=\"position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;\">${icon}${blockedOverlay}</span>`;\r\n    html += `<span style=\"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;\">${escapeHtml(title)}</span>`;\r\n    if (number) {\r\n      html += `<span style=\"flex-shrink:0;color:var(--vscode-descriptionForeground);\">#${escapeHtml(String(number))}</span>`;\r\n    }\r\n    html += `</span>`;\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Render linked pull requests\r\n   */\r\n  private renderLinkedPullRequests(fv: any): string {\r\n    const prs = fv.pullRequests?.nodes || [];\r\n    if (!prs || prs.length === 0) return \"\";\r\n\r\n    return prs\r\n      .map((pr: any) => {\r\n        const title = pr.title || \"#\" + pr.number || \"PR\";\r\n        const icon = this.getIconSvg(\"git-pull-request\", 12);\r\n        // Use generic pill style\r\n        return `<span class=\"board-pill\" data-filter-field=\"Linked Pull Requests\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;margin-right:2px;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(title)}\">${icon}<span>${escapeHtml(title)}</span></span>`;\r\n      })\r\n      .join(\"\");\r\n  }\r\n\r\n  /**\r\n   * Render sub-issues progress bar\r\n   */\r\n  private renderSubIssuesProgress(item: any): HTMLElement | null {\r\n    if (!item || !Array.isArray(item.fieldValues)) return null;\r\n\r\n    const progressFv = item.fieldValues.find(\r\n      (v: any) => v?.type === \"sub_issues_progress\",\r\n    );\r\n\r\n    if (!progressFv || !progressFv.total || Number(progressFv.total) <= 0) {\r\n      return null;\r\n    }\r\n\r\n    const total = Math.max(0, Math.floor(Number(progressFv.total) || 0));\r\n    const done = Math.max(0, Math.floor(Number(progressFv.done || 0)));\r\n    if (total === 0) return null;\r\n\r\n    const pct = Math.round((done / total) * 100);\r\n\r\n    const container = document.createElement(\"div\");\r\n    container.className = \"board-item-progress board-pill\";\r\n    container.setAttribute(\"data-filter-field\", \"parent\");\r\n    // Use item title as value (assuming 'item.title' or content.title exists from renderItem context)\r\n    // renderItem extracts titleText. We need to access it here. item structure has title or content.title.\r\n    const titleText =\r\n      (item.content && (item.content.title || item.content.name)) ||\r\n      item.title ||\r\n      (item.raw && item.raw.title) ||\r\n      \"\";\r\n    container.setAttribute(\"data-filter-value\", titleText);\r\n\r\n    container.style.marginTop = \"6px\";\r\n    container.title = `${done} of ${total} sub-issues complete (${pct}%) -- Click to filter by this parent`;\r\n\r\n    container.innerHTML = `\r\n      <div style=\"display:flex;align-items:center;gap:6px;width:100%;\">\r\n        <span style=\"font-size:11px;color:var(--vscode-descriptionForeground);font-variant-numeric:tabular-nums;min-width:30px;\">${done}/${total}</span>\r\n        <div style=\"flex:1;height:8px;border-radius:4px;border:1px solid var(--vscode-focusBorder);overflow:hidden;background:transparent;\">\r\n          <div style=\"height:100%;width:${pct}%;background:var(--vscode-focusBorder);\"></div>\r\n        </div>\r\n        <span style=\"font-size:11px;color:var(--vscode-descriptionForeground);font-variant-numeric:tabular-nums;min-width:28px;text-align:right;\">${pct}%</span>\r\n      </div>\r\n    `;\r\n\r\n    return container;\r\n  }\r\n\r\n  /**\r\n   * Group items by swimlane field value\r\n   */\r\n  public groupItemsBySwimlane(\r\n    items: any[],\r\n    swimlaneField: any,\r\n  ): Map<string, { option: any; items: any[] }> {\r\n    const groups = new Map<string, { option: any; items: any[] }>();\r\n    const dataType = String(swimlaneField.dataType || \"\").toLowerCase();\r\n\r\n    // Get all options from the field configuration\r\n    let options: any[] = [];\r\n    if (dataType === \"single_select\" && Array.isArray(swimlaneField.options)) {\r\n      options = swimlaneField.options;\r\n    } else if (\r\n      dataType === \"iteration\" &&\r\n      swimlaneField.configuration?.iterations\r\n    ) {\r\n      options = swimlaneField.configuration.iterations.map((it: any) => ({\r\n        id: it.id,\r\n        name: it.title,\r\n        title: it.title,\r\n        color: it.color || null,\r\n        startDate: it.startDate,\r\n        duration: it.duration,\r\n      }));\r\n    } else if (dataType === \"assignees\") {\r\n      // Extract unique assignees from items\r\n      const assigneeMap = new Map<string, any>();\r\n      for (const item of items) {\r\n        const assignees = this.extractAssignees(item);\r\n        for (const a of assignees) {\r\n          if (!assigneeMap.has(a.login)) {\r\n            assigneeMap.set(a.login, a);\r\n          }\r\n        }\r\n      }\r\n      options = Array.from(assigneeMap.values()).map((a) => ({\r\n        id: a.login,\r\n        name: a.login,\r\n        avatarUrl: a.avatarUrl,\r\n        type: \"assignee\",\r\n      }));\r\n    } else if (dataType === \"repository\") {\r\n      const repoMap = new Map<string, any>();\r\n      for (const item of items) {\r\n        const repo =\r\n          item.content?.repository ||\r\n          item.raw?.itemContent?.repository ||\r\n          item.repository;\r\n        if (repo && (repo.nameWithOwner || repo.name)) {\r\n          const name = repo.nameWithOwner || repo.name;\r\n          if (!repoMap.has(name)) {\r\n            repoMap.set(name, repo);\r\n          }\r\n        }\r\n      }\r\n      options = Array.from(repoMap.values()).map((r) => ({\r\n        id: r.nameWithOwner || r.name,\r\n        name: r.nameWithOwner || r.name,\r\n        type: \"repository\",\r\n      }));\r\n    } else if (dataType === \"milestone\") {\r\n      const milestoneMap = new Map<string, any>();\r\n      for (const item of items) {\r\n        const fv = item.fieldValues?.find((v: any) => v.type === \"milestone\");\r\n        if (fv?.milestone) {\r\n          if (!milestoneMap.has(fv.milestone.id || fv.milestone.title)) {\r\n            milestoneMap.set(\r\n              fv.milestone.id || fv.milestone.title,\r\n              fv.milestone,\r\n            );\r\n          }\r\n        }\r\n      }\r\n      options = Array.from(milestoneMap.values()).map((m) => ({\r\n        id: m.id || m.title,\r\n        name: m.title,\r\n        type: \"milestone\",\r\n      }));\r\n    } else if (dataType === \"labels\") {\r\n      const labelMap = new Map<string, any>();\r\n      for (const item of items) {\r\n        const fv = item.fieldValues?.find((v: any) => v.type === \"labels\");\r\n        if (fv?.labels?.nodes) {\r\n          for (const l of fv.labels.nodes) {\r\n            if (!labelMap.has(l.id || l.name)) {\r\n              labelMap.set(l.id || l.name, l);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      options = Array.from(labelMap.values()).map((l) => ({\r\n        id: l.id || l.name,\r\n        name: l.name,\r\n        color: l.color,\r\n        type: \"label\",\r\n      }));\r\n    }\r\n\r\n    // Initialize groups for each option in order\r\n    for (const opt of options) {\r\n      const key = String(opt.id || opt.name || \"\");\r\n      if (key) {\r\n        groups.set(key, { option: opt, items: [] });\r\n      }\r\n    }\r\n\r\n    // Add \"No value\" group\r\n    groups.set(\"__no_value__\", {\r\n      option: {\r\n        id: \"__no_value__\",\r\n        name: `No ${swimlaneField.name}`,\r\n        color: null,\r\n      },\r\n      items: [],\r\n    });\r\n\r\n    // Assign items to groups\r\n    for (const item of items) {\r\n      let groupKey = \"__no_value__\";\r\n\r\n      if (dataType === \"assignees\") {\r\n        const assignees = this.extractAssignees(item);\r\n        if (assignees.length > 0) {\r\n          // GitHub usually puts items in multiple swimlanes if multiple assignees?\r\n          // For simplicity, let's pick the first one or duplicate if we want to follow GH exactly.\r\n          // GH usually shows the item in EACH swimlane.\r\n          for (const a of assignees) {\r\n            const key = a.login;\r\n            if (groups.has(key)) {\r\n              groups.get(key)!.items.push(item);\r\n            }\r\n          }\r\n          continue; // Skip the default push below\r\n        }\r\n      } else if (dataType === \"labels\") {\r\n        const fv = item.fieldValues?.find((v: any) => v.type === \"labels\");\r\n        if (fv?.labels?.nodes && fv.labels.nodes.length > 0) {\r\n          for (const l of fv.labels.nodes) {\r\n            const key = String(l.id || l.name);\r\n            if (groups.has(key)) {\r\n              groups.get(key)!.items.push(item);\r\n            }\r\n          }\r\n          continue;\r\n        }\r\n      } else if (dataType === \"repository\") {\r\n        const repo =\r\n          item.content?.repository ||\r\n          item.raw?.itemContent?.repository ||\r\n          item.repository;\r\n        if (repo) {\r\n          groupKey = repo.nameWithOwner || repo.name || \"__no_value__\";\r\n        }\r\n      } else if (dataType === \"parent_issue\") {\r\n        const fv = item.fieldValues?.find((v: any) => v.type === \"parent_issue\" || String(v.fieldName).toLowerCase() === \"parent\");\r\n        const p = fv?.parent || fv?.parentIssue || fv?.issue || fv?.item || fv?.value;\r\n        if (p) {\r\n          groupKey = String(p.number || p.id || p.title || \"__no_value__\");\r\n        }\r\n      } else if (Array.isArray(item.fieldValues)) {\r\n        const fv = item.fieldValues.find(\r\n          (v: any) =>\r\n            String(v.fieldId) === String(swimlaneField.id) ||\r\n            String(v.fieldName).toLowerCase() === String(swimlaneField.name).toLowerCase()\r\n        );\r\n\r\n        if (fv) {\r\n          if (dataType === \"single_select\") {\r\n            const optId = fv.optionId || (fv.option && fv.option.id);\r\n            const optName = fv.name || (fv.option && fv.option.name);\r\n            if (optId && groups.has(String(optId))) {\r\n              groupKey = String(optId);\r\n            } else if (optName) {\r\n              for (const [key, group] of groups) {\r\n                if (String(group.option.name).toLowerCase() === String(optName).toLowerCase()) {\r\n                  groupKey = key;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          } else if (dataType === \"iteration\") {\r\n            const itId = fv.iterationId || (fv.iteration && fv.iteration.id) || fv.id;\r\n            const itTitle = fv.title || (fv.iteration && fv.iteration.title);\r\n            if (itId && groups.has(String(itId))) {\r\n              groupKey = String(itId);\r\n            } else if (itTitle) {\r\n              for (const [key, group] of groups) {\r\n                if (String(group.option.title).toLowerCase() === String(itTitle).toLowerCase() ||\r\n                  String(group.option.name).toLowerCase() === String(itTitle).toLowerCase()) {\r\n                  groupKey = key;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            // Text, Number, Date fallbacks\r\n            const val = fv.text ?? fv.number ?? fv.date ?? fv.title ?? fv.value;\r\n            if (val !== undefined && val !== null && val !== \"\") {\r\n              groupKey = String(val);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      const normalizedKey = groups.has(groupKey) ? groupKey : \"__no_value__\";\r\n\r\n      // If we don't have a pre-initialized group for this key (e.g. dynamic types like text/number), create it\r\n      if (groupKey !== \"__no_value__\" && !groups.has(groupKey)) {\r\n        groups.set(groupKey, {\r\n          option: { id: groupKey, name: groupKey, title: groupKey },\r\n          items: []\r\n        });\r\n      }\r\n\r\n      groups.get(groups.has(groupKey) ? groupKey : \"__no_value__\")!.items.push(item);\r\n    }\r\n\r\n    return groups;\r\n  }\r\n\r\n  /**\r\n   * Render a swimlane header (similar to GroupRenderer)\r\n   */\r\n  private renderSwimlaneHeader(\r\n    option: any,\r\n    items: any[],\r\n    swimlaneField: any,\r\n  ): HTMLElement {\r\n    const header = document.createElement(\"div\");\r\n    header.className = \"board-swimlane-header\";\r\n    header.style.position = \"sticky\";\r\n    header.style.top = \"var(--board-headers-height, 72px)\";\r\n    header.style.zIndex = \"20\";\r\n    header.style.cursor = \"pointer\";\r\n    header.style.userSelect = \"none\";\r\n    header.style.background = \"var(--vscode-editor-background)\";\r\n\r\n    // Horizontal sticky container\r\n    const leftPane = document.createElement(\"div\");\r\n    leftPane.style.display = \"flex\";\r\n    leftPane.style.alignItems = \"center\";\r\n    leftPane.style.gap = \"8px\";\r\n    leftPane.style.padding = \"8px 16px\";\r\n    leftPane.style.position = \"sticky\";\r\n    leftPane.style.left = \"0\";\r\n    leftPane.style.width = \"max-content\";\r\n    leftPane.style.background = \"inherit\";\r\n\r\n    // Toggle Icon\r\n    const toggleIcon = document.createElement(\"span\");\r\n    toggleIcon.className = \"swimlane-toggle-icon\";\r\n    toggleIcon.innerHTML = this.getIconSvg(\"triangle-down\", 16);\r\n    toggleIcon.style.opacity = \"0.7\";\r\n    leftPane.appendChild(toggleIcon);\r\n\r\n    // Color dot or Avatar\r\n    if (option.avatarUrl) {\r\n      const avatar = document.createElement(\"img\");\r\n      avatar.src = option.avatarUrl;\r\n      avatar.style.width = \"20px\";\r\n      avatar.style.height = \"20px\";\r\n      avatar.style.borderRadius = \"50%\";\r\n      leftPane.appendChild(avatar);\r\n    } else if (option.type === \"repository\") {\r\n      const repoIcon = document.createElement(\"span\");\r\n      repoIcon.innerHTML = this.getIconSvg(\"repo\", 16);\r\n      leftPane.appendChild(repoIcon);\r\n    } else {\r\n      const colorDot = document.createElement(\"div\");\r\n      colorDot.style.width = \"12px\";\r\n      colorDot.style.height = \"12px\";\r\n      colorDot.style.borderRadius = \"50%\";\r\n      colorDot.style.backgroundColor = normalizeColor(option.color) || \"gray\";\r\n      leftPane.appendChild(colorDot);\r\n    }\r\n\r\n    // Title\r\n    const title = document.createElement(\"span\");\r\n    title.style.fontWeight = \"600\";\r\n    title.style.fontSize = \"13px\";\r\n    title.textContent = option.name || option.title || \"Unassigned\";\r\n    leftPane.appendChild(title);\r\n\r\n    // Count\r\n    const countCircle = document.createElement(\"span\");\r\n    countCircle.style.display = \"inline-flex\";\r\n    countCircle.style.alignItems = \"center\";\r\n    countCircle.style.justifyContent = \"center\";\r\n    countCircle.style.minWidth = \"22px\";\r\n    countCircle.style.height = \"22px\";\r\n    countCircle.style.borderRadius = \"50%\";\r\n    countCircle.style.background = \"var(--vscode-input-background)\";\r\n    countCircle.style.border = \"1px solid var(--vscode-panel-border)\";\r\n    countCircle.style.fontSize = \"12px\";\r\n    countCircle.style.padding = \"0 4px\";\r\n    countCircle.textContent = String(items.length);\r\n    leftPane.appendChild(countCircle);\r\n\r\n    // Estimate Sum\r\n    const estSum = this.sumEstimate(items);\r\n    if (estSum > 0) {\r\n      const estEl = document.createElement(\"div\");\r\n      estEl.style.padding = \"2px 8px\";\r\n      estEl.style.borderRadius = \"999px\";\r\n      estEl.style.border = \"1px solid var(--vscode-panel-border)\";\r\n      estEl.style.background = \"var(--vscode-input-background)\";\r\n      estEl.style.fontSize = \"11px\";\r\n      estEl.textContent = \"Estimate: \" + this.formatEstimate(estSum);\r\n      leftPane.appendChild(estEl);\r\n    }\r\n\r\n    // Iteration Range\r\n    if (String(swimlaneField.dataType || \"\").toLowerCase() === \"iteration\") {\r\n      const range = this.getIterationRange(option);\r\n      if (range) {\r\n        const rangeEl = document.createElement(\"span\");\r\n        rangeEl.style.color = \"var(--vscode-descriptionForeground)\";\r\n        rangeEl.style.fontSize = \"12px\";\r\n        rangeEl.style.fontWeight = \"400\";\r\n        rangeEl.textContent = range;\r\n        leftPane.appendChild(rangeEl);\r\n      }\r\n    }\r\n\r\n    header.appendChild(leftPane);\r\n\r\n    return header;\r\n  }\r\n\r\n  /**\r\n   * Render the full board with all cards\r\n   */\r\n  public renderBoard(\r\n    container: HTMLElement,\r\n    columnField: any,\r\n    swimlaneField?: any,\r\n  ): void {\r\n    // Inject styles for interactions\r\n    const style = document.createElement(\"style\");\r\n    style.textContent = `\r\n            * { box-sizing: border-box; }\r\n            .board-item-menu-btn { opacity: 0; transition: opacity 0.2s; cursor: pointer; padding: 2px; border-radius: 4px; }\r\n            .board-item-menu-btn:hover { background: var(--vscode-toolbar-hoverBackground); }\r\n            .board-item:hover .board-item-menu-btn { opacity: 1; }\r\n            .board-pill { cursor: pointer; transition: opacity 0.2s; }\r\n            .board-pill:hover { opacity: 0.8; }\r\n            .board-swimlane { display: flex; flex-direction: column; }\r\n            .board-swimlane-content { display: flex; gap: 16px; padding: 0 16px 16px 16px; align-items: stretch; }\r\n            .board-container { display: flex; flex-direction: column; overflow: auto; height: 100%; width: 100%; }\r\n            .board-column-headers { \r\n              display: flex; \r\n              gap: 16px; \r\n              padding: 16px 16px 0 16px; \r\n              position: sticky; \r\n              top: 0; \r\n              z-index: 30; \r\n              background: var(--vscode-editor-background); \r\n              align-items: stretch;\r\n              border-bottom: 1px solid var(--vscode-panel-border);\r\n            }\r\n            .board-column-header { \r\n              width: 350px; \r\n              min-width: 350px; \r\n              flex-shrink: 0; \r\n              background: var(--vscode-sideBar-background);\r\n              border: 1px solid var(--vscode-editorWidget-border);\r\n              display: flex;\r\n              flex-direction: column;\r\n            }\r\n            .board-column-items { \r\n              width: 350px; \r\n              min-width: 350px; \r\n              flex-shrink: 0; \r\n              display: flex; \r\n              flex-direction: column; \r\n              gap: 8px; \r\n              background: var(--vscode-editorWidget-background); \r\n              border: 1px solid var(--vscode-editorWidget-border); \r\n              padding: 8px; \r\n            }\r\n            .board-swimlane-header {\r\n              border-bottom: 1px solid var(--vscode-panel-border);\r\n              background: var(--vscode-editor-background);\r\n              position: sticky;\r\n              z-index: 20;\r\n              margin: 0;\r\n            }\r\n        `;\r\n    container.appendChild(style);\r\n\r\n    const board = document.createElement(\"div\");\r\n    board.className = \"board-container\";\r\n    board.style.background = \"var(--vscode-editor-background)\";\r\n\r\n    // Add event delegation for interactivity\r\n    board.addEventListener(\"click\", (e) => {\r\n      const target = e.target as HTMLElement;\r\n\r\n      // Toggle swimlane\r\n      const swimHeader = target.closest(\".board-swimlane-header\") as HTMLElement;\r\n      if (swimHeader) {\r\n        const swimlane = swimHeader.parentElement!;\r\n        const content = swimlane.querySelector(\r\n          \".board-swimlane-content\",\r\n        ) as HTMLElement;\r\n        const toggleIcon = swimHeader.querySelector(\".swimlane-toggle-icon\")!;\r\n        const isCollapsed = content.style.display === \"none\";\r\n        content.style.display = isCollapsed ? \"flex\" : \"none\";\r\n        toggleIcon.innerHTML = this.getIconSvg(\r\n          isCollapsed ? \"triangle-down\" : \"triangle-right\",\r\n          16,\r\n        );\r\n        return;\r\n      }\r\n\r\n      // Check for filterable pills\r\n      const pill = target.closest(\"[data-filter-field]\");\r\n      if (pill) {\r\n        const field = pill.getAttribute(\"data-filter-field\");\r\n        const value = pill.getAttribute(\"data-filter-value\");\r\n        if (field && value) {\r\n          this.handlePillClick(e, field, value);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Check for menu button\r\n      const menuBtn = target.closest(\".board-item-menu-btn\");\r\n      if (menuBtn) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        const itemId = menuBtn.getAttribute(\"data-item-id\");\r\n        if (this.onAction && itemId) {\r\n          const item = this.allItems.find(\r\n            (i) => String(i.id) === String(itemId),\r\n          ) || { id: itemId };\r\n          const rect = menuBtn.getBoundingClientRect();\r\n          this.onAction(\"open-menu\", item, { x: rect.left, y: rect.bottom });\r\n        }\r\n        return;\r\n      }\r\n    });\r\n\r\n    const columnGroups = this.groupItemsByColumn(this.allItems, columnField);\r\n    const colOptions = Array.from(columnGroups.values());\r\n\r\n    if (swimlaneField) {\r\n      // Render TOP row of column headers\r\n      const headersRow = document.createElement(\"div\");\r\n      headersRow.className = \"board-column-headers js-board-headers\";\r\n\r\n      // Dynamic sticky top calculation\r\n      const observer = new ResizeObserver(entries => {\r\n        const height = entries[0]?.contentRect.height;\r\n        if (height) {\r\n          board.style.setProperty(\"--board-headers-height\", `${height + 16}px`); // 16 for top padding only\r\n        }\r\n      });\r\n      observer.observe(headersRow);\r\n\r\n      for (const colGroup of colOptions) {\r\n        if (\r\n          colGroup.option.id === \"__no_value__\" &&\r\n          colGroup.items.length === 0\r\n        )\r\n          continue;\r\n\r\n        const colHeader = document.createElement(\"div\");\r\n        colHeader.className = \"board-column-header\";\r\n\r\n        // Reuse card header logic but without the full card\r\n        const header = this.renderColumnHeaderOnly(colGroup.option, colGroup.items, columnField);\r\n        colHeader.appendChild(header);\r\n        headersRow.appendChild(colHeader);\r\n      }\r\n      board.appendChild(headersRow);\r\n\r\n      // Force initial style for divisors\r\n      board.style.setProperty(\"--board-headers-height\", \"72px\");\r\n\r\n      // Render Swimlanes\r\n      const swimlanes = this.groupItemsBySwimlane(this.allItems, swimlaneField);\r\n\r\n      for (const [sKey, swimlane] of swimlanes) {\r\n        if (sKey === \"__no_value__\" && swimlane.items.length === 0) continue;\r\n\r\n        const swimContainer = document.createElement(\"div\");\r\n        swimContainer.className = \"board-swimlane\";\r\n\r\n        const header = this.renderSwimlaneHeader(\r\n          swimlane.option,\r\n          swimlane.items,\r\n          swimlaneField,\r\n        );\r\n        swimContainer.appendChild(header);\r\n\r\n        const swimContent = document.createElement(\"div\");\r\n        swimContent.className = \"board-swimlane-content\";\r\n\r\n        // Group items within this swimlane by column, but ensure we use the SAME columns as the top row\r\n        const rowColumnItems = this.groupItemsByColumn(swimlane.items, columnField);\r\n\r\n        for (const colGroup of colOptions) {\r\n          if (\r\n            colGroup.option.id === \"__no_value__\" &&\r\n            colGroup.items.length === 0\r\n          )\r\n            continue;\r\n\r\n          const colKey = String(colGroup.option.id || colGroup.option.name || \"\");\r\n          const itemsInCol = rowColumnItems.get(colKey)?.items || [];\r\n\r\n          const colItemsContainer = document.createElement(\"div\");\r\n          colItemsContainer.className = \"board-column-items\";\r\n\r\n          // Container for items that will grow\r\n          const itemsList = document.createElement(\"div\");\r\n          itemsList.style.display = \"flex\";\r\n          itemsList.style.flexDirection = \"column\";\r\n          itemsList.style.gap = \"8px\";\r\n          itemsList.style.flex = \"1\";\r\n\r\n          const columnColor = normalizeColor(colGroup.option.color) || \"#666666\";\r\n          for (const item of itemsInCol) {\r\n            itemsList.appendChild(this.renderItem(item, columnField, columnColor));\r\n          }\r\n          colItemsContainer.appendChild(itemsList);\r\n\r\n          // Add footer (Add item button) to each column cell in the swimlane\r\n          const footer = this.renderColumnFooterOnly(colGroup.option, columnField);\r\n          footer.style.marginTop = \"8px\";\r\n          footer.style.margin = \"0 -8px -8px -8px\"; // Offset container padding\r\n          colItemsContainer.appendChild(footer);\r\n\r\n          swimContent.appendChild(colItemsContainer);\r\n        }\r\n\r\n        swimContainer.appendChild(swimContent);\r\n        board.appendChild(swimContainer);\r\n      }\r\n    } else {\r\n      // Regular board view (single row of columns)\r\n      const rowContent = document.createElement(\"div\");\r\n      rowContent.className = \"board-swimlane-content\";\r\n      rowContent.style.height = \"100%\";\r\n\r\n      for (const colGroup of colOptions) {\r\n        if (\r\n          colGroup.option.id === \"__no_value__\" &&\r\n          colGroup.items.length === 0\r\n        )\r\n          continue;\r\n        const card = this.renderCard(\r\n          colGroup.option,\r\n          colGroup.items,\r\n          columnField,\r\n        );\r\n        rowContent.appendChild(card);\r\n      }\r\n      board.appendChild(rowContent);\r\n    }\r\n\r\n    container.appendChild(board);\r\n  }\r\n}\r\n", "import type { FieldConfig } from \"../../../lib/types\";\r\n\r\nexport interface SortConfig {\r\n  fieldId: string;\r\n  direction: \"ASC\" | \"DESC\";\r\n  secondary?: {\r\n    fieldId: string;\r\n    direction: \"ASC\" | \"DESC\";\r\n  };\r\n}\r\n\r\n/**\r\n * Parse sortByFields from GitHub GraphQL response into SortConfig\r\n */\r\nexport function parseSortByFields(sortByFields: any): SortConfig | null {\r\n  if (!sortByFields || !sortByFields.nodes || sortByFields.nodes.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const primary = sortByFields.nodes[0];\r\n  if (!primary || !primary.field) {\r\n    return null;\r\n  }\r\n\r\n  const config: SortConfig = {\r\n    fieldId: primary.field.id || primary.field.name,\r\n    direction: primary.direction || \"ASC\",\r\n  };\r\n\r\n  // Add secondary sort if available\r\n  if (sortByFields.nodes.length > 1) {\r\n    const secondary = sortByFields.nodes[1];\r\n    if (secondary && secondary.field) {\r\n      config.secondary = {\r\n        fieldId: secondary.field.id || secondary.field.name,\r\n        direction: secondary.direction || \"ASC\",\r\n      };\r\n    }\r\n  }\r\n\r\n  return config;\r\n}\r\n\r\n/**\r\n * Sort items array based on sort configuration\r\n */\r\nexport function sortItems(\r\n  items: any[],\r\n  fields: FieldConfig[],\r\n  sortConfig: SortConfig,\r\n): any[] {\r\n  if (!sortConfig || items.length === 0) {\r\n    return items;\r\n  }\r\n\r\n  const field = fields.find(\r\n    (f) => f.id === sortConfig.fieldId || f.name === sortConfig.fieldId,\r\n  );\r\n  if (!field) {\r\n    return items;\r\n  }\r\n\r\n  // Create a copy to avoid mutating original\r\n  const sorted = [...items];\r\n\r\n  sorted.sort((a, b) => {\r\n    // Primary sort\r\n    const primaryResult = compareFieldValues(a, b, field, sortConfig.direction);\r\n\r\n    // If equal and secondary sort exists, use secondary\r\n    if (primaryResult === 0 && sortConfig.secondary) {\r\n      const secondaryField = fields.find(\r\n        (f) =>\r\n          f.id === sortConfig.secondary!.fieldId ||\r\n          f.name === sortConfig.secondary!.fieldId,\r\n      );\r\n      if (secondaryField) {\r\n        return compareFieldValues(\r\n          a,\r\n          b,\r\n          secondaryField,\r\n          sortConfig.secondary.direction,\r\n        );\r\n      }\r\n    }\r\n\r\n    return primaryResult;\r\n  });\r\n\r\n  return sorted;\r\n}\r\n\r\n/**\r\n * Compare two items by a specific field\r\n */\r\nexport function compareFieldValues(\r\n  a: any,\r\n  b: any,\r\n  field: FieldConfig,\r\n  direction: \"ASC\" | \"DESC\",\r\n): number {\r\n  // Find field values for both items\r\n  const aValue = getFieldValue(a, field);\r\n  const bValue = getFieldValue(b, field);\r\n\r\n  // Handle null/undefined\r\n  if (aValue === null && bValue === null) return 0;\r\n  if (aValue === null) return direction === \"ASC\" ? 1 : -1;\r\n  if (bValue === null) return direction === \"ASC\" ? -1 : 1;\r\n\r\n  let result = 0;\r\n  const dataType = (field.dataType || \"\").toLowerCase();\r\n\r\n  switch (dataType) {\r\n    case \"text\":\r\n    case \"title\":\r\n      result = compareText(aValue, bValue);\r\n      break;\r\n\r\n    case \"number\":\r\n      result = compareNumber(aValue, bValue);\r\n      break;\r\n\r\n    case \"date\":\r\n      result = compareDate(aValue, bValue);\r\n      break;\r\n\r\n    case \"single_select\":\r\n      result = compareSingleSelect(aValue, bValue, field);\r\n      break;\r\n\r\n    case \"iteration\":\r\n      result = compareIteration(aValue, bValue);\r\n      break;\r\n\r\n    case \"labels\":\r\n      result = compareLabels(aValue, bValue);\r\n      break;\r\n\r\n    case \"assignees\":\r\n    case \"repository\":\r\n    case \"milestone\":\r\n    case \"issue_type\":\r\n    case \"parent_issue\":\r\n    case \"tracked_by\":\r\n    case \"tracks\":\r\n    case \"reviewers\":\r\n      result = compareText(aValue, bValue);\r\n      break;\r\n\r\n    case \"linked_pull_requests\":\r\n    case \"sub_issues_progress\":\r\n      result = compareNumber(aValue, bValue);\r\n      break;\r\n\r\n    default:\r\n      // For unsupported data types, do not apply custom sorting\r\n      // and treat items as equal so their relative order is preserved.\r\n      result = 0;\r\n  }\r\n\r\n  return direction === \"ASC\" ? result : -result;\r\n}\r\n\r\n/**\r\n * Extract field value from item\r\n */\r\nfunction getFieldValue(item: any, field: FieldConfig): any {\r\n  const fieldValue = item.fieldValues?.find(\r\n    (fv: any) => fv.fieldId === field.id || fv.fieldName === field.name,\r\n  );\r\n\r\n  if (!fieldValue) return null;\r\n\r\n  const dataType = (field.dataType || \"\").toLowerCase();\r\n\r\n  switch (dataType) {\r\n    case \"text\": {\r\n      // Normal text fields use .text, but some Title-like fields may be\r\n      // mis-typed as TEXT while still carrying a structured title object.\r\n      if (fieldValue.text != null) return fieldValue.text;\r\n      return extractTitleLikeString(fieldValue, item);\r\n    }\r\n\r\n    case \"title\": {\r\n      // Title fields store a structured object; prefer a human-friendly string\r\n      return extractTitleLikeString(fieldValue, item);\r\n    }\r\n\r\n    case \"number\":\r\n      return fieldValue.number !== undefined ? fieldValue.number : null;\r\n\r\n    case \"date\":\r\n      return (\r\n        fieldValue.date || fieldValue.startDate || fieldValue.dueOn || null\r\n      );\r\n\r\n    case \"single_select\":\r\n      return fieldValue.option || fieldValue;\r\n\r\n    case \"iteration\":\r\n      return fieldValue;\r\n\r\n    case \"labels\":\r\n      return fieldValue.labels || [];\r\n\r\n    case \"assignees\": {\r\n      const list = fieldValue.assignees;\r\n      if (Array.isArray(list) && list.length > 0) {\r\n        const first = list[0];\r\n        return first.login || first.name || null;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    case \"repository\": {\r\n      const repo = fieldValue.repository;\r\n      if (!repo) return null;\r\n      return (\r\n        repo.nameWithOwner || repo.name || repo.full_name || repo.id || null\r\n      );\r\n    }\r\n\r\n    case \"milestone\": {\r\n      const m = fieldValue.milestone;\r\n      if (!m) return null;\r\n      // Prefer due date when present (ISO date strings sort lexicographically),\r\n      // otherwise fall back to title/name.\r\n      return m.dueOn || m.title || m.name || null;\r\n    }\r\n\r\n    case \"issue_type\": {\r\n      if (fieldValue.text) return fieldValue.text;\r\n      if (fieldValue.option) {\r\n        return fieldValue.option.name || fieldValue.option.title || null;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    case \"parent_issue\": {\r\n      const parent = fieldValue.parent;\r\n      if (!parent) return null;\r\n      if (parent.title) return parent.title;\r\n      if (typeof parent.number === \"number\") return String(parent.number);\r\n      return parent.id || null;\r\n    }\r\n\r\n    case \"linked_pull_requests\": {\r\n      const prs = fieldValue.pullRequests;\r\n      if (Array.isArray(prs) && prs.length > 0) {\r\n        const first = prs[0];\r\n        if (typeof first.number === \"number\") return first.number;\r\n        return first.title || null;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    case \"reviewers\": {\r\n      const list = fieldValue.reviewers;\r\n      if (Array.isArray(list) && list.length > 0) {\r\n        const first = list[0];\r\n        return first.login || first.name || first.id || null;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    case \"sub_issues_progress\": {\r\n      if (typeof fieldValue.percent === \"number\") return fieldValue.percent;\r\n      if (\r\n        typeof fieldValue.done === \"number\" &&\r\n        typeof fieldValue.total === \"number\" &&\r\n        fieldValue.total > 0\r\n      ) {\r\n        return (fieldValue.done / fieldValue.total) * 100;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    case \"tracked_by\":\r\n    case \"tracks\": {\r\n      const issues = fieldValue.issues;\r\n      if (Array.isArray(issues) && issues.length > 0) {\r\n        const first = issues[0];\r\n        if (first.title) return first.title;\r\n        if (typeof first.number === \"number\") return String(first.number);\r\n        return first.id || null;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    default:\r\n      return fieldValue;\r\n  }\r\n}\r\n\r\nfunction extractTitleLikeString(fieldValue: any, item: any): string | null {\r\n  if (!fieldValue) return null;\r\n\r\n  // Prefer the underlying raw node's text when present\r\n  const rawNode =\r\n    (fieldValue.title && fieldValue.title.raw) || fieldValue.raw || null;\r\n  if (rawNode && typeof rawNode.text === \"string\" && rawNode.text.trim()) {\r\n    return rawNode.text;\r\n  }\r\n\r\n  // Then look at the content object which often carries title/name\r\n  const content =\r\n    (fieldValue.title && fieldValue.title.content) ||\r\n    fieldValue.content ||\r\n    (rawNode && rawNode.itemContent) ||\r\n    (item && item.content) ||\r\n    null;\r\n\r\n  if (content) {\r\n    if (typeof content === \"string\" && content.trim()) {\r\n      return content;\r\n    }\r\n    if (typeof content.title === \"string\" && content.title.trim()) {\r\n      return content.title;\r\n    }\r\n    if (typeof content.name === \"string\" && content.name.trim()) {\r\n      return content.name;\r\n    }\r\n  }\r\n\r\n  // Fallbacks: occasionally a plain text field is reused\r\n  if (typeof fieldValue.text === \"string\" && fieldValue.text.trim()) {\r\n    return fieldValue.text;\r\n  }\r\n  if (rawNode && typeof rawNode.title === \"string\" && rawNode.title.trim()) {\r\n    return rawNode.title;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Compare text values\r\n */\r\nfunction compareText(a: any, b: any): number {\r\n  const aStr = String(a || \"\").toLowerCase();\r\n  const bStr = String(b || \"\").toLowerCase();\r\n  return aStr.localeCompare(bStr);\r\n}\r\n\r\n/**\r\n * Compare number values\r\n */\r\nfunction compareNumber(a: any, b: any): number {\r\n  const aNum = typeof a === \"number\" ? a : parseFloat(a);\r\n  const bNum = typeof b === \"number\" ? b : parseFloat(b);\r\n\r\n  if (isNaN(aNum) && isNaN(bNum)) return 0;\r\n  if (isNaN(aNum)) return 1;\r\n  if (isNaN(bNum)) return -1;\r\n\r\n  return aNum - bNum;\r\n}\r\n\r\n/**\r\n * Compare date values\r\n */\r\nfunction compareDate(a: any, b: any): number {\r\n  const aDate = new Date(a);\r\n  const bDate = new Date(b);\r\n\r\n  if (isNaN(aDate.getTime()) && isNaN(bDate.getTime())) return 0;\r\n  if (isNaN(aDate.getTime())) return 1;\r\n  if (isNaN(bDate.getTime())) return -1;\r\n\r\n  return aDate.getTime() - bDate.getTime();\r\n}\r\n\r\n/**\r\n * Compare single select values by option order\r\n */\r\nfunction compareSingleSelect(a: any, b: any, field: FieldConfig): number {\r\n  const aOption = a.option || a;\r\n  const bOption = b.option || b;\r\n\r\n  if (!aOption || !bOption) {\r\n    return compareText(aOption?.name || \"\", bOption?.name || \"\");\r\n  }\r\n\r\n  // If field has options array, sort by position in array\r\n  if (field.options && Array.isArray(field.options)) {\r\n    const aIndex = field.options.findIndex(\r\n      (opt: any) => opt.id === aOption.id || opt.name === aOption.name,\r\n    );\r\n    const bIndex = field.options.findIndex(\r\n      (opt: any) => opt.id === bOption.id || opt.name === bOption.name,\r\n    );\r\n\r\n    if (aIndex !== -1 && bIndex !== -1) {\r\n      return aIndex - bIndex;\r\n    }\r\n  }\r\n\r\n  // Fallback to name comparison\r\n  return compareText(aOption.name, bOption.name);\r\n}\r\n\r\n/**\r\n * Compare iteration values by start date\r\n */\r\nfunction compareIteration(a: any, b: any): number {\r\n  const aDate = a.startDate || a.iteration?.startDate;\r\n  const bDate = b.startDate || b.iteration?.startDate;\r\n\r\n  if (!aDate && !bDate) {\r\n    // Sort by title if no dates\r\n    return compareText(\r\n      a.title || a.iteration?.title,\r\n      b.title || b.iteration?.title,\r\n    );\r\n  }\r\n\r\n  return compareDate(aDate, bDate);\r\n}\r\n\r\n/**\r\n * Compare labels by first label name\r\n */\r\nfunction compareLabels(a: any, b: any): number {\r\n  const aLabels = Array.isArray(a) ? a : [];\r\n  const bLabels = Array.isArray(b) ? b : [];\r\n\r\n  if (aLabels.length === 0 && bLabels.length === 0) return 0;\r\n  if (aLabels.length === 0) return 1;\r\n  if (bLabels.length === 0) return -1;\r\n\r\n  return compareText(aLabels[0].name, bLabels[0].name);\r\n}\r\n", "import { escapeHtml } from \"./utils\";\r\nimport {\r\n  logDebug,\r\n  setLoadingState,\r\n  setErrorState,\r\n  createLoadMoreButton,\r\n  initFilterBar,\r\n  applyFilterVisibility,\r\n} from \"./viewFetcherUtils\";\r\nimport { BoardCardRenderer } from \"./renderers/BoardCardRenderer\";\r\nimport { parseSortByFields, sortItems } from \"./utils/tableSorting\";\r\nimport type { SortConfig } from \"./utils/tableSorting\";\r\n/// <reference path=\"./global.d.ts\" />\r\n\r\n// signal that the board fetcher script executed\r\ntry {\r\n  logDebug(\"global\", \"boardViewFetcher.loaded\");\r\n} catch (e) { }\r\ntry {\r\n  console.log && console.log(\"boardViewFetcher script loaded\");\r\n} catch (e) { }\r\n\r\n// Expose a global fetcher: window.boardViewFetcher(view, container, viewKey)\r\nfunction createBoardFetcher() {\r\n  return function (view: any, container: HTMLElement, viewKey: string) {\r\n    const viewName =\r\n      view && (view.name || view.id) ? view.name || view.id : \"Board View\";\r\n\r\n    try {\r\n      setLoadingState(container, viewName);\r\n    } catch (e) { }\r\n\r\n    var first = 50;\r\n\r\n    function render(payload: any, effectiveFilter?: string) {\r\n      try {\r\n        var items = (payload && payload.items) || [];\r\n        var fields = (payload && payload.fields) || [];\r\n        var allFields = (payload && payload.allFields) || fields;\r\n        container.innerHTML = \"\";\r\n\r\n        // Set container layout like table view - flex column with height 100%\r\n        container.style.margin = \"0\";\r\n        container.style.padding = \"0\";\r\n        container.style.height = \"100%\";\r\n        container.style.display = \"flex\";\r\n        container.style.flexDirection = \"column\";\r\n        container.style.overflow = \"hidden\";\r\n\r\n        // Track unsaved sort changes (local-only view state)\r\n        let unsavedSort: SortConfig | null | undefined = undefined;\r\n\r\n        let barApi = initFilterBar(container, viewKey, {\r\n          suffix: viewKey,\r\n          step: first,\r\n          onLoadMore: function () {\r\n            first += 50;\r\n            requestFields();\r\n          },\r\n          onSave: (newFilter: any) => {\r\n            // Save sort if changed (persist local override only)\r\n            if (unsavedSort !== undefined) {\r\n              try {\r\n                const key = viewKey\r\n                  ? `ghProjects.table.${viewKey}.sortConfig`\r\n                  : null;\r\n                if (key) {\r\n                  if (unsavedSort === null) {\r\n                    localStorage.removeItem(key);\r\n                  } else {\r\n                    localStorage.setItem(key, JSON.stringify(unsavedSort));\r\n                  }\r\n                }\r\n              } catch (e) { }\r\n              unsavedSort = undefined;\r\n            }\r\n          },\r\n          onDiscard: () => {\r\n            if (unsavedSort !== undefined) {\r\n              unsavedSort = undefined;\r\n              requestFields();\r\n            }\r\n          },\r\n        });\r\n\r\n        // If the server returned an effective filter, apply it via the bar API\r\n        try {\r\n          if (\r\n            effectiveFilter &&\r\n            barApi &&\r\n            typeof barApi.setEffectiveFilter === \"function\"\r\n          ) {\r\n            try {\r\n              barApi.setEffectiveFilter(effectiveFilter);\r\n            } catch (e) { }\r\n          }\r\n        } catch (e) { }\r\n\r\n        if (!barApi) {\r\n          var header = document.createElement(\"div\");\r\n          header.style.display = \"flex\";\r\n          header.style.justifyContent = \"space-between\";\r\n          header.style.alignItems = \"center\";\r\n          header.style.marginBottom = \"8px\";\r\n\r\n          var title = document.createElement(\"div\");\r\n          title.style.fontWeight = \"600\";\r\n          title.style.padding = \"6px\";\r\n          title.textContent = viewName;\r\n\r\n          var right = document.createElement(\"div\");\r\n          var loadBtn = createLoadMoreButton(() => {\r\n            first += 50;\r\n            requestFields();\r\n          });\r\n\r\n          right.appendChild(loadBtn);\r\n          header.appendChild(title);\r\n          header.appendChild(right);\r\n          container.appendChild(header);\r\n        }\r\n\r\n        // Detect column field from view details (verticalGroupByFields)\r\n        let columnField: any = null;\r\n        try {\r\n          const details = payload && payload.details;\r\n          const verticalGroupByFields =\r\n            details &&\r\n            details.verticalGroupByFields &&\r\n            details.verticalGroupByFields.nodes;\r\n\r\n          if (verticalGroupByFields && verticalGroupByFields.length > 0) {\r\n            // Find the field in allFields that matches the verticalGroupByField\r\n            const vgbField = verticalGroupByFields[0];\r\n            columnField = allFields.find(\r\n              (f: any) =>\r\n                String(f.id) === String(vgbField.id) ||\r\n                String(f.name) === String(vgbField.name),\r\n            );\r\n\r\n            // Validate it's a valid column field type (single_select or iteration)\r\n            if (columnField) {\r\n              const dataType = String(columnField.dataType || \"\").toLowerCase();\r\n              if (dataType !== \"single_select\" && dataType !== \"iteration\") {\r\n                logDebug(viewKey, \"boardViewFetcher.invalidColumnFieldType\", {\r\n                  dataType,\r\n                  fieldName: columnField.name,\r\n                });\r\n                columnField = null;\r\n              }\r\n            }\r\n          }\r\n        } catch (e) {\r\n          logDebug(viewKey, \"boardViewFetcher.columnFieldDetection.error\", {\r\n            message: String((e as any)?.message || e),\r\n          });\r\n        }\r\n\r\n        // Fallback: try to find Status field (common single_select field for boards)\r\n        if (!columnField) {\r\n          columnField = allFields.find(\r\n            (f: any) =>\r\n              String(f.dataType || \"\").toLowerCase() === \"single_select\" &&\r\n              String(f.name || \"\").toLowerCase() === \"status\",\r\n          );\r\n        }\r\n\r\n        // Fallback: use first single_select field\r\n        if (!columnField) {\r\n          columnField = allFields.find(\r\n            (f: any) =>\r\n              String(f.dataType || \"\").toLowerCase() === \"single_select\",\r\n          );\r\n        }\r\n\r\n        // Detect swimlane field from view details (regular groupByFields on board layouts)\r\n        let swimlaneField: any = null;\r\n        try {\r\n          const details = payload && payload.details;\r\n          const groupByFields =\r\n            details &&\r\n            details.groupByFields &&\r\n            details.groupByFields.nodes;\r\n\r\n          if (groupByFields && groupByFields.length > 0) {\r\n            const gbField = groupByFields[0];\r\n            swimlaneField = allFields.find(\r\n              (f: any) =>\r\n                String(f.id) === String(gbField.id) ||\r\n                String(f.name) === String(gbField.name),\r\n            );\r\n          }\r\n        } catch (e) {\r\n          logDebug(viewKey, \"boardViewFetcher.swimlaneFieldDetection.error\", {\r\n            message: String((e as any)?.message || e),\r\n          });\r\n        }\r\n\r\n        // Create board content container - flex grow to fill remaining space\r\n        var content = document.createElement(\"div\");\r\n        content.style.flex = \"1 1 auto\";\r\n        content.style.overflow = \"hidden\";\r\n        content.style.position = \"relative\";\r\n        content.style.display = \"flex\";\r\n        content.style.flexDirection = \"column\";\r\n\r\n        // Callbacks for interactivity\r\n        const handleFilter = (filter: string) => {\r\n          if (barApi && barApi.inputEl) {\r\n            const current = String(barApi.inputEl.value || \"\").trim();\r\n            // Avoid duplicating if checking purely space separated, but simple append is standard\r\n            let newFilter = current ? `${current} ${filter}` : filter;\r\n            barApi.inputEl.value = newFilter;\r\n            barApi.inputEl.dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n          }\r\n        };\r\n\r\n        // Determine sorting\r\n        let sortConfig = parseSortByFields(payload && payload.details && payload.details.sortByFields);\r\n        if (viewKey) {\r\n          try {\r\n            const stored = localStorage.getItem(`ghProjects.table.${viewKey}.sortConfig`);\r\n            if (stored) sortConfig = JSON.parse(stored);\r\n          } catch (e) { }\r\n        }\r\n\r\n        // Apply sorting to items\r\n        let displayItems = items;\r\n        if (sortConfig) {\r\n          displayItems = sortItems(items, allFields, sortConfig);\r\n        }\r\n\r\n        const handleAction = (action: string, item: any, args: any) => {\r\n          if (action === \"open-menu\" && args) {\r\n            // Close existing menus\r\n            const ex = document.querySelectorAll(\".board-context-menu\");\r\n            ex.forEach((e) => e.remove());\r\n\r\n            const menu = document.createElement(\"div\");\r\n            menu.className = \"board-context-menu\";\r\n            menu.style.position = \"fixed\";\r\n            // Ensure menu doesn't overflow right edge\r\n            const x = Math.min(args.x, window.innerWidth - 180);\r\n            const y = Math.min(args.y, window.innerHeight - 150);\r\n\r\n            menu.style.left = x + \"px\";\r\n            menu.style.top = y + \"px\";\r\n            menu.style.background = \"var(--vscode-menu-background)\";\r\n            menu.style.color = \"var(--vscode-menu-foreground)\";\r\n            menu.style.border = \"1px solid var(--vscode-menu-border)\";\r\n            menu.style.borderRadius = \"4px\";\r\n            menu.style.zIndex = \"1000\";\r\n            menu.style.boxShadow = \"0 2px 8px rgba(0,0,0,0.15)\";\r\n            menu.style.minWidth = \"160px\";\r\n            menu.style.padding = \"4px 0\";\r\n\r\n            const addItem = (\r\n              text: string,\r\n              iconClass: string,\r\n              onClick: () => void,\r\n              isSep = false,\r\n            ) => {\r\n              if (isSep) {\r\n                const sep = document.createElement(\"div\");\r\n                sep.style.height = \"1px\";\r\n                sep.style.background = \"var(--vscode-menu-separatorBackground)\";\r\n                sep.style.margin = \"4px 0\";\r\n                menu.appendChild(sep);\r\n                return;\r\n              }\r\n              const el = document.createElement(\"div\");\r\n              el.style.padding = \"4px 8px\";\r\n              el.style.cursor = \"pointer\";\r\n              el.style.display = \"flex\";\r\n              el.style.alignItems = \"center\";\r\n              el.style.gap = \"8px\";\r\n              el.style.fontSize = \"13px\";\r\n\r\n              // Icon placeholder - ideally use octicons but text + unicode/css is backup\r\n              const ico = document.createElement(\"span\");\r\n              if (iconClass) {\r\n                ico.className = \"codicon codicon-\" + iconClass; // Assuming codicons available?\r\n                // If not, use simple emoji or text.\r\n                // User requested \"add-icon\" (probably meaning 'plus' or similar) and 'octicon-arrow-both'.\r\n                // We might not have codicon font loaded in webview unless injected.\r\n                // Fallback to text for now.\r\n                if (iconClass === \"link-external\") ico.textContent = \"\u2197\";\r\n                else if (iconClass === \"globe\") ico.textContent = \"\uD83C\uDF10\";\r\n                else if (iconClass === \"arrow-both\") ico.textContent = \"\u21C4\";\r\n              }\r\n\r\n              const span = document.createElement(\"span\");\r\n              span.textContent = text;\r\n\r\n              el.appendChild(ico);\r\n              el.appendChild(span);\r\n\r\n              el.addEventListener(\"click\", (e) => {\r\n                e.stopPropagation();\r\n                menu.remove();\r\n                onClick();\r\n              });\r\n\r\n              el.addEventListener(\r\n                \"mouseenter\",\r\n                () =>\r\n                (el.style.background =\r\n                  \"var(--vscode-menu-selectionBackground)\"),\r\n              );\r\n              el.addEventListener(\r\n                \"mouseleave\",\r\n                () => (el.style.background = \"transparent\"),\r\n              );\r\n              menu.appendChild(el);\r\n            };\r\n\r\n            addItem(\"Open issue\", \"link-external\", () => {\r\n              const url =\r\n                item.content?.url ||\r\n                item.url ||\r\n                (item.raw && item.raw.itemContent && item.raw.itemContent.url);\r\n              if (url && (window as any).__APP_MESSAGING__) {\r\n                (window as any).__APP_MESSAGING__.postMessage({\r\n                  command: \"openUrl\",\r\n                  url: url,\r\n                });\r\n              }\r\n            });\r\n\r\n            addItem(\"\", \"\", () => { }, true);\r\n\r\n            addItem(\"Move to column...\", \"arrow-both\", () => {\r\n              if ((window as any).__APP_MESSAGING__) {\r\n                // Extract column options\r\n                let options: any[] = [];\r\n                if (columnField) {\r\n                  const opts =\r\n                    columnField.options ||\r\n                    (columnField.configuration &&\r\n                      columnField.configuration.options);\r\n                  const iters =\r\n                    columnField.configuration &&\r\n                    columnField.configuration.iterations;\r\n\r\n                  // Helper to format iteration date range\r\n                  const getIterationRange = (\r\n                    start: string,\r\n                    duration: number,\r\n                  ) => {\r\n                    try {\r\n                      const startDate = new Date(start);\r\n                      const endDate = new Date(\r\n                        startDate.getTime() +\r\n                        Number(duration) * 24 * 60 * 60 * 1000,\r\n                      );\r\n                      const formatDate = (d: Date) =>\r\n                        d.toLocaleDateString(\"en-US\", {\r\n                          month: \"short\",\r\n                          day: \"numeric\",\r\n                        });\r\n                      return `${formatDate(startDate)} \u2014 ${formatDate(endDate)}`;\r\n                    } catch (e) {\r\n                      return \"\";\r\n                    }\r\n                  };\r\n\r\n                  if (opts && Array.isArray(opts)) {\r\n                    options = opts.map((o: any) => ({\r\n                      id: o.id,\r\n                      name: o.name,\r\n                      color: o.color,\r\n                      description: o.description,\r\n                    }));\r\n                  } else if (iters && Array.isArray(iters)) {\r\n                    options = iters.map((it: any) => ({\r\n                      id: it.id,\r\n                      name: it.title,\r\n                      color: it.color,\r\n                      description: getIterationRange(it.startDate, it.duration),\r\n                    }));\r\n                  }\r\n                }\r\n\r\n                (window as any).__APP_MESSAGING__.postMessage({\r\n                  command: \"moveItem\",\r\n                  viewKey: viewKey,\r\n                  itemId: item.id,\r\n                  projectId: payload && payload.id,\r\n                  fieldId: columnField ? columnField.id : null,\r\n                  options: options,\r\n                  currentValue: \"\", // Could check item.fieldValues to find current\r\n                });\r\n              }\r\n            });\r\n\r\n            document.body.appendChild(menu);\r\n\r\n            // Global click to close\r\n            const closeHandler = () => {\r\n              menu.remove();\r\n              document.removeEventListener(\"click\", closeHandler);\r\n            };\r\n            // Defer to avoid immediate trigger\r\n            setTimeout(\r\n              () => document.addEventListener(\"click\", closeHandler),\r\n              0,\r\n            );\r\n          } else if (action === \"add-item-to-column\" && item && args) {\r\n            // Import AddItemMenu if not already available\r\n            import(\"./components/AddItemMenu\")\r\n              .then(({ AddItemMenu }) => {\r\n                const menu = new AddItemMenu({\r\n                  anchorElement: args.anchorElement,\r\n                  onCreateIssue: () => {\r\n                    try {\r\n                      const messaging = (window as any).__APP_MESSAGING__;\r\n                      if (\r\n                        messaging &&\r\n                        typeof messaging.postMessage === \"function\"\r\n                      ) {\r\n                        messaging.postMessage({\r\n                          command: \"addItem:createIssue\",\r\n                          viewKey: viewKey,\r\n                          projectId: payload && payload.id,\r\n                          columnFieldId: item.columnFieldId,\r\n                          columnValueId: item.columnValueId,\r\n                          columnValueName: item.columnValueName,\r\n                        });\r\n                      }\r\n                    } catch (e) {\r\n                      console.error(\r\n                        \"[boardViewFetcher] create-issue action failed\",\r\n                        e,\r\n                      );\r\n                    }\r\n                  },\r\n                  onAddFromRepo: () => {\r\n                    try {\r\n                      const messaging = (window as any).__APP_MESSAGING__;\r\n                      if (\r\n                        messaging &&\r\n                        typeof messaging.postMessage === \"function\"\r\n                      ) {\r\n                        messaging.postMessage({\r\n                          command: \"addItem:addFromRepo\",\r\n                          viewKey: viewKey,\r\n                          projectId: payload && payload.id,\r\n                          columnFieldId: item.columnFieldId,\r\n                          columnValueId: item.columnValueId,\r\n                          columnValueName: item.columnValueName,\r\n                        });\r\n                      }\r\n                    } catch (e) {\r\n                      console.error(\r\n                        \"[boardViewFetcher] add-from-repo action failed\",\r\n                        e,\r\n                      );\r\n                    }\r\n                  },\r\n                });\r\n                menu.show();\r\n              })\r\n              .catch((e) => {\r\n                console.error(\"Failed to load AddItemMenu\", e);\r\n              });\r\n          }\r\n        };\r\n\r\n        // Use BoardCardRenderer if column field is found\r\n        if (columnField) {\r\n          try {\r\n            // Extract visible field IDs\r\n            const visibleFieldIds = fields.map((f: any) => String(f.id));\r\n            const cardRenderer = new BoardCardRenderer(\r\n              allFields,\r\n              displayItems,\r\n              visibleFieldIds,\r\n              handleFilter,\r\n              handleAction,\r\n            );\r\n            cardRenderer.renderBoard(content, columnField, swimlaneField);\r\n          } catch (e) {\r\n            logDebug(viewKey, \"boardViewFetcher.cardRenderer.error\", {\r\n              message: String((e as any)?.message || e),\r\n            });\r\n            // Fallback to flat list on error\r\n            renderFlatList(content, items);\r\n          }\r\n        } else {\r\n          // No column field found - render flat list as fallback\r\n          logDebug(viewKey, \"boardViewFetcher.noColumnField\", {\r\n            fieldsCount: allFields.length,\r\n          });\r\n          renderFlatList(content, items);\r\n        }\r\n\r\n        container.appendChild(content);\r\n\r\n        try {\r\n          if (barApi && typeof barApi.setCount === \"function\")\r\n            barApi.setCount(items.length);\r\n          if (barApi && typeof barApi.setLoadState === \"function\")\r\n            barApi.setLoadState(\r\n              items.length < first,\r\n              items.length >= first ? \"Load more\" : \"All loaded\",\r\n            );\r\n\r\n          // Wire local preview filtering via centralized helper: register items and subscribe\r\n          if (barApi && barApi.inputEl) {\r\n            if (typeof barApi.registerItems === \"function\") {\r\n              barApi.registerItems(items, { fields: fields });\r\n            }\r\n            if (typeof barApi.onFilterChange === \"function\") {\r\n              barApi.onFilterChange(function (matchedIds: any, rawFilter: any) {\r\n                applyFilterVisibility(\r\n                  container,\r\n                  \"[data-gh-item-id]\",\r\n                  matchedIds,\r\n                  \"block\",\r\n                );\r\n\r\n                if (barApi && typeof barApi.setCount === \"function\")\r\n                  barApi.setCount(matchedIds.size);\r\n\r\n                logDebug(viewKey, \"filterInput\", {\r\n                  filter: rawFilter,\r\n                  matched: matchedIds.size,\r\n                  original: items.length,\r\n                });\r\n              });\r\n            }\r\n            if (typeof barApi.onSortChange === \"function\") {\r\n              barApi.onSortChange((config: SortConfig | null) => {\r\n                unsavedSort = config || null;\r\n                if (barApi && barApi.saveBtn && barApi.discardBtn) {\r\n                  barApi.saveBtn.disabled = false;\r\n                  barApi.discardBtn.disabled = false;\r\n                  barApi.saveBtn.style.opacity = \"1\";\r\n                  barApi.saveBtn.style.cursor = \"pointer\";\r\n                  barApi.discardBtn.style.opacity = \"1\";\r\n                  barApi.discardBtn.style.cursor = \"pointer\";\r\n                }\r\n              });\r\n            }\r\n          }\r\n        } catch (e) { }\r\n      } catch (err: any) {\r\n        logDebug(viewKey, \"boardViewFetcher.render.error\", {\r\n          message: String(err && err.message),\r\n          stack: err && err.stack,\r\n        });\r\n        setErrorState(\r\n          container,\r\n          viewName,\r\n          \"Error rendering board view: \" + String(err && err.message),\r\n        );\r\n      }\r\n    }\r\n\r\n    // Fallback flat list rendering (used when no column field found)\r\n    function renderFlatList(content: HTMLElement, items: any[]) {\r\n      for (var i = 0; i < items.length; i++) {\r\n        var it = items[i];\r\n        var card = document.createElement(\"div\");\r\n        try {\r\n          card.setAttribute(\"data-gh-item-id\", String(it && it.id));\r\n        } catch (e) { }\r\n        card.style.padding = \"8px\";\r\n        card.style.border = \"1px solid var(--vscode-editorWidget-border)\";\r\n        card.style.marginBottom = \"8px\";\r\n        card.style.borderRadius = \"2px\";\r\n        var titleText =\r\n          (it && it.content && (it.content.title || it.content.name)) ||\r\n          (it && it.title) ||\r\n          (it && it.raw && it.raw.title) ||\r\n          \"#\" + (i + 1);\r\n        card.innerHTML =\r\n          '<div style=\"font-weight:600\">' +\r\n          escapeHtml(titleText) +\r\n          \"</div>\" +\r\n          (it && it.id\r\n            ? '<div style=\"color:var(--vscode-descriptionForeground);font-size:12px\">' +\r\n            escapeHtml(String(it.id)) +\r\n            \"</div>\"\r\n            : \"\");\r\n        content.appendChild(card);\r\n      }\r\n    }\r\n\r\n    function onMessage(ev: MessageEvent) {\r\n      var msg = ev && ev.data ? ev.data : ev;\r\n      try {\r\n        if (msg && msg.command === \"fields\") {\r\n          if (msg.viewKey && viewKey && String(msg.viewKey) !== String(viewKey))\r\n            return;\r\n          if (msg.error) {\r\n            setErrorState(container, viewName, String(msg.error));\r\n          } else {\r\n            render(\r\n              msg.payload || (msg.payload && msg.payload.data) || msg.payload,\r\n              msg.effectiveFilter,\r\n            );\r\n          }\r\n        }\r\n      } catch (e) { }\r\n    }\r\n\r\n    function requestFields() {\r\n      try {\r\n        if (\r\n          (window as any).__APP_MESSAGING__ &&\r\n          typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\r\n        ) {\r\n          (window as any).__APP_MESSAGING__.postMessage({\r\n            command: \"requestFields\",\r\n            first: first,\r\n            viewKey: viewKey,\r\n          });\r\n        }\r\n      } catch (e) { }\r\n    }\r\n    try {\r\n      (window as any).__APP_MESSAGING__.onMessage(onMessage);\r\n    } catch (e) {\r\n      window.addEventListener(\"message\", onMessage);\r\n    }\r\n    requestFields();\r\n  };\r\n}\r\ntry {\r\n  window.boardViewFetcher = createBoardFetcher();\r\n} catch (e) { }\r\n"],
  "mappings": "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",
  "names": ["AddItemMenu_exports", "__export", "AddItemMenu", "init_AddItemMenu", "__esmMin", "options", "rect", "menuRect", "margin", "vw", "vh", "top", "left", "mkItem", "iconName", "label", "description", "onClick", "row", "iconSpan", "textContainer", "titleEl", "descEl", "escapeHtml", "s", "normalizeColor", "color", "n", "b", "u", "addAlpha", "alpha", "S", "v", "C", "getContrastColor", "logDebug", "viewKey", "message", "data", "setLoadingState", "container", "titleText", "setErrorState", "error", "createLoadMoreButton", "onClick", "btn", "initFilterBar", "container", "viewKey", "options", "applyFilterVisibility", "root", "selector", "matchedIds", "displayStyle", "elements", "i", "el", "id", "BoardCardRenderer", "fields", "allItems", "visibleFieldIds", "onFilter", "onAction", "field", "value", "safeValue", "safeField", "iconName", "size", "fill", "f", "items", "estimateField", "sum", "item", "fv", "v", "num", "n", "columnField", "groups", "dataType", "options", "it", "opt", "key", "groupKey", "optId", "optName", "group", "itId", "itTitle", "option", "start", "duration", "startDate", "endDate", "formatDate", "d", "card", "header", "itemsContainer", "columnColor", "normalizeColor", "itemEl", "footer", "headerRow", "colorDot", "normalizedColor", "title", "count", "estSum", "estimatePill", "description", "descRow", "addLabel", "e", "el", "content", "titleText", "number", "url", "isPR", "typename", "state", "isClosed", "isMerged", "isDraft", "isBlocked", "deps", "iconColor", "assignees", "mainContent", "iconRow", "baseIcon", "blockedOverlay", "escapeHtml", "menuBtn", "titleRow", "fieldsRow", "subIssuesProgress", "avatarsContainer", "found", "assigneesFv", "prFv", "container", "maxAvatars", "assignee", "index", "login", "avatarUrl", "img", "more", "excludeTypes", "excludeFieldNames", "columnFieldId", "valuePills", "linkedPRs", "prHtml", "pr", "rawColor", "normColor", "hasHex", "border", "bg", "addAlpha", "fg", "getContrastColor", "icon", "tooltip", "fieldType", "fieldName", "fid", "rendered", "name", "p", "fName", "labels", "label", "repo", "truncated", "dateValue", "formatted", "filterVal", "parent", "color", "parentIsDoneByStatus", "completedNames", "parentItem", "parentId", "parentUrl", "parentNum", "c", "itemRepo", "parentRepo", "statusFv", "foundColor", "optNameLower", "hasBlockedLabel", "l", "blockedBy", "html", "prs", "progressFv", "total", "done", "pct", "swimlaneField", "assigneeMap", "a", "repoMap", "r", "milestoneMap", "m", "labelMap", "val", "normalizedKey", "leftPane", "toggleIcon", "avatar", "repoIcon", "countCircle", "estEl", "range", "rangeEl", "style", "board", "target", "swimHeader", "isCollapsed", "pill", "itemId", "i", "rect", "columnGroups", "colOptions", "headersRow", "entries", "height", "colGroup", "colHeader", "swimlanes", "sKey", "swimlane", "swimContainer", "swimContent", "rowColumnItems", "colKey", "itemsInCol", "colItemsContainer", "itemsList", "rowContent", "parseSortByFields", "sortByFields", "primary", "config", "secondary", "sortItems", "items", "fields", "sortConfig", "field", "f", "sorted", "a", "b", "primaryResult", "compareFieldValues", "secondaryField", "direction", "aValue", "getFieldValue", "bValue", "result", "compareText", "compareNumber", "compareDate", "compareSingleSelect", "compareIteration", "compareLabels", "item", "fieldValue", "fv", "extractTitleLikeString", "list", "first", "repo", "m", "parent", "prs", "issues", "rawNode", "content", "aStr", "bStr", "aNum", "bNum", "aDate", "bDate", "aOption", "bOption", "aIndex", "opt", "bIndex", "aLabels", "bLabels", "logDebug", "createBoardFetcher", "view", "container", "viewKey", "viewName", "setLoadingState", "first", "render", "payload", "effectiveFilter", "items", "fields", "allFields", "unsavedSort", "barApi", "initFilterBar", "requestFields", "newFilter", "key", "header", "title", "right", "loadBtn", "createLoadMoreButton", "columnField", "details", "verticalGroupByFields", "vgbField", "f", "dataType", "e", "swimlaneField", "groupByFields", "gbField", "content", "handleFilter", "filter", "current", "sortConfig", "parseSortByFields", "stored", "displayItems", "sortItems", "handleAction", "action", "item", "args", "menu", "x", "y", "addItem", "text", "iconClass", "onClick", "isSep", "sep", "el", "ico", "span", "url", "options", "opts", "iters", "getIterationRange", "start", "duration", "startDate", "endDate", "formatDate", "d", "o", "it", "closeHandler", "AddItemMenu", "messaging", "visibleFieldIds", "BoardCardRenderer", "renderFlatList", "matchedIds", "rawFilter", "applyFilterVisibility", "config", "err", "setErrorState", "i", "card", "titleText", "escapeHtml", "onMessage", "ev", "msg"]
}
