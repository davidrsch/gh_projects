{
  "version": 3,
  "sources": ["../../src/webviews/client/components/AddItemMenu.ts", "../../src/webviews/client/utils.ts", "../../src/webviews/client/utils/logger.ts", "../../src/webviews/client/utils/domUtils.ts", "../../src/webviews/client/viewFetcherUtils.ts", "../../src/webviews/client/renderers/BoardCardRenderer.ts", "../../src/webviews/client/boardViewFetcher.ts"],
  "sourcesContent": ["export interface AddItemMenuOptions {\n  anchorElement: HTMLElement;\n  onCreateIssue: () => void;\n  onAddFromRepo: () => void;\n}\n\nexport class AddItemMenu {\n  private options: AddItemMenuOptions;\n  private menuElement: HTMLElement | null = null;\n  private backdropElement: HTMLElement | null = null;\n\n  constructor(options: AddItemMenuOptions) {\n    this.options = options;\n  }\n\n  public show() {\n    this.hide();\n\n    this.backdropElement = document.createElement(\"div\");\n    this.backdropElement.style.position = \"fixed\";\n    this.backdropElement.style.top = \"0\";\n    this.backdropElement.style.left = \"0\";\n    this.backdropElement.style.right = \"0\";\n    this.backdropElement.style.bottom = \"0\";\n    this.backdropElement.style.zIndex = \"998\";\n    this.backdropElement.addEventListener(\"click\", () => this.hide());\n    document.body.appendChild(this.backdropElement);\n\n    this.menuElement = document.createElement(\"div\");\n    this.menuElement.className = \"add-item-menu\";\n    this.menuElement.style.position = \"absolute\";\n    this.menuElement.style.background = \"var(--vscode-menu-background)\";\n    this.menuElement.style.border = \"1px solid var(--vscode-menu-border)\";\n    this.menuElement.style.borderRadius = \"4px\";\n    this.menuElement.style.boxShadow = \"0 2px 8px rgba(0,0,0,0.15)\";\n    this.menuElement.style.minWidth = \"220px\";\n    this.menuElement.style.padding = \"4px 0\";\n    this.menuElement.style.zIndex = \"1000\";\n    this.menuElement.style.fontSize = \"13px\";\n\n    document.body.appendChild(this.menuElement);\n    this.buildMenu();\n\n    const rect = this.options.anchorElement.getBoundingClientRect();\n    const menuRect = this.menuElement.getBoundingClientRect();\n    const margin = 8;\n    const vw = window.innerWidth || document.documentElement.clientWidth;\n    const vh = window.innerHeight || document.documentElement.clientHeight;\n\n    let top = rect.bottom + margin;\n    if (rect.bottom + menuRect.height + margin > vh) {\n      if (rect.top - menuRect.height - margin >= 0) {\n        top = rect.top - menuRect.height - margin;\n      } else {\n        top = Math.max(\n          margin,\n          Math.min(vh - menuRect.height - margin, rect.bottom + margin),\n        );\n      }\n    }\n\n    let left = rect.left;\n    if (rect.left + menuRect.width + margin > vw) {\n      left = Math.max(margin, rect.right - menuRect.width);\n    }\n    left = Math.max(margin, Math.min(left, vw - menuRect.width - margin));\n\n    this.menuElement.style.top = `${Math.round(top)}px`;\n    this.menuElement.style.left = `${Math.round(left)}px`;\n  }\n\n  public hide() {\n    if (this.menuElement) {\n      this.menuElement.remove();\n      this.menuElement = null;\n    }\n    if (this.backdropElement) {\n      this.backdropElement.remove();\n      this.backdropElement = null;\n    }\n  }\n\n  private buildMenu() {\n    if (!this.menuElement) return;\n\n    const mkItem = (\n      iconName: string,\n      label: string,\n      description: string,\n      onClick: () => void,\n    ) => {\n      const row = document.createElement(\"div\");\n      row.className = \"add-item-menu-item\";\n      row.style.display = \"flex\";\n      row.style.alignItems = \"center\";\n      row.style.padding = \"6px 12px\";\n      row.style.cursor = \"pointer\";\n      row.style.color = \"var(--vscode-menu-foreground)\";\n\n      const iconSpan = document.createElement(\"span\");\n      iconSpan.style.display = \"inline-flex\";\n      iconSpan.style.alignItems = \"center\";\n      iconSpan.style.justifyContent = \"center\";\n      iconSpan.style.marginRight = \"8px\";\n      iconSpan.innerHTML = (window as any).getIconSvg?.(iconName as any) || \"\";\n      row.appendChild(iconSpan);\n\n      const textContainer = document.createElement(\"div\");\n      textContainer.style.display = \"flex\";\n      textContainer.style.flexDirection = \"column\";\n      textContainer.style.flex = \"1\";\n\n      const titleEl = document.createElement(\"div\");\n      titleEl.textContent = label;\n      titleEl.style.fontWeight = \"500\";\n      textContainer.appendChild(titleEl);\n\n      if (description) {\n        const descEl = document.createElement(\"div\");\n        descEl.textContent = description;\n        descEl.style.fontSize = \"11px\";\n        descEl.style.color = \"var(--vscode-descriptionForeground)\";\n        textContainer.appendChild(descEl);\n      }\n\n      row.appendChild(textContainer);\n\n      row.addEventListener(\"mouseenter\", () => {\n        row.style.background = \"var(--vscode-menu-selectionBackground)\";\n        row.style.color = \"var(--vscode-menu-selectionForeground)\";\n      });\n      row.addEventListener(\"mouseleave\", () => {\n        row.style.background = \"transparent\";\n        row.style.color = \"var(--vscode-menu-foreground)\";\n      });\n\n      row.addEventListener(\"click\", () => {\n        onClick();\n        this.hide();\n      });\n\n      this.menuElement!.appendChild(row);\n    };\n\n    mkItem(\n      \"issue-opened\",\n      \"Create new issue\",\n      \"Create a project issue in a repository.\",\n      this.options.onCreateIssue,\n    );\n\n    mkItem(\n      \"repo\",\n      \"Add item from repository\",\n      \"Attach an existing issue or pull request from a repo.\",\n      this.options.onAddFromRepo,\n    );\n  }\n}\n", "export function escapeHtml(s: any): string {\n  return s\n    ? String(s)\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n    : \"\";\n}\n\nexport function normalizeColor(color: any): string | null {\n  if (!color) return null;\n  let n = String(color).trim();\n  if (\n    /^#?[0-9a-f]{3}$/i.test(n) ||\n    /^#?[0-9a-f]{6}$/i.test(n) ||\n    /^#?[0-9a-f]{8}$/i.test(n)\n  ) {\n    let b = n[0] === \"#\" ? n.slice(1) : n;\n    return \"#\" + (b.length === 8 ? b.substring(0, 6) : b);\n  }\n  let s = {\n    GRAY: \"#848d97\",\n    RED: \"#f85149\",\n    ORANGE: \"#db6d28\",\n    YELLOW: \"#d29922\",\n    GREEN: \"#3fb950\",\n    BLUE: \"#2f81f7\",\n    PURPLE: \"#a371f7\",\n    PINK: \"#db61a2\",\n    BLACK: \"#000000\",\n    WHITE: \"#ffffff\",\n  };\n  let u = n.toUpperCase();\n  return (s as any)[u] || null;\n}\n\nexport function addAlpha(color: any, alpha: any): string | null {\n  if (!color) return null;\n  let s = color.replace(\"#\", \"\");\n  let u = (b: any) => parseInt(b, 16);\n  if (s.length === 3) {\n    let b = u(s[0] + s[0]),\n      S = u(s[1] + s[1]),\n      v = u(s[2] + s[2]);\n    return \"rgba(\" + b + \",\" + S + \",\" + v + \",\" + alpha + \")\";\n  }\n  if (s.length === 6 || s.length === 8) {\n    let b = s.length === 8 ? s.substring(0, 6) : s,\n      S = u(s.substring(0, 2)),\n      v = u(b.substring(2, 4)),\n      C = u(b.substring(4, 6));\n    return \"rgba(\" + S + \",\" + v + \",\" + C + \",\" + alpha + \")\";\n  }\n  return null;\n}\n\nexport function getContrastColor(color: any): string {\n  if (!color) return \"#333333\";\n  let n = color.replace(\"#\", \"\");\n  let s = (C: any) => parseInt(C, 16);\n  let u, b, S;\n  if (n.length === 3)\n    ((u = s(n[0] + n[0])), (b = s(n[1] + n[1])), (S = s(n[2] + n[2])));\n  else if (n.length === 6 || n.length === 8) {\n    let C = n.length === 8 ? n.substring(0, 6) : n;\n    ((u = s(C.substring(0, 2))),\n      (b = s(C.substring(2, 4))),\n      (S = s(C.substring(4, 6))));\n  } else return \"#333333\";\n  return 0.2126 * (u / 255) + 0.7152 * (b / 255) + 0.0722 * (S / 255) > 0.6\n    ? \"#111111\"\n    : \"#ffffff\";\n}\n", "/// <reference path=\"../global.d.ts\" />\n\nexport function logDebug(viewKey: string, message: string, data?: any) {\n  try {\n    if (\n      (window as any).__APP_MESSAGING__ &&\n      typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\n    ) {\n      (window as any).__APP_MESSAGING__.postMessage({\n        command: \"debugLog\",\n        level: \"debug\",\n        viewKey: viewKey,\n        message: message,\n        data: data,\n      });\n    }\n  } catch (e) {}\n  try {\n    if (console && console.log) {\n      console.log(message, data);\n    }\n  } catch (e) {}\n}\n", "export function setLoadingState(container: HTMLElement, titleText: string) {\n  container.innerHTML =\n    '<div class=\"title\">' +\n    titleText +\n    '</div><div class=\"loading\"><em>Loading...</em></div>';\n}\n\nexport function setErrorState(\n  container: HTMLElement,\n  titleText: string,\n  error: string,\n) {\n  container.innerHTML =\n    '<div class=\"title\">' +\n    titleText +\n    '</div><div style=\"color:var(--vscode-editor-foreground)\">' +\n    error +\n    \"</div>\";\n}\n\nexport function createLoadMoreButton(onClick: () => void): HTMLButtonElement {\n  const btn = document.createElement(\"button\");\n  btn.type = \"button\";\n  btn.textContent = \"Load more\";\n  btn.style.marginLeft = \"8px\";\n  btn.style.border = \"1px solid var(--vscode-editorWidget-border)\";\n  btn.addEventListener(\"click\", () => {\n    onClick();\n    btn.disabled = true;\n    btn.textContent = \"Loading...\";\n  });\n  return btn;\n}\n\nexport function clearElement(element: HTMLElement) {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n}\n\nexport function toggleClass(\n  element: HTMLElement,\n  className: string,\n  force?: boolean,\n) {\n  element.classList.toggle(className, force);\n}\n", "/// <reference path=\"./global.d.ts\" />\nimport { logDebug } from \"./utils/logger\";\nimport {\n  setLoadingState,\n  setErrorState,\n  createLoadMoreButton,\n} from \"./utils/domUtils\";\n\nexport { logDebug, setLoadingState, setErrorState, createLoadMoreButton };\n\n/**\n * Initializes the filter bar using the shared filterBarHelper.\n * Returns the barApi if successful, or null.\n */\nexport function initFilterBar(\n  container: HTMLElement,\n  viewKey: string,\n  options: {\n    suffix?: string;\n    step?: number;\n    effFilter?: string;\n    onLoadMore?: () => void;\n    onSave?: (filter: any) => void;\n    onDiscard?: () => void;\n  },\n): any {\n  if (\n    window.filterBarHelper &&\n    typeof window.filterBarHelper.create === \"function\"\n  ) {\n    try {\n      return window.filterBarHelper.create({\n        parent: container,\n        suffix: options.suffix || viewKey,\n        effFilter:\n          typeof options.effFilter === \"string\" ? options.effFilter : undefined,\n        viewKey: viewKey,\n        step: options.step || 50,\n        onLoadMore: options.onLoadMore,\n        onSave: options.onSave,\n        onDiscard: options.onDiscard,\n      });\n    } catch (e) {\n      return null;\n    }\n  }\n  return null;\n}\n\n/**\n * Toggles visibility of elements based on matched IDs from the filter.\n */\nexport function applyFilterVisibility(\n  root: HTMLElement | Document,\n  selector: string,\n  matchedIds: Set<string>,\n  displayStyle: string = \"block\",\n) {\n  try {\n    const elements = Array.from(root.querySelectorAll(selector));\n    for (let i = 0; i < elements.length; i++) {\n      try {\n        const el = elements[i] as HTMLElement;\n        const id = el.getAttribute(\"data-gh-item-id\");\n        el.style.display = matchedIds.has(String(id)) ? displayStyle : \"none\";\n      } catch (e) {}\n    }\n  } catch (e) {}\n}\n", "import {\n  normalizeColor,\n  escapeHtml,\n  addAlpha,\n  getContrastColor,\n} from \"../utils\";\n\n/**\n * BoardCardRenderer - Renders board view cards grouped by column field\n * Each card represents a column option (from single_select or iteration field)\n */\nexport class BoardCardRenderer {\n  constructor(\n    private fields: any[],\n    private allItems: any[],\n    private visibleFieldIds?: string[],\n    private onFilter?: (filter: string) => void,\n    private onAction?: (action: string, item: any, args?: any) => void,\n  ) {\n    // Bind methods\n    this.handlePillClick = this.handlePillClick.bind(this);\n  }\n\n  /**\n   * Handle pill click for filtering\n   */\n  private handlePillClick(e: MouseEvent, field: string, value: string) {\n    e.stopPropagation(); // Prevent opening item\n    e.preventDefault();\n    if (this.onFilter) {\n      const safeValue = value.includes(\" \")\n        ? `\"${value.replace(/\"/g, '\\\\\"')}\"`\n        : value;\n      // Quote field if it contains spaces\n      const safeField = field.includes(\" \")\n        ? `\"${field.replace(/\"/g, '\\\\\"')}\"`\n        : field;\n      this.onFilter(`${safeField}:${safeValue}`);\n    }\n  }\n\n  /**\n   * Helper to get icon SVG from registry\n   */\n  private getIconSvg(\n    iconName: string,\n    size: number = 14,\n    fill?: string,\n  ): string {\n    if ((window as any).getIconSvg) {\n      return (window as any).getIconSvg(iconName, { size, fill });\n    }\n    return \"\";\n  }\n\n  /**\n   * Find estimate field (prioritize fields with \"estimate\" in name)\n   */\n  private getEstimateField(): any {\n    return (\n      this.fields.find(\n        (f) =>\n          f.dataType &&\n          String(f.dataType).toLowerCase() === \"number\" &&\n          String(f.name || \"\")\n            .toLowerCase()\n            .includes(\"estimate\"),\n      ) ||\n      this.fields.find(\n        (f) => f.dataType && String(f.dataType).toLowerCase() === \"number\",\n      )\n    );\n  }\n\n  /**\n   * Sum estimate values for a list of items\n   */\n  public sumEstimate(items: any[]): number {\n    const estimateField = this.getEstimateField();\n    if (!estimateField) return 0;\n\n    let sum = 0;\n    for (const item of items) {\n      if (!item || !Array.isArray(item.fieldValues)) continue;\n      const fv = item.fieldValues.find(\n        (v: any) =>\n          (v.fieldId && String(v.fieldId) === String(estimateField.id)) ||\n          (v.fieldName &&\n            String(v.fieldName).toLowerCase().includes(\"estimate\")) ||\n          v.type === \"number\",\n      );\n      if (fv) {\n        const num = Number(\n          fv.number != null ? fv.number : fv.value != null ? fv.value : NaN,\n        );\n        if (!isNaN(num)) sum += num;\n      }\n    }\n    return sum;\n  }\n\n  /**\n   * Format estimate number for display\n   */\n  private formatEstimate(n: number): string {\n    if (!isFinite(n)) return \"\";\n    return String(n);\n  }\n\n  /**\n   * Group items by column field value\n   */\n  public groupItemsByColumn(\n    items: any[],\n    columnField: any,\n  ): Map<string, { option: any; items: any[] }> {\n    const groups = new Map<string, { option: any; items: any[] }>();\n    const dataType = String(columnField.dataType || \"\").toLowerCase();\n\n    // Get all options from the field configuration\n    let options: any[] = [];\n    if (dataType === \"single_select\" && Array.isArray(columnField.options)) {\n      options = columnField.options;\n    } else if (\n      dataType === \"iteration\" &&\n      columnField.configuration?.iterations\n    ) {\n      options = columnField.configuration.iterations.map((it: any) => ({\n        id: it.id,\n        name: it.title,\n        title: it.title,\n        color: it.color || null,\n        startDate: it.startDate,\n        duration: it.duration,\n      }));\n    }\n\n    // Initialize groups for each option in order\n    for (const opt of options) {\n      const key = String(opt.id || opt.name || \"\");\n      if (key) {\n        groups.set(key, { option: opt, items: [] });\n      }\n    }\n\n    // Add \"No value\" group\n    groups.set(\"__no_value__\", {\n      option: {\n        id: \"__no_value__\",\n        name: `No ${columnField.name}`,\n        color: null,\n      },\n      items: [],\n    });\n\n    // Assign items to groups\n    for (const item of items) {\n      if (!item || !Array.isArray(item.fieldValues)) {\n        groups.get(\"__no_value__\")!.items.push(item);\n        continue;\n      }\n\n      const fv = item.fieldValues.find(\n        (v: any) =>\n          String(v.fieldId) === String(columnField.id) ||\n          v.fieldName === columnField.name ||\n          v.type === dataType,\n      );\n\n      let groupKey = \"__no_value__\";\n\n      if (fv) {\n        if (dataType === \"single_select\" && fv.option) {\n          groupKey = String(fv.option.id || fv.option.name || \"__no_value__\");\n        } else if (dataType === \"iteration\" && fv.iterationId) {\n          groupKey = String(fv.iterationId);\n        } else if (dataType === \"iteration\" && fv.title) {\n          // Find by title match\n          for (const [key, group] of groups) {\n            if (\n              group.option.title === fv.title ||\n              group.option.name === fv.title\n            ) {\n              groupKey = key;\n              break;\n            }\n          }\n        }\n      }\n\n      if (groups.has(groupKey)) {\n        groups.get(groupKey)!.items.push(item);\n      } else {\n        groups.get(\"__no_value__\")!.items.push(item);\n      }\n    }\n\n    return groups;\n  }\n\n  /**\n   * Get iteration date range string\n   */\n  private getIterationRange(option: any): string | null {\n    const start = option.startDate || option.start;\n    const duration = option.duration || option.length;\n\n    if (!start || !duration) return null;\n\n    try {\n      const startDate = new Date(start);\n      const endDate = new Date(\n        startDate.getTime() + Number(duration) * 24 * 60 * 60 * 1000,\n      );\n\n      const formatDate = (d: Date) =>\n        d.toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" });\n\n      return `${formatDate(startDate)} \u2014 ${formatDate(endDate)}`;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * Render a single card for a column\n   */\n  public renderCard(option: any, items: any[], columnField: any): HTMLElement {\n    const dataType = String(columnField.dataType || \"\").toLowerCase();\n    const card = document.createElement(\"div\");\n    card.className = \"board-card\";\n    card.setAttribute(\"data-column-id\", String(option.id || option.name || \"\"));\n    card.style.width = \"350px\";\n    card.style.minWidth = \"350px\";\n    card.style.maxWidth = \"350px\";\n    card.style.background = \"var(--vscode-editorWidget-background)\";\n    card.style.border = \"1px solid var(--vscode-editorWidget-border)\";\n    card.style.borderRadius = \"0\";\n    card.style.display = \"flex\";\n    card.style.flexDirection = \"column\";\n    card.style.flexShrink = \"0\";\n\n    // Card Header\n    const header = document.createElement(\"div\");\n    header.className = \"board-card-header\";\n    header.style.padding = \"12px\";\n    header.style.borderBottom = \"1px solid var(--vscode-editorWidget-border)\";\n    header.style.flexShrink = \"0\";\n\n    // Header Row 1: Color dot + Title + Count + Estimate\n    const headerRow = document.createElement(\"div\");\n    headerRow.className = \"board-card-header-row\";\n    headerRow.style.display = \"flex\";\n    headerRow.style.alignItems = \"center\";\n    headerRow.style.gap = \"8px\";\n\n    // Color dot\n    const colorDot = document.createElement(\"span\");\n    colorDot.className = \"board-card-color-dot\";\n    colorDot.style.width = \"12px\";\n    colorDot.style.height = \"12px\";\n    colorDot.style.borderRadius = \"50%\";\n    colorDot.style.flexShrink = \"0\";\n    const normalizedColor = normalizeColor(option.color) || \"#666666\";\n    colorDot.style.backgroundColor = normalizedColor;\n    headerRow.appendChild(colorDot);\n\n    // Title\n    const title = document.createElement(\"span\");\n    title.className = \"board-card-title\";\n    title.style.fontWeight = \"600\";\n    title.style.flex = \"1\";\n    title.style.overflow = \"hidden\";\n    title.style.textOverflow = \"ellipsis\";\n    title.style.whiteSpace = \"nowrap\";\n    title.textContent = option.name || option.title || \"Unnamed\";\n    headerRow.appendChild(title);\n\n    // Count badge\n    const count = document.createElement(\"span\");\n    count.className = \"board-card-count\";\n    count.style.fontSize = \"12px\";\n    count.style.color = \"var(--vscode-descriptionForeground)\";\n    count.style.fontVariantNumeric = \"tabular-nums\";\n    count.textContent = String(items.length);\n    headerRow.appendChild(count);\n\n    // Estimate pill\n    const estSum = this.sumEstimate(items);\n    if (estSum > 0) {\n      const estimatePill = document.createElement(\"span\");\n      estimatePill.className = \"board-card-estimate\";\n      estimatePill.style.display = \"inline-block\";\n      estimatePill.style.padding = \"2px 8px\";\n      estimatePill.style.borderRadius = \"999px\";\n      estimatePill.style.background = \"var(--vscode-input-background)\";\n      estimatePill.style.border = \"1px solid var(--vscode-panel-border)\";\n      estimatePill.style.fontSize = \"12px\";\n      estimatePill.style.lineHeight = \"18px\";\n      estimatePill.textContent = this.formatEstimate(estSum);\n      headerRow.appendChild(estimatePill);\n    }\n\n    header.appendChild(headerRow);\n\n    // Header Row 2: Description or Iteration Range\n    let description: string | null = null;\n    if (dataType === \"single_select\" && option.description) {\n      description = String(option.description).slice(0, 120);\n    } else if (dataType === \"iteration\") {\n      description = this.getIterationRange(option);\n    }\n\n    if (description) {\n      const descRow = document.createElement(\"div\");\n      descRow.className = \"board-card-description\";\n      descRow.style.fontSize = \"12px\";\n      descRow.style.color = \"var(--vscode-descriptionForeground)\";\n      descRow.style.marginTop = \"4px\";\n      descRow.style.overflow = \"hidden\";\n      descRow.style.textOverflow = \"ellipsis\";\n      descRow.style.whiteSpace = \"nowrap\";\n      descRow.textContent = description;\n      header.appendChild(descRow);\n    }\n\n    card.appendChild(header);\n\n    // Card Items - with scroll for overflow\n    const itemsContainer = document.createElement(\"div\");\n    itemsContainer.className = \"board-card-items\";\n    itemsContainer.style.padding = \"8px\";\n    itemsContainer.style.overflowY = \"auto\";\n    itemsContainer.style.flex = \"1\";\n    itemsContainer.style.minHeight = \"0\"; // Important for flex scroll\n\n    // Get the column option color for items\n    const columnColor = normalizeColor(option.color) || \"#666666\";\n\n    for (const item of items) {\n      const itemEl = this.renderItem(item, columnField, columnColor);\n      itemsContainer.appendChild(itemEl);\n    }\n\n    card.appendChild(itemsContainer);\n\n    // Card Footer - Add item button\n    const footer = document.createElement(\"div\");\n    footer.className = \"board-card-footer\";\n    footer.style.padding = \"8px 12px\";\n    footer.style.borderTop = \"1px solid var(--vscode-editorWidget-border)\";\n    footer.style.cursor = \"pointer\";\n    footer.style.userSelect = \"none\";\n    footer.style.flexShrink = \"0\";\n    footer.style.transition = \"background-color 0.15s ease\";\n    footer.setAttribute(\"data-column-field-id\", String(columnField.id || \"\"));\n    footer.setAttribute(\"data-column-value-id\", String(option.id || \"\"));\n    footer.setAttribute(\n      \"data-column-value-name\",\n      String(option.name || option.title || \"\"),\n    );\n\n    const addLabel = document.createElement(\"span\");\n    addLabel.textContent = \"+ Add item\";\n    addLabel.style.opacity = \"0.9\";\n    addLabel.style.fontSize = \"13px\";\n    footer.appendChild(addLabel);\n\n    footer.addEventListener(\"mouseenter\", () => {\n      footer.style.backgroundColor = \"var(--vscode-list-hoverBackground)\";\n    });\n    footer.addEventListener(\"mouseleave\", () => {\n      footer.style.backgroundColor = \"transparent\";\n    });\n\n    footer.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      if (this.onAction) {\n        this.onAction(\n          \"add-item-to-column\",\n          {\n            columnFieldId: columnField.id,\n            columnValueId: option.id,\n            columnValueName: option.name || option.title,\n          },\n          {\n            anchorElement: footer,\n          },\n        );\n      }\n    });\n\n    card.appendChild(footer);\n\n    return card;\n  }\n\n  /**\n   * Render a single item within a card with full details\n   */\n  private renderItem(\n    item: any,\n    columnField: any,\n    columnColor: string,\n  ): HTMLElement {\n    const el = document.createElement(\"div\");\n    el.className = \"board-item\";\n    el.setAttribute(\"data-gh-item-id\", String(item?.id || \"\"));\n    el.style.padding = \"10px\";\n    el.style.border = \"1px solid var(--vscode-editorWidget-border)\";\n    el.style.borderRadius = \"0\";\n    el.style.marginBottom = \"8px\";\n    el.style.background = \"var(--vscode-editor-background)\";\n    el.style.cursor = \"pointer\";\n    el.style.position = \"relative\";\n\n    // Extract content information\n    const content =\n      item?.content || (item?.raw && item.raw.itemContent) || null;\n    const titleText =\n      (item?.content && (item.content.title || item.content.name)) ||\n      item?.title ||\n      (item?.raw && item.raw.title) ||\n      \"Untitled\";\n\n    const number =\n      (item?.content && item.content.number) ||\n      (item?.raw && item.raw.itemContent && item.raw.itemContent.number) ||\n      null;\n\n    const url =\n      (item?.content && item.content.url) ||\n      (item?.raw && item.raw.itemContent && item.raw.itemContent.url) ||\n      null;\n\n    // Determine icon based on content type\n    let iconName = \"issue-opened\";\n    let isPR = false;\n    if (content) {\n      const typename = String(content.__typename || \"\").toLowerCase();\n      const state = String(content.state || \"\").toUpperCase();\n      isPR = typename.includes(\"pullrequest\");\n      const isClosed = state === \"CLOSED\";\n      const isMerged = content.merged === true;\n      const isDraft = content.isDraft === true;\n\n      if (isPR) {\n        if (isMerged) iconName = \"git-merge\";\n        else if (isClosed) iconName = \"git-pull-request-closed\";\n        else if (isDraft) iconName = \"git-pull-request-draft\";\n        else iconName = \"git-pull-request\";\n      } else {\n        if (isClosed) iconName = \"issue-closed\";\n        else if (isDraft) iconName = \"issue-draft\";\n        else iconName = \"issue-opened\";\n      }\n    }\n\n    // Determine blocked status\n    let isBlocked = false;\n    try {\n      const deps =\n        content && (content as any).issueDependenciesSummary\n          ? (content as any).issueDependenciesSummary\n          : null;\n      const blockedByCount =\n        deps && typeof deps.blockedBy === \"number\" ? deps.blockedBy : 0;\n      isBlocked = blockedByCount > 0;\n    } catch (_) {}\n\n    // Use column color for the icon (matches column header)\n    const iconColor = columnColor;\n\n    // Extract assignees for top-right corner\n    const assignees = this.extractAssignees(item);\n\n    // Build item HTML\n    const mainContent = document.createElement(\"div\");\n    mainContent.style.display = \"flex\";\n    mainContent.style.flexDirection = \"column\";\n    mainContent.style.gap = \"6px\";\n\n    // Row 1: Icon with column color and blocked overlay\n    const iconRow = document.createElement(\"div\");\n    iconRow.style.display = \"flex\";\n    iconRow.style.justifyContent = \"flex-start\";\n    iconRow.style.alignItems = \"center\";\n\n    const baseIcon = this.getIconSvg(iconName, 16, iconColor);\n    const blockedOverlay = isBlocked\n      ? `<span class='blocked-overlay' style='position:absolute;right:-3px;bottom:-3px;width:14px;height:14px;border-radius:999px;background:var(--vscode-editor-background);display:flex;align-items:center;justify-content:center;box-sizing:border-box;'>${this.getIconSvg(\"blocked\", 9, \"#dc3545\")}</span>`\n      : \"\";\n\n    iconRow.innerHTML = `<span style=\"position:relative;display:inline-flex;align-items:center;justify-content:center;color:${escapeHtml(iconColor)};\">${baseIcon}${blockedOverlay}</span>`;\n\n    // Add menu button\n    const menuBtn = document.createElement(\"span\");\n    menuBtn.className = \"board-item-menu-btn\";\n    menuBtn.setAttribute(\"data-item-id\", String(item?.id || \"\"));\n    menuBtn.style.marginLeft = \"6px\"; // Position after icon\n    menuBtn.style.color = \"var(--vscode-descriptionForeground)\";\n    menuBtn.innerHTML =\n      this.getIconSvg(\"kebab-horizontal\", 14) || \"<span>...</span>\";\n    iconRow.appendChild(menuBtn);\n\n    mainContent.appendChild(iconRow);\n\n    // Row 2: Title + #number\n    const titleRow = document.createElement(\"div\");\n    titleRow.style.fontWeight = \"500\";\n    titleRow.style.lineHeight = \"1.3\";\n    titleRow.innerHTML = `${escapeHtml(titleText)}${number ? ` <span style=\"color:var(--vscode-descriptionForeground);font-weight:400;\">#${escapeHtml(String(number))}</span>` : \"\"}`;\n    mainContent.appendChild(titleRow);\n\n    // Row 3: Field values (except sub_issues_progress and assignees)\n    const fieldsRow = this.renderFieldValues(item, columnField);\n    if (fieldsRow) {\n      mainContent.appendChild(fieldsRow);\n    }\n\n    // Row 4: Sub-issues progress (if applicable)\n    const subIssuesProgress = this.renderSubIssuesProgress(item);\n    if (subIssuesProgress) {\n      mainContent.appendChild(subIssuesProgress);\n    }\n\n    el.appendChild(mainContent);\n\n    // Top-right corner: Assignee avatars\n    if (assignees && assignees.length > 0) {\n      const avatarsContainer = this.renderAssigneeAvatars(assignees);\n      avatarsContainer.style.position = \"absolute\";\n      avatarsContainer.style.top = \"10px\";\n      avatarsContainer.style.right = \"10px\";\n      el.appendChild(avatarsContainer);\n    }\n\n    // Add click handler if URL available\n    if (url) {\n      el.setAttribute(\"data-gh-open\", url);\n      el.title = `${titleText}${number ? ` #${number}` : \"\"}`;\n    }\n\n    return el;\n  }\n\n  /**\n   * Helper: Get field name from value or lookup in fields definition\n   */\n  private getFieldName(fv: any): string {\n    if (fv.fieldName) return fv.fieldName;\n    if (fv.field?.name) return fv.field.name;\n    if (fv.fieldId && this.fields) {\n      const found = this.fields.find(\n        (f) => String(f.id) === String(fv.fieldId),\n      );\n      if (found && found.name) return found.name;\n    }\n    return \"Field\";\n  }\n\n  /**\n   * Extract assignees from item\n   */\n  private extractAssignees(item: any): any[] {\n    if (!item) return [];\n\n    // Try content.assignees first\n    if (item.content?.assignees?.nodes) {\n      return item.content.assignees.nodes;\n    }\n    if (item.content?.assignees && Array.isArray(item.content.assignees)) {\n      return item.content.assignees;\n    }\n\n    // Try fieldValues\n    if (Array.isArray(item.fieldValues)) {\n      const assigneesFv = item.fieldValues.find(\n        (v: any) => v?.type === \"assignees\" || v?.assignees,\n      );\n      if (assigneesFv?.assignees) {\n        return Array.isArray(assigneesFv.assignees)\n          ? assigneesFv.assignees\n          : [];\n      }\n    }\n\n    return [];\n  }\n\n  /**\n   * Extract linked pull requests from item\n   */\n  private extractLinkedPullRequests(item: any): any[] {\n    console.log(\n      \"[BoardCard] extractLinkedPullRequests called with item:\",\n      item?.id,\n      \"fieldValues:\",\n      item?.fieldValues?.length,\n    );\n    if (!item) return [];\n\n    // Try fieldValues first (most common location)\n    if (Array.isArray(item.fieldValues)) {\n      console.log(\n        \"[BoardCard] Checking fieldValues, types:\",\n        item.fieldValues.map((v: any) => v?.type),\n      );\n      const prFv = item.fieldValues.find(\n        (v: any) =>\n          v?.type === \"linked_pull_requests\" || v?.type === \"pull_request\",\n      );\n      if (prFv) {\n        console.log(\"[BoardCard] Found PR field value:\", prFv);\n        // Check for direct array first (matches table view)\n        if (Array.isArray(prFv.pullRequests)) {\n          console.log(\"[BoardCard] Returning direct array:\", prFv.pullRequests);\n          return prFv.pullRequests;\n        }\n        // Then check for nodes structure\n        if (\n          prFv.pullRequests?.nodes &&\n          Array.isArray(prFv.pullRequests.nodes)\n        ) {\n          console.log(\n            \"[BoardCard] Returning nodes array:\",\n            prFv.pullRequests.nodes,\n          );\n          return prFv.pullRequests.nodes;\n        }\n      } else {\n        console.log(\"[BoardCard] No PR field found in fieldValues\");\n      }\n    }\n\n    // Try content.linkedPullRequests as fallback\n    if (item.content?.linkedPullRequests) {\n      if (Array.isArray(item.content.linkedPullRequests)) {\n        return item.content.linkedPullRequests;\n      }\n      if (Array.isArray(item.content.linkedPullRequests.nodes)) {\n        return item.content.linkedPullRequests.nodes;\n      }\n    }\n\n    console.log(\"[BoardCard] Returning empty array for linkedPRs\");\n    return [];\n  }\n\n  /**\n   * Render assignee avatars for top-right corner\n   */\n  private renderAssigneeAvatars(assignees: any[]): HTMLElement {\n    const container = document.createElement(\"div\");\n    container.className = \"board-item-assignees\";\n    container.style.display = \"flex\";\n    container.style.alignItems = \"center\";\n\n    const maxAvatars = 3;\n    const displayed = assignees.slice(0, maxAvatars);\n\n    displayed.forEach((assignee, index) => {\n      const login = assignee.login || assignee.name || \"Unknown\";\n      const avatarUrl = assignee.avatarUrl || \"\";\n      if (!avatarUrl) return;\n\n      const img = document.createElement(\"img\");\n      img.src = avatarUrl;\n      img.className = \"board-pill\"; // Use board-pill class for click handling\n      img.setAttribute(\"data-filter-field\", \"Assignees\");\n      img.setAttribute(\"data-filter-value\", login);\n      img.title = login;\n      img.style.width = \"16px\";\n      img.style.height = \"16px\";\n      img.style.borderRadius = \"50%\";\n      img.style.border = \"1px solid var(--vscode-editorWidget-border)\";\n      img.style.cursor = \"pointer\";\n      img.style.marginLeft = index === 0 ? \"0\" : \"-6px\";\n      img.style.zIndex = String(maxAvatars - index);\n      img.style.position = \"relative\";\n\n      container.appendChild(img);\n    });\n\n    // If more assignees, show +N\n    if (assignees.length > maxAvatars) {\n      const more = document.createElement(\"span\");\n      more.className = \"board-pill\";\n      more.setAttribute(\"data-filter-field\", \"Assignees\"); // Can filter by \"Assignees\" generic? No, value missing.\n      // Maybe just cosmetic or filter by \"Assignees:HasAny\"?\n      // For now just cosmetic.\n      more.style.marginLeft = \"-6px\";\n      more.style.width = \"22px\";\n      more.style.height = \"22px\";\n      more.style.borderRadius = \"50%\";\n      more.style.background = \"var(--vscode-badge-background)\";\n      more.style.color = \"var(--vscode-badge-foreground)\";\n      more.style.fontSize = \"10px\";\n      more.style.display = \"flex\";\n      more.style.alignItems = \"center\";\n      more.style.justifyContent = \"center\";\n      more.style.fontWeight = \"bold\";\n      more.style.lineHeight = \"1\";\n      more.textContent = `+${assignees.length - maxAvatars}`;\n      more.title = \"More assignees\";\n      container.appendChild(more);\n    }\n\n    return container;\n  }\n\n  /**\n   * Render visible field values (excluding sub_issues_progress and assignees)\n   */\n  private renderFieldValues(item: any, columnField: any): HTMLElement | null {\n    if (!item || !Array.isArray(item.fieldValues)) return null;\n\n    const excludeTypes = [\n      \"sub_issues_progress\",\n      \"assignees\",\n      \"title\",\n      \"status\",\n    ];\n    const excludeFieldNames = [\"sub issues progress\", \"assignees\", \"title\"];\n    const columnFieldId = columnField?.id;\n\n    const valuePills: string[] = [];\n\n    // Add linked pull requests if they exist\n    const linkedPRs = this.extractLinkedPullRequests(item);\n    if (linkedPRs.length > 0) {\n      const prHtml = linkedPRs\n        .map((pr: any) => {\n          const num = escapeHtml(String(pr.number || \"\"));\n          const titleText = escapeHtml(pr.title || \"\");\n          const url = escapeHtml(pr.url || \"\");\n          const rawColor =\n            pr.state_color || pr.color || pr.colour || pr.state || null;\n          const normColor = normalizeColor(rawColor) || null;\n          const hasHex = !!(\n            normColor && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(normColor)\n          );\n          const border = normColor || \"#999999\";\n          const bg =\n            (hasHex && addAlpha(normColor, 0.12)) || \"rgba(0,0,0,0.06)\";\n          const fg = getContrastColor(normColor) || \"#333333\";\n\n          const isDraft = !!pr.isDraft;\n          const state = (pr.state && String(pr.state).toUpperCase()) || \"\";\n          const isMerged = !!pr.merged;\n          const isClosed = !isMerged && state === \"CLOSED\";\n\n          let iconName = \"git-pull-request\";\n          if (isMerged) iconName = \"git-merge\";\n          else if (isClosed) iconName = \"git-pull-request-closed\";\n          else if (isDraft) iconName = \"git-pull-request-draft\";\n\n          const icon = this.getIconSvg(iconName, 12);\n          const tooltip = titleText\n            ? escapeHtml(`#${pr.number} ${pr.title}`)\n            : escapeHtml(`#${pr.number}`);\n\n          return `<a href=\"${url}\" title=\"${tooltip}\" data-gh-open=\"${url}\" style=\"cursor:pointer;text-decoration:none;color:inherit\"><span class=\"board-pill\" style=\"display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid ${escapeHtml(border)};background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;max-width:160px\"><span style=\"position:relative;display:inline-flex;align-items:center;justify-content:center\">${icon}</span><span style=\"flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap\">#${num}</span></span></a>`;\n        })\n        .join(\"\");\n      valuePills.push(prHtml);\n    }\n\n    for (const fv of item.fieldValues) {\n      if (!fv) continue;\n\n      const fieldType = String(fv.type || \"\").toLowerCase();\n      const fieldName = String(\n        fv.fieldName || fv.field?.name || \"\",\n      ).toLowerCase();\n\n      // Skip excluded types\n      if (excludeTypes.includes(fieldType)) continue;\n      if (excludeFieldNames.includes(fieldName)) continue;\n\n      // Skip column field (already shown in grouping)\n      if (columnFieldId && String(fv.fieldId) === String(columnFieldId))\n        continue;\n\n      // Skip invisible fields (if visibility list is provided)\n      if (this.visibleFieldIds && this.visibleFieldIds.length > 0) {\n        const fid = fv.fieldId || (fv.field && fv.field.id);\n        if (fid && !this.visibleFieldIds.includes(String(fid))) {\n          continue;\n        }\n      }\n\n      // Skip empty values\n      const hasValue = this.hasFieldValue(fv);\n      if (!hasValue) continue;\n\n      // Render based on field type\n      const rendered = this.renderFieldValue(fv);\n      if (rendered) {\n        valuePills.push(rendered);\n      }\n    }\n\n    if (valuePills.length === 0) return null;\n\n    const container = document.createElement(\"div\");\n    container.className = \"board-item-fields\";\n    container.style.display = \"flex\";\n    container.style.flexWrap = \"wrap\";\n    container.style.gap = \"4px\";\n    container.style.marginTop = \"4px\";\n    container.innerHTML = valuePills.join(\"\");\n\n    return container;\n  }\n\n  /**\n   * Check if field value has content\n   */\n  private hasFieldValue(fv: any): boolean {\n    const type = String(fv.type || \"\").toLowerCase();\n\n    switch (type) {\n      case \"single_select\":\n        return !!(fv.option?.name || fv.name);\n      case \"iteration\":\n        return !!(fv.iteration?.title || fv.title);\n      case \"labels\":\n        return Array.isArray(fv.labels) && fv.labels.length > 0;\n      case \"milestone\":\n        return !!fv.milestone?.title;\n      case \"repository\":\n        return !!(fv.repository?.nameWithOwner || fv.repository?.name);\n      case \"parent_issue\":\n        return !!(fv.parent || fv.parentIssue);\n      case \"number\":\n        return fv.number != null && fv.number !== \"\";\n      case \"date\":\n        return !!(fv.date || fv.startDate);\n      case \"text\":\n        return !!fv.text;\n      case \"pull_request\":\n      case \"linked_pull_requests\":\n        return !!(\n          fv.pullRequests?.nodes?.length > 0 ||\n          (Array.isArray(fv.pullRequests) && fv.pullRequests.length > 0)\n        );\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Render a single field value as HTML\n   */\n  private renderFieldValue(fv: any): string {\n    const type = String(fv.type || \"\").toLowerCase();\n\n    switch (type) {\n      case \"single_select\":\n        return this.renderSingleSelectPill(fv);\n      case \"labels\":\n        return this.renderLabelsPills(fv);\n      case \"iteration\":\n        return this.renderIterationPill(fv);\n      case \"milestone\":\n        return this.renderMilestonePill(fv);\n      case \"repository\":\n        return this.renderRepositoryPill(fv);\n      case \"parent_issue\":\n        return this.renderParentIssuePill(fv);\n      case \"number\":\n        return this.renderNumberPill(fv);\n      case \"text\":\n        return this.renderTextPill(fv);\n      case \"date\":\n        return this.renderDatePill(fv);\n      case \"pull_request\":\n      case \"linked_pull_requests\":\n        return this.renderLinkedPullRequests(fv);\n      default:\n        return \"\";\n    }\n  }\n\n  /**\n   * Render single select as colored pill\n   */\n  private renderSingleSelectPill(fv: any): string {\n    const name = fv.option?.name || fv.name || \"\";\n    if (!name) return \"\";\n\n    const rawColor = fv.option?.color || fv.color || null;\n    const p = normalizeColor(rawColor) || null;\n    const hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p));\n    const border = p || \"#999999\";\n    const bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\";\n    const fg = p || \"#333333\";\n\n    const fName = this.getFieldName(fv);\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fName)}\" data-filter-value=\"${escapeHtml(name)}\" style=\"display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid ${escapeHtml(border)};background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(name)}\">${escapeHtml(name)}</span>`;\n  }\n\n  /**\n   * Render labels as colored pills\n   */\n  private renderLabelsPills(fv: any): string {\n    const labels = fv.labels || [];\n    if (!labels || labels.length === 0) return \"\";\n\n    return labels\n      .slice(0, 3) // Limit to 3 labels\n      .map((label: any) => {\n        const name = label.name || \"\";\n        const rawColor = label.color || label.colour || null;\n        const p = normalizeColor(rawColor) || null;\n        const hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p));\n        const border = p || \"#999999\";\n        const bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\";\n        const fg = p || \"#333333\";\n\n        return `<span class=\"board-pill\" data-filter-field=\"Labels\" data-filter-value=\"${escapeHtml(name)}\" style=\"display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid ${escapeHtml(border)};background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:11px;line-height:16px;white-space:nowrap;max-width:80px;overflow:hidden;text-overflow:ellipsis;\">${escapeHtml(name)}</span>`;\n      })\n      .join(\"\");\n  }\n\n  /**\n   * Render iteration with icon\n   */\n  private renderIterationPill(fv: any): string {\n    const iteration = fv.iteration || fv;\n    const title = iteration?.title || \"\";\n    if (!title) return \"\";\n\n    const icon = this.getIconSvg(\"iterations\", 12);\n    return `<span class=\"board-pill\" data-filter-field=\"Iteration\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(title)}\">${icon}<span>${escapeHtml(title)}</span></span>`;\n  }\n\n  /**\n   * Render milestone with icon\n   */\n  private renderMilestonePill(fv: any): string {\n    const title = fv.milestone?.title || \"\";\n    if (!title) return \"\";\n\n    const icon = this.getIconSvg(\"milestone\", 12);\n    return `<span class=\"board-pill\" data-filter-field=\"Milestone\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(title)}\">${icon}<span>${escapeHtml(title)}</span></span>`;\n  }\n\n  /**\n   * Render repository with icon\n   */\n  private renderRepositoryPill(fv: any): string {\n    const repo = fv.repository || fv;\n    const name = repo?.nameWithOwner || repo?.name || \"\";\n    if (!name) return \"\";\n\n    const icon = this.getIconSvg(\"repo\", 12);\n    return `<span class=\"board-pill\" data-filter-field=\"repo\" data-filter-value=\"${escapeHtml(name)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;\" title=\"${escapeHtml(name)}\">${icon}<span style=\"max-width:100px;overflow:hidden;text-overflow:ellipsis;\">${escapeHtml(name)}</span></span>`;\n  }\n\n  /**\n   * Render number field with field name\n   */\n  private renderNumberPill(fv: any): string {\n    const value = fv.number;\n    if (value == null || value === \"\") return \"\";\n\n    const fieldName = this.getFieldName(fv);\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fieldName)}\" data-filter-value=\"${escapeHtml(String(value))}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;\"><span style=\"color:var(--vscode-descriptionForeground);\">${escapeHtml(fieldName)}:</span><span>${escapeHtml(String(value))}</span></span>`;\n  }\n\n  /**\n   * Render text field with field name\n   */\n  private renderTextPill(fv: any): string {\n    const value = fv.text || \"\";\n    if (!value) return \"\";\n\n    const fieldName = this.getFieldName(fv);\n    const truncated = String(value).slice(0, 30);\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fieldName)}\" data-filter-value=\"${escapeHtml(value)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:150px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(value)}\"><span style=\"color:var(--vscode-descriptionForeground);\">${escapeHtml(fieldName)}:</span><span>${escapeHtml(truncated)}</span></span>`;\n  }\n\n  /**\n   * Render date field with field name\n   */\n  private renderDatePill(fv: any): string {\n    const dateValue = fv.date || fv.startDate || null;\n    if (!dateValue) return \"\";\n\n    const fieldName = this.getFieldName(fv);\n    let formatted = dateValue;\n    let filterVal = dateValue;\n    try {\n      const d = new Date(dateValue);\n      if (!isNaN(d.getTime())) {\n        formatted = d.toLocaleDateString(\"en-US\", {\n          month: \"short\",\n          day: \"numeric\",\n        });\n        filterVal = d.toISOString().split(\"T\")[0]; // YYYY-MM-DD\n      }\n    } catch (e) {\n      // Use raw value\n    }\n\n    const icon = this.getIconSvg(\"calendar\", 12);\n    return `<span class=\"board-pill\" data-filter-field=\"${escapeHtml(fieldName)}\" data-filter-value=\"${escapeHtml(String(filterVal))}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;\"><span style=\"color:var(--vscode-descriptionForeground);\">${escapeHtml(fieldName)}:</span>${icon}<span>${escapeHtml(String(formatted))}</span></span>`;\n  }\n\n  /**\n   * Render parent issue with colored pill (matching table view style)\n   */\n  private renderParentIssuePill(fv: any): string {\n    const parent = fv.parent || fv.parentIssue || fv.issue || null;\n    if (!parent) return \"\";\n\n    const title = parent.title || parent.name || \"\";\n    const number = parent.number || \"\";\n    const url = parent.url || parent.html_url || \"\";\n    if (!title && !number) return \"\";\n\n    // Get color - try to find status color from parent issue look up\n    let color = \"#999999\";\n    let parentIsDoneByStatus = false;\n    const completedNames = [\"done\", \"closed\", \"completed\", \"finished\"];\n\n    // Try to find the parent item in allItems to get its Status\n    let parentItem: any = null;\n    if (this.allItems && this.allItems.length > 0) {\n      const parentId = parent.id || (parent.raw && parent.raw.id);\n      const parentUrl =\n        parent.url || parent.html_url || (parent.raw && parent.raw.url);\n      const parentNum = parent.number || (parent.raw && parent.raw.number);\n\n      // Fuzzy match logic similar to strategies.ts\n      parentItem = this.allItems.find((item: any) => {\n        const c = item.content || (item.raw && item.raw.itemContent);\n        if (!c) return false;\n        if (parentId && String(c.id) === String(parentId)) return true;\n        if (parentUrl && String(c.url) === String(parentUrl)) return true;\n        if (parentNum && String(c.number) === String(parentNum)) {\n          // Check repo match if possible\n          const itemRepo = c.repository?.nameWithOwner || c.repository?.name;\n          const parentRepo =\n            parent.repository?.nameWithOwner || parent.repository?.name;\n          if (itemRepo && parentRepo && itemRepo !== parentRepo) return false;\n          return true;\n        }\n        return false;\n      });\n\n      if (parentItem && Array.isArray(parentItem.fieldValues)) {\n        // Find status field\n        // Find status field - robust check like strategies.ts\n        const statusFv = parentItem.fieldValues.find(\n          (d: any) =>\n            d &&\n            d.type === \"single_select\" &&\n            ((d.raw &&\n              d.raw.field &&\n              String(d.raw.field.name || \"\").toLowerCase() === \"status\") ||\n              (d.fieldName &&\n                String(d.fieldName || \"\").toLowerCase() === \"status\") ||\n              (d.field &&\n                d.field.name &&\n                String(d.field.name || \"\").toLowerCase() === \"status\")),\n        );\n\n        if (statusFv) {\n          const foundColor =\n            (statusFv.option &&\n              (statusFv.option.color ||\n                statusFv.option.id ||\n                statusFv.option.name)) ||\n            (statusFv.raw && statusFv.raw.color) ||\n            null;\n\n          if (foundColor) color = normalizeColor(foundColor) || color;\n\n          if (statusFv.option && statusFv.option.name) {\n            const optNameLower = String(statusFv.option.name).toLowerCase();\n            if (completedNames.includes(optNameLower)) {\n              parentIsDoneByStatus = true;\n            }\n          }\n        }\n      }\n    }\n\n    // Fallback to embedded color\n    if (color === \"#999999\") {\n      if (parent.statusColor) {\n        color = normalizeColor(parent.statusColor) || color;\n      } else if (parent.color) {\n        color = normalizeColor(parent.color) || color;\n      }\n    }\n\n    const p = color;\n    const hasHex = !!(p && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(p));\n    const border = p || \"#999999\";\n    const bg = (hasHex && addAlpha(p, 0.12)) || \"rgba(0,0,0,0.06)\";\n    const fg = getContrastColor(p) || \"#333333\";\n\n    // Determine icon (assume issue)\n    let isClosed = String(parent.state || \"\").toUpperCase() === \"CLOSED\";\n    if (parentIsDoneByStatus) isClosed = true;\n\n    // Determine blocked status for parent\n    let isBlocked = false;\n    try {\n      // Check specific blocked label\n      const hasBlockedLabel = !!(\n        parent.labels &&\n        Array.isArray(parent.labels) &&\n        parent.labels.some(\n          (l: any) => String(l.name || \"\").toLowerCase() === \"blocked\",\n        )\n      );\n      // Check parentItem dependency summary if available\n      let blockedBy = 0;\n      if (\n        parentItem &&\n        parentItem.content &&\n        parentItem.content.issueDependenciesSummary\n      ) {\n        blockedBy = parentItem.content.issueDependenciesSummary.blockedBy || 0;\n      }\n      if (hasBlockedLabel || blockedBy > 0) isBlocked = true;\n    } catch (e) {}\n\n    const iconName = isClosed ? \"issue-closed\" : \"issue-opened\";\n    const icon = this.getIconSvg(iconName, 12, p);\n\n    const blockedOverlay = isBlocked\n      ? `<span class='blocked-overlay' style='position:absolute;right:-3px;bottom:-3px;width:14px;height:14px;border-radius:999px;background:var(--vscode-editor-background);display:flex;align-items:center;justify-content:center;box-sizing:border-box;'>${this.getIconSvg(\"blocked\", 9, \"#dc3545\")}</span>`\n      : \"\";\n\n    // Build pill similar to ParentIssueRenderer in strategies.ts\n    let html = `<span class=\"board-pill\" data-filter-field=\"parent\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border:1px solid ${escapeHtml(border)};border-radius:999px;background:${escapeHtml(bg)};color:${escapeHtml(fg)};font-size:11px;line-height:16px;max-width:150px;\" title=\"${escapeHtml(title + (number ? \" #\" + number : \"\"))}\"${url ? ` data-gh-open=\"${escapeHtml(url)}\"` : \"\"}>`;\n    html += `<span style=\"position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;\">${icon}${blockedOverlay}</span>`;\n    html += `<span style=\"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;\">${escapeHtml(title)}</span>`;\n    if (number) {\n      html += `<span style=\"flex-shrink:0;color:var(--vscode-descriptionForeground);\">#${escapeHtml(String(number))}</span>`;\n    }\n    html += `</span>`;\n    return html;\n  }\n\n  /**\n   * Render linked pull requests\n   */\n  private renderLinkedPullRequests(fv: any): string {\n    const prs = fv.pullRequests?.nodes || [];\n    if (!prs || prs.length === 0) return \"\";\n\n    return prs\n      .map((pr: any) => {\n        const title = pr.title || \"#\" + pr.number || \"PR\";\n        const icon = this.getIconSvg(\"git-pull-request\", 12);\n        // Use generic pill style\n        return `<span class=\"board-pill\" data-filter-field=\"Linked Pull Requests\" data-filter-value=\"${escapeHtml(title)}\" style=\"display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;margin-right:2px;max-width:100px;overflow:hidden;text-overflow:ellipsis;\" title=\"${escapeHtml(title)}\">${icon}<span>${escapeHtml(title)}</span></span>`;\n      })\n      .join(\"\");\n  }\n\n  /**\n   * Render sub-issues progress bar\n   */\n  private renderSubIssuesProgress(item: any): HTMLElement | null {\n    if (!item || !Array.isArray(item.fieldValues)) return null;\n\n    const progressFv = item.fieldValues.find(\n      (v: any) => v?.type === \"sub_issues_progress\",\n    );\n\n    if (!progressFv || !progressFv.total || Number(progressFv.total) <= 0) {\n      return null;\n    }\n\n    const total = Math.max(0, Math.floor(Number(progressFv.total) || 0));\n    const done = Math.max(0, Math.floor(Number(progressFv.done || 0)));\n    if (total === 0) return null;\n\n    const pct = Math.round((done / total) * 100);\n\n    const container = document.createElement(\"div\");\n    container.className = \"board-item-progress board-pill\";\n    container.setAttribute(\"data-filter-field\", \"parent\");\n    // Use item title as value (assuming 'item.title' or content.title exists from renderItem context)\n    // renderItem extracts titleText. We need to access it here. item structure has title or content.title.\n    const titleText =\n      (item.content && (item.content.title || item.content.name)) ||\n      item.title ||\n      (item.raw && item.raw.title) ||\n      \"\";\n    container.setAttribute(\"data-filter-value\", titleText);\n\n    container.style.marginTop = \"6px\";\n    container.title = `${done} of ${total} sub-issues complete (${pct}%) -- Click to filter by this parent`;\n\n    container.innerHTML = `\n      <div style=\"display:flex;align-items:center;gap:6px;width:100%;\">\n        <span style=\"font-size:11px;color:var(--vscode-descriptionForeground);font-variant-numeric:tabular-nums;min-width:30px;\">${done}/${total}</span>\n        <div style=\"flex:1;height:8px;border-radius:4px;border:1px solid var(--vscode-focusBorder);overflow:hidden;background:transparent;\">\n          <div style=\"height:100%;width:${pct}%;background:var(--vscode-focusBorder);\"></div>\n        </div>\n        <span style=\"font-size:11px;color:var(--vscode-descriptionForeground);font-variant-numeric:tabular-nums;min-width:28px;text-align:right;\">${pct}%</span>\n      </div>\n    `;\n\n    return container;\n  }\n\n  /**\n   * Render the full board with all cards\n   */\n  public renderBoard(container: HTMLElement, columnField: any): void {\n    const groups = this.groupItemsByColumn(this.allItems, columnField);\n\n    // Create board container - fill height and allow horizontal scroll\n    const board = document.createElement(\"div\");\n    board.className = \"board-container\";\n    board.style.display = \"flex\";\n    board.style.gap = \"16px\";\n    board.style.overflowX = \"auto\";\n    board.style.overflowY = \"hidden\";\n    board.style.padding = \"8px 0\";\n    board.style.alignItems = \"stretch\"; // Cards fill height\n    board.style.flex = \"1 1 auto\"; // Fill remaining flex parent height\n    board.style.height = \"100%\";\n    board.style.boxSizing = \"border-box\";\n\n    // Inject styles for interactions\n    const style = document.createElement(\"style\");\n    style.textContent = `\n            .board-item-menu-btn { opacity: 0; transition: opacity 0.2s; cursor: pointer; padding: 2px; border-radius: 4px; }\n            .board-item-menu-btn:hover { background: var(--vscode-toolbar-hoverBackground); }\n            .board-item:hover .board-item-menu-btn { opacity: 1; }\n            .board-pill { cursor: pointer; transition: opacity 0.2s; }\n            .board-pill:hover { opacity: 0.8; }\n        `;\n    board.appendChild(style);\n\n    // Add event delegation for interactivity\n    board.addEventListener(\"click\", (e) => {\n      const target = e.target as HTMLElement;\n\n      // Check for filterable pills\n      const pill = target.closest(\"[data-filter-field]\");\n      if (pill) {\n        const field = pill.getAttribute(\"data-filter-field\");\n        const value = pill.getAttribute(\"data-filter-value\");\n        if (field && value) {\n          this.handlePillClick(e, field, value);\n          return;\n        }\n      }\n\n      // Check for menu button\n      const menuBtn = target.closest(\".board-item-menu-btn\");\n      if (menuBtn) {\n        e.stopPropagation();\n        e.preventDefault();\n        const itemId = menuBtn.getAttribute(\"data-item-id\");\n        // TODO: Open menu\n        if (this.onAction && itemId) {\n          // Quick hack: pass context menu request to main handler,\n          // or toggle a menu locally.\n          // For now, let's signal 'context-menu' action.\n          const item = this.allItems.find(\n            (i) => String(i.id) === String(itemId),\n          ) || { id: itemId };\n\n          // Native VS Code context menu is best invoked via message?\n          // Or we render a custom HTML menu.\n          // Let's call onAction with 'open-menu'\n          const rect = menuBtn.getBoundingClientRect();\n          this.onAction(\"open-menu\", item, { x: rect.left, y: rect.bottom });\n        }\n        return;\n      }\n    });\n\n    // Render cards for each group (preserving option order)\n    for (const [key, group] of groups) {\n      // Skip empty \"No value\" groups\n      if (key === \"__no_value__\" && group.items.length === 0) continue;\n\n      const card = this.renderCard(group.option, group.items, columnField);\n      board.appendChild(card);\n    }\n\n    container.appendChild(board);\n  }\n}\n", "import { escapeHtml } from \"./utils\";\nimport {\n  logDebug,\n  setLoadingState,\n  setErrorState,\n  createLoadMoreButton,\n  initFilterBar,\n  applyFilterVisibility,\n} from \"./viewFetcherUtils\";\nimport { BoardCardRenderer } from \"./renderers/BoardCardRenderer\";\n/// <reference path=\"./global.d.ts\" />\n\n// signal that the board fetcher script executed\ntry {\n  logDebug(\"global\", \"boardViewFetcher.loaded\");\n} catch (e) {}\ntry {\n  console.log && console.log(\"boardViewFetcher script loaded\");\n} catch (e) {}\n\n// Expose a global fetcher: window.boardViewFetcher(view, container, viewKey)\nfunction createBoardFetcher() {\n  return function (view: any, container: HTMLElement, viewKey: string) {\n    const viewName =\n      view && (view.name || view.id) ? view.name || view.id : \"Board View\";\n\n    try {\n      setLoadingState(container, viewName);\n    } catch (e) {}\n\n    var first = 50;\n\n    function render(payload: any, effectiveFilter?: string) {\n      try {\n        var items = (payload && payload.items) || [];\n        var fields = (payload && payload.fields) || [];\n        var allFields = (payload && payload.allFields) || fields;\n        container.innerHTML = \"\";\n\n        // Set container layout like table view - flex column with height 100%\n        container.style.margin = \"0\";\n        container.style.padding = \"0\";\n        container.style.height = \"100%\";\n        container.style.display = \"flex\";\n        container.style.flexDirection = \"column\";\n        container.style.overflow = \"hidden\";\n\n        let barApi = initFilterBar(container, viewKey, {\n          suffix: viewKey,\n          step: first,\n          onLoadMore: function () {\n            first += 50;\n            requestFields();\n          },\n        });\n\n        // If the server returned an effective filter, apply it via the bar API\n        try {\n          if (\n            effectiveFilter &&\n            barApi &&\n            typeof barApi.setEffectiveFilter === \"function\"\n          ) {\n            try {\n              barApi.setEffectiveFilter(effectiveFilter);\n            } catch (e) {}\n          }\n        } catch (e) {}\n\n        if (!barApi) {\n          var header = document.createElement(\"div\");\n          header.style.display = \"flex\";\n          header.style.justifyContent = \"space-between\";\n          header.style.alignItems = \"center\";\n          header.style.marginBottom = \"8px\";\n\n          var title = document.createElement(\"div\");\n          title.style.fontWeight = \"600\";\n          title.style.padding = \"6px\";\n          title.textContent = viewName;\n\n          var right = document.createElement(\"div\");\n          var loadBtn = createLoadMoreButton(() => {\n            first += 50;\n            requestFields();\n          });\n\n          right.appendChild(loadBtn);\n          header.appendChild(title);\n          header.appendChild(right);\n          container.appendChild(header);\n        }\n\n        // Detect column field from view details (verticalGroupByFields)\n        let columnField: any = null;\n        try {\n          const details = payload && payload.details;\n          const verticalGroupByFields =\n            details &&\n            details.verticalGroupByFields &&\n            details.verticalGroupByFields.nodes;\n\n          if (verticalGroupByFields && verticalGroupByFields.length > 0) {\n            // Find the field in allFields that matches the verticalGroupByField\n            const vgbField = verticalGroupByFields[0];\n            columnField = allFields.find(\n              (f: any) =>\n                String(f.id) === String(vgbField.id) ||\n                String(f.name) === String(vgbField.name),\n            );\n\n            // Validate it's a valid column field type (single_select or iteration)\n            if (columnField) {\n              const dataType = String(columnField.dataType || \"\").toLowerCase();\n              if (dataType !== \"single_select\" && dataType !== \"iteration\") {\n                logDebug(viewKey, \"boardViewFetcher.invalidColumnFieldType\", {\n                  dataType,\n                  fieldName: columnField.name,\n                });\n                columnField = null;\n              }\n            }\n          }\n        } catch (e) {\n          logDebug(viewKey, \"boardViewFetcher.columnFieldDetection.error\", {\n            message: String((e as any)?.message || e),\n          });\n        }\n\n        // Fallback: try to find Status field (common single_select field for boards)\n        if (!columnField) {\n          columnField = allFields.find(\n            (f: any) =>\n              String(f.dataType || \"\").toLowerCase() === \"single_select\" &&\n              String(f.name || \"\").toLowerCase() === \"status\",\n          );\n        }\n\n        // Fallback: use first single_select field\n        if (!columnField) {\n          columnField = allFields.find(\n            (f: any) =>\n              String(f.dataType || \"\").toLowerCase() === \"single_select\",\n          );\n        }\n\n        // Create board content container - flex grow to fill remaining space\n        var content = document.createElement(\"div\");\n        content.style.flex = \"1 1 auto\";\n        content.style.overflow = \"hidden\";\n        content.style.position = \"relative\";\n        content.style.display = \"flex\";\n        content.style.flexDirection = \"column\";\n\n        // Callbacks for interactivity\n        const handleFilter = (filter: string) => {\n          if (barApi && barApi.inputEl) {\n            const current = String(barApi.inputEl.value || \"\").trim();\n            // Avoid duplicating if checking purely space separated, but simple append is standard\n            let newFilter = current ? `${current} ${filter}` : filter;\n            barApi.inputEl.value = newFilter;\n            barApi.inputEl.dispatchEvent(new Event(\"input\", { bubbles: true }));\n          }\n        };\n\n        const handleAction = (action: string, item: any, args: any) => {\n          if (action === \"open-menu\" && args) {\n            // Close existing menus\n            const ex = document.querySelectorAll(\".board-context-menu\");\n            ex.forEach((e) => e.remove());\n\n            const menu = document.createElement(\"div\");\n            menu.className = \"board-context-menu\";\n            menu.style.position = \"fixed\";\n            // Ensure menu doesn't overflow right edge\n            const x = Math.min(args.x, window.innerWidth - 180);\n            const y = Math.min(args.y, window.innerHeight - 150);\n\n            menu.style.left = x + \"px\";\n            menu.style.top = y + \"px\";\n            menu.style.background = \"var(--vscode-menu-background)\";\n            menu.style.color = \"var(--vscode-menu-foreground)\";\n            menu.style.border = \"1px solid var(--vscode-menu-border)\";\n            menu.style.borderRadius = \"4px\";\n            menu.style.zIndex = \"1000\";\n            menu.style.boxShadow = \"0 2px 8px rgba(0,0,0,0.15)\";\n            menu.style.minWidth = \"160px\";\n            menu.style.padding = \"4px 0\";\n\n            const addItem = (\n              text: string,\n              iconClass: string,\n              onClick: () => void,\n              isSep = false,\n            ) => {\n              if (isSep) {\n                const sep = document.createElement(\"div\");\n                sep.style.height = \"1px\";\n                sep.style.background = \"var(--vscode-menu-separatorBackground)\";\n                sep.style.margin = \"4px 0\";\n                menu.appendChild(sep);\n                return;\n              }\n              const el = document.createElement(\"div\");\n              el.style.padding = \"4px 8px\";\n              el.style.cursor = \"pointer\";\n              el.style.display = \"flex\";\n              el.style.alignItems = \"center\";\n              el.style.gap = \"8px\";\n              el.style.fontSize = \"13px\";\n\n              // Icon placeholder - ideally use octicons but text + unicode/css is backup\n              const ico = document.createElement(\"span\");\n              if (iconClass) {\n                ico.className = \"codicon codicon-\" + iconClass; // Assuming codicons available?\n                // If not, use simple emoji or text.\n                // User requested \"add-icon\" (probably meaning 'plus' or similar) and 'octicon-arrow-both'.\n                // We might not have codicon font loaded in webview unless injected.\n                // Fallback to text for now.\n                if (iconClass === \"link-external\") ico.textContent = \"\u2197\";\n                else if (iconClass === \"globe\") ico.textContent = \"\uD83C\uDF10\";\n                else if (iconClass === \"arrow-both\") ico.textContent = \"\u21C4\";\n              }\n\n              const span = document.createElement(\"span\");\n              span.textContent = text;\n\n              el.appendChild(ico);\n              el.appendChild(span);\n\n              el.addEventListener(\"click\", (e) => {\n                e.stopPropagation();\n                menu.remove();\n                onClick();\n              });\n\n              el.addEventListener(\n                \"mouseenter\",\n                () =>\n                  (el.style.background =\n                    \"var(--vscode-menu-selectionBackground)\"),\n              );\n              el.addEventListener(\n                \"mouseleave\",\n                () => (el.style.background = \"transparent\"),\n              );\n              menu.appendChild(el);\n            };\n\n            addItem(\"Open issue\", \"link-external\", () => {\n              const url =\n                item.content?.url ||\n                item.url ||\n                (item.raw && item.raw.itemContent && item.raw.itemContent.url);\n              if (url && (window as any).__APP_MESSAGING__) {\n                (window as any).__APP_MESSAGING__.postMessage({\n                  command: \"openUrl\",\n                  url: url,\n                });\n              }\n            });\n\n            addItem(\"\", \"\", () => {}, true);\n\n            addItem(\"Move to column...\", \"arrow-both\", () => {\n              if ((window as any).__APP_MESSAGING__) {\n                // Extract column options\n                let options: any[] = [];\n                if (columnField) {\n                  const opts =\n                    columnField.options ||\n                    (columnField.configuration &&\n                      columnField.configuration.options);\n                  const iters =\n                    columnField.configuration &&\n                    columnField.configuration.iterations;\n\n                  // Helper to format iteration date range\n                  const getIterationRange = (\n                    start: string,\n                    duration: number,\n                  ) => {\n                    try {\n                      const startDate = new Date(start);\n                      const endDate = new Date(\n                        startDate.getTime() +\n                          Number(duration) * 24 * 60 * 60 * 1000,\n                      );\n                      const formatDate = (d: Date) =>\n                        d.toLocaleDateString(\"en-US\", {\n                          month: \"short\",\n                          day: \"numeric\",\n                        });\n                      return `${formatDate(startDate)} \u2014 ${formatDate(endDate)}`;\n                    } catch (e) {\n                      return \"\";\n                    }\n                  };\n\n                  if (opts && Array.isArray(opts)) {\n                    options = opts.map((o: any) => ({\n                      id: o.id,\n                      name: o.name,\n                      color: o.color,\n                      description: o.description,\n                    }));\n                  } else if (iters && Array.isArray(iters)) {\n                    options = iters.map((it: any) => ({\n                      id: it.id,\n                      name: it.title,\n                      color: it.color,\n                      description: getIterationRange(it.startDate, it.duration),\n                    }));\n                  }\n                }\n\n                (window as any).__APP_MESSAGING__.postMessage({\n                  command: \"moveItem\",\n                  viewKey: viewKey,\n                  itemId: item.id,\n                  projectId: payload && payload.id,\n                  fieldId: columnField ? columnField.id : null,\n                  options: options,\n                  currentValue: \"\", // Could check item.fieldValues to find current\n                });\n              }\n            });\n\n            document.body.appendChild(menu);\n\n            // Global click to close\n            const closeHandler = () => {\n              menu.remove();\n              document.removeEventListener(\"click\", closeHandler);\n            };\n            // Defer to avoid immediate trigger\n            setTimeout(\n              () => document.addEventListener(\"click\", closeHandler),\n              0,\n            );\n          } else if (action === \"add-item-to-column\" && item && args) {\n            // Import AddItemMenu if not already available\n            import(\"./components/AddItemMenu\")\n              .then(({ AddItemMenu }) => {\n                const menu = new AddItemMenu({\n                  anchorElement: args.anchorElement,\n                  onCreateIssue: () => {\n                    try {\n                      const messaging = (window as any).__APP_MESSAGING__;\n                      if (\n                        messaging &&\n                        typeof messaging.postMessage === \"function\"\n                      ) {\n                        messaging.postMessage({\n                          command: \"addItem:createIssue\",\n                          viewKey: viewKey,\n                          projectId: payload && payload.id,\n                          columnFieldId: item.columnFieldId,\n                          columnValueId: item.columnValueId,\n                          columnValueName: item.columnValueName,\n                        });\n                      }\n                    } catch (e) {\n                      console.error(\n                        \"[boardViewFetcher] create-issue action failed\",\n                        e,\n                      );\n                    }\n                  },\n                  onAddFromRepo: () => {\n                    try {\n                      const messaging = (window as any).__APP_MESSAGING__;\n                      if (\n                        messaging &&\n                        typeof messaging.postMessage === \"function\"\n                      ) {\n                        messaging.postMessage({\n                          command: \"addItem:addFromRepo\",\n                          viewKey: viewKey,\n                          projectId: payload && payload.id,\n                          columnFieldId: item.columnFieldId,\n                          columnValueId: item.columnValueId,\n                          columnValueName: item.columnValueName,\n                        });\n                      }\n                    } catch (e) {\n                      console.error(\n                        \"[boardViewFetcher] add-from-repo action failed\",\n                        e,\n                      );\n                    }\n                  },\n                });\n                menu.show();\n              })\n              .catch((e) => {\n                console.error(\"Failed to load AddItemMenu\", e);\n              });\n          }\n        };\n\n        // Use BoardCardRenderer if column field is found\n        if (columnField) {\n          try {\n            // Extract visible field IDs\n            const visibleFieldIds = fields.map((f: any) => String(f.id));\n            const cardRenderer = new BoardCardRenderer(\n              allFields,\n              items,\n              visibleFieldIds,\n              handleFilter,\n              handleAction,\n            );\n            cardRenderer.renderBoard(content, columnField);\n          } catch (e) {\n            logDebug(viewKey, \"boardViewFetcher.cardRenderer.error\", {\n              message: String((e as any)?.message || e),\n            });\n            // Fallback to flat list on error\n            renderFlatList(content, items);\n          }\n        } else {\n          // No column field found - render flat list as fallback\n          logDebug(viewKey, \"boardViewFetcher.noColumnField\", {\n            fieldsCount: allFields.length,\n          });\n          renderFlatList(content, items);\n        }\n\n        container.appendChild(content);\n\n        try {\n          if (barApi && typeof barApi.setCount === \"function\")\n            barApi.setCount(items.length);\n          if (barApi && typeof barApi.setLoadState === \"function\")\n            barApi.setLoadState(\n              items.length < first,\n              items.length >= first ? \"Load more\" : \"All loaded\",\n            );\n\n          // Wire local preview filtering via centralized helper: register items and subscribe\n          if (barApi && barApi.inputEl) {\n            if (typeof barApi.registerItems === \"function\") {\n              barApi.registerItems(items, { fields: fields });\n            }\n            if (typeof barApi.onFilterChange === \"function\") {\n              barApi.onFilterChange(function (matchedIds: any, rawFilter: any) {\n                applyFilterVisibility(\n                  container,\n                  \"[data-gh-item-id]\",\n                  matchedIds,\n                  \"block\",\n                );\n\n                if (barApi && typeof barApi.setCount === \"function\")\n                  barApi.setCount(matchedIds.size);\n\n                logDebug(viewKey, \"filterInput\", {\n                  filter: rawFilter,\n                  matched: matchedIds.size,\n                  original: items.length,\n                });\n              });\n            }\n          }\n        } catch (e) {}\n      } catch (err: any) {\n        logDebug(viewKey, \"boardViewFetcher.render.error\", {\n          message: String(err && err.message),\n          stack: err && err.stack,\n        });\n        setErrorState(\n          container,\n          viewName,\n          \"Error rendering board view: \" + String(err && err.message),\n        );\n      }\n    }\n\n    // Fallback flat list rendering (used when no column field found)\n    function renderFlatList(content: HTMLElement, items: any[]) {\n      for (var i = 0; i < items.length; i++) {\n        var it = items[i];\n        var card = document.createElement(\"div\");\n        try {\n          card.setAttribute(\"data-gh-item-id\", String(it && it.id));\n        } catch (e) {}\n        card.style.padding = \"8px\";\n        card.style.border = \"1px solid var(--vscode-editorWidget-border)\";\n        card.style.marginBottom = \"8px\";\n        card.style.borderRadius = \"2px\";\n        var titleText =\n          (it && it.content && (it.content.title || it.content.name)) ||\n          (it && it.title) ||\n          (it && it.raw && it.raw.title) ||\n          \"#\" + (i + 1);\n        card.innerHTML =\n          '<div style=\"font-weight:600\">' +\n          escapeHtml(titleText) +\n          \"</div>\" +\n          (it && it.id\n            ? '<div style=\"color:var(--vscode-descriptionForeground);font-size:12px\">' +\n              escapeHtml(String(it.id)) +\n              \"</div>\"\n            : \"\");\n        content.appendChild(card);\n      }\n    }\n\n    function onMessage(ev: MessageEvent) {\n      var msg = ev && ev.data ? ev.data : ev;\n      try {\n        if (msg && msg.command === \"fields\") {\n          if (msg.viewKey && viewKey && String(msg.viewKey) !== String(viewKey))\n            return;\n          if (msg.error) {\n            setErrorState(container, viewName, String(msg.error));\n          } else {\n            render(\n              msg.payload || (msg.payload && msg.payload.data) || msg.payload,\n              msg.effectiveFilter,\n            );\n          }\n        }\n      } catch (e) {}\n    }\n\n    function requestFields() {\n      try {\n        if (\n          (window as any).__APP_MESSAGING__ &&\n          typeof (window as any).__APP_MESSAGING__.postMessage === \"function\"\n        ) {\n          (window as any).__APP_MESSAGING__.postMessage({\n            command: \"requestFields\",\n            first: first,\n            viewKey: viewKey,\n          });\n        }\n      } catch (e) {}\n    }\n    try {\n      (window as any).__APP_MESSAGING__.onMessage(onMessage);\n    } catch (e) {\n      window.addEventListener(\"message\", onMessage);\n    }\n    requestFields();\n  };\n}\ntry {\n  window.boardViewFetcher = createBoardFetcher();\n} catch (e) {}\n"],
  "mappings": "oJAAA,IAAAA,EAAA,GAAAC,GAAAD,EAAA,iBAAAE,IAAA,IAMaA,EANbC,EAAAC,GAAA,kBAMaF,EAAN,KAAkB,CAKvB,YAAYG,EAA6B,CAHzC,KAAQ,YAAkC,KAC1C,KAAQ,gBAAsC,KAG5C,KAAK,QAAUA,CACjB,CAEO,MAAO,CACZ,KAAK,KAAK,EAEV,KAAK,gBAAkB,SAAS,cAAc,KAAK,EACnD,KAAK,gBAAgB,MAAM,SAAW,QACtC,KAAK,gBAAgB,MAAM,IAAM,IACjC,KAAK,gBAAgB,MAAM,KAAO,IAClC,KAAK,gBAAgB,MAAM,MAAQ,IACnC,KAAK,gBAAgB,MAAM,OAAS,IACpC,KAAK,gBAAgB,MAAM,OAAS,MACpC,KAAK,gBAAgB,iBAAiB,QAAS,IAAM,KAAK,KAAK,CAAC,EAChE,SAAS,KAAK,YAAY,KAAK,eAAe,EAE9C,KAAK,YAAc,SAAS,cAAc,KAAK,EAC/C,KAAK,YAAY,UAAY,gBAC7B,KAAK,YAAY,MAAM,SAAW,WAClC,KAAK,YAAY,MAAM,WAAa,gCACpC,KAAK,YAAY,MAAM,OAAS,sCAChC,KAAK,YAAY,MAAM,aAAe,MACtC,KAAK,YAAY,MAAM,UAAY,6BACnC,KAAK,YAAY,MAAM,SAAW,QAClC,KAAK,YAAY,MAAM,QAAU,QACjC,KAAK,YAAY,MAAM,OAAS,OAChC,KAAK,YAAY,MAAM,SAAW,OAElC,SAAS,KAAK,YAAY,KAAK,WAAW,EAC1C,KAAK,UAAU,EAEf,IAAMC,EAAO,KAAK,QAAQ,cAAc,sBAAsB,EACxDC,EAAW,KAAK,YAAY,sBAAsB,EAClDC,EAAS,EACTC,EAAK,OAAO,YAAc,SAAS,gBAAgB,YACnDC,EAAK,OAAO,aAAe,SAAS,gBAAgB,aAEtDC,EAAML,EAAK,OAASE,EACpBF,EAAK,OAASC,EAAS,OAASC,EAASE,IACvCJ,EAAK,IAAMC,EAAS,OAASC,GAAU,EACzCG,EAAML,EAAK,IAAMC,EAAS,OAASC,EAEnCG,EAAM,KAAK,IACTH,EACA,KAAK,IAAIE,EAAKH,EAAS,OAASC,EAAQF,EAAK,OAASE,CAAM,CAC9D,GAIJ,IAAII,EAAON,EAAK,KACZA,EAAK,KAAOC,EAAS,MAAQC,EAASC,IACxCG,EAAO,KAAK,IAAIJ,EAAQF,EAAK,MAAQC,EAAS,KAAK,GAErDK,EAAO,KAAK,IAAIJ,EAAQ,KAAK,IAAII,EAAMH,EAAKF,EAAS,MAAQC,CAAM,CAAC,EAEpE,KAAK,YAAY,MAAM,IAAM,GAAG,KAAK,MAAMG,CAAG,CAAC,KAC/C,KAAK,YAAY,MAAM,KAAO,GAAG,KAAK,MAAMC,CAAI,CAAC,IACnD,CAEO,MAAO,CACR,KAAK,cACP,KAAK,YAAY,OAAO,EACxB,KAAK,YAAc,MAEjB,KAAK,kBACP,KAAK,gBAAgB,OAAO,EAC5B,KAAK,gBAAkB,KAE3B,CAEQ,WAAY,CAClB,GAAI,CAAC,KAAK,YAAa,OAEvB,IAAMC,EAAS,CACbC,EACAC,EACAC,EACAC,IACG,CACH,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,qBAChBA,EAAI,MAAM,QAAU,OACpBA,EAAI,MAAM,WAAa,SACvBA,EAAI,MAAM,QAAU,WACpBA,EAAI,MAAM,OAAS,UACnBA,EAAI,MAAM,MAAQ,gCAElB,IAAMC,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,MAAM,QAAU,cACzBA,EAAS,MAAM,WAAa,SAC5BA,EAAS,MAAM,eAAiB,SAChCA,EAAS,MAAM,YAAc,MAC7BA,EAAS,UAAa,OAAe,aAAaL,CAAe,GAAK,GACtEI,EAAI,YAAYC,CAAQ,EAExB,IAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,MAAM,QAAU,OAC9BA,EAAc,MAAM,cAAgB,SACpCA,EAAc,MAAM,KAAO,IAE3B,IAAMC,EAAU,SAAS,cAAc,KAAK,EAK5C,GAJAA,EAAQ,YAAcN,EACtBM,EAAQ,MAAM,WAAa,MAC3BD,EAAc,YAAYC,CAAO,EAE7BL,EAAa,CACf,IAAMM,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,YAAcN,EACrBM,EAAO,MAAM,SAAW,OACxBA,EAAO,MAAM,MAAQ,sCACrBF,EAAc,YAAYE,CAAM,CAClC,CAEAJ,EAAI,YAAYE,CAAa,EAE7BF,EAAI,iBAAiB,aAAc,IAAM,CACvCA,EAAI,MAAM,WAAa,yCACvBA,EAAI,MAAM,MAAQ,wCACpB,CAAC,EACDA,EAAI,iBAAiB,aAAc,IAAM,CACvCA,EAAI,MAAM,WAAa,cACvBA,EAAI,MAAM,MAAQ,+BACpB,CAAC,EAEDA,EAAI,iBAAiB,QAAS,IAAM,CAClCD,EAAQ,EACR,KAAK,KAAK,CACZ,CAAC,EAED,KAAK,YAAa,YAAYC,CAAG,CACnC,EAEAL,EACE,eACA,mBACA,0CACA,KAAK,QAAQ,aACf,EAEAA,EACE,OACA,2BACA,wDACA,KAAK,QAAQ,aACf,CACF,CACF,IC9JO,SAASU,EAAWC,EAAgB,CACzC,OAAOA,EACH,OAAOA,CAAC,EACL,QAAQ,KAAM,OAAO,EACrB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,MAAM,EACvB,EACN,CAEO,SAASC,EAAeC,EAA2B,CACxD,GAAI,CAACA,EAAO,OAAO,KACnB,IAAIC,EAAI,OAAOD,CAAK,EAAE,KAAK,EAC3B,GACE,mBAAmB,KAAKC,CAAC,GACzB,mBAAmB,KAAKA,CAAC,GACzB,mBAAmB,KAAKA,CAAC,EACzB,CACA,IAAIC,EAAID,EAAE,CAAC,IAAM,IAAMA,EAAE,MAAM,CAAC,EAAIA,EACpC,MAAO,KAAOC,EAAE,SAAW,EAAIA,EAAE,UAAU,EAAG,CAAC,EAAIA,EACrD,CACA,IAAIJ,EAAI,CACN,KAAM,UACN,IAAK,UACL,OAAQ,UACR,OAAQ,UACR,MAAO,UACP,KAAM,UACN,OAAQ,UACR,KAAM,UACN,MAAO,UACP,MAAO,SACT,EACIK,EAAIF,EAAE,YAAY,EACtB,OAAQH,EAAUK,CAAC,GAAK,IAC1B,CAEO,SAASC,EAASJ,EAAYK,EAA2B,CAC9D,GAAI,CAACL,EAAO,OAAO,KACnB,IAAIF,EAAIE,EAAM,QAAQ,IAAK,EAAE,EACzBG,EAAKD,GAAW,SAASA,EAAG,EAAE,EAClC,GAAIJ,EAAE,SAAW,EAAG,CAClB,IAAII,EAAIC,EAAEL,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EACnBQ,EAAIH,EAAEL,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EACjBS,EAAIJ,EAAEL,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EACnB,MAAO,QAAUI,EAAI,IAAMI,EAAI,IAAMC,EAAI,IAAMF,EAAQ,GACzD,CACA,GAAIP,EAAE,SAAW,GAAKA,EAAE,SAAW,EAAG,CACpC,IAAII,EAAIJ,EAAE,SAAW,EAAIA,EAAE,UAAU,EAAG,CAAC,EAAIA,EAC3CQ,EAAIH,EAAEL,EAAE,UAAU,EAAG,CAAC,CAAC,EACvBS,EAAIJ,EAAED,EAAE,UAAU,EAAG,CAAC,CAAC,EACvBM,EAAIL,EAAED,EAAE,UAAU,EAAG,CAAC,CAAC,EACzB,MAAO,QAAUI,EAAI,IAAMC,EAAI,IAAMC,EAAI,IAAMH,EAAQ,GACzD,CACA,OAAO,IACT,CAEO,SAASI,EAAiBT,EAAoB,CACnD,GAAI,CAACA,EAAO,MAAO,UACnB,IAAIC,EAAID,EAAM,QAAQ,IAAK,EAAE,EACzBF,EAAKU,GAAW,SAASA,EAAG,EAAE,EAC9BL,EAAGD,EAAGI,EACV,GAAIL,EAAE,SAAW,EACbE,EAAIL,EAAEG,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EAAKC,EAAIJ,EAAEG,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EAAKK,EAAIR,EAAEG,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,UACxDA,EAAE,SAAW,GAAKA,EAAE,SAAW,EAAG,CACzC,IAAIO,EAAIP,EAAE,SAAW,EAAIA,EAAE,UAAU,EAAG,CAAC,EAAIA,EAC3CE,EAAIL,EAAEU,EAAE,UAAU,EAAG,CAAC,CAAC,EACtBN,EAAIJ,EAAEU,EAAE,UAAU,EAAG,CAAC,CAAC,EACvBF,EAAIR,EAAEU,EAAE,UAAU,EAAG,CAAC,CAAC,CAC5B,KAAO,OAAO,UACd,MAAO,QAAUL,EAAI,KAAO,OAAUD,EAAI,KAAO,OAAUI,EAAI,KAAO,GAClE,UACA,SACN,CCtEO,SAASI,EAASC,EAAiBC,EAAiBC,EAAY,CACrE,GAAI,CAEC,OAAe,mBAChB,OAAQ,OAAe,kBAAkB,aAAgB,YAExD,OAAe,kBAAkB,YAAY,CAC5C,QAAS,WACT,MAAO,QACP,QAASF,EACT,QAASC,EACT,KAAMC,CACR,CAAC,CAEL,MAAY,CAAC,CACb,GAAI,CACE,SAAW,QAAQ,KACrB,QAAQ,IAAID,EAASC,CAAI,CAE7B,MAAY,CAAC,CACf,CCtBO,SAASC,EAAgBC,EAAwBC,EAAmB,CACzED,EAAU,UACR,sBACAC,EACA,sDACJ,CAEO,SAASC,EACdF,EACAC,EACAE,EACA,CACAH,EAAU,UACR,sBACAC,EACA,4DACAE,EACA,QACJ,CAEO,SAASC,EAAqBC,EAAwC,CAC3E,IAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3C,OAAAA,EAAI,KAAO,SACXA,EAAI,YAAc,YAClBA,EAAI,MAAM,WAAa,MACvBA,EAAI,MAAM,OAAS,8CACnBA,EAAI,iBAAiB,QAAS,IAAM,CAClCD,EAAQ,EACRC,EAAI,SAAW,GACfA,EAAI,YAAc,YACpB,CAAC,EACMA,CACT,CClBO,SAASC,EACdC,EACAC,EACAC,EAQK,CACL,GACE,OAAO,iBACP,OAAO,OAAO,gBAAgB,QAAW,WAEzC,GAAI,CACF,OAAO,OAAO,gBAAgB,OAAO,CACnC,OAAQF,EACR,OAAQE,EAAQ,QAAUD,EAC1B,UACE,OAAOC,EAAQ,WAAc,SAAWA,EAAQ,UAAY,OAC9D,QAASD,EACT,KAAMC,EAAQ,MAAQ,GACtB,WAAYA,EAAQ,WACpB,OAAQA,EAAQ,OAChB,UAAWA,EAAQ,SACrB,CAAC,CACH,MAAY,CACV,OAAO,IACT,CAEF,OAAO,IACT,CAKO,SAASC,EACdC,EACAC,EACAC,EACAC,EAAuB,QACvB,CACA,GAAI,CACF,IAAMC,EAAW,MAAM,KAAKJ,EAAK,iBAAiBC,CAAQ,CAAC,EAC3D,QAASI,EAAI,EAAGA,EAAID,EAAS,OAAQC,IACnC,GAAI,CACF,IAAMC,EAAKF,EAASC,CAAC,EACfE,EAAKD,EAAG,aAAa,iBAAiB,EAC5CA,EAAG,MAAM,QAAUJ,EAAW,IAAI,OAAOK,CAAE,CAAC,EAAIJ,EAAe,MACjE,MAAY,CAAC,CAEjB,MAAY,CAAC,CACf,CCzDO,IAAMK,EAAN,KAAwB,CAC7B,YACUC,EACAC,EACAC,EACAC,EACAC,EACR,CALQ,YAAAJ,EACA,cAAAC,EACA,qBAAAC,EACA,cAAAC,EACA,cAAAC,EAGR,KAAK,gBAAkB,KAAK,gBAAgB,KAAK,IAAI,CACvD,CAKQ,gBAAgB,EAAeC,EAAeC,EAAe,CAGnE,GAFA,EAAE,gBAAgB,EAClB,EAAE,eAAe,EACb,KAAK,SAAU,CACjB,IAAMC,EAAYD,EAAM,SAAS,GAAG,EAChC,IAAIA,EAAM,QAAQ,KAAM,KAAK,CAAC,IAC9BA,EAEEE,EAAYH,EAAM,SAAS,GAAG,EAChC,IAAIA,EAAM,QAAQ,KAAM,KAAK,CAAC,IAC9BA,EACJ,KAAK,SAAS,GAAGG,CAAS,IAAID,CAAS,EAAE,CAC3C,CACF,CAKQ,WACNE,EACAC,EAAe,GACfC,EACQ,CACR,OAAK,OAAe,WACV,OAAe,WAAWF,EAAU,CAAE,KAAAC,EAAM,KAAAC,CAAK,CAAC,EAErD,EACT,CAKQ,kBAAwB,CAC9B,OACE,KAAK,OAAO,KACTC,GACCA,EAAE,UACF,OAAOA,EAAE,QAAQ,EAAE,YAAY,IAAM,UACrC,OAAOA,EAAE,MAAQ,EAAE,EAChB,YAAY,EACZ,SAAS,UAAU,CAC1B,GACA,KAAK,OAAO,KACTA,GAAMA,EAAE,UAAY,OAAOA,EAAE,QAAQ,EAAE,YAAY,IAAM,QAC5D,CAEJ,CAKO,YAAYC,EAAsB,CACvC,IAAMC,EAAgB,KAAK,iBAAiB,EAC5C,GAAI,CAACA,EAAe,MAAO,GAE3B,IAAIC,EAAM,EACV,QAAWC,KAAQH,EAAO,CACxB,GAAI,CAACG,GAAQ,CAAC,MAAM,QAAQA,EAAK,WAAW,EAAG,SAC/C,IAAMC,EAAKD,EAAK,YAAY,KACzBE,GACEA,EAAE,SAAW,OAAOA,EAAE,OAAO,IAAM,OAAOJ,EAAc,EAAE,GAC1DI,EAAE,WACD,OAAOA,EAAE,SAAS,EAAE,YAAY,EAAE,SAAS,UAAU,GACvDA,EAAE,OAAS,QACf,EACA,GAAID,EAAI,CACN,IAAME,EAAM,OACVF,EAAG,QAAU,KAAOA,EAAG,OAASA,EAAG,OAAS,KAAOA,EAAG,MAAQ,GAChE,EACK,MAAME,CAAG,IAAGJ,GAAOI,EAC1B,CACF,CACA,OAAOJ,CACT,CAKQ,eAAeK,EAAmB,CACxC,OAAK,SAASA,CAAC,EACR,OAAOA,CAAC,EADU,EAE3B,CAKO,mBACLP,EACAQ,EAC4C,CAC5C,IAAMC,EAAS,IAAI,IACbC,EAAW,OAAOF,EAAY,UAAY,EAAE,EAAE,YAAY,EAG5DG,EAAiB,CAAC,EAClBD,IAAa,iBAAmB,MAAM,QAAQF,EAAY,OAAO,EACnEG,EAAUH,EAAY,QAEtBE,IAAa,aACbF,EAAY,eAAe,aAE3BG,EAAUH,EAAY,cAAc,WAAW,IAAKI,IAAa,CAC/D,GAAIA,EAAG,GACP,KAAMA,EAAG,MACT,MAAOA,EAAG,MACV,MAAOA,EAAG,OAAS,KACnB,UAAWA,EAAG,UACd,SAAUA,EAAG,QACf,EAAE,GAIJ,QAAWC,KAAOF,EAAS,CACzB,IAAMG,EAAM,OAAOD,EAAI,IAAMA,EAAI,MAAQ,EAAE,EACvCC,GACFL,EAAO,IAAIK,EAAK,CAAE,OAAQD,EAAK,MAAO,CAAC,CAAE,CAAC,CAE9C,CAGAJ,EAAO,IAAI,eAAgB,CACzB,OAAQ,CACN,GAAI,eACJ,KAAM,MAAMD,EAAY,IAAI,GAC5B,MAAO,IACT,EACA,MAAO,CAAC,CACV,CAAC,EAGD,QAAWL,KAAQH,EAAO,CACxB,GAAI,CAACG,GAAQ,CAAC,MAAM,QAAQA,EAAK,WAAW,EAAG,CAC7CM,EAAO,IAAI,cAAc,EAAG,MAAM,KAAKN,CAAI,EAC3C,QACF,CAEA,IAAMC,EAAKD,EAAK,YAAY,KACzBE,GACC,OAAOA,EAAE,OAAO,IAAM,OAAOG,EAAY,EAAE,GAC3CH,EAAE,YAAcG,EAAY,MAC5BH,EAAE,OAASK,CACf,EAEIK,EAAW,eAEf,GAAIX,GACF,GAAIM,IAAa,iBAAmBN,EAAG,OACrCW,EAAW,OAAOX,EAAG,OAAO,IAAMA,EAAG,OAAO,MAAQ,cAAc,UACzDM,IAAa,aAAeN,EAAG,YACxCW,EAAW,OAAOX,EAAG,WAAW,UACvBM,IAAa,aAAeN,EAAG,OAExC,OAAW,CAACU,EAAKE,CAAK,IAAKP,EACzB,GACEO,EAAM,OAAO,QAAUZ,EAAG,OAC1BY,EAAM,OAAO,OAASZ,EAAG,MACzB,CACAW,EAAWD,EACX,KACF,GAKFL,EAAO,IAAIM,CAAQ,EACrBN,EAAO,IAAIM,CAAQ,EAAG,MAAM,KAAKZ,CAAI,EAErCM,EAAO,IAAI,cAAc,EAAG,MAAM,KAAKN,CAAI,CAE/C,CAEA,OAAOM,CACT,CAKQ,kBAAkBQ,EAA4B,CACpD,IAAMC,EAAQD,EAAO,WAAaA,EAAO,MACnCE,EAAWF,EAAO,UAAYA,EAAO,OAE3C,GAAI,CAACC,GAAS,CAACC,EAAU,OAAO,KAEhC,GAAI,CACF,IAAMC,EAAY,IAAI,KAAKF,CAAK,EAC1BG,EAAU,IAAI,KAClBD,EAAU,QAAQ,EAAI,OAAOD,CAAQ,EAAI,GAAK,GAAK,GAAK,GAC1D,EAEMG,EAAcC,GAClBA,EAAE,mBAAmB,QAAS,CAAE,MAAO,QAAS,IAAK,SAAU,CAAC,EAElE,MAAO,GAAGD,EAAWF,CAAS,CAAC,WAAME,EAAWD,CAAO,CAAC,EAC1D,MAAY,CACV,OAAO,IACT,CACF,CAKO,WAAWJ,EAAajB,EAAcQ,EAA+B,CAC1E,IAAME,EAAW,OAAOF,EAAY,UAAY,EAAE,EAAE,YAAY,EAC1DgB,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,aACjBA,EAAK,aAAa,iBAAkB,OAAOP,EAAO,IAAMA,EAAO,MAAQ,EAAE,CAAC,EAC1EO,EAAK,MAAM,MAAQ,QACnBA,EAAK,MAAM,SAAW,QACtBA,EAAK,MAAM,SAAW,QACtBA,EAAK,MAAM,WAAa,wCACxBA,EAAK,MAAM,OAAS,8CACpBA,EAAK,MAAM,aAAe,IAC1BA,EAAK,MAAM,QAAU,OACrBA,EAAK,MAAM,cAAgB,SAC3BA,EAAK,MAAM,WAAa,IAGxB,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,oBACnBA,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,aAAe,8CAC5BA,EAAO,MAAM,WAAa,IAG1B,IAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,wBACtBA,EAAU,MAAM,QAAU,OAC1BA,EAAU,MAAM,WAAa,SAC7BA,EAAU,MAAM,IAAM,MAGtB,IAAMC,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,UAAY,uBACrBA,EAAS,MAAM,MAAQ,OACvBA,EAAS,MAAM,OAAS,OACxBA,EAAS,MAAM,aAAe,MAC9BA,EAAS,MAAM,WAAa,IAC5B,IAAMC,EAAkBC,EAAeZ,EAAO,KAAK,GAAK,UACxDU,EAAS,MAAM,gBAAkBC,EACjCF,EAAU,YAAYC,CAAQ,EAG9B,IAAMG,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,UAAY,mBAClBA,EAAM,MAAM,WAAa,MACzBA,EAAM,MAAM,KAAO,IACnBA,EAAM,MAAM,SAAW,SACvBA,EAAM,MAAM,aAAe,WAC3BA,EAAM,MAAM,WAAa,SACzBA,EAAM,YAAcb,EAAO,MAAQA,EAAO,OAAS,UACnDS,EAAU,YAAYI,CAAK,EAG3B,IAAMC,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,UAAY,mBAClBA,EAAM,MAAM,SAAW,OACvBA,EAAM,MAAM,MAAQ,sCACpBA,EAAM,MAAM,mBAAqB,eACjCA,EAAM,YAAc,OAAO/B,EAAM,MAAM,EACvC0B,EAAU,YAAYK,CAAK,EAG3B,IAAMC,EAAS,KAAK,YAAYhC,CAAK,EACrC,GAAIgC,EAAS,EAAG,CACd,IAAMC,EAAe,SAAS,cAAc,MAAM,EAClDA,EAAa,UAAY,sBACzBA,EAAa,MAAM,QAAU,eAC7BA,EAAa,MAAM,QAAU,UAC7BA,EAAa,MAAM,aAAe,QAClCA,EAAa,MAAM,WAAa,iCAChCA,EAAa,MAAM,OAAS,uCAC5BA,EAAa,MAAM,SAAW,OAC9BA,EAAa,MAAM,WAAa,OAChCA,EAAa,YAAc,KAAK,eAAeD,CAAM,EACrDN,EAAU,YAAYO,CAAY,CACpC,CAEAR,EAAO,YAAYC,CAAS,EAG5B,IAAIQ,EAA6B,KAOjC,GANIxB,IAAa,iBAAmBO,EAAO,YACzCiB,EAAc,OAAOjB,EAAO,WAAW,EAAE,MAAM,EAAG,GAAG,EAC5CP,IAAa,cACtBwB,EAAc,KAAK,kBAAkBjB,CAAM,GAGzCiB,EAAa,CACf,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,yBACpBA,EAAQ,MAAM,SAAW,OACzBA,EAAQ,MAAM,MAAQ,sCACtBA,EAAQ,MAAM,UAAY,MAC1BA,EAAQ,MAAM,SAAW,SACzBA,EAAQ,MAAM,aAAe,WAC7BA,EAAQ,MAAM,WAAa,SAC3BA,EAAQ,YAAcD,EACtBT,EAAO,YAAYU,CAAO,CAC5B,CAEAX,EAAK,YAAYC,CAAM,EAGvB,IAAMW,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,mBAC3BA,EAAe,MAAM,QAAU,MAC/BA,EAAe,MAAM,UAAY,OACjCA,EAAe,MAAM,KAAO,IAC5BA,EAAe,MAAM,UAAY,IAGjC,IAAMC,EAAcR,EAAeZ,EAAO,KAAK,GAAK,UAEpD,QAAWd,KAAQH,EAAO,CACxB,IAAMsC,EAAS,KAAK,WAAWnC,EAAMK,EAAa6B,CAAW,EAC7DD,EAAe,YAAYE,CAAM,CACnC,CAEAd,EAAK,YAAYY,CAAc,EAG/B,IAAMG,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,oBACnBA,EAAO,MAAM,QAAU,WACvBA,EAAO,MAAM,UAAY,8CACzBA,EAAO,MAAM,OAAS,UACtBA,EAAO,MAAM,WAAa,OAC1BA,EAAO,MAAM,WAAa,IAC1BA,EAAO,MAAM,WAAa,8BAC1BA,EAAO,aAAa,uBAAwB,OAAO/B,EAAY,IAAM,EAAE,CAAC,EACxE+B,EAAO,aAAa,uBAAwB,OAAOtB,EAAO,IAAM,EAAE,CAAC,EACnEsB,EAAO,aACL,yBACA,OAAOtB,EAAO,MAAQA,EAAO,OAAS,EAAE,CAC1C,EAEA,IAAMuB,EAAW,SAAS,cAAc,MAAM,EAC9C,OAAAA,EAAS,YAAc,aACvBA,EAAS,MAAM,QAAU,MACzBA,EAAS,MAAM,SAAW,OAC1BD,EAAO,YAAYC,CAAQ,EAE3BD,EAAO,iBAAiB,aAAc,IAAM,CAC1CA,EAAO,MAAM,gBAAkB,oCACjC,CAAC,EACDA,EAAO,iBAAiB,aAAc,IAAM,CAC1CA,EAAO,MAAM,gBAAkB,aACjC,CAAC,EAEDA,EAAO,iBAAiB,QAAUE,GAAM,CACtCA,EAAE,gBAAgB,EACd,KAAK,UACP,KAAK,SACH,qBACA,CACE,cAAejC,EAAY,GAC3B,cAAeS,EAAO,GACtB,gBAAiBA,EAAO,MAAQA,EAAO,KACzC,EACA,CACE,cAAesB,CACjB,CACF,CAEJ,CAAC,EAEDf,EAAK,YAAYe,CAAM,EAEhBf,CACT,CAKQ,WACNrB,EACAK,EACA6B,EACa,CACb,IAAMK,EAAK,SAAS,cAAc,KAAK,EACvCA,EAAG,UAAY,aACfA,EAAG,aAAa,kBAAmB,OAAOvC,GAAM,IAAM,EAAE,CAAC,EACzDuC,EAAG,MAAM,QAAU,OACnBA,EAAG,MAAM,OAAS,8CAClBA,EAAG,MAAM,aAAe,IACxBA,EAAG,MAAM,aAAe,MACxBA,EAAG,MAAM,WAAa,kCACtBA,EAAG,MAAM,OAAS,UAClBA,EAAG,MAAM,SAAW,WAGpB,IAAMC,EACJxC,GAAM,SAAYA,GAAM,KAAOA,EAAK,IAAI,aAAgB,KACpDyC,EACHzC,GAAM,UAAYA,EAAK,QAAQ,OAASA,EAAK,QAAQ,OACtDA,GAAM,OACLA,GAAM,KAAOA,EAAK,IAAI,OACvB,WAEI0C,EACH1C,GAAM,SAAWA,EAAK,QAAQ,QAC9BA,GAAM,KAAOA,EAAK,IAAI,aAAeA,EAAK,IAAI,YAAY,QAC3D,KAEI2C,EACH3C,GAAM,SAAWA,EAAK,QAAQ,KAC9BA,GAAM,KAAOA,EAAK,IAAI,aAAeA,EAAK,IAAI,YAAY,KAC3D,KAGEP,EAAW,eACXmD,EAAO,GACX,GAAIJ,EAAS,CACX,IAAMK,EAAW,OAAOL,EAAQ,YAAc,EAAE,EAAE,YAAY,EACxDM,EAAQ,OAAON,EAAQ,OAAS,EAAE,EAAE,YAAY,EACtDI,EAAOC,EAAS,SAAS,aAAa,EACtC,IAAME,EAAWD,IAAU,SACrBE,EAAWR,EAAQ,SAAW,GAC9BS,EAAUT,EAAQ,UAAY,GAEhCI,EACEI,EAAUvD,EAAW,YAChBsD,EAAUtD,EAAW,0BACrBwD,EAASxD,EAAW,yBACxBA,EAAW,mBAEZsD,EAAUtD,EAAW,eAChBwD,EAASxD,EAAW,cACxBA,EAAW,cAEpB,CAGA,IAAIyD,EAAY,GAChB,GAAI,CACF,IAAMC,EACJX,GAAYA,EAAgB,yBACvBA,EAAgB,yBACjB,KAGNU,GADEC,GAAQ,OAAOA,EAAK,WAAc,SAAWA,EAAK,UAAY,GACnC,CAC/B,MAAY,CAAC,CAGb,IAAMC,EAAYlB,EAGZmB,EAAY,KAAK,iBAAiBrD,CAAI,EAGtCsD,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,MAAM,QAAU,OAC5BA,EAAY,MAAM,cAAgB,SAClCA,EAAY,MAAM,IAAM,MAGxB,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,eAAiB,aAC/BA,EAAQ,MAAM,WAAa,SAE3B,IAAMC,EAAW,KAAK,WAAW/D,EAAU,GAAI2D,CAAS,EAClDK,EAAiBP,EACnB,sPAAsP,KAAK,WAAW,UAAW,EAAG,SAAS,CAAC,UAC9R,GAEJK,EAAQ,UAAY,sGAAsGG,EAAWN,CAAS,CAAC,MAAMI,CAAQ,GAAGC,CAAc,UAG9K,IAAME,EAAU,SAAS,cAAc,MAAM,EAC7CA,EAAQ,UAAY,sBACpBA,EAAQ,aAAa,eAAgB,OAAO3D,GAAM,IAAM,EAAE,CAAC,EAC3D2D,EAAQ,MAAM,WAAa,MAC3BA,EAAQ,MAAM,MAAQ,sCACtBA,EAAQ,UACN,KAAK,WAAW,mBAAoB,EAAE,GAAK,mBAC7CJ,EAAQ,YAAYI,CAAO,EAE3BL,EAAY,YAAYC,CAAO,EAG/B,IAAMK,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,MAAM,WAAa,MAC5BA,EAAS,MAAM,WAAa,MAC5BA,EAAS,UAAY,GAAGF,EAAWjB,CAAS,CAAC,GAAGC,EAAS,8EAA8EgB,EAAW,OAAOhB,CAAM,CAAC,CAAC,UAAY,EAAE,GAC/KY,EAAY,YAAYM,CAAQ,EAGhC,IAAMC,EAAY,KAAK,kBAAkB7D,EAAMK,CAAW,EACtDwD,GACFP,EAAY,YAAYO,CAAS,EAInC,IAAMC,EAAoB,KAAK,wBAAwB9D,CAAI,EAQ3D,GAPI8D,GACFR,EAAY,YAAYQ,CAAiB,EAG3CvB,EAAG,YAAYe,CAAW,EAGtBD,GAAaA,EAAU,OAAS,EAAG,CACrC,IAAMU,EAAmB,KAAK,sBAAsBV,CAAS,EAC7DU,EAAiB,MAAM,SAAW,WAClCA,EAAiB,MAAM,IAAM,OAC7BA,EAAiB,MAAM,MAAQ,OAC/BxB,EAAG,YAAYwB,CAAgB,CACjC,CAGA,OAAIpB,IACFJ,EAAG,aAAa,eAAgBI,CAAG,EACnCJ,EAAG,MAAQ,GAAGE,CAAS,GAAGC,EAAS,KAAKA,CAAM,GAAK,EAAE,IAGhDH,CACT,CAKQ,aAAatC,EAAiB,CACpC,GAAIA,EAAG,UAAW,OAAOA,EAAG,UAC5B,GAAIA,EAAG,OAAO,KAAM,OAAOA,EAAG,MAAM,KACpC,GAAIA,EAAG,SAAW,KAAK,OAAQ,CAC7B,IAAM+D,EAAQ,KAAK,OAAO,KACvBpE,GAAM,OAAOA,EAAE,EAAE,IAAM,OAAOK,EAAG,OAAO,CAC3C,EACA,GAAI+D,GAASA,EAAM,KAAM,OAAOA,EAAM,IACxC,CACA,MAAO,OACT,CAKQ,iBAAiBhE,EAAkB,CACzC,GAAI,CAACA,EAAM,MAAO,CAAC,EAGnB,GAAIA,EAAK,SAAS,WAAW,MAC3B,OAAOA,EAAK,QAAQ,UAAU,MAEhC,GAAIA,EAAK,SAAS,WAAa,MAAM,QAAQA,EAAK,QAAQ,SAAS,EACjE,OAAOA,EAAK,QAAQ,UAItB,GAAI,MAAM,QAAQA,EAAK,WAAW,EAAG,CACnC,IAAMiE,EAAcjE,EAAK,YAAY,KAClCE,GAAWA,GAAG,OAAS,aAAeA,GAAG,SAC5C,EACA,GAAI+D,GAAa,UACf,OAAO,MAAM,QAAQA,EAAY,SAAS,EACtCA,EAAY,UACZ,CAAC,CAET,CAEA,MAAO,CAAC,CACV,CAKQ,0BAA0BjE,EAAkB,CAOlD,GANA,QAAQ,IACN,0DACAA,GAAM,GACN,eACAA,GAAM,aAAa,MACrB,EACI,CAACA,EAAM,MAAO,CAAC,EAGnB,GAAI,MAAM,QAAQA,EAAK,WAAW,EAAG,CACnC,QAAQ,IACN,2CACAA,EAAK,YAAY,IAAKE,GAAWA,GAAG,IAAI,CAC1C,EACA,IAAMgE,EAAOlE,EAAK,YAAY,KAC3BE,GACCA,GAAG,OAAS,wBAA0BA,GAAG,OAAS,cACtD,EACA,GAAIgE,EAAM,CAGR,GAFA,QAAQ,IAAI,oCAAqCA,CAAI,EAEjD,MAAM,QAAQA,EAAK,YAAY,EACjC,eAAQ,IAAI,sCAAuCA,EAAK,YAAY,EAC7DA,EAAK,aAGd,GACEA,EAAK,cAAc,OACnB,MAAM,QAAQA,EAAK,aAAa,KAAK,EAErC,eAAQ,IACN,qCACAA,EAAK,aAAa,KACpB,EACOA,EAAK,aAAa,KAE7B,MACE,QAAQ,IAAI,8CAA8C,CAE9D,CAGA,GAAIlE,EAAK,SAAS,mBAAoB,CACpC,GAAI,MAAM,QAAQA,EAAK,QAAQ,kBAAkB,EAC/C,OAAOA,EAAK,QAAQ,mBAEtB,GAAI,MAAM,QAAQA,EAAK,QAAQ,mBAAmB,KAAK,EACrD,OAAOA,EAAK,QAAQ,mBAAmB,KAE3C,CAEA,eAAQ,IAAI,iDAAiD,EACtD,CAAC,CACV,CAKQ,sBAAsBqD,EAA+B,CAC3D,IAAMc,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,uBACtBA,EAAU,MAAM,QAAU,OAC1BA,EAAU,MAAM,WAAa,SAE7B,IAAMC,EAAa,EA2BnB,GA1BkBf,EAAU,MAAM,EAAGe,CAAU,EAErC,QAAQ,CAACC,EAAUC,IAAU,CACrC,IAAMC,EAAQF,EAAS,OAASA,EAAS,MAAQ,UAC3CG,EAAYH,EAAS,WAAa,GACxC,GAAI,CAACG,EAAW,OAEhB,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMD,EACVC,EAAI,UAAY,aAChBA,EAAI,aAAa,oBAAqB,WAAW,EACjDA,EAAI,aAAa,oBAAqBF,CAAK,EAC3CE,EAAI,MAAQF,EACZE,EAAI,MAAM,MAAQ,OAClBA,EAAI,MAAM,OAAS,OACnBA,EAAI,MAAM,aAAe,MACzBA,EAAI,MAAM,OAAS,8CACnBA,EAAI,MAAM,OAAS,UACnBA,EAAI,MAAM,WAAaH,IAAU,EAAI,IAAM,OAC3CG,EAAI,MAAM,OAAS,OAAOL,EAAaE,CAAK,EAC5CG,EAAI,MAAM,SAAW,WAErBN,EAAU,YAAYM,CAAG,CAC3B,CAAC,EAGGpB,EAAU,OAASe,EAAY,CACjC,IAAMM,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,aACjBA,EAAK,aAAa,oBAAqB,WAAW,EAGlDA,EAAK,MAAM,WAAa,OACxBA,EAAK,MAAM,MAAQ,OACnBA,EAAK,MAAM,OAAS,OACpBA,EAAK,MAAM,aAAe,MAC1BA,EAAK,MAAM,WAAa,iCACxBA,EAAK,MAAM,MAAQ,iCACnBA,EAAK,MAAM,SAAW,OACtBA,EAAK,MAAM,QAAU,OACrBA,EAAK,MAAM,WAAa,SACxBA,EAAK,MAAM,eAAiB,SAC5BA,EAAK,MAAM,WAAa,OACxBA,EAAK,MAAM,WAAa,IACxBA,EAAK,YAAc,IAAIrB,EAAU,OAASe,CAAU,GACpDM,EAAK,MAAQ,iBACbP,EAAU,YAAYO,CAAI,CAC5B,CAEA,OAAOP,CACT,CAKQ,kBAAkBnE,EAAWK,EAAsC,CACzE,GAAI,CAACL,GAAQ,CAAC,MAAM,QAAQA,EAAK,WAAW,EAAG,OAAO,KAEtD,IAAM2E,EAAe,CACnB,sBACA,YACA,QACA,QACF,EACMC,EAAoB,CAAC,sBAAuB,YAAa,OAAO,EAChEC,EAAgBxE,GAAa,GAE7ByE,EAAuB,CAAC,EAGxBC,EAAY,KAAK,0BAA0B/E,CAAI,EACrD,GAAI+E,EAAU,OAAS,EAAG,CACxB,IAAMC,EAASD,EACZ,IAAKE,GAAY,CAChB,IAAM9E,EAAMuD,EAAW,OAAOuB,EAAG,QAAU,EAAE,CAAC,EACxCxC,EAAYiB,EAAWuB,EAAG,OAAS,EAAE,EACrCtC,EAAMe,EAAWuB,EAAG,KAAO,EAAE,EAC7BC,EACJD,EAAG,aAAeA,EAAG,OAASA,EAAG,QAAUA,EAAG,OAAS,KACnDE,EAAYzD,EAAewD,CAAQ,GAAK,KACxCE,EAAS,CAAC,EACdD,GAAa,gCAAgC,KAAKA,CAAS,GAEvDE,EAASF,GAAa,UACtBG,EACHF,GAAUG,EAASJ,EAAW,GAAI,GAAM,mBACrCK,EAAKC,EAAiBN,CAAS,GAAK,UAEpClC,EAAU,CAAC,CAACgC,EAAG,QACfnC,EAASmC,EAAG,OAAS,OAAOA,EAAG,KAAK,EAAE,YAAY,GAAM,GACxDjC,EAAW,CAAC,CAACiC,EAAG,OAChBlC,EAAW,CAACC,GAAYF,IAAU,SAEpCrD,EAAW,mBACXuD,EAAUvD,EAAW,YAChBsD,EAAUtD,EAAW,0BACrBwD,IAASxD,EAAW,0BAE7B,IAAMiG,EAAO,KAAK,WAAWjG,EAAU,EAAE,EACnCkG,EAAUlD,EACZiB,EAAW,IAAIuB,EAAG,MAAM,IAAIA,EAAG,KAAK,EAAE,EACtCvB,EAAW,IAAIuB,EAAG,MAAM,EAAE,EAE9B,MAAO,YAAYtC,CAAG,YAAYgD,CAAO,mBAAmBhD,CAAG,mMAAmMe,EAAW2B,CAAM,CAAC,eAAe3B,EAAW4B,CAAE,CAAC,UAAU5B,EAAW8B,CAAE,CAAC,yLAAyLE,CAAI,6GAA6GvF,CAAG,oBACxnB,CAAC,EACA,KAAK,EAAE,EACV2E,EAAW,KAAKE,CAAM,CACxB,CAEA,QAAW/E,KAAMD,EAAK,YAAa,CACjC,GAAI,CAACC,EAAI,SAET,IAAM2F,EAAY,OAAO3F,EAAG,MAAQ,EAAE,EAAE,YAAY,EAC9C4F,EAAY,OAChB5F,EAAG,WAAaA,EAAG,OAAO,MAAQ,EACpC,EAAE,YAAY,EAOd,GAJI0E,EAAa,SAASiB,CAAS,GAC/BhB,EAAkB,SAASiB,CAAS,GAGpChB,GAAiB,OAAO5E,EAAG,OAAO,IAAM,OAAO4E,CAAa,EAC9D,SAGF,GAAI,KAAK,iBAAmB,KAAK,gBAAgB,OAAS,EAAG,CAC3D,IAAMiB,EAAM7F,EAAG,SAAYA,EAAG,OAASA,EAAG,MAAM,GAChD,GAAI6F,GAAO,CAAC,KAAK,gBAAgB,SAAS,OAAOA,CAAG,CAAC,EACnD,QAEJ,CAIA,GAAI,CADa,KAAK,cAAc7F,CAAE,EACvB,SAGf,IAAM8F,EAAW,KAAK,iBAAiB9F,CAAE,EACrC8F,GACFjB,EAAW,KAAKiB,CAAQ,CAE5B,CAEA,GAAIjB,EAAW,SAAW,EAAG,OAAO,KAEpC,IAAMX,EAAY,SAAS,cAAc,KAAK,EAC9C,OAAAA,EAAU,UAAY,oBACtBA,EAAU,MAAM,QAAU,OAC1BA,EAAU,MAAM,SAAW,OAC3BA,EAAU,MAAM,IAAM,MACtBA,EAAU,MAAM,UAAY,MAC5BA,EAAU,UAAYW,EAAW,KAAK,EAAE,EAEjCX,CACT,CAKQ,cAAclE,EAAkB,CAGtC,OAFa,OAAOA,EAAG,MAAQ,EAAE,EAAE,YAAY,EAEjC,CACZ,IAAK,gBACH,MAAO,CAAC,EAAEA,EAAG,QAAQ,MAAQA,EAAG,MAClC,IAAK,YACH,MAAO,CAAC,EAAEA,EAAG,WAAW,OAASA,EAAG,OACtC,IAAK,SACH,OAAO,MAAM,QAAQA,EAAG,MAAM,GAAKA,EAAG,OAAO,OAAS,EACxD,IAAK,YACH,MAAO,CAAC,CAACA,EAAG,WAAW,MACzB,IAAK,aACH,MAAO,CAAC,EAAEA,EAAG,YAAY,eAAiBA,EAAG,YAAY,MAC3D,IAAK,eACH,MAAO,CAAC,EAAEA,EAAG,QAAUA,EAAG,aAC5B,IAAK,SACH,OAAOA,EAAG,QAAU,MAAQA,EAAG,SAAW,GAC5C,IAAK,OACH,MAAO,CAAC,EAAEA,EAAG,MAAQA,EAAG,WAC1B,IAAK,OACH,MAAO,CAAC,CAACA,EAAG,KACd,IAAK,eACL,IAAK,uBACH,MAAO,CAAC,EACNA,EAAG,cAAc,OAAO,OAAS,GAChC,MAAM,QAAQA,EAAG,YAAY,GAAKA,EAAG,aAAa,OAAS,GAEhE,QACE,MAAO,EACX,CACF,CAKQ,iBAAiBA,EAAiB,CAGxC,OAFa,OAAOA,EAAG,MAAQ,EAAE,EAAE,YAAY,EAEjC,CACZ,IAAK,gBACH,OAAO,KAAK,uBAAuBA,CAAE,EACvC,IAAK,SACH,OAAO,KAAK,kBAAkBA,CAAE,EAClC,IAAK,YACH,OAAO,KAAK,oBAAoBA,CAAE,EACpC,IAAK,YACH,OAAO,KAAK,oBAAoBA,CAAE,EACpC,IAAK,aACH,OAAO,KAAK,qBAAqBA,CAAE,EACrC,IAAK,eACH,OAAO,KAAK,sBAAsBA,CAAE,EACtC,IAAK,SACH,OAAO,KAAK,iBAAiBA,CAAE,EACjC,IAAK,OACH,OAAO,KAAK,eAAeA,CAAE,EAC/B,IAAK,OACH,OAAO,KAAK,eAAeA,CAAE,EAC/B,IAAK,eACL,IAAK,uBACH,OAAO,KAAK,yBAAyBA,CAAE,EACzC,QACE,MAAO,EACX,CACF,CAKQ,uBAAuBA,EAAiB,CAC9C,IAAM+F,EAAO/F,EAAG,QAAQ,MAAQA,EAAG,MAAQ,GAC3C,GAAI,CAAC+F,EAAM,MAAO,GAElB,IAAMd,EAAWjF,EAAG,QAAQ,OAASA,EAAG,OAAS,KAC3CgG,EAAIvE,EAAewD,CAAQ,GAAK,KAChCE,EAAS,CAAC,EAAEa,GAAK,gCAAgC,KAAKA,CAAC,GACvDZ,EAASY,GAAK,UACdX,EAAMF,GAAUG,EAASU,EAAG,GAAI,GAAM,mBACtCT,EAAKS,GAAK,UAEVC,EAAQ,KAAK,aAAajG,CAAE,EAClC,MAAO,+CAA+CyD,EAAWwC,CAAK,CAAC,wBAAwBxC,EAAWsC,CAAI,CAAC,sFAAsFtC,EAAW2B,CAAM,CAAC,eAAe3B,EAAW4B,CAAE,CAAC,UAAU5B,EAAW8B,CAAE,CAAC,uHAAuH9B,EAAWsC,CAAI,CAAC,KAAKtC,EAAWsC,CAAI,CAAC,SAC1a,CAKQ,kBAAkB/F,EAAiB,CACzC,IAAMkG,EAASlG,EAAG,QAAU,CAAC,EAC7B,MAAI,CAACkG,GAAUA,EAAO,SAAW,EAAU,GAEpCA,EACJ,MAAM,EAAG,CAAC,EACV,IAAKC,GAAe,CACnB,IAAMJ,EAAOI,EAAM,MAAQ,GACrBlB,EAAWkB,EAAM,OAASA,EAAM,QAAU,KAC1CH,EAAIvE,EAAewD,CAAQ,GAAK,KAChCE,EAAS,CAAC,EAAEa,GAAK,gCAAgC,KAAKA,CAAC,GACvDZ,EAASY,GAAK,UACdX,EAAMF,GAAUG,EAASU,EAAG,GAAI,GAAM,mBACtCT,EAAKS,GAAK,UAEhB,MAAO,0EAA0EvC,EAAWsC,CAAI,CAAC,sFAAsFtC,EAAW2B,CAAM,CAAC,eAAe3B,EAAW4B,CAAE,CAAC,UAAU5B,EAAW8B,CAAE,CAAC,+GAA+G9B,EAAWsC,CAAI,CAAC,SAC/X,CAAC,EACA,KAAK,EAAE,CACZ,CAKQ,oBAAoB/F,EAAiB,CAE3C,IAAM0B,GADY1B,EAAG,WAAaA,IACT,OAAS,GAClC,GAAI,CAAC0B,EAAO,MAAO,GAEnB,IAAM+D,EAAO,KAAK,WAAW,aAAc,EAAE,EAC7C,MAAO,6EAA6EhC,EAAW/B,CAAK,CAAC,+SAA+S+B,EAAW/B,CAAK,CAAC,KAAK+D,CAAI,SAAShC,EAAW/B,CAAK,CAAC,gBAC1c,CAKQ,oBAAoB1B,EAAiB,CAC3C,IAAM0B,EAAQ1B,EAAG,WAAW,OAAS,GACrC,GAAI,CAAC0B,EAAO,MAAO,GAEnB,IAAM+D,EAAO,KAAK,WAAW,YAAa,EAAE,EAC5C,MAAO,6EAA6EhC,EAAW/B,CAAK,CAAC,+SAA+S+B,EAAW/B,CAAK,CAAC,KAAK+D,CAAI,SAAShC,EAAW/B,CAAK,CAAC,gBAC1c,CAKQ,qBAAqB1B,EAAiB,CAC5C,IAAMoG,EAAOpG,EAAG,YAAcA,EACxB+F,EAAOK,GAAM,eAAiBA,GAAM,MAAQ,GAClD,GAAI,CAACL,EAAM,MAAO,GAElB,IAAMN,EAAO,KAAK,WAAW,OAAQ,EAAE,EACvC,MAAO,wEAAwEhC,EAAWsC,CAAI,CAAC,wPAAwPtC,EAAWsC,CAAI,CAAC,KAAKN,CAAI,yEAAyEhC,EAAWsC,CAAI,CAAC,gBAC3c,CAKQ,iBAAiB/F,EAAiB,CACxC,IAAMX,EAAQW,EAAG,OACjB,GAAIX,GAAS,MAAQA,IAAU,GAAI,MAAO,GAE1C,IAAMuG,EAAY,KAAK,aAAa5F,CAAE,EACtC,MAAO,+CAA+CyD,EAAWmC,CAAS,CAAC,wBAAwBnC,EAAW,OAAOpE,CAAK,CAAC,CAAC,0SAA0SoE,EAAWmC,CAAS,CAAC,iBAAiBnC,EAAW,OAAOpE,CAAK,CAAC,CAAC,gBACve,CAKQ,eAAeW,EAAiB,CACtC,IAAMX,EAAQW,EAAG,MAAQ,GACzB,GAAI,CAACX,EAAO,MAAO,GAEnB,IAAMuG,EAAY,KAAK,aAAa5F,CAAE,EAChCqG,EAAY,OAAOhH,CAAK,EAAE,MAAM,EAAG,EAAE,EAC3C,MAAO,+CAA+CoE,EAAWmC,CAAS,CAAC,wBAAwBnC,EAAWpE,CAAK,CAAC,+SAA+SoE,EAAWpE,CAAK,CAAC,8DAA8DoE,EAAWmC,CAAS,CAAC,iBAAiBnC,EAAW4C,CAAS,CAAC,gBAC/iB,CAKQ,eAAerG,EAAiB,CACtC,IAAMsG,EAAYtG,EAAG,MAAQA,EAAG,WAAa,KAC7C,GAAI,CAACsG,EAAW,MAAO,GAEvB,IAAMV,EAAY,KAAK,aAAa5F,CAAE,EAClCuG,EAAYD,EACZE,EAAYF,EAChB,GAAI,CACF,IAAMnF,EAAI,IAAI,KAAKmF,CAAS,EACvB,MAAMnF,EAAE,QAAQ,CAAC,IACpBoF,EAAYpF,EAAE,mBAAmB,QAAS,CACxC,MAAO,QACP,IAAK,SACP,CAAC,EACDqF,EAAYrF,EAAE,YAAY,EAAE,MAAM,GAAG,EAAE,CAAC,EAE5C,MAAY,CAEZ,CAEA,IAAMsE,EAAO,KAAK,WAAW,WAAY,EAAE,EAC3C,MAAO,+CAA+ChC,EAAWmC,CAAS,CAAC,wBAAwBnC,EAAW,OAAO+C,CAAS,CAAC,CAAC,0SAA0S/C,EAAWmC,CAAS,CAAC,WAAWH,CAAI,SAAShC,EAAW,OAAO8C,CAAS,CAAC,CAAC,gBACtf,CAKQ,sBAAsBvG,EAAiB,CAC7C,IAAMyG,EAASzG,EAAG,QAAUA,EAAG,aAAeA,EAAG,OAAS,KAC1D,GAAI,CAACyG,EAAQ,MAAO,GAEpB,IAAM/E,EAAQ+E,EAAO,OAASA,EAAO,MAAQ,GACvChE,EAASgE,EAAO,QAAU,GAC1B/D,EAAM+D,EAAO,KAAOA,EAAO,UAAY,GAC7C,GAAI,CAAC/E,GAAS,CAACe,EAAQ,MAAO,GAG9B,IAAIiE,EAAQ,UACRC,EAAuB,GACrBC,EAAiB,CAAC,OAAQ,SAAU,YAAa,UAAU,EAG7DC,EAAkB,KACtB,GAAI,KAAK,UAAY,KAAK,SAAS,OAAS,EAAG,CAC7C,IAAMC,EAAWL,EAAO,IAAOA,EAAO,KAAOA,EAAO,IAAI,GAClDM,EACJN,EAAO,KAAOA,EAAO,UAAaA,EAAO,KAAOA,EAAO,IAAI,IACvDO,EAAYP,EAAO,QAAWA,EAAO,KAAOA,EAAO,IAAI,OAmB7D,GAhBAI,EAAa,KAAK,SAAS,KAAM9G,GAAc,CAC7C,IAAMkH,EAAIlH,EAAK,SAAYA,EAAK,KAAOA,EAAK,IAAI,YAChD,GAAI,CAACkH,EAAG,MAAO,GAEf,GADIH,GAAY,OAAOG,EAAE,EAAE,IAAM,OAAOH,CAAQ,GAC5CC,GAAa,OAAOE,EAAE,GAAG,IAAM,OAAOF,CAAS,EAAG,MAAO,GAC7D,GAAIC,GAAa,OAAOC,EAAE,MAAM,IAAM,OAAOD,CAAS,EAAG,CAEvD,IAAME,EAAWD,EAAE,YAAY,eAAiBA,EAAE,YAAY,KACxDE,EACJV,EAAO,YAAY,eAAiBA,EAAO,YAAY,KACzD,MAAI,EAAAS,GAAYC,GAAcD,IAAaC,EAE7C,CACA,MAAO,EACT,CAAC,EAEGN,GAAc,MAAM,QAAQA,EAAW,WAAW,EAAG,CAGvD,IAAMO,EAAWP,EAAW,YAAY,KACrC1F,GACCA,GACAA,EAAE,OAAS,kBACTA,EAAE,KACFA,EAAE,IAAI,OACN,OAAOA,EAAE,IAAI,MAAM,MAAQ,EAAE,EAAE,YAAY,IAAM,UAChDA,EAAE,WACD,OAAOA,EAAE,WAAa,EAAE,EAAE,YAAY,IAAM,UAC7CA,EAAE,OACDA,EAAE,MAAM,MACR,OAAOA,EAAE,MAAM,MAAQ,EAAE,EAAE,YAAY,IAAM,SACrD,EAEA,GAAIiG,EAAU,CACZ,IAAMC,EACHD,EAAS,SACPA,EAAS,OAAO,OACfA,EAAS,OAAO,IAChBA,EAAS,OAAO,OACnBA,EAAS,KAAOA,EAAS,IAAI,OAC9B,KAIF,GAFIC,IAAYX,EAAQjF,EAAe4F,CAAU,GAAKX,GAElDU,EAAS,QAAUA,EAAS,OAAO,KAAM,CAC3C,IAAME,EAAe,OAAOF,EAAS,OAAO,IAAI,EAAE,YAAY,EAC1DR,EAAe,SAASU,CAAY,IACtCX,EAAuB,GAE3B,CACF,CACF,CACF,CAGID,IAAU,YACRD,EAAO,YACTC,EAAQjF,EAAegF,EAAO,WAAW,GAAKC,EACrCD,EAAO,QAChBC,EAAQjF,EAAegF,EAAO,KAAK,GAAKC,IAI5C,IAAMV,EAAIU,EACJvB,EAAS,CAAC,EAAEa,GAAK,gCAAgC,KAAKA,CAAC,GACvDZ,EAASY,GAAK,UACdX,EAAMF,GAAUG,EAASU,EAAG,GAAI,GAAM,mBACtCT,EAAKC,EAAiBQ,CAAC,GAAK,UAG9BlD,EAAW,OAAO2D,EAAO,OAAS,EAAE,EAAE,YAAY,IAAM,SACxDE,IAAsB7D,EAAW,IAGrC,IAAIG,EAAY,GAChB,GAAI,CAEF,IAAMsE,EAAkB,CAAC,EACvBd,EAAO,QACP,MAAM,QAAQA,EAAO,MAAM,GAC3BA,EAAO,OAAO,KACXe,GAAW,OAAOA,EAAE,MAAQ,EAAE,EAAE,YAAY,IAAM,SACrD,GAGEC,EAAY,EAEdZ,GACAA,EAAW,SACXA,EAAW,QAAQ,2BAEnBY,EAAYZ,EAAW,QAAQ,yBAAyB,WAAa,IAEnEU,GAAmBE,EAAY,KAAGxE,EAAY,GACpD,MAAY,CAAC,CAEb,IAAMzD,EAAWsD,EAAW,eAAiB,eACvC2C,EAAO,KAAK,WAAWjG,EAAU,GAAIwG,CAAC,EAEtCxC,EAAiBP,EACnB,sPAAsP,KAAK,WAAW,UAAW,EAAG,SAAS,CAAC,UAC9R,GAGAyE,EAAO,0EAA0EjE,EAAW/B,CAAK,CAAC,4FAA4F+B,EAAW2B,CAAM,CAAC,mCAAmC3B,EAAW4B,CAAE,CAAC,UAAU5B,EAAW8B,CAAE,CAAC,6DAA6D9B,EAAW/B,GAASe,EAAS,KAAOA,EAAS,GAAG,CAAC,IAAIC,EAAM,kBAAkBe,EAAWf,CAAG,CAAC,IAAM,EAAE,IAC9b,OAAAgF,GAAQ,gHAAgHjC,CAAI,GAAGjC,CAAc,UAC7IkE,GAAQ,4EAA4EjE,EAAW/B,CAAK,CAAC,UACjGe,IACFiF,GAAQ,2EAA2EjE,EAAW,OAAOhB,CAAM,CAAC,CAAC,WAE/GiF,GAAQ,UACDA,CACT,CAKQ,yBAAyB1H,EAAiB,CAChD,IAAM2H,EAAM3H,EAAG,cAAc,OAAS,CAAC,EACvC,MAAI,CAAC2H,GAAOA,EAAI,SAAW,EAAU,GAE9BA,EACJ,IAAK3C,GAAY,CAChB,IAAMtD,EAAQsD,EAAG,OAAS,IAAMA,EAAG,QAAU,KACvCS,EAAO,KAAK,WAAW,mBAAoB,EAAE,EAEnD,MAAO,wFAAwFhC,EAAW/B,CAAK,CAAC,gUAAgU+B,EAAW/B,CAAK,CAAC,KAAK+D,CAAI,SAAShC,EAAW/B,CAAK,CAAC,gBACte,CAAC,EACA,KAAK,EAAE,CACZ,CAKQ,wBAAwB3B,EAA+B,CAC7D,GAAI,CAACA,GAAQ,CAAC,MAAM,QAAQA,EAAK,WAAW,EAAG,OAAO,KAEtD,IAAM6H,EAAa7H,EAAK,YAAY,KACjCE,GAAWA,GAAG,OAAS,qBAC1B,EAEA,GAAI,CAAC2H,GAAc,CAACA,EAAW,OAAS,OAAOA,EAAW,KAAK,GAAK,EAClE,OAAO,KAGT,IAAMC,EAAQ,KAAK,IAAI,EAAG,KAAK,MAAM,OAAOD,EAAW,KAAK,GAAK,CAAC,CAAC,EAC7DE,EAAO,KAAK,IAAI,EAAG,KAAK,MAAM,OAAOF,EAAW,MAAQ,CAAC,CAAC,CAAC,EACjE,GAAIC,IAAU,EAAG,OAAO,KAExB,IAAME,EAAM,KAAK,MAAOD,EAAOD,EAAS,GAAG,EAErC3D,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,iCACtBA,EAAU,aAAa,oBAAqB,QAAQ,EAGpD,IAAM1B,EACHzC,EAAK,UAAYA,EAAK,QAAQ,OAASA,EAAK,QAAQ,OACrDA,EAAK,OACJA,EAAK,KAAOA,EAAK,IAAI,OACtB,GACF,OAAAmE,EAAU,aAAa,oBAAqB1B,CAAS,EAErD0B,EAAU,MAAM,UAAY,MAC5BA,EAAU,MAAQ,GAAG4D,CAAI,OAAOD,CAAK,yBAAyBE,CAAG,uCAEjE7D,EAAU,UAAY;AAAA;AAAA,mIAEyG4D,CAAI,IAAID,CAAK;AAAA;AAAA,0CAEtGE,CAAG;AAAA;AAAA,oJAEuGA,CAAG;AAAA;AAAA,MAI5I7D,CACT,CAKO,YAAYA,EAAwB9D,EAAwB,CACjE,IAAMC,EAAS,KAAK,mBAAmB,KAAK,SAAUD,CAAW,EAG3D4H,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,kBAClBA,EAAM,MAAM,QAAU,OACtBA,EAAM,MAAM,IAAM,OAClBA,EAAM,MAAM,UAAY,OACxBA,EAAM,MAAM,UAAY,SACxBA,EAAM,MAAM,QAAU,QACtBA,EAAM,MAAM,WAAa,UACzBA,EAAM,MAAM,KAAO,WACnBA,EAAM,MAAM,OAAS,OACrBA,EAAM,MAAM,UAAY,aAGxB,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOpBD,EAAM,YAAYC,CAAK,EAGvBD,EAAM,iBAAiB,QAAU3F,GAAM,CACrC,IAAM6F,EAAS7F,EAAE,OAGX8F,EAAOD,EAAO,QAAQ,qBAAqB,EACjD,GAAIC,EAAM,CACR,IAAM/I,EAAQ+I,EAAK,aAAa,mBAAmB,EAC7C9I,EAAQ8I,EAAK,aAAa,mBAAmB,EACnD,GAAI/I,GAASC,EAAO,CAClB,KAAK,gBAAgBgD,EAAGjD,EAAOC,CAAK,EACpC,MACF,CACF,CAGA,IAAMqE,EAAUwE,EAAO,QAAQ,sBAAsB,EACrD,GAAIxE,EAAS,CACXrB,EAAE,gBAAgB,EAClBA,EAAE,eAAe,EACjB,IAAM+F,EAAS1E,EAAQ,aAAa,cAAc,EAElD,GAAI,KAAK,UAAY0E,EAAQ,CAI3B,IAAMrI,EAAO,KAAK,SAAS,KACxBsI,GAAM,OAAOA,EAAE,EAAE,IAAM,OAAOD,CAAM,CACvC,GAAK,CAAE,GAAIA,CAAO,EAKZE,EAAO5E,EAAQ,sBAAsB,EAC3C,KAAK,SAAS,YAAa3D,EAAM,CAAE,EAAGuI,EAAK,KAAM,EAAGA,EAAK,MAAO,CAAC,CACnE,CACA,MACF,CACF,CAAC,EAGD,OAAW,CAAC5H,EAAKE,CAAK,IAAKP,EAAQ,CAEjC,GAAIK,IAAQ,gBAAkBE,EAAM,MAAM,SAAW,EAAG,SAExD,IAAMQ,EAAO,KAAK,WAAWR,EAAM,OAAQA,EAAM,MAAOR,CAAW,EACnE4H,EAAM,YAAY5G,CAAI,CACxB,CAEA8C,EAAU,YAAY8D,CAAK,CAC7B,CACF,ECpwCA,GAAI,CACFO,EAAS,SAAU,yBAAyB,CAC9C,MAAY,CAAC,CACb,GAAI,CACF,QAAQ,KAAO,QAAQ,IAAI,gCAAgC,CAC7D,MAAY,CAAC,CAGb,SAASC,IAAqB,CAC5B,OAAO,SAAUC,EAAWC,EAAwBC,EAAiB,CACnE,IAAMC,EACJH,IAASA,EAAK,MAAQA,EAAK,IAAMA,EAAK,MAAQA,EAAK,GAAK,aAE1D,GAAI,CACFI,EAAgBH,EAAWE,CAAQ,CACrC,MAAY,CAAC,CAEb,IAAIE,EAAQ,GAEZ,SAASC,EAAOC,EAAcC,EAA0B,CACtD,GAAI,CACF,IAAIC,EAASF,GAAWA,EAAQ,OAAU,CAAC,EACvCG,EAAUH,GAAWA,EAAQ,QAAW,CAAC,EACzCI,EAAaJ,GAAWA,EAAQ,WAAcG,EAClDT,EAAU,UAAY,GAGtBA,EAAU,MAAM,OAAS,IACzBA,EAAU,MAAM,QAAU,IAC1BA,EAAU,MAAM,OAAS,OACzBA,EAAU,MAAM,QAAU,OAC1BA,EAAU,MAAM,cAAgB,SAChCA,EAAU,MAAM,SAAW,SAE3B,IAAIW,EAASC,EAAcZ,EAAWC,EAAS,CAC7C,OAAQA,EACR,KAAMG,EACN,WAAY,UAAY,CACtBA,GAAS,GACTS,EAAc,CAChB,CACF,CAAC,EAGD,GAAI,CACF,GACEN,GACAI,GACA,OAAOA,EAAO,oBAAuB,WAErC,GAAI,CACFA,EAAO,mBAAmBJ,CAAe,CAC3C,MAAY,CAAC,CAEjB,MAAY,CAAC,CAEb,GAAI,CAACI,EAAQ,CACX,IAAIG,EAAS,SAAS,cAAc,KAAK,EACzCA,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,eAAiB,gBAC9BA,EAAO,MAAM,WAAa,SAC1BA,EAAO,MAAM,aAAe,MAE5B,IAAIC,EAAQ,SAAS,cAAc,KAAK,EACxCA,EAAM,MAAM,WAAa,MACzBA,EAAM,MAAM,QAAU,MACtBA,EAAM,YAAcb,EAEpB,IAAIc,EAAQ,SAAS,cAAc,KAAK,EACpCC,EAAUC,EAAqB,IAAM,CACvCd,GAAS,GACTS,EAAc,CAChB,CAAC,EAEDG,EAAM,YAAYC,CAAO,EACzBH,EAAO,YAAYC,CAAK,EACxBD,EAAO,YAAYE,CAAK,EACxBhB,EAAU,YAAYc,CAAM,CAC9B,CAGA,IAAIK,EAAmB,KACvB,GAAI,CACF,IAAMC,EAAUd,GAAWA,EAAQ,QAC7Be,EACJD,GACAA,EAAQ,uBACRA,EAAQ,sBAAsB,MAEhC,GAAIC,GAAyBA,EAAsB,OAAS,EAAG,CAE7D,IAAMC,EAAWD,EAAsB,CAAC,EAQxC,GAPAF,EAAcT,EAAU,KACrBa,GACC,OAAOA,EAAE,EAAE,IAAM,OAAOD,EAAS,EAAE,GACnC,OAAOC,EAAE,IAAI,IAAM,OAAOD,EAAS,IAAI,CAC3C,EAGIH,EAAa,CACf,IAAMK,EAAW,OAAOL,EAAY,UAAY,EAAE,EAAE,YAAY,EAC5DK,IAAa,iBAAmBA,IAAa,cAC/C3B,EAASI,EAAS,0CAA2C,CAC3D,SAAAuB,EACA,UAAWL,EAAY,IACzB,CAAC,EACDA,EAAc,KAElB,CACF,CACF,OAASM,EAAG,CACV5B,EAASI,EAAS,8CAA+C,CAC/D,QAAS,OAAQwB,GAAW,SAAWA,CAAC,CAC1C,CAAC,CACH,CAGKN,IACHA,EAAcT,EAAU,KACrB,GACC,OAAO,EAAE,UAAY,EAAE,EAAE,YAAY,IAAM,iBAC3C,OAAO,EAAE,MAAQ,EAAE,EAAE,YAAY,IAAM,QAC3C,GAIGS,IACHA,EAAcT,EAAU,KACrB,GACC,OAAO,EAAE,UAAY,EAAE,EAAE,YAAY,IAAM,eAC/C,GAIF,IAAIgB,EAAU,SAAS,cAAc,KAAK,EAC1CA,EAAQ,MAAM,KAAO,WACrBA,EAAQ,MAAM,SAAW,SACzBA,EAAQ,MAAM,SAAW,WACzBA,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAM,cAAgB,SAG9B,IAAMC,EAAgBC,GAAmB,CACvC,GAAIjB,GAAUA,EAAO,QAAS,CAC5B,IAAMkB,EAAU,OAAOlB,EAAO,QAAQ,OAAS,EAAE,EAAE,KAAK,EAEpDmB,EAAYD,EAAU,GAAGA,CAAO,IAAID,CAAM,GAAKA,EACnDjB,EAAO,QAAQ,MAAQmB,EACvBnB,EAAO,QAAQ,cAAc,IAAI,MAAM,QAAS,CAAE,QAAS,EAAK,CAAC,CAAC,CACpE,CACF,EAEMoB,EAAe,CAACC,EAAgBC,EAAWC,IAAc,CAC7D,GAAIF,IAAW,aAAeE,EAAM,CAEvB,SAAS,iBAAiB,qBAAqB,EACvD,QAAST,GAAMA,EAAE,OAAO,CAAC,EAE5B,IAAMU,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,qBACjBA,EAAK,MAAM,SAAW,QAEtB,IAAMC,EAAI,KAAK,IAAIF,EAAK,EAAG,OAAO,WAAa,GAAG,EAC5CG,GAAI,KAAK,IAAIH,EAAK,EAAG,OAAO,YAAc,GAAG,EAEnDC,EAAK,MAAM,KAAOC,EAAI,KACtBD,EAAK,MAAM,IAAME,GAAI,KACrBF,EAAK,MAAM,WAAa,gCACxBA,EAAK,MAAM,MAAQ,gCACnBA,EAAK,MAAM,OAAS,sCACpBA,EAAK,MAAM,aAAe,MAC1BA,EAAK,MAAM,OAAS,OACpBA,EAAK,MAAM,UAAY,6BACvBA,EAAK,MAAM,SAAW,QACtBA,EAAK,MAAM,QAAU,QAErB,IAAMG,EAAU,CACdC,EACAC,EACAC,EACAC,EAAQ,KACL,CACH,GAAIA,EAAO,CACT,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,MAAM,OAAS,MACnBA,EAAI,MAAM,WAAa,yCACvBA,EAAI,MAAM,OAAS,QACnBR,EAAK,YAAYQ,CAAG,EACpB,MACF,CACA,IAAMC,EAAK,SAAS,cAAc,KAAK,EACvCA,EAAG,MAAM,QAAU,UACnBA,EAAG,MAAM,OAAS,UAClBA,EAAG,MAAM,QAAU,OACnBA,EAAG,MAAM,WAAa,SACtBA,EAAG,MAAM,IAAM,MACfA,EAAG,MAAM,SAAW,OAGpB,IAAMC,EAAM,SAAS,cAAc,MAAM,EACrCL,IACFK,EAAI,UAAY,mBAAqBL,EAKjCA,IAAc,gBAAiBK,EAAI,YAAc,SAC5CL,IAAc,QAASK,EAAI,YAAc,YACzCL,IAAc,eAAcK,EAAI,YAAc,WAGzD,IAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,YAAcP,EAEnBK,EAAG,YAAYC,CAAG,EAClBD,EAAG,YAAYE,CAAI,EAEnBF,EAAG,iBAAiB,QAAUnB,GAAM,CAClCA,EAAE,gBAAgB,EAClBU,EAAK,OAAO,EACZM,EAAQ,CACV,CAAC,EAEDG,EAAG,iBACD,aACA,IACGA,EAAG,MAAM,WACR,wCACN,EACAA,EAAG,iBACD,aACA,IAAOA,EAAG,MAAM,WAAa,aAC/B,EACAT,EAAK,YAAYS,CAAE,CACrB,EAEAN,EAAQ,aAAc,gBAAiB,IAAM,CAC3C,IAAMS,EACJd,EAAK,SAAS,KACdA,EAAK,KACJA,EAAK,KAAOA,EAAK,IAAI,aAAeA,EAAK,IAAI,YAAY,IACxDc,GAAQ,OAAe,mBACxB,OAAe,kBAAkB,YAAY,CAC5C,QAAS,UACT,IAAKA,CACP,CAAC,CAEL,CAAC,EAEDT,EAAQ,GAAI,GAAI,IAAM,CAAC,EAAG,EAAI,EAE9BA,EAAQ,oBAAqB,aAAc,IAAM,CAC/C,GAAK,OAAe,kBAAmB,CAErC,IAAIU,EAAiB,CAAC,EACtB,GAAI7B,EAAa,CACf,IAAM8B,EACJ9B,EAAY,SACXA,EAAY,eACXA,EAAY,cAAc,QACxB+B,EACJ/B,EAAY,eACZA,EAAY,cAAc,WAGtBgC,EAAoB,CACxBC,EACAC,IACG,CACH,GAAI,CACF,IAAMC,EAAY,IAAI,KAAKF,CAAK,EAC1BG,EAAU,IAAI,KAClBD,EAAU,QAAQ,EAChB,OAAOD,CAAQ,EAAI,GAAK,GAAK,GAAK,GACtC,EACMG,EAAcC,IAClBA,GAAE,mBAAmB,QAAS,CAC5B,MAAO,QACP,IAAK,SACP,CAAC,EACH,MAAO,GAAGD,EAAWF,CAAS,CAAC,WAAME,EAAWD,CAAO,CAAC,EAC1D,MAAY,CACV,MAAO,EACT,CACF,EAEIN,GAAQ,MAAM,QAAQA,CAAI,EAC5BD,EAAUC,EAAK,IAAKS,IAAY,CAC9B,GAAIA,EAAE,GACN,KAAMA,EAAE,KACR,MAAOA,EAAE,MACT,YAAaA,EAAE,WACjB,EAAE,EACOR,GAAS,MAAM,QAAQA,CAAK,IACrCF,EAAUE,EAAM,IAAKS,IAAa,CAChC,GAAIA,EAAG,GACP,KAAMA,EAAG,MACT,MAAOA,EAAG,MACV,YAAaR,EAAkBQ,EAAG,UAAWA,EAAG,QAAQ,CAC1D,EAAE,EAEN,CAEC,OAAe,kBAAkB,YAAY,CAC5C,QAAS,WACT,QAAS1D,EACT,OAAQgC,EAAK,GACb,UAAW3B,GAAWA,EAAQ,GAC9B,QAASa,EAAcA,EAAY,GAAK,KACxC,QAAS6B,EACT,aAAc,EAChB,CAAC,CACH,CACF,CAAC,EAED,SAAS,KAAK,YAAYb,CAAI,EAG9B,IAAMyB,EAAe,IAAM,CACzBzB,EAAK,OAAO,EACZ,SAAS,oBAAoB,QAASyB,CAAY,CACpD,EAEA,WACE,IAAM,SAAS,iBAAiB,QAASA,CAAY,EACrD,CACF,CACF,MAAW5B,IAAW,sBAAwBC,GAAQC,GAEpD,oCACG,KAAK,CAAC,CAAE,YAAA2B,CAAY,IAAM,CACZ,IAAIA,EAAY,CAC3B,cAAe3B,EAAK,cACpB,cAAe,IAAM,CACnB,GAAI,CACF,IAAM4B,EAAa,OAAe,kBAEhCA,GACA,OAAOA,EAAU,aAAgB,YAEjCA,EAAU,YAAY,CACpB,QAAS,sBACT,QAAS7D,EACT,UAAWK,GAAWA,EAAQ,GAC9B,cAAe2B,EAAK,cACpB,cAAeA,EAAK,cACpB,gBAAiBA,EAAK,eACxB,CAAC,CAEL,OAASR,EAAG,CACV,QAAQ,MACN,gDACAA,CACF,CACF,CACF,EACA,cAAe,IAAM,CACnB,GAAI,CACF,IAAMqC,EAAa,OAAe,kBAEhCA,GACA,OAAOA,EAAU,aAAgB,YAEjCA,EAAU,YAAY,CACpB,QAAS,sBACT,QAAS7D,EACT,UAAWK,GAAWA,EAAQ,GAC9B,cAAe2B,EAAK,cACpB,cAAeA,EAAK,cACpB,gBAAiBA,EAAK,eACxB,CAAC,CAEL,OAASR,EAAG,CACV,QAAQ,MACN,iDACAA,CACF,CACF,CACF,CACF,CAAC,EACI,KAAK,CACZ,CAAC,EACA,MAAOA,GAAM,CACZ,QAAQ,MAAM,6BAA8BA,CAAC,CAC/C,CAAC,CAEP,EAGA,GAAIN,EACF,GAAI,CAEF,IAAM4C,EAAkBtD,EAAO,IAAKc,GAAW,OAAOA,EAAE,EAAE,CAAC,EACtC,IAAIyC,EACvBtD,EACAF,EACAuD,EACApC,EACAI,CACF,EACa,YAAYL,EAASP,CAAW,CAC/C,OAASM,EAAG,CACV5B,EAASI,EAAS,sCAAuC,CACvD,QAAS,OAAQwB,GAAW,SAAWA,CAAC,CAC1C,CAAC,EAEDwC,EAAevC,EAASlB,CAAK,CAC/B,MAGAX,EAASI,EAAS,iCAAkC,CAClD,YAAaS,EAAU,MACzB,CAAC,EACDuD,EAAevC,EAASlB,CAAK,EAG/BR,EAAU,YAAY0B,CAAO,EAE7B,GAAI,CACEf,GAAU,OAAOA,EAAO,UAAa,YACvCA,EAAO,SAASH,EAAM,MAAM,EAC1BG,GAAU,OAAOA,EAAO,cAAiB,YAC3CA,EAAO,aACLH,EAAM,OAASJ,EACfI,EAAM,QAAUJ,EAAQ,YAAc,YACxC,EAGEO,GAAUA,EAAO,UACf,OAAOA,EAAO,eAAkB,YAClCA,EAAO,cAAcH,EAAO,CAAE,OAAQC,CAAO,CAAC,EAE5C,OAAOE,EAAO,gBAAmB,YACnCA,EAAO,eAAe,SAAUuD,EAAiBC,EAAgB,CAC/DC,EACEpE,EACA,oBACAkE,EACA,OACF,EAEIvD,GAAU,OAAOA,EAAO,UAAa,YACvCA,EAAO,SAASuD,EAAW,IAAI,EAEjCrE,EAASI,EAAS,cAAe,CAC/B,OAAQkE,EACR,QAASD,EAAW,KACpB,SAAU1D,EAAM,MAClB,CAAC,CACH,CAAC,EAGP,MAAY,CAAC,CACf,OAAS6D,EAAU,CACjBxE,EAASI,EAAS,gCAAiC,CACjD,QAAS,OAAOoE,GAAOA,EAAI,OAAO,EAClC,MAAOA,GAAOA,EAAI,KACpB,CAAC,EACDC,EACEtE,EACAE,EACA,+BAAiC,OAAOmE,GAAOA,EAAI,OAAO,CAC5D,CACF,CACF,CAGA,SAASJ,EAAevC,EAAsBlB,EAAc,CAC1D,QAAS+D,EAAI,EAAGA,EAAI/D,EAAM,OAAQ+D,IAAK,CACrC,IAAIZ,EAAKnD,EAAM+D,CAAC,EACZC,EAAO,SAAS,cAAc,KAAK,EACvC,GAAI,CACFA,EAAK,aAAa,kBAAmB,OAAOb,GAAMA,EAAG,EAAE,CAAC,CAC1D,MAAY,CAAC,CACba,EAAK,MAAM,QAAU,MACrBA,EAAK,MAAM,OAAS,8CACpBA,EAAK,MAAM,aAAe,MAC1BA,EAAK,MAAM,aAAe,MAC1B,IAAIC,EACDd,GAAMA,EAAG,UAAYA,EAAG,QAAQ,OAASA,EAAG,QAAQ,OACpDA,GAAMA,EAAG,OACTA,GAAMA,EAAG,KAAOA,EAAG,IAAI,OACxB,KAAOY,EAAI,GACbC,EAAK,UACH,gCACAE,EAAWD,CAAS,EACpB,UACCd,GAAMA,EAAG,GACN,yEACAe,EAAW,OAAOf,EAAG,EAAE,CAAC,EACxB,SACA,IACNjC,EAAQ,YAAY8C,CAAI,CAC1B,CACF,CAEA,SAASG,EAAUC,EAAkB,CACnC,IAAIC,EAAMD,GAAMA,EAAG,KAAOA,EAAG,KAAOA,EACpC,GAAI,CACF,GAAIC,GAAOA,EAAI,UAAY,SAAU,CACnC,GAAIA,EAAI,SAAW5E,GAAW,OAAO4E,EAAI,OAAO,IAAM,OAAO5E,CAAO,EAClE,OACE4E,EAAI,MACNP,EAActE,EAAWE,EAAU,OAAO2E,EAAI,KAAK,CAAC,EAEpDxE,EACEwE,EAAI,SAAYA,EAAI,SAAWA,EAAI,QAAQ,MAASA,EAAI,QACxDA,EAAI,eACN,CAEJ,CACF,MAAY,CAAC,CACf,CAEA,SAAShE,GAAgB,CACvB,GAAI,CAEC,OAAe,mBAChB,OAAQ,OAAe,kBAAkB,aAAgB,YAExD,OAAe,kBAAkB,YAAY,CAC5C,QAAS,gBACT,MAAOT,EACP,QAASH,CACX,CAAC,CAEL,MAAY,CAAC,CACf,CACA,GAAI,CACD,OAAe,kBAAkB,UAAU0E,CAAS,CACvD,MAAY,CACV,OAAO,iBAAiB,UAAWA,CAAS,CAC9C,CACA9D,EAAc,CAChB,CACF,CACA,GAAI,CACF,OAAO,iBAAmBf,GAAmB,CAC/C,MAAY,CAAC",
  "names": ["AddItemMenu_exports", "__export", "AddItemMenu", "init_AddItemMenu", "__esmMin", "options", "rect", "menuRect", "margin", "vw", "vh", "top", "left", "mkItem", "iconName", "label", "description", "onClick", "row", "iconSpan", "textContainer", "titleEl", "descEl", "escapeHtml", "s", "normalizeColor", "color", "n", "b", "u", "addAlpha", "alpha", "S", "v", "C", "getContrastColor", "logDebug", "viewKey", "message", "data", "setLoadingState", "container", "titleText", "setErrorState", "error", "createLoadMoreButton", "onClick", "btn", "initFilterBar", "container", "viewKey", "options", "applyFilterVisibility", "root", "selector", "matchedIds", "displayStyle", "elements", "i", "el", "id", "BoardCardRenderer", "fields", "allItems", "visibleFieldIds", "onFilter", "onAction", "field", "value", "safeValue", "safeField", "iconName", "size", "fill", "f", "items", "estimateField", "sum", "item", "fv", "v", "num", "n", "columnField", "groups", "dataType", "options", "it", "opt", "key", "groupKey", "group", "option", "start", "duration", "startDate", "endDate", "formatDate", "d", "card", "header", "headerRow", "colorDot", "normalizedColor", "normalizeColor", "title", "count", "estSum", "estimatePill", "description", "descRow", "itemsContainer", "columnColor", "itemEl", "footer", "addLabel", "e", "el", "content", "titleText", "number", "url", "isPR", "typename", "state", "isClosed", "isMerged", "isDraft", "isBlocked", "deps", "iconColor", "assignees", "mainContent", "iconRow", "baseIcon", "blockedOverlay", "escapeHtml", "menuBtn", "titleRow", "fieldsRow", "subIssuesProgress", "avatarsContainer", "found", "assigneesFv", "prFv", "container", "maxAvatars", "assignee", "index", "login", "avatarUrl", "img", "more", "excludeTypes", "excludeFieldNames", "columnFieldId", "valuePills", "linkedPRs", "prHtml", "pr", "rawColor", "normColor", "hasHex", "border", "bg", "addAlpha", "fg", "getContrastColor", "icon", "tooltip", "fieldType", "fieldName", "fid", "rendered", "name", "p", "fName", "labels", "label", "repo", "truncated", "dateValue", "formatted", "filterVal", "parent", "color", "parentIsDoneByStatus", "completedNames", "parentItem", "parentId", "parentUrl", "parentNum", "c", "itemRepo", "parentRepo", "statusFv", "foundColor", "optNameLower", "hasBlockedLabel", "l", "blockedBy", "html", "prs", "progressFv", "total", "done", "pct", "board", "style", "target", "pill", "itemId", "i", "rect", "logDebug", "createBoardFetcher", "view", "container", "viewKey", "viewName", "setLoadingState", "first", "render", "payload", "effectiveFilter", "items", "fields", "allFields", "barApi", "initFilterBar", "requestFields", "header", "title", "right", "loadBtn", "createLoadMoreButton", "columnField", "details", "verticalGroupByFields", "vgbField", "f", "dataType", "e", "content", "handleFilter", "filter", "current", "newFilter", "handleAction", "action", "item", "args", "menu", "x", "y", "addItem", "text", "iconClass", "onClick", "isSep", "sep", "el", "ico", "span", "url", "options", "opts", "iters", "getIterationRange", "start", "duration", "startDate", "endDate", "formatDate", "d", "o", "it", "closeHandler", "AddItemMenu", "messaging", "visibleFieldIds", "BoardCardRenderer", "renderFlatList", "matchedIds", "rawFilter", "applyFilterVisibility", "err", "setErrorState", "i", "card", "titleText", "escapeHtml", "onMessage", "ev", "msg"]
}
