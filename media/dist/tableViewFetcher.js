"use strict";(()=>{function C(a){return a?String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function R(a){if(!a)return null;let t=String(a).trim();if(/^#?[0-9a-f]{3}$/i.test(t)||/^#?[0-9a-f]{6}$/i.test(t)||/^#?[0-9a-f]{8}$/i.test(t)){let i=t[0]==="#"?t.slice(1):t;return"#"+(i.length===8?i.substring(0,6):i)}let e={GRAY:"#848d97",RED:"#f85149",ORANGE:"#db6d28",YELLOW:"#d29922",GREEN:"#3fb950",BLUE:"#2f81f7",PURPLE:"#a371f7",PINK:"#db61a2",BLACK:"#000000",WHITE:"#ffffff"},n=t.toUpperCase();return e[n]||null}function $(a,t){if(!a)return null;let e=a.replace("#",""),n=i=>parseInt(i,16);if(e.length===3){let i=n(e[0]+e[0]),s=n(e[1]+e[1]),o=n(e[2]+e[2]);return"rgba("+i+","+s+","+o+","+t+")"}if(e.length===6||e.length===8){let i=e.length===8?e.substring(0,6):e,s=n(e.substring(0,2)),o=n(i.substring(2,4)),r=n(i.substring(4,6));return"rgba("+s+","+o+","+r+","+t+")"}return null}function K(a){if(!a)return"#333333";let t=a.replace("#",""),e=o=>parseInt(o,16),n,i,s;if(t.length===3)n=e(t[0]+t[0]),i=e(t[1]+t[1]),s=e(t[2]+t[2]);else if(t.length===6||t.length===8){let o=t.length===8?t.substring(0,6):t;n=e(o.substring(0,2)),i=e(o.substring(2,4)),s=e(o.substring(4,6))}else return"#333333";return .2126*(n/255)+.7152*(i/255)+.0722*(s/255)>.6?"#111111":"#ffffff"}function ie(a,t,e,n){var i,s,o,r,l,p,c,y,g,S,x,E,_,k,f;if(!a)return"";try{switch(a.type){case"title":{let d=a&&a.title&&(a.title.raw&&a.title.raw.text||a.title.content&&(a.title.content.title||a.title.content.name)||typeof a.title=="string"&&a.title)||a&&a.content&&(a.content.title||a.content.name)||a&&a.raw&&a.raw.text||"",w=a&&a.title&&a.title.content&&a.title.content.number||a&&a.raw&&a.raw.itemContent&&a.raw.itemContent.number||e&&e.content&&e.content.number||"",v=a&&a.title&&a.title.content&&a.title.content.url||a&&a.raw&&a.raw.itemContent&&a.raw.itemContent.url||e&&e.content&&e.content.url||"",F=null;if(e&&Array.isArray(e.fieldValues)){let u=e.fieldValues.find(h=>h&&h.type==="single_select"&&(h.raw&&h.raw.field&&String(h.raw.field.name||"").toLowerCase()==="status"||h.fieldName&&String(h.fieldName||"").toLowerCase()==="status"||h.field&&h.field.name&&String(h.field.name||"").toLowerCase()==="status"));u&&(F=u.option&&(u.option.color||u.option.id||u.option.name)||u.raw&&u.raw.color||null)}let b=R(F)||null,T=b&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(b)?b:"#666666",H=C(String(d||"")),N=w?C(String(w)):"";return'<a href="'+C(String(v||""))+'" target="_blank" rel="noopener noreferrer" style="text-decoration:none;color:inherit;display:inline-flex;align-items:center;gap:8px;width:100%;"><svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:'+C(T)+'"><circle cx="8" cy="8" r="6" fill="currentColor" /></svg><span style="flex:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block">'+H+"</span>"+(N?'<span style="flex:none;margin-left:6px;color:var(--vscode-descriptionForeground);white-space:nowrap">#'+N+"</span>":"")+"</a>"}case"text":return"<div>"+C((i=a.text)!=null?i:"")+"</div>";case"number":{let d=a.number!==void 0&&a.number!==null?String(a.number):"";return'<div style="text-align:right;font-variant-numeric:tabular-nums">'+C(d)+"</div>"}case"date":{let d=(r=(o=(s=a.date)!=null?s:a.startDate)!=null?o:a.dueOn)!=null?r:null;if(!d)return"<div></div>";try{let w=new Date(d);if(isNaN(w.getTime()))return"<div>"+C(String(d))+"</div>";let v=w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return"<div>"+C(v)+"</div>"}catch{return"<div>"+C(String(d))+"</div>"}}case"single_select":{let d=C((p=(l=a.option)==null?void 0:l.name)!=null?p:""),w=null;if(t&&Array.isArray(t.options)){let N=t.options.find(u=>u.id&&a.option&&a.option.id&&u.id===a.option.id||u.name&&a.option&&a.option.name&&u.name===a.option.name);N&&(w=(y=(c=N.color)!=null?c:N.id)!=null?y:null)}let v=R(w)||null,F=!!(v&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(v)),b=v||"#999999",T=F&&$(v,.12)||"rgba(0,0,0,0.06)",H=v||"#333333";return'<span style="display:block;width:100%;box-sizing:border-box"><div style="display:inline-flex;align-items:center;padding:2px 8px;border:1px solid '+C(b)+";border-radius:999px;color:"+C(H)+";background:"+C(T)+';font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;width:100%"><span style="flex:1 1 auto;min-width:0;max-width:100%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">'+d+"</span></div></span>"}case"labels":return"<div>"+(a.labels||[]).map(d=>{let w=C(d.name||""),v=e&&(e.content&&e.content.repository&&e.content.repository.nameWithOwner||e.repository&&e.repository.nameWithOwner)||a.raw&&a.raw.itemContent&&a.raw.itemContent.repository&&a.raw.itemContent.repository.nameWithOwner||null,F=d.color||d.colour||null;if(t&&t.repoOptions&&v&&t.repoOptions[v]){let h=t.repoOptions[v].find(I=>I&&I.name===d.name);h&&(F=h.color||h.colour||F)}let b=R(F)||null,T=!!(b&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(b)),H=b||"#999999",N=T&&$(b,.12)||"rgba(0,0,0,0.06)",u=b||"#333333";return'<span style="display:inline-block;padding:2px 8px;margin-right:6px;border-radius:999px;border:1px solid '+C(H)+";background:"+C(N)+";color:"+C(u)+';font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">'+w+"</span>"}).join("")+"</div>";case"repository":{let d=C((S=(g=a.repository)==null?void 0:g.nameWithOwner)!=null?S:"");return'<a href="'+C(((x=a.repository)==null?void 0:x.url)||((E=a.repository)==null?void 0:E.html_url)||"")+'" target="_blank" rel="noopener noreferrer" style="text-decoration:none;color:inherit;display:inline-flex;align-items:center;gap:8px"><svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:var(--vscode-icon-foreground)"><path fill="currentColor" d="M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z"/></svg><span>'+d+"</span></a>"}case"pull_request":{let d=a.pullRequests||[];return function(){var w=a.pullRequests||[];if(!w||w.length===0)return"";for(var v='<div style="display:flex;flex-wrap:wrap;gap:6px;align-items:center">',F=0;F<w.length;F++){var b=w[F],T=C(String(b&&b.number||"")),H=C(b&&b.title||""),N=C(b&&b.url||""),u=b&&(b.state_color||b.color||b.colour||b.state)||null,h=R(u)||null,I=!!(h&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(h)),G=h||"#999999",M=I&&$(h,.12)||"rgba(0,0,0,0.06)",L=K(h)||"#333333";v+='<a href="'+N+'" target="_blank" rel="noopener noreferrer" style="text-decoration:none;color:inherit"><span title="'+H+'" style="display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid '+C(G)+";background:"+C(M)+";color:"+C(L)+';font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;max-width:160px"><svg width="12" height="12" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:'+C(h||"#666")+'"><circle cx="8" cy="8" r="6" fill="currentColor" /></svg><span style="flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">#'+T+"</span></span></a>"}return v+="</div>",v}()}case"issue":return(a.issues||[]).map(d=>'<a href="'+C(d.url||"")+'" target="_blank" rel="noopener noreferrer">#'+C(String(d.number||""))+" "+C(d.title||"")+"</a>").join("<br/>");case"assignees":{let d=a.assignees||[];if(d.length===0)return"<div></div>";let w=d.slice(0,3).map((b,T)=>{let H=C(b.avatarUrl||b.avatar||""),N=T===0?"0px":T===1?"-8px":"-14px",u=Math.max(1,3-T);if(H)return'<span title="'+C(b.login||b.name||"")+'" style="display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url('+H+");border:2px solid var(--vscode-editor-background);margin-left:"+N+";vertical-align:middle;position:relative;z-index:"+u+'"></span>';let h=C((b.name||b.login||"").split(" ").map(I=>I[0]||"").join("").toUpperCase().slice(0,2));return'<span title="'+C(b.login||b.name||"")+'" style="display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;background:#777;color:#fff;font-size:11px;border:2px solid var(--vscode-editor-background);margin-left:'+N+";vertical-align:middle;position:relative;z-index:"+u+'">'+h+"</span>"}).join(""),v=d.map(b=>b.login||b.name||""),F="";return v.length===1?F=v[0]:v.length===2?F=v[0]+" and "+v[1]:F=v.slice(0,-1).join(", ")+" and "+v.slice(-1)[0],'<div style="display:flex;align-items:center;gap:8px"><span style="display:flex;align-items:center">'+('<span style="display:inline-block;vertical-align:middle;height:20px;line-height:20px;margin-right:8px;">'+w+"</span>")+'</span><span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">'+C(F)+"</span></div>"}case"requested_reviewers":return"<div>"+C((a.reviewers||[]).map(d=>d.login||d.name||d.kind||"").join(", "))+"</div>";case"iteration":{let d=C((_=a.title)!=null?_:""),w=R("GRAY")||null,v=!!(w&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(w)),F=w||"#999999",b=v&&$(w,.12)||"rgba(0,0,0,0.06)",T=w||"#333333";return'<div style="display:inline-block;padding:2px 8px;border:1px solid '+C(F)+";border-radius:999px;color:"+C(T)+";background:"+C(b)+';font-size:12px;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">'+d+"</div>"}case"parent_issue":{let d=a&&(a.parent||a.parentIssue||a.issue||a.option||a.item||a.value)||a&&a.raw&&(a.raw.parent||a.raw.itemContent||a.raw.item)||null,w=d&&(d.number||d.id||d.raw&&d.raw.number)&&(d.number||d.raw&&d.raw.number)||"",v=d&&(d.title||d.name||d.raw&&d.raw.title)&&(d.title||d.name||d.raw&&d.raw.title)||"",F=d&&(d.url||d.html_url||d.raw&&d.raw.url)&&(d.url||d.html_url||d.raw&&d.raw.url)||"",b=C(String(v||"")),T=w?C(String(w)):"",H=C(String(F||"")),N=null;try{var m=Array.isArray(n)?n:n||[];if(Array.isArray(m)&&m.length>0&&(w||d)){let W=d&&d.repository&&(d.repository.nameWithOwner||d.repository.name)||d&&d.content&&d.content.repository&&d.content.repository.nameWithOwner||null,B=[];w&&B.push(String(w)),d&&(d.id||d.raw&&d.raw.id)&&B.push(String(d.id||d.raw&&d.raw.id)),d&&(d.url||d.raw&&d.raw.url)&&B.push(String(d.url||d.raw&&d.raw.url)),d&&(d.title||d.name)&&B.push(String(d.title||d.name));let D=m.find(P=>{let A=P&&(P.content||P.raw&&P.raw.itemContent)||null;if(!A)return!1;let z=[];if(A.number&&z.push(String(A.number)),A.id&&z.push(String(A.id)),A.url&&z.push(String(A.url)),A.title&&z.push(String(A.title)),A.name&&z.push(String(A.name)),A.raw&&A.raw.number&&z.push(String(A.raw.number)),A.raw&&A.raw.id&&z.push(String(A.raw.id)),A.raw&&A.raw.url&&z.push(String(A.raw.url)),W){let O=A.repository&&(A.repository.nameWithOwner||A.repository.name)||null;if(O&&String(O)!==String(W))return!1}for(let O=0;O<B.length;O++)for(let Z=0;Z<z.length;Z++)if(B[O]&&z[Z]&&String(B[O])===String(z[Z]))return!0;return!1});if(D&&Array.isArray(D.fieldValues)){let P=D.fieldValues.find(A=>A&&A.type==="single_select"&&(A.raw&&A.raw.field&&String(A.raw.field.name||"").toLowerCase()==="status"||A.fieldName&&String(A.fieldName||"").toLowerCase()==="status"||A.field&&A.field.name&&String(A.field.name||"").toLowerCase()==="status"));P&&(N=P.option&&(P.option.color||P.option.id||P.option.name)||P.raw&&P.raw.color||null)}}}catch{}N||(N=d&&(d.option&&(d.option.color||d.option.id||d.option.name)||d.color||d.colour)||null);let u=R(N)||null,h=!!(u&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(u)),I=u||"#999999",G=h&&$(u,.12)||"rgba(0,0,0,0.06)",M=K(u)||"#333333",L='<span style="display:block;width:100%;box-sizing:border-box"><div style="display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border:1px solid '+C(I)+";border-radius:999px;color:"+C(M)+";background:"+C(G)+';font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;width:100%"><svg width="14" height="14" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:'+C(u||"#666")+'"><circle cx="8" cy="8" r="6" fill="currentColor" /></svg><span class="parent-issue-title" style="flex:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block">'+b+"</span>"+(T?'<span style="margin-left:6px;color:var(--vscode-descriptionForeground);white-space:nowrap">#'+T+"</span>":"")+"</div></span>",V='<span data-gh-open="'+(H||"")+'" class="parent-issue-wrapper" style="display:block;width:100%;cursor:'+(H?"pointer":"default")+'">';return H?V+L+"</span>":L}case"milestone":return"<div>"+C((f=(k=a.milestone)==null?void 0:k.title)!=null?f:"")+"</div>";case"sub_issues_progress":try{if(!a||a.total==null||Number(a.total)<=0)return"";let d=Math.max(0,Math.floor(Number(a.total)||0)),w=Math.max(0,Math.floor(Number(a.done||0)));if(d===0)return"";let v=null;return a.percent!==void 0&&a.percent!==null?v=Number(a.percent):v=Math.round(w/d*100),v==null||!isFinite(v)?"":(v=Math.max(0,Math.min(100,v)),'<div class="sub-issues-progress" style="display:flex;align-items:center;gap:8px;width:100%;"><div class="sub-issues-progress-bar" style="flex:1;min-width:0"><div style="width:100%;height:12px;border-radius:6px;border:1px solid var(--vscode-focusBorder);overflow:hidden;background:transparent;box-sizing:border-box"><div style="height:100%;width:'+String(v)+'%;background:var(--vscode-focusBorder)"></div></div></div><div class="sub-issues-progress-pct" style="min-width:44px;text-align:right;font-variant-numeric:tabular-nums;color:var(--vscode-descriptionForeground)">'+C(String(v)+"%")+"</div></div>")}catch{return""}case"missing":return"";default:return"<div>"+C(a&&a.raw&&a.raw.__typename?String(a.raw.__typename):JSON.stringify(a).slice(0,200))+"</div>"}}catch{return""}}var U=class{constructor(t,e){this.menuElement=null;this.backdropElement=null;this.field=t,this.options=e}show(t){this.hide(),this.backdropElement=document.createElement("div"),this.backdropElement.style.position="fixed",this.backdropElement.style.top="0",this.backdropElement.style.left="0",this.backdropElement.style.right="0",this.backdropElement.style.bottom="0",this.backdropElement.style.zIndex="999",this.backdropElement.addEventListener("click",()=>this.hide()),document.body.appendChild(this.backdropElement),this.menuElement=document.createElement("div"),this.menuElement.className="column-header-menu",this.menuElement.style.position="absolute",this.menuElement.style.background="var(--vscode-menu-background)",this.menuElement.style.border="1px solid var(--vscode-menu-border)",this.menuElement.style.borderRadius="4px",this.menuElement.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",this.menuElement.style.minWidth="180px",this.menuElement.style.padding="4px 0",this.menuElement.style.zIndex="1000",this.menuElement.style.fontSize="13px";let e=t.getBoundingClientRect();this.menuElement.style.top=`${e.bottom+4}px`,this.menuElement.style.left=`${e.left}px`,this.buildMenuItems(),document.body.appendChild(this.menuElement)}hide(){this.menuElement&&(this.menuElement.remove(),this.menuElement=null),this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}buildMenuItems(){if(!this.menuElement)return;this.addMenuItem("Select column",null,{isHeader:!0}),this.addSeparator(),this.addMenuItem("Sort ascending",()=>{this.options.onSort?.("ASC"),this.hide()},{icon:'<svg class="octicon octicon-sort-asc" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="m12.927 2.573 3 3A.25.25 0 0 1 15.75 6H13.5v6.75a.75.75 0 0 1-1.5 0V6H9.75a.25.25 0 0 1-.177-.427l3-3a.25.25 0 0 1 .354 0ZM0 12.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75Zm0-4a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 8.25Zm0-4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 4.25Z"></path></svg>',showClear:this.options.currentSort==="ASC",clearAction:this.options.onClearSort}),this.addMenuItem("Sort descending",()=>{this.options.onSort?.("DESC"),this.hide()},{icon:'<svg class="octicon octicon-sort-desc" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="M0 4.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 4.25Zm0 4a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 8.25Zm0 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75ZM13.5 10h2.25a.25.25 0 0 1 .177.427l-3 3a.25.25 0 0 1-.354 0l-3-3A.25.25 0 0 1 9.75 10H12V3.75a.75.75 0 0 1 1.5 0V10Z"></path></svg>',showClear:this.options.currentSort==="DESC",clearAction:this.options.onClearSort}),this.addSeparator(),this.options.canGroup&&this.addMenuItem("Group by values",()=>{this.options.onGroup?.(),this.hide()},{icon:'<svg class="octicon octicon-rows" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="M16 10.75v2.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25v-2.5C0 9.784.784 9 1.75 9h12.5c.966 0 1.75.784 1.75 1.75Zm0-8v2.5A1.75 1.75 0 0 1 14.25 7H1.75A1.75 1.75 0 0 1 0 5.25v-2.5C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75Zm-1.75-.25H1.75a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Zm0 8H1.75a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Z"></path></svg>',showClear:!!this.options.isGrouped,clearAction:this.options.onClearGroup}),this.options.canSlice&&this.addMenuItem("Slice by values",()=>{this.options.onSlice?.(),this.hide()},{icon:'<svg class="octicon octicon-sliceby" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 1.5H6.5V5H10C10.4142 5 10.75 5.33579 10.75 5.75C10.75 6.16421 10.4142 6.5 10 6.5H6.5V7.75C6.5 8.16421 6.16421 8.5 5.75 8.5C5.33579 8.5 5 8.16421 5 7.75V6.5H1.5V14.5H5V12.75C5 12.3358 5.33579 12 5.75 12C6.16421 12 6.5 12.3358 6.5 12.75V14.5H14.5V1.5ZM5 1.5V5H1.5V1.5H5ZM0 14.5V5.75V1.5C0 0.671573 0.671573 0 1.5 0H5.75H14.5C15.3284 0 16 0.671573 16 1.5V14.5C16 15.3284 15.3284 16 14.5 16H5.75H1.5C0.671573 16 0 15.3284 0 14.5ZM9.62012 9.58516C10.8677 9.59206 11.8826 8.58286 11.8826 7.33544V6.32279C11.8826 5.90857 12.2184 5.57279 12.6326 5.57279C13.0468 5.57279 13.3826 5.90857 13.3826 6.32279V7.33544C13.3826 9.4147 11.6909 11.0966 9.61182 11.0851L9.3826 11.0839L9.3826 12.9995C9.3826 13.2178 9.12245 13.3312 8.96248 13.1827L6.07989 10.506C5.97337 10.4071 5.97337 10.2385 6.07989 10.1396L8.96248 7.46291C9.12245 7.31438 9.3826 7.42782 9.3826 7.64611V9.58384L9.62012 9.58516Z"></path></svg>',showClear:!!this.options.isSliced,clearAction:this.options.onClearSlice}),this.options.canFilter&&this.addMenuItem("Filter by values...",()=>{this.options.onFilter?.(),this.hide()}),(this.options.canGroup||this.options.canSlice||this.options.canFilter)&&this.addSeparator(),!!(this.field&&(this.field.type==="title"||String(this.field.name||"").toLowerCase()==="title"||String(this.field.id||"").toLowerCase()==="title"))||this.addMenuItem("Hide field",()=>{this.options.onHide?.(),this.hide()},{icon:'<svg class="octicon octicon-eye-closed" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="M.143 2.31a.75.75 0 0 1 1.047-.167l14.5 10.5a.75.75 0 1 1-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.67-.992-4.933-2.078C1.797 10.832.88 9.577.43 8.9a1.619 1.619 0 0 1 0-1.797c.353-.533.995-1.42 1.868-2.305L.31 3.357A.75.75 0 0 1 .143 2.31Zm1.536 5.622A.12.12 0 0 0 1.657 8c0 .021.006.045.022.068.412.621 1.242 1.75 2.366 2.717C5.175 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 0 1 6.058 7.52L3.529 5.688a14.207 14.207 0 0 0-1.85 2.244ZM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 1 1-.473-1.423A6.207 6.207 0 0 1 8 2c1.981 0 3.67.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.11.166-.248.365-.41.587a.75.75 0 1 1-1.21-.887c.148-.201.272-.382.371-.53a.119.119 0 0 0 0-.137c-.412-.621-1.242-1.75-2.366-2.717C10.825 4.242 9.473 3.5 8 3.5Z"></path></svg>'}),this.addSeparator();let e=!!this.options.isFirst,n=!!this.options.isLast;this.addMenuItem("Move left",()=>{e||(this.options.onMove?.("left"),this.hide())},{icon:'<svg class="octicon octicon-arrow-left" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06Z"></path></svg>',disabled:e}),this.addMenuItem("Move right",()=>{n||(this.options.onMove?.("right"),this.hide())},{icon:'<svg class="octicon octicon-arrow-right" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="M8.22 2.97a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l2.97-2.97H3.75a.75.75 0 0 1 0-1.5h7.44L8.22 4.03a.75.75 0 0 1 0-1.06Z"></path></svg>',disabled:n})}addMenuItem(t,e,n){if(!this.menuElement)return;let i=document.createElement("div");if(i.className="menu-item",n?.isHeader){i.textContent=t,i.style.padding="6px 12px",i.style.fontWeight="600",i.style.color="var(--vscode-descriptionForeground)",i.style.fontSize="11px",i.style.textTransform="uppercase",i.style.cursor="default",this.menuElement.appendChild(i);return}if(i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="space-between",i.style.padding="6px 12px",i.style.cursor="pointer",i.style.color="var(--vscode-menu-foreground)",n?.icon){let o=document.createElement("span");o.className="menu-item-icon",o.style.display="inline-block",o.style.width="14px",o.style.marginRight="8px",o.style.flex="0 0 auto",o.innerHTML=n.icon,i.appendChild(o)}let s=document.createElement("span");if(s.textContent=t,s.style.flex="1",s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.textOverflow="ellipsis",i.appendChild(s),n?.showClear&&n?.clearAction){let o=document.createElement("button");o.type="button",o.textContent="\u2715",o.title="Clear",o.style.border="none",o.style.background="transparent",o.style.cursor="pointer",o.style.padding="2px 6px",o.style.marginLeft="8px",o.style.color="var(--vscode-menu-foreground)",o.addEventListener("mouseenter",()=>{o.style.color="var(--vscode-menu-selectionForeground)",o.style.background="var(--vscode-menu-selectionBackground)"}),o.addEventListener("mouseleave",()=>{o.style.color="var(--vscode-menu-foreground)",o.style.background="transparent"}),o.addEventListener("click",r=>{r.stopPropagation(),n.clearAction&&n.clearAction(),this.hide()}),i.appendChild(o)}n?.disabled&&(i.style.opacity="0.5",i.style.cursor="default"),e&&(i.addEventListener("mouseenter",()=>{i.style.background="var(--vscode-menu-selectionBackground)",i.style.color="var(--vscode-menu-selectionForeground)"}),i.addEventListener("mouseleave",()=>{i.style.background="transparent",i.style.color="var(--vscode-menu-foreground)"}),i.addEventListener("click",()=>{n?.disabled||e()})),this.menuElement.appendChild(i)}addSeparator(){if(!this.menuElement)return;let t=document.createElement("div");t.style.height="1px",t.style.background="var(--vscode-menu-separatorBackground)",t.style.margin="4px 0",this.menuElement.appendChild(t)}};var q=class{constructor(t){this.options=t}render(t){let e=document.createElement("thead");e.style.background="var(--vscode-sideBar-background)",e.style.position="sticky",e.style.top="0",e.style.zIndex="10";let n=document.createElement("tr"),i=document.createElement("th");i.textContent="#",this.styleHeaderCell(i),n.appendChild(i);for(let r of this.options.fields){let l=document.createElement("th"),p=document.createElement("div");p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="space-between",p.style.width="100%",p.style.gap="4px";let c=document.createElement("span"),y=r.name||r.id||"";if(this.options.sortConfig?.fieldId===r.id){let _=this.options.sortConfig?.direction==="ASC"?" \u2191":" \u2193";y+=_}c.textContent=y,c.style.flex="1",c.style.overflow="hidden",c.style.textOverflow="ellipsis",c.style.whiteSpace="nowrap";let g=r.name?.toLowerCase()===this.options.groupingFieldName?.toLowerCase(),S=this.options.activeSlice&&this.options.activeSlice.fieldId===r.id||this.options.activeSlicePanelFieldId&&String(this.options.activeSlicePanelFieldId)===String(r.id),x=document.createElement("span");if(x.style.display="flex",x.style.alignItems="center",x.style.gap="6px",g){let _=document.createElement("span");_.className="column-group-icon",_.innerHTML='<svg class="octicon octicon-rows" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="M16 10.75v2.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25v-2.5C0 9.784.784 9 1.75 9h12.5c.966 0 1.75.784 1.75 1.75Zm0-8v2.5A1.75 1.75 0 0 1 14.25 7H1.75A1.75 1.75 0 0 1 0 5.25v-2.5C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75Zm-1.75-.25H1.75a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Zm0 8H1.75a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Z"></path></svg>',_.style.display="inline-flex",_.style.alignItems="center",_.style.color="var(--vscode-foreground)",_.style.opacity="0.85",_.title="Grouped by this field (click to clear)",_.style.cursor="pointer",_.addEventListener("click",k=>{k.stopPropagation(),this.options.onClearGroup(r)}),x.appendChild(_)}if(S){let _=document.createElement("span");_.className="column-slice-icon",_.innerHTML='<svg class="octicon octicon-sliceby" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 1.5H6.5V5H10C10.4142 5 10.75 5.33579 10.75 5.75C10.75 6.16421 10.4142 6.5 10 6.5H6.5V7.75C6.5 8.16421 6.16421 8.5 5.75 8.5C5.33579 8.5 5 8.16421 5 7.75V6.5H1.5V14.5H5V12.75C5 12.3358 5.33579 12 5.75 12C6.16421 12 6.5 12.3358 6.5 12.75V14.5H14.5V1.5ZM5 1.5V5H1.5V1.5H5ZM0 14.5V5.75V1.5C0 0.671573 0.671573 0 1.5 0H5.75H14.5C15.3284 0 16 0.671573 16 1.5V14.5C16 15.3284 15.3284 16 14.5 16H5.75H1.5C0.671573 16 0 15.3284 0 14.5ZM9.62012 9.58516C10.8677 9.59206 11.8826 8.58286 11.8826 7.33544V6.32279C11.8826 5.90857 12.2184 5.57279 12.6326 5.57279C13.0468 5.57279 13.3826 5.90857 13.3826 6.32279V7.33544C13.3826 9.4147 11.6909 11.0966 9.61182 11.0851L9.3826 11.0839L9.3826 12.9995C9.3826 13.2178 9.12245 13.3312 8.96248 13.1827L6.07989 10.506C5.97337 10.4071 5.97337 10.2385 6.07989 10.1396L8.96248 7.46291C9.12245 7.31438 9.3826 7.42782 9.3826 7.64611V9.58384L9.62012 9.58516Z"></path></svg>',_.style.display="inline-flex",_.style.alignItems="center",_.style.color="var(--vscode-foreground)",_.style.opacity="0.85",_.title="Sliced by this field (click to clear)",_.style.cursor="pointer",_.addEventListener("click",k=>{k.stopPropagation(),this.options.onClearSlice(r)}),x.appendChild(_)}let E=document.createElement("button");E.textContent="\u22EE",E.style.background="transparent",E.style.border="none",E.style.cursor="pointer",E.style.fontSize="16px",E.style.padding="2px 4px",E.style.color="var(--vscode-foreground)",E.style.opacity="0.6",E.style.borderRadius="3px",E.title=`${r.name} options`,E.addEventListener("mouseenter",()=>{E.style.opacity="1",E.style.background="var(--vscode-toolbar-hoverBackground)"}),E.addEventListener("mouseleave",()=>{E.style.opacity="0.6",E.style.background="transparent"}),E.addEventListener("click",_=>{_.stopPropagation(),l.style.background="var(--vscode-sideBar-background)",this.options.onHeaderMenu(_,r,l)}),p.appendChild(c),(g||S)&&p.appendChild(x),p.appendChild(E),l.appendChild(p),l.addEventListener("pointerenter",()=>{l.style.background="var(--vscode-list-hoverBackground)"}),l.addEventListener("pointerleave",()=>{l.style.background="var(--vscode-sideBar-background)"}),this.styleHeaderCell(l),n.appendChild(l)}let s=document.createElement("th"),o=document.createElement("button");o.textContent="+",o.style.background="transparent",o.style.border="none",o.style.cursor="pointer",o.style.fontSize="18px",o.style.fontWeight="bold",o.style.color="var(--vscode-foreground)",o.style.width="100%",o.style.height="100%",o.title="Show hidden fields",o.addEventListener("click",()=>this.options.onShowFieldsMenu(o)),s.appendChild(o),this.styleHeaderCell(s),s.style.textAlign="center",s.style.width="50px",n.appendChild(s),e.appendChild(n),t.appendChild(e)}styleHeaderCell(t){t.style.padding="8px",t.style.textAlign="left",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.textOverflow="ellipsis",t.style.borderRight="1px solid var(--vscode-panel-border)",t.style.borderBottom="1px solid var(--vscode-panel-border)",t.style.position="sticky",t.style.top="0",t.style.zIndex="11",t.style.background="var(--vscode-sideBar-background)",t.style.height="32px",t.style.boxSizing="border-box"}};var Q=class{constructor(t){this.menuElement=null;this.backdropElement=null;this.options=t}show(t){this.hide(),this.backdropElement=document.createElement("div"),this.backdropElement.style.position="fixed",this.backdropElement.style.top="0",this.backdropElement.style.left="0",this.backdropElement.style.right="0",this.backdropElement.style.bottom="0",this.backdropElement.style.zIndex="998",this.backdropElement.addEventListener("click",()=>this.hide()),document.body.appendChild(this.backdropElement),this.menuElement=document.createElement("div"),this.menuElement.className="fields-menu",this.menuElement.style.position="absolute",this.menuElement.style.visibility="hidden",this.menuElement.style.left="0px",this.menuElement.style.top="0px",this.menuElement.style.background="var(--vscode-menu-background)",this.menuElement.style.border="1px solid var(--vscode-menu-border)",this.menuElement.style.borderRadius="4px",this.menuElement.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuElement.style.minWidth="220px",this.menuElement.style.padding="6px 0",this.menuElement.style.maxHeight="60vh",this.menuElement.style.overflowY="auto",this.menuElement.style.boxSizing="border-box",this.menuElement.style.zIndex="1000",this.menuElement.style.fontSize="13px",document.body.appendChild(this.menuElement),this.buildMenu();let e=t.getBoundingClientRect(),n=this.menuElement.getBoundingClientRect(),i=8,s=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,r=e.bottom+i;e.bottom+n.height+i>o&&(e.top-n.height-i>=0?r=e.top-n.height-i:r=Math.max(i,Math.min(o-n.height-i,e.bottom+i)));let l=e.left;e.left+n.width+i>s&&(l=Math.max(i,e.right-n.width)),l=Math.max(i,Math.min(l,s-n.width-i)),this.menuElement.style.top=`${Math.round(r)}px`,this.menuElement.style.left=`${Math.round(l)}px`,this.menuElement.style.visibility="visible"}hide(){this.menuElement&&(this.menuElement.remove(),this.menuElement=null),this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}buildMenu(){if(!this.menuElement)return;let t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.padding="6px 12px",t.style.fontWeight="600",t.style.color="var(--vscode-descriptionForeground)",t.style.fontSize="12px",t.style.textTransform="uppercase";let e=document.createElement("i");e.className="octicon octicon-note",e.style.marginRight="8px",t.appendChild(e);let n=document.createElement("span");n.textContent="Fields",t.appendChild(n),this.menuElement.appendChild(t),this.addSeparator();let i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.padding="6px 12px",i.style.cursor="pointer",i.style.color="var(--vscode-menu-foreground)",i.innerHTML='<span style="margin-right:8px;font-weight:700">+</span><span>New field</span>',i.addEventListener("mouseenter",()=>{i.style.background="var(--vscode-menu-selectionBackground)",i.style.color="var(--vscode-menu-selectionForeground)"}),i.addEventListener("mouseleave",()=>{i.style.background="transparent",i.style.color="var(--vscode-menu-foreground)"}),i.addEventListener("click",()=>{this.options.onCreateField?.(),this.hide()}),this.menuElement.appendChild(i),this.addSeparator();let s=this.options.fields.filter(r=>this.options.visibleFieldIds.has(r.id)),o=this.options.fields.filter(r=>!this.options.visibleFieldIds.has(r.id));this.addSectionHeader("Visible fields"),s.length===0?this.addEmptyRow("No visible fields"):s.forEach(r=>this.addFieldRow(r,!0)),this.addSeparator(),this.addSectionHeader("Hidden fields"),o.length===0?this.addEmptyRow("No hidden fields"):o.forEach(r=>this.addFieldRow(r,!1))}addSectionHeader(t){if(!this.menuElement)return;let e=document.createElement("div");e.textContent=t,e.style.padding="6px 12px",e.style.fontSize="11px",e.style.fontWeight="600",e.style.color="var(--vscode-descriptionForeground)",e.style.textTransform="uppercase",this.menuElement.appendChild(e)}addEmptyRow(t){if(!this.menuElement)return;let e=document.createElement("div");e.textContent=t,e.style.padding="6px 12px",e.style.color="var(--vscode-menu-foreground)",e.style.opacity="0.8",this.menuElement.appendChild(e)}addFieldRow(t,e){if(!this.menuElement)return;let n=document.createElement("div");if(n.style.display="flex",n.style.alignItems="center",n.style.padding="6px 12px",n.style.cursor="pointer",n.style.color="var(--vscode-menu-foreground)",e){let r=document.createElement("span");r.textContent="\u2713",r.style.marginRight="8px",r.style.color="var(--vscode-menu-selectionForeground)",n.appendChild(r)}else{let r=document.createElement("span");r.style.display="inline-block",r.style.width="14px",r.style.marginRight="8px",n.appendChild(r)}let i=this.getIconForField(t),s=document.createElement("span");s.innerHTML=i,s.style.marginRight="8px",s.style.display="inline-flex",s.style.alignItems="center",n.appendChild(s);let o=document.createElement("span");o.textContent=t.name,o.style.flex="1",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",n.appendChild(o),n.addEventListener("mouseenter",()=>{n.style.background="var(--vscode-menu-selectionBackground)",n.style.color="var(--vscode-menu-selectionForeground)"}),n.addEventListener("mouseleave",()=>{n.style.background="transparent",n.style.color="var(--vscode-menu-foreground)"}),n.addEventListener("click",()=>{let r=!e;this.options.onToggleVisibility?.(t.id,r),r?this.options.visibleFieldIds.add(t.id):this.options.visibleFieldIds.delete(t.id),this.menuElement&&(this.menuElement.innerHTML="",this.buildMenu())}),this.menuElement.appendChild(n)}addSeparator(){if(!this.menuElement)return;let t=document.createElement("div");t.style.height="1px",t.style.background="var(--vscode-menu-separatorBackground)",t.style.margin="6px 0",this.menuElement.appendChild(t)}getIconForField(t){let e=(t.dataType||"").toString().toLowerCase(),n=(i,s)=>typeof s=="string"&&(s.startsWith("<")||s.startsWith("__OCTICON_"))?`<svg class="octicon ${i}" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true">${s}</svg>`:`<svg class="octicon ${i}" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="${s}"/></svg>`;switch(e){case"title":return n("octicon-list-unordered","M5.75 2.5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2 14a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-6a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM2 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z");case"assignees":case"reviewers":return n("octicon-people","M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z");case"single_select":return n("octicon-single-select",'<path d="m5.06 7.356 2.795 2.833c.08.081.21.081.29 0l2.794-2.833c.13-.131.038-.356-.145-.356H5.206c-.183 0-.275.225-.145.356Z"></path><path d="M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Z"></path>');case"labels":return n("octicon-tag",'<path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25"></path>');case"parent_issue":return n("octicon-issue-tracks",'<path d="M1.5 8a6.5 6.5 0 0 1 13 0A.75.75 0 0 0 16 8a8 8 0 1 0-8 8 .75.75 0 0 0 0-1.5A6.5 6.5 0 0 1 1.5 8Z"></path><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm3.573 5.823-2.896-2.896a.25.25 0 0 1 0-.354l2.896-2.896a.25.25 0 0 1 .427.177V11.5h3.25a.75.75 0 0 1 0 1.5H12v2.146a.25.25 0 0 1-.427.177Z"></path>');case"sub_issues_progress":return n("octicon-issue-tracked-by",'<path d="M1.5 8a6.5 6.5 0 0 1 13 0A.75.75 0 0 0 16 8a8 8 0 1 0-8 8 .75.75 0 0 0 0-1.5A6.5 6.5 0 0 1 1.5 8Z"></path><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm1.5 1.75a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Zm2.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z"></path>');case"iteration":return n("octicon-iterations",'<path d="M2.5 7.25a4.75 4.75 0 0 1 9.5 0 .75.75 0 0 0 1.5 0 6.25 6.25 0 1 0-6.25 6.25H12v2.146c0 .223.27.335.427.177l2.896-2.896a.25.25 0 0 0 0-.354l-2.896-2.896a.25.25 0 0 0-.427.177V12H7.25A4.75 4.75 0 0 1 2.5 7.25Z"></path>');case"number":case"numeric":return n("octicon-number",'<path d="M9 4.75A.75.75 0 0 1 9.75 4h4a.75.75 0 0 1 .53 1.28l-1.89 1.892c.312.076.604.18.867.319.742.391 1.244 1.063 1.244 2.005 0 .653-.231 1.208-.629 1.627-.386.408-.894.653-1.408.777-1.01.243-2.225.063-3.124-.527a.751.751 0 0 1 .822-1.254c.534.35 1.32.474 1.951.322.306-.073.53-.201.67-.349.129-.136.218-.32.218-.596 0-.308-.123-.509-.444-.678-.373-.197-.98-.318-1.806-.318a.75.75 0 0 1-.53-1.28l1.72-1.72H9.75A.75.75 0 0 1 9 4.75Zm-3.587 5.763c-.35-.05-.77.113-.983.572a.75.75 0 1 1-1.36-.632c.508-1.094 1.589-1.565 2.558-1.425 1 .145 1.872.945 1.872 2.222 0 1.433-1.088 2.192-1.79 2.681-.308.216-.571.397-.772.573H7a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75c0-.69.3-1.211.67-1.61.348-.372.8-.676 1.15-.92.8-.56 1.18-.904 1.18-1.474 0-.473-.267-.69-.587-.737ZM5.604.089A.75.75 0 0 1 6 .75v4.77h.711a.75.75 0 0 1 0 1.5H3.759a.75.75 0 0 1 0-1.5H4.5V2.15l-.334.223a.75.75 0 0 1-.832-1.248l1.5-1a.75.75 0 0 1 .77-.037Z"></path>');case"date":return n("octicon-calendar",'<path d="M4.75 0a.75.75 0 0 1 .75.75V2h5V.75a.75.75 0 0 1 1.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 0 1 4.75 0ZM2.5 7.5v6.75c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V7.5Zm10.75-4H2.75a.25.25 0 0 0-.25.25V6h11V3.75a.25.25 0 0 0-.25-.25Z"></path>');case"linked_pull_request":case"linked_pull_requests":case"pull_request":return n("octicon-git-pull-request",'<path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"></path>');case"milestone":return n("octicon-milestone",'<path d="M7.75 0a.75.75 0 0 1 .75.75V3h3.634c.414 0 .814.147 1.13.414l2.07 1.75a1.75 1.75 0 0 1 0 2.672l-2.07 1.75a1.75 1.75 0 0 1-1.13.414H8.5v5.25a.75.75 0 0 1-1.5 0V10H2.75A1.75 1.75 0 0 1 1 8.25v-3.5C1 3.784 1.784 3 2.75 3H7V.75A.75.75 0 0 1 7.75 0Zm4.384 8.5a.25.25 0 0 0 .161-.06l2.07-1.75a.248.248 0 0 0 0-.38l-2.07-1.75a.25.25 0 0 0-.161-.06H2.75a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h9.384Z"></path>');case"repository":return n("octicon-repo",'<path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z"></path>');case"text":case"string":return n("octicon-typography",'<path d="M6.71 10H2.332l-.874 2.498a.75.75 0 0 1-1.415-.496l3.39-9.688a1.217 1.217 0 0 1 2.302.018l3.227 9.681a.75.75 0 0 1-1.423.474Zm3.13-4.358C10.53 4.374 11.87 4 13 4c1.5 0 3 .939 3 2.601v5.649a.75.75 0 0 1-1.448.275C13.995 12.82 13.3 13 12.5 13c-.77 0-1.514-.231-2.078-.709-.577-.488-.922-1.199-.922-2.041 0-.694.265-1.411.887-1.944C11 7.78 11.88 7.5 13 7.5h1.5v-.899c0-.54-.5-1.101-1.5-1.101-.869 0-1.528.282-1.84.858a.75.75 0 1 1-1.32-.716ZM6.21 8.5 4.574 3.594 2.857 8.5Zm8.29.5H13c-.881 0-1.375.22-1.637.444-.253.217-.363.5-.363.806 0 .408.155.697.39.896.249.21.63.354 1.11.354.732 0 1.26-.209 1.588-.449.35-.257.412-.495.412-.551Z"></path>');default:return t.iconClass?`<i class="${t.iconClass}"></i>`:n("octicon-tag","__OCTICON_TAG_PATH__")}}},se=Q;var J=class{constructor(t,e,n,i){this.panelElement=null;this.container=t,this.field=e,this.items=n,this.allFields=i||[]}render(){this.close(),this.panelElement=document.createElement("div"),this.panelElement.className="slice-panel",this.panelElement.style.position="relative",this.panelElement.style.float="left";try{let S=localStorage.getItem("ghProjects.slicePanel.width");S?this.panelElement.style.width=S:this.panelElement.style.width="280px"}catch{this.panelElement.style.width="280px"}this.panelElement.style.marginRight="12px",this.panelElement.style.background="var(--vscode-sideBar-background)",this.panelElement.style.border="1px solid var(--vscode-sideBar-border)",this.panelElement.style.borderRadius="6px",this.panelElement.style.display="flex",this.panelElement.style.flexDirection="column",this.panelElement.style.overflow="hidden",this.panelElement.style.maxHeight="600px";let t=document.createElement("pre");t.className="slice-panel-debug-overlay",t.style.position="absolute",t.style.left="8px",t.style.bottom="8px",t.style.right="8px",t.style.maxHeight="120px",t.style.overflow="auto",t.style.background="rgba(0,0,0,0.6)",t.style.color="white",t.style.fontSize="11px",t.style.padding="8px",t.style.borderRadius="6px",t.style.zIndex="200",t.style.display="none",t.title="SlicePanel debug (click to show/hide)",t.addEventListener("click",()=>{t.style.display=t.style.display==="none"?"block":"none"}),this.panelElement.appendChild(t);let e=document.createElement("div");e.className="slice-panel-resizer",e.style.position="absolute",e.style.top="0",e.style.right="0",e.style.bottom="0",e.style.width="6px",e.style.cursor="col-resize",e.style.zIndex="100",this.panelElement.appendChild(e);let n=null,i=null,s=S=>{if(n==null||i==null)return;let x=S.pageX-n,E=Math.max(160,i+x);this.panelElement.style.width=E+"px"},o=()=>{if(n!=null){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o);try{localStorage.setItem("ghProjects.slicePanel.width",this.panelElement.style.width)}catch{}n=null,i=null}};e.addEventListener("mousedown",S=>{S.preventDefault(),n=S.pageX,i=this.panelElement?this.panelElement.offsetWidth:280,document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)});let r=document.createElement("div");r.style.padding="12px",r.style.borderBottom="1px solid var(--vscode-sideBar-border)",r.style.display="flex",r.style.flexDirection="column",r.style.gap="8px";let l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.style.gap="8px";let p=document.createElement("span");p.textContent="Slice by",p.style.fontSize="11px",p.style.fontWeight="600",p.style.color="var(--vscode-descriptionForeground)",p.style.textTransform="uppercase",p.style.letterSpacing="0.5px",l.appendChild(p);let c=document.createElement("button");c.textContent=this.field.name,c.style.flex="1",c.style.padding="6px 12px",c.style.background="var(--vscode-button-secondaryBackground)",c.style.color="var(--vscode-button-secondaryForeground)",c.style.border="1px solid var(--vscode-button-border)",c.style.borderRadius="4px",c.style.cursor="pointer",c.style.fontSize="13px",c.style.fontWeight="500",c.style.textAlign="left",c.style.display="flex",c.style.justifyContent="space-between",c.style.alignItems="center";let y=document.createElement("span");y.textContent="\u25BC",y.style.fontSize="10px",y.style.marginLeft="auto",c.appendChild(y),c.addEventListener("click",S=>{S.stopPropagation(),this.showFieldDropdown(c)}),l.appendChild(c),r.appendChild(l),this.panelElement.appendChild(r);let g=document.createElement("div");g.style.flex="1",g.style.overflow="auto",g.style.padding="8px",this.renderValues(g),this.panelElement.appendChild(g),this.container.appendChild(this.panelElement)}showFieldDropdown(t){let e=new Set(["assignees","single_select","parent_issue","iteration","number","date","milestone","repository","labels"]),n=this.allFields.filter(o=>{let r=(o.dataType||"").toLowerCase();return e.has(r)});if(n.length===0)return;let i=document.createElement("div");i.style.position="absolute",i.style.top=`${t.getBoundingClientRect().bottom+4}px`,i.style.left=`${t.getBoundingClientRect().left}px`,i.style.minWidth=`${t.offsetWidth}px`,i.style.background="var(--vscode-dropdown-background)",i.style.border="1px solid var(--vscode-dropdown-border)",i.style.borderRadius="4px",i.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)",i.style.zIndex="1000",i.style.maxHeight="300px",i.style.overflowY="auto",n.forEach(o=>{let r=document.createElement("div");r.style.display="flex",r.style.alignItems="center";let l=document.createElement("span");l.style.display="inline-flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.width="18px",l.style.marginRight="8px",l.innerHTML=this.getIconForDataType((o.dataType||"").toString().toLowerCase()),r.appendChild(l);let p=document.createElement("span");p.textContent=o.name,r.appendChild(p),r.style.padding="8px 12px",r.style.cursor="pointer",r.style.fontSize="13px",r.style.color="var(--vscode-dropdown-foreground)",o.id===this.field.id&&(r.style.background="var(--vscode-list-activeSelectionBackground)",r.style.color="var(--vscode-list-activeSelectionForeground)"),r.addEventListener("mouseenter",()=>{o.id!==this.field.id&&(r.style.background="var(--vscode-list-hoverBackground)")}),r.addEventListener("mouseleave",()=>{o.id!==this.field.id&&(r.style.background="transparent")}),r.addEventListener("click",()=>{this.field=o,i.remove(),s.remove(),this.render(),this.onFieldChangeCallback&&this.onFieldChangeCallback(o)}),i.appendChild(r)});let s=document.createElement("div");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.right="0",s.style.bottom="0",s.style.zIndex="999",s.addEventListener("click",()=>{i.remove(),s.remove()}),document.body.appendChild(s),document.body.appendChild(i)}getIconForDataType(t){let e=(n,i)=>i&&(i.startsWith("<")||i.startsWith("__OCTICON_"))?`<svg class="octicon ${n}" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true">${i}</svg>`:`<svg class="octicon ${n}" viewBox="0 0 16 16" width="14" height="14" fill="currentColor" aria-hidden="true"><path d="${i}"/></svg>`;switch((t||"").toLowerCase()){case"assignees":case"reviewers":return e("octicon-people","M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z");case"single_select":return e("octicon-single-select",'<path d="m5.06 7.356 2.795 2.833c.08.081.21.081.29 0l2.794-2.833c.13-.131.038-.356-.145-.356H5.206c-.183 0-.275.225-.145.356Z"></path><path d="M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Z"></path>');case"labels":return e("octicon-tag",'<path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25"></path>');case"parent_issue":return e("octicon-issue-tracks",'<path d="M1.5 8a6.5 6.5 0 0 1 13 0A.75.75 0 0 0 16 8a8 8 0 1 0-8 8 .75.75 0 0 0 0-1.5A6.5 6.5 0 0 1 1.5 8Z"></path><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm3.573 5.823-2.896-2.896a.25.25 0 0 1 0-.354l2.896-2.896a.25.25 0 0 1 .427.177V11.5h3.25a.75.75 0 0 1 0 1.5H12v2.146a.25.25 0 0 1-.427.177Z"></path>');case"iteration":return e("octicon-iterations",'<path d="M2.5 7.25a4.75 4.75 0 0 1 9.5 0 .75.75 0 0 0 1.5 0 6.25 6.25 0 1 0-6.25 6.25H12v2.146c0 .223.27.335.427.177l2.896-2.896a.25.25 0 0 0 0-.354l-2.896-2.896a.25.25 0 0 0-.427.177V12H7.25A4.75 4.75 0 0 1 2.5 7.25Z"></path>');case"number":case"numeric":return e("octicon-number",'<path d="M9 4.75A.75.75 0 0 1 9.75 4h4a.75.75 0 0 1 .53 1.28l-1.89 1.892c.312.076.604.18.867.319.742.391 1.244 1.063 1.244 2.005 0 .653-.231 1.208-.629 1.627-.386.408-.894.653-1.408.777-1.01.243-2.225.063-3.124-.527a.751.751 0 0 1 .822-1.254c.534.35 1.32.474 1.951.322.306-.073.53-.201.67-.349.129-.136.218-.32.218-.596 0-.308-.123-.509-.444-.678-.373-.197-.98-.318-1.806-.318a.75.75 0 0 1-.53-1.28l1.72-1.72H9.75A.75.75 0 0 1 9 4.75Zm-3.587 5.763c-.35-.05-.77.113-.983.572a.75.75 0 1 1-1.36-.632c.508-1.094 1.589-1.565 2.558-1.425 1 .145 1.872.945 1.872 2.222 0 1.433-1.088 2.192-1.79 2.681-.308.216-.571.397-.772.573H7a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75c0-.69.3-1.211.67-1.61.348-.372.8-.676 1.15-.92.8-.56 1.18-.904 1.18-1.474 0-.473-.267-.69-.587-.737ZM5.604.089A.75.75 0 0 1 6 .75v4.77h.711a.75.75 0 0 1 0 1.5H3.759a.75.75 0 0 1 0-1.5H4.5V2.15l-.334.223a.75.75 0 0 1-.832-1.248l1.5-1a.75.75 0 0 1 .77-.037Z"></path>');case"date":return e("octicon-calendar",'<path d="M4.75 0a.75.75 0 0 1 .75.75V2h5V.75a.75.75 0 0 1 1.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 0 1 4.75 0ZM2.5 7.5v6.75c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V7.5Zm10.75-4H2.75a.25.25 0 0 0-.25.25V6h11V3.75a.25.25 0 0 0-.25-.25Z"></path>');case"milestone":return e("octicon-milestone",'<path d="M7.75 0a.75.75 0 0 1 .75.75V3h3.634c.414 0 .814.147 1.13.414l2.07 1.75a1.75 1.75 0 0 1 0 2.672l-2.07 1.75a1.75 1.75 0 0 1-1.13.414H8.5v5.25a.75.75 0 0 1-1.5 0V10H2.75A1.75 1.75 0 0 1 1 8.25v-3.5C1 3.784 1.784 3 2.75 3H7V.75A.75.75 0 0 1 7.75 0Zm4.384 8.5a.25.25 0 0 0 .161-.06l2.07-1.75a.248.248 0 0 0 0-.38l-2.07-1.75a.25.25 0 0 0-.161-.06H2.75a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h9.384Z"></path>');case"repository":return e("octicon-repo",'<path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5A.75.75 0 0 1 13.25 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z"/>');case"text":case"string":return e("octicon-typography","__OCTICON_TYPOGRAPHY_PATH__");default:return e("octicon-tag","__OCTICON_TAG_PATH__")}}renderValues(t){let e=this.getValueCounts();if(e.size===0){let s=document.createElement("div");s.textContent="No values",s.style.padding="8px",s.style.color="var(--vscode-descriptionForeground)",t.appendChild(s);return}let n=Array.from(e.entries()).sort((s,o)=>o[1].count-s[1].count),i=s=>{let o={resolved:null,statusColor:null,number:null,title:null,done:0,total:0,pct:0};if(!s)return o;let r=[];s.number&&r.push(String(s.number)),s.id&&r.push(String(s.id)),s.url&&r.push(String(s.url)),s.title&&r.push(String(s.title));let l=this.items.find(c=>{let y=c&&(c.content||c.raw&&c.raw.itemContent)||null;if(!y)return!1;let g=[];y.number&&g.push(String(y.number)),y.id&&g.push(String(y.id)),y.url&&g.push(String(y.url)),y.title&&g.push(String(y.title)),y.name&&g.push(String(y.name)),y.raw&&y.raw.number&&g.push(String(y.raw.number)),y.raw&&y.raw.id&&g.push(String(y.raw.id)),y.raw&&y.raw.url&&g.push(String(y.raw.url));for(let S of r)for(let x of g)if(S&&x&&String(S)===String(x))return!0;return!1});if(!l)return o;o.resolved=l;let p=l.content||l.raw&&l.raw.itemContent||null;if(o.title=p&&(p.title||p.name)?p.title||p.name:l.title||l.name||null,o.number=p&&p.number?String(p.number):l.number||l.id||null,Array.isArray(l.fieldValues)){let c=l.fieldValues.find(g=>g&&g.type==="single_select"&&g.option&&g.option.name);if(c&&c.option)try{let g=c.option.color||c.option.id||c.option.name||null;o.statusColor=R(g)||null}catch{}let y=l.fieldValues.find(g=>g&&(g.type==="sub_issues_progress"||g.total!=null&&g.done!=null));y&&y.total!=null&&(o.total=Number(y.total||0),o.done=Number(y.done||0),o.pct=o.total>0?Math.round(o.done/o.total*100):0)}return o};n.forEach(([s,{value:o,count:r,rawValue:l}])=>{let p=document.createElement("div");p.className="slice-value-item",p.style.padding="10px 12px",p.style.cursor="pointer",p.style.borderRadius="4px",p.style.marginBottom="4px",p.style.display="flex",p.style.alignItems="center",p.style.gap="8px",p.style.transition="background-color 0.15s ease";let c=(this.field.dataType||"").toLowerCase(),y=null;c==="parent_issue"&&l&&(y=l.parent||l.parentIssue||l.issue||l.item||l.value||l);let g=document.createElement("div");g.style.display="flex",g.style.alignItems="center",g.style.gap="8px",g.style.flex="0 0 auto";let S=f=>{let m=document.createElement("span");return m.style.display="inline-block",m.style.width="12px",m.style.height="12px",m.style.borderRadius="50%",m.style.flexShrink="0",m.style.backgroundColor=f||"var(--vscode-descriptionForeground)",m},x=!1;if(c==="assignees"&&l){let f=l,m=f&&(f.avatarUrl||f.avatar||f.imageUrl||f.avatar_url);if(m){let d=document.createElement("span");d.innerHTML='<span title="'+C(f.login||f.name||f.id||"")+'" style="display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url('+C(m)+');border:2px solid var(--vscode-editor-background)"></span>',g.appendChild(d),x=!0}else g.appendChild(S(null)),x=!0}if(!x&&c==="repository"){let f=document.createElement("span");f.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:var(--vscode-icon-foreground)"><path fill="currentColor" d="M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z"/></svg>',g.appendChild(f),x=!0}if(!x&&c==="parent_issue"){let f=y?i(y):null,m=f&&f.statusColor?f.statusColor:null;if(!m&&y&&(m=R(y.color||y.option&&y.option.color||y.statusColor||y.status?.color)||null),y&&(y.title||y.name||y.number||f&&(f.title||f.number))){let d=S(m);g.appendChild(d),x=!0}}if(!x&&c==="labels"&&l){let f=l,m=f&&(f.color||f.colorName||f.hex||f.name),d=R(m);g.appendChild(S(d)),x=!0}if(!x){let f=null;if(c==="single_select"&&l&&l.option&&(f=l.option.color||l.option.name||l.option.id),!f&&l&&(l.color||l.colorName)&&(f=l.color||l.colorName),!f&&Array.isArray(this.field.options))try{let d=(this.field.options||[]).find(w=>String(w.name)===String(s)||String(w.id)===String(l&&(l.optionId||l.option&&l.option.id)));d&&(f=d.color||d.name||d.id)}catch{}if(!f&&this.field&&this.field.configuration&&Array.isArray(this.field.configuration.iterations))try{let d=(this.field.configuration.iterations||[]).find(w=>String(w.title)===String(s)||String(w.id)===String(l&&(l.iterationId||l.iteration&&l.iteration.id)));d&&(f=d.color||d.name||d.title||d.id)}catch{}let m=R(f);g.appendChild(S(m))}p.appendChild(g);let E=document.createElement("div");E.style.flex="1",E.style.display="flex",E.style.flexDirection="column",E.style.minWidth="0";let _=null;if(c!=="parent_issue"&&(_=document.createElement("span"),_.textContent=s,_.style.fontSize="13px",_.style.fontWeight="500",_.style.whiteSpace="normal",_.style.wordBreak="break-word",_.style.overflow="hidden",E.appendChild(_)),c==="single_select"){let f=null;try{if(l&&l.option&&l.option.description)f=l.option.description;else if(Array.isArray(this.field.options)){let m=(this.field.options||[]).find(d=>String(d.name)===String(s)||String(d.id)===String(l&&(l.optionId||l.option&&l.option.id)));m&&m.description&&(f=m.description)}}catch{}if(f){let m=document.createElement("span");m.textContent=f,m.style.fontSize="11px",m.style.color="var(--vscode-descriptionForeground)",m.style.whiteSpace="normal",m.style.wordBreak="break-word",m.style.overflow="hidden",m.style.maxHeight="3.6em",E.appendChild(m)}}if(c==="parent_issue"&&l){let f=y||l.parent||l.parentIssue||l.issue||l.item||l.value||null,m=i(f),d=m.title||f&&(f.title||f.name)||s,w=document.createElement("div");w.style.display="flex",w.style.gap="8px",w.style.alignItems="baseline";let v=document.createElement("span"),F=String(d).slice(0,120);if(v.textContent=m.number?`${F} #${String(m.number)}`:F,v.style.fontSize="13px",v.style.fontWeight="600",v.style.whiteSpace="normal",v.style.wordBreak="break-word",w.appendChild(v),E.appendChild(w),m.total&&m.total>0){let b=document.createElement("div");b.style.display="flex",b.style.alignItems="center",b.style.gap="8px",b.style.marginTop="6px";let T=document.createElement("div");T.textContent=`${m.done}/${m.total}`,T.style.color="var(--vscode-descriptionForeground)",T.style.fontSize="12px",T.style.fontVariantNumeric="tabular-nums",b.appendChild(T);let H=document.createElement("div");H.style.display="inline-block",H.style.width="120px",H.style.height="10px",H.style.background="transparent",H.style.border="1px solid var(--vscode-focusBorder)",H.style.borderRadius="6px",H.style.overflow="hidden";let N=document.createElement("div");N.style.height="100%",N.style.width=String(m.pct)+"%",N.style.background="var(--vscode-focusBorder)",H.appendChild(N),b.appendChild(H),E.appendChild(b)}}if(c==="iteration")try{let f=l&&(l.iteration||l.configuration||l)||null,m=null;if(f&&f.startDate&&(f.duration||f.length))m=f;else if(this.field&&this.field.configuration&&Array.isArray(this.field.configuration.iterations)){let d=(this.field.configuration.iterations||[]).find(w=>String(w.title||w.name)===String(s)||String(w.id)===String(l&&(l.iterationId||l.iteration&&l.iteration.id)));d&&(m=d)}if(m){let d=m.startDate||m.start,w=m.duration||m.length||m.days;if(d&&w){let v=new Date(d),F=new Date(v.getTime()+Number(w||0)*24*60*60*1e3),b=v.toLocaleDateString("en-US",{month:"short",day:"numeric"}),T=F.toLocaleDateString("en-US",{month:"short",day:"numeric"}),H=document.createElement("div");H.textContent=`${b} \u2014 ${T}`,H.style.fontSize="11px",H.style.color="var(--vscode-descriptionForeground)",H.style.marginTop="4px",E.appendChild(H)}}}catch{}p.appendChild(E);let k=document.createElement("span");k.style.display="inline-flex",k.style.alignItems="center",k.style.justifyContent="center",k.style.minWidth="24px",k.style.height="24px",k.style.borderRadius="50%",k.style.background="var(--vscode-input-background)",k.style.border="1px solid var(--vscode-panel-border)",k.style.color="var(--vscode-foreground)",k.style.fontSize="12px",k.style.fontWeight="600",k.style.padding="0 6px",k.style.boxSizing="border-box",k.textContent=String(r),p.appendChild(k),p.addEventListener("mouseenter",()=>{p.style.background="var(--vscode-list-hoverBackground)"}),p.addEventListener("mouseleave",()=>{p.style.background="transparent"}),p.addEventListener("click",()=>{this.onValueSelectCallback&&this.onValueSelectCallback(o)}),t.appendChild(p)})}getValueCounts(){let t=new Map,e=(this.field.dataType||"").toLowerCase();return this.items.forEach(n=>{let i=n.fieldValues?.find(p=>p.fieldId===this.field.id||p.fieldName===this.field.name);if(!i){let p="(empty)",c=t.get(p);c?c.count++:t.set(p,{value:null,count:1,rawValue:null});return}if(e==="labels"){let p=i.labels&&Array.isArray(i.labels.nodes)?i.labels.nodes:Array.isArray(i.labels)?i.labels:null;if(Array.isArray(p)&&p.length>0){p.forEach(c=>{let y=c&&(c.name||c.title)?String(c.name||c.title):"(empty)",g=this.formatValue(y),S=t.get(g);S?S.count++:t.set(g,{value:y,count:1,rawValue:c})});return}}if(e==="assignees"){let p=i.assignees||(i.assignee?[i.assignee]:null);if(Array.isArray(p)&&p.length>0){p.forEach(c=>{let y=String(c.login||c.name||c.id||"(unknown)"),g=this.formatValue(y),S=t.get(g);S?S.count++:t.set(g,{value:c,count:1,rawValue:c})});return}}let s=null,o=null;try{if(e==="single_select")s=i.option?.name||i.name||i.value,o=i;else if(e==="iteration")s=i.iteration?.title||i.title||i.value,o=i;else if(e==="parent_issue"){let p=i.parent||i.parentIssue||i.issue||i.item||i.value||null;p&&(s=p.title||p.name||p.number||p.id||p.url||null),o=p||i}else e==="milestone"?(s=i.milestone?.title||i.milestone?.name||i.value||null,o=i.milestone||i):e==="repository"?(s=i.repository?.nameWithOwner||i.repository?.full_name||i.repository?.name||i.value||null,o=i.repository||i):e==="number"?(s=i.number!=null?i.number:i.value,o=i):e==="date"?(s=i.date||i.value||null,o=i):(s=i.text||i.title||i.value||null,o=i)}catch{s=i.text||i.title||i.value||null,o=i}let r=s==null||s===""?"(empty)":this.formatValue(s),l=t.get(r);l?l.count++:t.set(r,{value:s,count:1,rawValue:o})}),t}extractValue(t){let e=(this.field.dataType||"").toLowerCase();return t?e==="single_select"?t.option?.name||t.name||t.value:e==="iteration"?t.iteration?.title||t.title||t.value:e==="assignees"?t.assignees||t.assignee||null:e==="labels"?t.labels||null:e==="parent_issue"?t.parent||t.parentIssue||t.issue||t.item||t.value||null:e==="milestone"?t.milestone||t.value||null:e==="repository"?t.repository||t.value||null:e==="number"?t.number!=null?t.number:t.value:e==="date"?t.date||t.value||null:t.text||t.title||t.value||null:null}formatValue(t){return t==null?"(empty)":String(t)}onValueSelect(t){this.onValueSelectCallback=t}onFieldChange(t){this.onFieldChangeCallback=t}close(){this.panelElement&&(this.panelElement.remove(),this.panelElement=null)}};function re(a){if(!a||!a.nodes||a.nodes.length===0)return null;let t=a.nodes[0];if(!t||!t.field)return null;let e={fieldId:t.field.id||t.field.name,direction:t.direction||"ASC"};if(a.nodes.length>1){let n=a.nodes[1];n&&n.field&&(e.secondary={fieldId:n.field.id||n.field.name,direction:n.direction||"ASC"})}return e}function Y(a,t,e){if(!e||a.length===0)return a;let n=t.find(s=>s.id===e.fieldId||s.name===e.fieldId);if(!n)return a;let i=[...a];return i.sort((s,o)=>{let r=oe(s,o,n,e.direction);if(r===0&&e.secondary){let l=t.find(p=>p.id===e.secondary.fieldId||p.name===e.secondary.fieldId);if(l)return oe(s,o,l,e.secondary.direction)}return r}),i}function oe(a,t,e,n){let i=le(a,e),s=le(t,e);if(i===null&&s===null)return 0;if(i===null)return n==="ASC"?1:-1;if(s===null)return n==="ASC"?-1:1;let o=0;switch((e.dataType||"").toLowerCase()){case"text":case"title":o=j(i,s);break;case"number":o=ce(i,s);break;case"date":o=ae(i,s);break;case"single_select":o=pe(i,s,e);break;case"iteration":o=ue(i,s);break;case"labels":o=he(i,s);break;default:o=String(i).localeCompare(String(s))}return n==="ASC"?o:-o}function le(a,t){let e=a.fieldValues?.find(i=>i.fieldId===t.id||i.fieldName===t.name);if(!e)return null;switch((t.dataType||"").toLowerCase()){case"text":case"title":return e.text||e.title||null;case"number":return e.number!==void 0?e.number:null;case"date":return e.date||e.startDate||e.dueOn||null;case"single_select":return e.option||e;case"iteration":return e;case"labels":return e.labels||[];default:return e}}function j(a,t){let e=String(a||"").toLowerCase(),n=String(t||"").toLowerCase();return e.localeCompare(n)}function ce(a,t){let e=typeof a=="number"?a:parseFloat(a),n=typeof t=="number"?t:parseFloat(t);return isNaN(e)&&isNaN(n)?0:isNaN(e)?1:isNaN(n)?-1:e-n}function ae(a,t){let e=new Date(a),n=new Date(t);return isNaN(e.getTime())&&isNaN(n.getTime())?0:isNaN(e.getTime())?1:isNaN(n.getTime())?-1:e.getTime()-n.getTime()}function pe(a,t,e){let n=a.option||a,i=t.option||t;if(!n||!i)return j(n?.name||"",i?.name||"");if(e.options&&Array.isArray(e.options)){let s=e.options.findIndex(r=>r.id===n.id||r.name===n.name),o=e.options.findIndex(r=>r.id===i.id||r.name===i.name);if(s!==-1&&o!==-1)return s-o}return j(n.name,i.name)}function ue(a,t){let e=a.startDate||a.iteration?.startDate,n=t.startDate||t.iteration?.startDate;return!e&&!n?j(a.title||a.iteration?.title,t.title||t.iteration?.title):ae(e,n)}function he(a,t){let e=Array.isArray(a)?a:[],n=Array.isArray(t)?t:[];return e.length===0&&n.length===0?0:e.length===0?1:n.length===0?-1:j(e[0].name,n[0].name)}var X=class{constructor(t,e,n,i={}){this.activeMenu=null;this.activeFieldsMenu=null;this.activeSlicePanel=null;this.activeSlice=null;this.activeSlicePanelFieldId=null;this.container=t,this.allFields=(e||[]).map(r=>({...r,id:String(r.id)})),this.options=i,this.items=n;let s=this.loadHiddenFields().map(r=>String(r)),o=(i.hiddenFields||[]).map(r=>String(r));this.hiddenFieldIds=new Set([...s,...o]),this.fields=this.allFields.filter(r=>!this.hiddenFieldIds.has(r.id));try{console.debug("[ProjectTable] init: allFieldIds=",this.allFields.map(r=>r.id)),console.debug("[ProjectTable] init: hiddenFieldIds=",Array.from(this.hiddenFieldIds)),console.debug("[ProjectTable] init: visibleFieldIds=",this.fields.map(r=>r.id))}catch{}try{let r={allFieldIds:this.allFields.map(l=>String(l.id)),hiddenFieldIds:Array.from(this.hiddenFieldIds),visibleFieldIds:this.fields.map(l=>String(l.id))};window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"debugLog",level:"debug",message:"ProjectTable init",data:r,viewKey:this.options.viewKey})}catch{}this.applyFieldOrder()}render(){let t=this.container.querySelector(".slice-panel");this.container.innerHTML="",t&&this.container.appendChild(t);let e=document.createElement("div");e.className="table-wrapper",e.style.overflowX="auto",e.style.overflowY="auto",e.style.width="100%",e.style.display="block",e.style.height="100%";let n=document.createElement("table");n.style.borderCollapse="separate",n.style.borderSpacing="0",n.style.tableLayout="fixed",n.style.width="100%",this.renderColGroup(n),new q({fields:this.fields,sortConfig:this.options.sortConfig,groupingFieldName:this.options.groupingFieldName,activeSlice:this.activeSlice,activeSlicePanelFieldId:this.activeSlicePanelFieldId,onHeaderMenu:this.showHeaderMenu.bind(this),onShowFieldsMenu:this.showFieldsMenu.bind(this),onClearGroup:this.clearGroup.bind(this),onClearSlice:this.clearSlice.bind(this)}).render(n),this.renderBody(n),e.appendChild(n),this.container.appendChild(e),this.setupResizers(n)}renderColGroup(t){let e=document.createElement("colgroup"),n=document.createElement("col");n.style.width="40px",e.appendChild(n);for(let s of this.fields){let o=document.createElement("col");o.style.width="150px",o.dataset.fieldId=s.id,e.appendChild(o)}let i=document.createElement("col");i.style.width="50px",e.appendChild(i),t.appendChild(e)}showFieldsMenu(t){this.activeMenu&&(this.activeMenu.hide(),this.activeMenu=null),this.activeFieldsMenu&&(this.activeFieldsMenu.hide(),this.activeFieldsMenu=null);let e=new Set(this.allFields.filter(i=>!this.hiddenFieldIds.has(String(i.id))).map(i=>String(i.id)));try{console.debug("[ProjectTable] showFieldsMenu: hiddenFieldIds=",Array.from(this.hiddenFieldIds)),console.debug("[ProjectTable] showFieldsMenu: allFieldIds=",this.allFields.map(i=>i.id))}catch{}let n=new se({fields:this.allFields.map(i=>({id:i.id,name:i.name,iconClass:i.iconClass,dataType:i.dataType||i.type})),visibleFieldIds:e,onToggleVisibility:(i,s)=>{s?this.showField(i):this.hideField(i)},onCreateField:()=>{try{console.log("Create field requested")}catch{}}});this.activeFieldsMenu=n,n.show(t)}renderBody(t){let e=document.createElement("tbody"),n=this.items;this.options.sortConfig&&(n=Y(this.items,this.fields,this.options.sortConfig)),this.activeSlice&&(n=n.filter(s=>{let o=s.fieldValues.find(l=>String(l.fieldId)===String(this.activeSlice.fieldId));if(!o)return this.activeSlice.value===null;let r=null;return o.text!==void 0?r=o.text:o.title!==void 0?r=o.title:o.number!==void 0?r=o.number:o.date!==void 0?r=o.date:o.option?r=o.option.name:o.iteration?r=o.iteration.title:r=o.value,r===this.activeSlice.value}));let i=this.getGroupingField();i?this.renderGroupedRows(e,i,n):this.renderFlatRows(e,n),t.appendChild(e)}getGroupingField(){return this.options.groupingFieldName?this.fields.find(t=>t.name&&t.name.toLowerCase()===this.options.groupingFieldName?.toLowerCase()||t.id&&t.id===this.options.groupingFieldName):null}renderFlatRows(t,e){e.forEach((n,i)=>{let s=this.createRow(n,i);t.appendChild(s)})}renderGroupedRows(t,e,n){let i=this.groupItems(n,e);for(let s of i){let o=document.createElement("tr"),r=document.createElement("td");r.colSpan=this.fields.length+1,r.style.padding="8px",r.style.background="var(--vscode-editor-background)",r.style.fontWeight="600",r.style.borderTop="1px solid var(--vscode-editorGroup-border)",r.style.borderBottom="1px solid var(--vscode-editorGroup-border)",r.style.position="sticky",r.style.top="32px",r.style.zIndex="9",r.style.boxShadow="0 1px 2px rgba(0,0,0,0.1)";let l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.style.gap="8px";let p=e,c=this.fields.find(u=>u.dataType&&String(u.dataType).toLowerCase()==="number"&&String(u.name||"").toLowerCase().includes("estimate"))||this.fields.find(u=>u.dataType&&String(u.dataType).toLowerCase()==="number"),y=c?c.id:null,g=u=>{if(!y)return 0;let h=0;for(let I of u){let G=I.item||I;if(!G||!Array.isArray(G.fieldValues))continue;let M=G.fieldValues.find(L=>L.fieldId&&String(L.fieldId)===String(y)||L.fieldName&&String(L.fieldName).toLowerCase().includes("estimate")||L.type==="number");if(M){let L=Number(M.number!=null?M.number:M.value!=null?M.value:NaN);isNaN(L)||(h+=L)}}return h},S=u=>isFinite(u)?String(u):"",x=document.createElement("span"),E='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down"><path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path></svg>',_='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-right"><path d="M8.573 4.604a.25.25 0 01.427-.177l3.396 3.396a.25.25 0 010 .354l-3.396 3.396a.25.25 0 01-.427-.177V4.604z"></path></svg>';x.innerHTML=E,x.style.cursor="pointer",x.style.userSelect="none",x.style.display="inline-flex",x.style.alignItems="center",x.style.justifyContent="center",x.style.width="16px",x.style.height="16px",x.style.fill="var(--vscode-foreground)",x.style.opacity="0.7";let k=document.createElement("div");k.style.width="12px",k.style.height="12px",k.style.borderRadius="50%",k.style.backgroundColor=R(s.option.color)||"gray";let f=document.createElement("span");f.textContent=s.option.name||s.option.title||"Unassigned";let m=document.createElement("vscode-badge");m.textContent=String(s.items.length);let d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.gap="8px",d.style.position="sticky",d.style.left="0",d.style.zIndex="12",d.style.background=r.style.background,d.style.paddingRight="8px";let w=document.createElement("div");w.style.display="flex",w.style.alignItems="center",w.style.gap="8px",w.style.flex="1",d.appendChild(x);let v=null,F=null;if(String(e.dataType||"").toLowerCase()==="parent_issue"){let u=s.items&&s.items[0]?s.items[0].item||s.items[0]:null;if(u&&Array.isArray(u.fieldValues)){let h=u.fieldValues.find(I=>String(I.fieldId)===String(e.id)||I.fieldName===e.name||I.type==="parent_issue");h&&(v=h.parent||h.parentIssue||h.issue||h.item||h.value||null)}if(v&&Array.isArray(this.items))try{let h=[];v.number&&h.push(String(v.number)),v.id&&h.push(String(v.id)),v.url&&h.push(String(v.url)),v.title&&h.push(String(v.title));let I=this.items.find(G=>{let M=G&&(G.content||G.raw&&G.raw.itemContent)||null;if(!M)return!1;let L=[];M.number&&L.push(String(M.number)),M.id&&L.push(String(M.id)),M.url&&L.push(String(M.url)),M.title&&L.push(String(M.title)),M.name&&L.push(String(M.name)),M.raw&&M.raw.number&&L.push(String(M.raw.number)),M.raw&&M.raw.id&&L.push(String(M.raw.id)),M.raw&&M.raw.url&&L.push(String(M.raw.url));for(let V of h)for(let W of L)if(V&&W&&String(V)===String(W))return!0;return!1});I&&(F=I)}catch{}}if(s.option&&s.option.avatarUrl||s.option&&s.option.login||s.option&&s.option.name&&String(e.dataType||"").toLowerCase()==="assignees"){let u=document.createElement("span"),h=s.option&&(s.option.avatarUrl||s.option.avatar||s.option.imageUrl)||(()=>{for(let I of s.items){let G=I.item||I;if(!G||!Array.isArray(G.fieldValues))continue;let M=G.fieldValues.find(L=>L.type==="assignees"||String(L.fieldId)===String(e.id));if(M&&M.assignees&&Array.isArray(M.assignees)){let L=M.assignees.find(V=>String(V.login||V.name)===String(s.option.name||s.option.id));if(L&&(L.avatarUrl||L.avatar))return L.avatarUrl||L.avatar}}return null})();h?(u.innerHTML='<span title="'+C(s.option&&(s.option.login||s.option.name)||"Assignee")+'" style="display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url('+C(h)+');border:2px solid var(--vscode-editor-background)"></span>',d.appendChild(u)):d.appendChild(k)}else if(String(e.dataType||"").toLowerCase()==="repository"){let u=document.createElement("span");u.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:var(--vscode-icon-foreground)"><path fill="currentColor" d="M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z"/></svg>',d.appendChild(u)}else d.appendChild(k);if(F){let u=F.content||F.raw&&F.raw.itemContent||null;if(u){try{u.title?f.textContent=String(u.title):u.name?f.textContent=String(u.name):u.number&&(f.textContent=String(u.number))}catch{}if(Array.isArray(F.fieldValues)){let h=F.fieldValues.find(I=>I&&I.type==="single_select"&&I.option&&I.option.name);if(h&&h.option)try{let I=h.option.color||h.option.id||h.option.name||null;I&&(k.style.backgroundColor=R(I)||k.style.backgroundColor)}catch{}}}}else if(v&&(f.textContent=v.title||v.name||v.number||v.id||f.textContent,v.color))try{k.style.backgroundColor=R(v.color)||k.style.backgroundColor}catch{}d.appendChild(f);let b=document.createElement("span");b.style.display="inline-flex",b.style.alignItems="center",b.style.justifyContent="center",b.style.width="22px",b.style.height="22px",b.style.borderRadius="50%",b.style.background="var(--vscode-input-background)",b.style.border="1px solid var(--vscode-panel-border)",b.style.color="var(--vscode-foreground)",b.style.fontSize="12px",b.style.fontWeight="600",b.style.minWidth="22px",b.style.boxSizing="border-box",b.textContent=String(s.items.length||0),d.appendChild(b);let T=g(s.items||[]);if(T&&T>0){let u=document.createElement("div");if(u.style.display="inline-block",u.style.padding="2px 8px",u.style.borderRadius="999px",u.style.border="1px solid var(--vscode-panel-border)",u.style.background="var(--vscode-input-background)",u.style.color="var(--vscode-foreground)",u.style.fontSize="12px",u.style.lineHeight="18px",u.style.marginLeft="8px",u.textContent="Estimate: "+S(T),d.appendChild(u),String(e.dataType||"").toLowerCase()==="parent_issue"&&!(s.option&&(s.option.name==="Unassigned"||s.option.title==="Unassigned"))){let h=["done","closed","completed","finished"],I=P=>{try{let A=P&&(P.content||P.raw&&P.raw.itemContent);if(A){let z=(A.state||(A.merged?"MERGED":void 0)||"").toString().toUpperCase();if(z==="CLOSED"||z==="MERGED")return!0}if(Array.isArray(P.fieldValues)){if(P.fieldValues.find(Z=>Z&&Z.type==="single_select"&&Z.option&&Z.option.name&&h.includes(String(Z.option.name).toLowerCase())))return!0;let O=P.fieldValues.find(Z=>Z&&(String(Z.fieldName||"").toLowerCase().includes("progress")||String(Z.fieldName||"").toLowerCase().includes("percent")||Z.type==="number"&&String(Z.fieldName||"").toLowerCase().includes("progress")));if(O&&O.number!=null&&Number(O.number||0)>=100)return!0}if(A&&A.labels&&Array.isArray(A.labels.nodes)){let z=A.labels.nodes.map(O=>String(O.name||"").toLowerCase());for(let O of h)if(z.includes(O))return!0}}catch{}return!1},G=0,M=0;if(F&&Array.isArray(F.fieldValues)){let P=F.fieldValues.find(A=>A&&(A.type==="sub_issues_progress"||A.total!=null&&A.done!=null));P&&P.total!=null&&(M=Number(P.total||0),G=Number(P.done||0))}if(!M)for(let P of s.items){let A=P.item||P;A&&(M++,I(A)&&G++)}let L=document.createElement("div");L.style.color="var(--vscode-descriptionForeground)",L.style.fontSize="12px",L.style.marginLeft="8px",L.style.fontVariantNumeric="tabular-nums",L.textContent=`${G}/${M}`,d.appendChild(L);let V=document.createElement("div");V.style.display="inline-flex",V.style.alignItems="center",V.style.gap="8px",V.style.marginLeft="8px";let W=M>0?Math.round(G/M*100):0,B=document.createElement("div");B.style.display="inline-block",B.style.width="120px",B.style.height="12px",B.style.background="transparent",B.style.border="1px solid var(--vscode-focusBorder)",B.style.borderRadius="6px",B.style.overflow="hidden";let D=document.createElement("div");D.style.height="100%",D.style.width=String(W)+"%",D.style.background="var(--vscode-focusBorder)",B.appendChild(D),V.appendChild(B),d.appendChild(V)}}if(String(e.dataType||"").toLowerCase()==="single_select")try{let u=(e.options||[]).find(h=>String(h.name)===String(s.option&&s.option.name));if(u&&u.description){let h=document.createElement("div");h.style.color="var(--vscode-descriptionForeground)",h.style.fontSize="12px",h.style.marginLeft="8px",h.textContent=String(u.description).slice(0,120),d.appendChild(h)}}catch{}if(String(e.dataType||"").toLowerCase()==="iteration")try{let u=s.option||{},h=null,I=u.startDate||u.start&&u.startDate||null,G=u.duration||u.length||null;if(I&&G)try{let M=new Date(I),L=Number(G)||0,V=new Date(M.getTime()+L*24*60*60*1e3),W=M.toLocaleDateString("en-US",{month:"short",day:"numeric"}),B=V.toLocaleDateString("en-US",{month:"short",day:"numeric"});h=`${W} \u2014 ${B}`}catch{h=null}if(h||(h=u.title||u.name?String(u.title||u.name):null),h){let M=document.createElement("div");M.style.color="var(--vscode-descriptionForeground)",M.style.fontSize="12px",M.style.marginLeft="8px",M.textContent=String(h).slice(0,120),d.appendChild(M)}}catch{}s.option&&(s.option.name==="Unassigned"||s.option.title==="Unassigned")&&(f.textContent="No "+(e.name||"value")),l.appendChild(d),l.appendChild(w),r.appendChild(l),o.appendChild(r),t.appendChild(o);let H=[];s.items.forEach(u=>{let h=this.createRow(u.item,u.index);h.classList.add("group-row-"+s.option.id),t.appendChild(h),H.push(h)});let N=!1;x.addEventListener("click",()=>{N=!N,x.innerHTML=N?_:E,H.forEach(u=>{u.style.display=N?"none":"table-row"})})}}groupItems(t,e){let n=[],i=(e.dataType||"").toLowerCase();if(i==="single_select"?n=e.options||[]:i==="iteration"&&(n=e.configuration&&e.configuration.iterations||[]),n&&n.length>0){let l=n.map(c=>({option:c,items:[]})),p=[];return t.forEach((c,y)=>{let g=c.fieldValues.find(x=>String(x.fieldId)===String(e.id)||x.fieldName===e.name),S=!1;if(g){let x=null,E=null;if(i==="single_select"?(x=g.optionId||g.option&&g.option.id,E=g.name||g.option&&g.option.name):i==="iteration"&&(x=g.iterationId||g.iteration&&g.iteration.id||g.id,E=g.title||g.iteration&&g.iteration.title),x||E){let _=l.find(k=>x&&String(k.option.id)===String(x)||E&&(String(k.option.name)===String(E)||String(k.option.title)===String(E)));_&&(_.items.push({item:c,index:y}),S=!0)}}S||p.push({item:c,index:y})}),p.length>0&&l.push({option:{name:"Unassigned",title:"Unassigned",color:"GRAY"},items:p}),l.filter(c=>c.items.length>0)}let s=new Map,o=[];t.forEach((l,p)=>{let c=l.fieldValues.find(S=>String(S.fieldId)===String(e.id)||S.fieldName===e.name),y=null;if(c)if(c.text!==void 0)y=c.text;else if(c.title!==void 0)y=c.title;else if(c.number!==void 0)y=c.number;else if(c.date!==void 0)y=c.date;else if(c.option)y=c.option.name||c.option.title||c.option.id;else if(c.iteration)y=c.iteration.title||c.iteration.id;else if(c.parent||c.parentIssue||c.issue||c.item||c.value){let S=c.parent||c.parentIssue||c.issue||c.item||c.value;S&&(y=S.number||S.id||S.raw&&(S.raw.number||S.raw.id)||S.url||S.title||S.name||null)}else c.assignees?y=Array.isArray(c.assignees)?c.assignees.map(S=>S.login||S.name).join(", "):c.assignees:c.repository?y=c.repository.nameWithOwner||c.repository.name||c.repository.full_name||c.repository.id:c.milestone?y=c.milestone.title||c.milestone.id||c.milestone.name:y=c.value!==void 0?c.value:null;if(y==null||y===""){o.push({item:l,index:p});return}let g=String(y);s.has(g)||s.set(g,{option:{id:g,name:g,title:g},items:[]}),s.get(g).items.push({item:l,index:p})});let r=Array.from(s.values());return o.length>0&&r.push({option:{name:"Unassigned",title:"Unassigned",color:"GRAY"},items:o}),r}createRow(t,e){let n=document.createElement("tr");n.classList.add("table-row"),n.setAttribute("data-gh-item-id",t.id),n.style.transition="background-color 0.15s ease",n.addEventListener("mouseenter",()=>{n.style.backgroundColor="var(--vscode-list-hoverBackground)"}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor="transparent"});let i=document.createElement("td");i.textContent=String(e+1),this.styleCell(i),n.appendChild(i);for(let s=0;s<this.fields.length;s++){let o=this.fields[s],r=document.createElement("td");this.styleCell(r);let l=t.fieldValues.find(c=>String(c.fieldId)===String(o.id)||c.fieldName===o.name);l&&(r.innerHTML=ie(l,o,t,this.items)),r.style.position="relative";let p=document.createElement("div");p.className="column-resizer",p.style.position="absolute",p.style.top="0",p.style.right="0",p.style.width="6px",p.style.height="100%",p.style.cursor="col-resize",p.style.userSelect="none",p.style.zIndex="50",p.addEventListener("mouseenter",()=>p.style.background="var(--vscode-focusBorder)"),p.addEventListener("mouseleave",()=>p.style.background="transparent"),p.addEventListener("mousedown",c=>{c.preventDefault(),c.stopPropagation();let y=this.container.querySelector("table");if(!y)return;let S=y.querySelectorAll("col")[s+1],x=S?parseInt(S.style.width)||S.offsetWidth:r.offsetWidth;this.beginColumnResize(y,s+1,c.pageX,x)}),r.appendChild(p),n.appendChild(r)}return n}styleCell(t){t.style.padding="8px",t.style.borderRight="1px solid var(--vscode-panel-border)",t.style.borderBottom="1px solid var(--vscode-panel-border)",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.textOverflow="ellipsis"}showHeaderMenu(t,e,n){t.stopPropagation(),this.activeMenu&&this.activeMenu.hide();let i=(e.dataType||"").toLowerCase(),s=new Set(["assignees","single_select","parent_issue","iteration","number","date","milestone","repository"]),o=new Set(["assignees","single_select","parent_issue","iteration","number","date","milestone","repository","labels"]),r=s.has(i),l=o.has(i),p=!!(this.options.groupingFieldName&&e.name&&e.name.toLowerCase()===this.options.groupingFieldName.toLowerCase()),c=!!(this.activeSlice&&this.activeSlice.fieldId===e.id||this.activeSlicePanelFieldId&&String(this.activeSlicePanelFieldId)===String(e.id)),y=this.options.sortConfig&&this.options.sortConfig.fieldId===e.id?this.options.sortConfig.direction:null,g=this.fields.findIndex(E=>E.id===e.id),S=g===0,x=g===this.fields.length-1;this.activeMenu=new U(e,{canGroup:r,canSlice:l,canFilter:!1,isGrouped:p,isSliced:c,currentSort:y,isFirst:S,isLast:x,onSort:E=>this.handleSort(e,E),onClearSort:()=>this.clearSort(e),onGroup:()=>this.handleGroup(e),onClearGroup:()=>this.clearGroup(e),onSlice:()=>this.handleSlice(e),onClearSlice:()=>this.clearSlice(e),onHide:()=>this.hideField(e.id),onMove:E=>this.handleMove(e,E)}),this.activeMenu.show(n)}clearGroup(t){if(this.options.groupingFieldName=void 0,this.options.onGroupChange)try{this.options.onGroupChange("")}catch{}this.render()}clearSlice(t){this.activeSlice=null,this.activeSlicePanel&&(this.activeSlicePanel.close(),this.activeSlicePanel=null),this.activeSlicePanelFieldId=null,this.container.style.display="block",this.render(),this.options.onSliceChange&&this.options.onSliceChange(null)}clearSort(t){let e=this.getStorageKey("sortConfig");e&&localStorage.removeItem(e),this.options.onSortChange&&this.options.onSortChange(null)}showHiddenFieldsMenu(t){this.activeMenu&&this.activeMenu.hide();let e=this.allFields.filter(l=>this.hiddenFieldIds.has(String(l.id)));if(e.length===0){let l=document.createElement("div");l.textContent="No hidden fields",l.style.position="absolute",l.style.background="var(--vscode-menu-background)",l.style.border="1px solid var(--vscode-menu-border)",l.style.borderRadius="4px",l.style.padding="12px",l.style.fontSize="13px",l.style.color="var(--vscode-descriptionForeground)",l.style.zIndex="1000";let p=t.getBoundingClientRect();l.style.top=`${p.bottom+4}px`,l.style.left=`${p.left}px`,document.body.appendChild(l),setTimeout(()=>l.remove(),2e3);return}let n=document.createElement("div");n.style.position="absolute",n.style.background="var(--vscode-menu-background)",n.style.border="1px solid var(--vscode-menu-border)",n.style.borderRadius="4px",n.style.padding="4px 0",n.style.minWidth="180px",n.style.zIndex="1000",n.style.fontSize="13px";let i=t.getBoundingClientRect();n.style.top=`${i.bottom+4}px`,n.style.left=`${i.left}px`;let s=document.createElement("div");s.textContent="Show field",s.style.padding="6px 12px",s.style.fontWeight="600",s.style.color="var(--vscode-descriptionForeground)",s.style.fontSize="11px",s.style.textTransform="uppercase",n.appendChild(s);let o=document.createElement("div");o.style.height="1px",o.style.background="var(--vscode-menu-separatorBackground)",o.style.margin="4px 0",n.appendChild(o),e.forEach(l=>{let p=document.createElement("div");p.textContent=l.name||l.id,p.style.padding="6px 12px",p.style.cursor="pointer",p.style.color="var(--vscode-menu-foreground)",p.addEventListener("mouseenter",()=>{p.style.background="var(--vscode-menu-selectionBackground)",p.style.color="var(--vscode-menu-selectionForeground)"}),p.addEventListener("mouseleave",()=>{p.style.background="transparent",p.style.color="var(--vscode-menu-foreground)"}),p.addEventListener("click",()=>{this.showField(l.id),n.remove(),r.remove()}),n.appendChild(p)});let r=document.createElement("div");r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.right="0",r.style.bottom="0",r.style.zIndex="999",r.addEventListener("click",()=>{n.parentElement&&n.remove(),r.parentElement&&r.remove()}),document.body.appendChild(n),document.body.appendChild(r)}handleSort(t,e){let n={fieldId:t.id,direction:e};this.saveSortConfig(n),this.options.onSortChange&&this.options.onSortChange(n)}handleGroup(t){if(t&&t.name&&(this.options.groupingFieldName=t.name,this.render(),this.options.onGroupChange))try{this.options.onGroupChange(t.name)}catch{}}handleSlice(t){this.activeSlicePanel&&(this.activeSlicePanel.close(),this.activeSlicePanel=null),this.activeSlicePanel=new J(this.container,t,this.items,this.allFields),this.activeSlicePanel.render();try{this.activeSlicePanelFieldId=String(t.id)}catch{this.activeSlicePanelFieldId=null}let e=this.container.querySelector(".table-wrapper");if(e){let n=this.container.querySelector(".slice-panel");n&&this.container.insertBefore(n,e)}this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.gap="0",this.render(),this.activeSlicePanel.onValueSelect(n=>{this.activeSlice={fieldId:t.id,value:n},this.render()}),this.activeSlicePanel.onFieldChange(n=>{this.activeSlice=null,this.handleSlice(n),this.options.onSliceChange&&this.options.onSliceChange(n)}),this.options.onSliceChange&&this.options.onSliceChange(t)}hideField(t){let e=String(t);this.hiddenFieldIds.add(e);try{console.debug("[ProjectTable] hideField -> added",e,"hiddenFieldIds=",Array.from(this.hiddenFieldIds))}catch{}if(this.options.onHiddenFieldsChange){this.fields=this.allFields.filter(n=>!this.hiddenFieldIds.has(n.id));try{this.applyFieldOrder()}catch{}try{this.options.onHiddenFieldsChange(Array.from(this.hiddenFieldIds))}catch{}this.render()}else{this.saveHiddenFields(),this.fields=this.allFields.filter(n=>!this.hiddenFieldIds.has(n.id));try{this.applyFieldOrder()}catch{}this.render()}}showField(t){let e=String(t);this.hiddenFieldIds.delete(e);try{console.debug("[ProjectTable] showField -> removed",e,"hiddenFieldIds=",Array.from(this.hiddenFieldIds))}catch{}if(this.options.onHiddenFieldsChange){this.fields=this.allFields.filter(n=>!this.hiddenFieldIds.has(n.id));try{this.applyFieldOrder()}catch{}try{this.options.onHiddenFieldsChange(Array.from(this.hiddenFieldIds))}catch{}this.render()}else{this.saveHiddenFields(),this.fields=this.allFields.filter(n=>!this.hiddenFieldIds.has(n.id));try{this.applyFieldOrder()}catch{}this.render()}}handleMove(t,e){let n=this.fields.findIndex(i=>i.id===t.id);e==="left"&&n>0?[this.fields[n],this.fields[n-1]]=[this.fields[n-1],this.fields[n]]:e==="right"&&n<this.fields.length-1&&([this.fields[n],this.fields[n+1]]=[this.fields[n+1],this.fields[n]]),this.saveFieldOrder(),this.render()}getStorageKey(t){return this.options.viewKey?`ghProjects.table.${this.options.viewKey}.${t}`:""}loadHiddenFields(){let t=this.getStorageKey("hiddenFields");if(!t)return[];try{let e=localStorage.getItem(t),i=((e?JSON.parse(e):[])||[]).map(s=>String(s));try{console.debug("[ProjectTable] loadHiddenFields ->",i)}catch{}return i}catch{return[]}}saveHiddenFields(){let t=this.getStorageKey("hiddenFields");if(!t)return;let e=Array.from(this.hiddenFieldIds).map(n=>String(n));try{console.debug("[ProjectTable] saveHiddenFields ->",e)}catch{}localStorage.setItem(t,JSON.stringify(e))}saveSortConfig(t){let e=this.getStorageKey("sortConfig");e&&localStorage.setItem(e,JSON.stringify(t))}saveFieldOrder(){let t=this.getStorageKey("fieldOrder");if(!t)return;let e=this.fields.map(n=>n.id);localStorage.setItem(t,JSON.stringify(e))}applyFieldOrder(){let t=this.getStorageKey("fieldOrder");if(t)try{let e=localStorage.getItem(t);if(!e)return;let n=JSON.parse(e),i=[];for(let s of n){let o=this.fields.find(r=>String(r.id)===String(s));o&&i.push(o)}for(let s of this.fields)i.find(o=>o.id===s.id)||i.push(s);this.fields=i}catch{}}setupResizers(t){t.querySelectorAll("th").forEach((n,i)=>{if(i===0)return;let s=document.createElement("div");s.className="column-resizer",s.style.position="absolute",s.style.top="0",s.style.right="0",s.style.width="4px",s.style.height="100%",s.style.cursor="col-resize",s.style.userSelect="none",s.style.zIndex="100",s.addEventListener("mouseenter",()=>{s.style.background="var(--vscode-focusBorder)"}),s.addEventListener("mouseleave",()=>{s.style.background="transparent"});let o=0,r=0;s.addEventListener("mousedown",l=>{l.preventDefault(),l.stopPropagation();let c=t.querySelectorAll("col")[i],y=c?parseInt(c.style.width)||c.offsetWidth:n.offsetWidth;this.beginColumnResize(t,i,l.pageX,y)}),n.style.position="relative",n.appendChild(s)}),this.restoreColumnWidths(t)}saveColumnWidth(t,e){let n=this.getStorageKey("columnWidths");if(n)try{let i=localStorage.getItem(n),s=i?JSON.parse(i):{};s[t]=e,localStorage.setItem(n,JSON.stringify(s))}catch{}}beginColumnResize(t,e,n,i){let s=r=>{let l=Math.max(20,i+(r.pageX-n)),c=t.querySelectorAll("col")[e];c&&(c.style.width=`${l}px`,c.style.minWidth=`${l}px`,c.style.maxWidth=`${l}px`)},o=r=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o);let l=e-1;if(l>=0&&l<this.fields.length){let c=t.querySelectorAll("col")[e],y=c?parseInt(c.style.width)||c.offsetWidth:void 0;y&&this.saveColumnWidth(this.fields[l].id,y)}};document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)}restoreColumnWidths(t){let e=this.getStorageKey("columnWidths");if(e)try{let n=localStorage.getItem(e);if(!n)return;let i=JSON.parse(n),s=t.querySelectorAll("col");this.fields.forEach((o,r)=>{let l=i[o.id];if(l){let p=s[r+1];p&&(p.style.width=`${l}px`,p.style.minWidth=`${l}px`,p.style.maxWidth=`${l}px`)}})}catch{}}};function ee(a,t){a.innerHTML='<div class="title">'+t+'</div><div class="loading"><em>Loading...</em></div>'}function te(a,t,e){a.innerHTML='<div class="title">'+t+'</div><div style="color:var(--vscode-editor-foreground)">'+e+"</div>"}function ne(a){let t=document.createElement("button");return t.type="button",t.textContent="Load more",t.style.marginLeft="8px",t.style.border="1px solid var(--vscode-editorWidget-border)",t.addEventListener("click",()=>{a(),t.disabled=!0,t.textContent="Loading..."}),t}function de(a,t,e){if(window.filterBarHelper&&typeof window.filterBarHelper.create=="function")try{return window.filterBarHelper.create({parent:a,suffix:e.suffix||t,effFilter:typeof e.effFilter=="string"?e.effFilter:void 0,viewKey:t,step:e.step||50,onLoadMore:e.onLoadMore,onSave:e.onSave,onDiscard:e.onDiscard})}catch{return null}return null}window.tableViewFetcher=function(a,t,e){let n=a&&(a.name||a.id)?a.name||a.id:"Table View";try{ee(t,n)}catch{}let i=30;function s(l,p){let c=l||{},y=c.fields||[],g=c.items||[],S=g.slice(0,i);t.innerHTML="",t.style.margin="0",t.style.padding="0",t.style.height="100%",t.style.display="flex",t.style.flexDirection="column",t.style.overflow="hidden";let x=document.createElement("div");x.style.flex="0 0 auto",x.style.background="var(--vscode-editor-background)",x.style.zIndex="20",x.style.position="relative",x.style.display="flex",x.style.justifyContent="space-between",x.style.alignItems="center",x.style.width="100%";let E=document.createElement("div");E.style.flex="1 1 auto",E.style.marginRight="8px",x.appendChild(E);let _=null,k=null,f=null,m=de(E,e,{suffix:e?String(e).split(":").pop():"",step:i,onLoadMore:()=>{i+=30,r()},onSave:u=>{try{if(_!==null&&(window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewGrouping",viewKey:e,grouping:_}),_=null),k!==null){let h=Array.from(k);window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewHiddenFields",viewKey:e,hiddenFields:h});try{let I=e?`ghProjects.table.${e}.hiddenFields`:null;I&&localStorage.setItem(I,JSON.stringify(h))}catch{}k=null}if(f!==null){window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewSlice",viewKey:e,slice:f});try{let h=e?`ghProjects.table.${e}.slice`:null;h&&localStorage.setItem(h,JSON.stringify(f))}catch{}f=null}}catch{}},onDiscard:()=>{try{if(_!==null&&(window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"discardViewGrouping",viewKey:e}),_=null),k!==null&&(window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"discardViewHiddenFields",viewKey:e}),k=null,r()),f!==null){window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"discardViewSlice",viewKey:e}),f=null;try{let u=e?`ghProjects.table.${e}.slice`:null;u&&localStorage.removeItem(u)}catch{}r()}}catch{}}});try{if(p&&m&&typeof m.setEffectiveFilter=="function")try{m.setEffectiveFilter(p)}catch{}}catch{}if(m)typeof m.setLoadState=="function"&&m.setLoadState(g.length<i,g.length>=i?"Load more":"All loaded"),typeof m.registerItems=="function"&&m.registerItems(g,{fields:y});else{let u=document.createElement("div");u.className="title",u.textContent=n,u.style.padding="8px",x.appendChild(u);let h=document.createElement("div");if(h.style.padding="8px",g.length>i){let I=ne(()=>{i+=30,r()});h.appendChild(I)}else{let I=document.createElement("span");I.textContent="All loaded",I.style.color="var(--vscode-descriptionForeground)",h.appendChild(I)}x.appendChild(h)}t.appendChild(x);let d=document.createElement("div");d.style.flex="1 1 auto",d.style.overflow="hidden",d.style.position="relative",t.appendChild(d);let w=me(c),v=re(c.details?.sortByFields);if(e)try{let u=localStorage.getItem(`ghProjects.table.${e}.sortConfig`);u&&(v=JSON.parse(u))}catch{}let F=S;v&&(F=Y(S,y,v));let b=c.allFields&&Array.isArray(c.allFields)?c.allFields:c.fields||[],T=c.details&&c.details.fields&&Array.isArray(c.details.fields.nodes)?c.details.fields.nodes:null,H;if(T&&Array.isArray(T)){let u=new Set(T.map(h=>String(h.id)));H=(b||[]).map(h=>String(h.id)).filter(h=>!u.has(h))}try{let u={allFieldIds:(b||[]).map(h=>String(h.id)),viewFieldIds:T?T.map(h=>String(h.id)):null,viewHiddenFieldIds:H};window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"debugLog",level:"debug",message:"tableViewFetcher field debug",data:u,viewKey:e})}catch{}new X(d,b,F,{groupingFieldName:w||void 0,sortConfig:v,viewKey:e,hiddenFields:H,onHiddenFieldsChange:u=>{try{if(k=new Set((u||[]).map(h=>String(h))),m&&m.saveBtn&&m.discardBtn)try{m.saveBtn.disabled=!1,m.discardBtn.disabled=!1,m.saveBtn.style.opacity="1",m.saveBtn.style.cursor="pointer",m.discardBtn.style.opacity="1",m.discardBtn.style.cursor="pointer"}catch{}}catch{}},onSortChange:()=>r(),onGroupChange:u=>{try{if(_=u||null,m&&m.saveBtn&&m.discardBtn)try{m.saveBtn.disabled=!1,m.discardBtn.disabled=!1,m.saveBtn.style.opacity="1",m.saveBtn.style.cursor="pointer",m.discardBtn.style.opacity="1",m.discardBtn.style.cursor="pointer"}catch{}}catch{}},onSliceChange:u=>{try{if(f=u?{fieldId:u.id,value:null}:null,m&&m.saveBtn&&m.discardBtn)try{m.saveBtn.disabled=!1,m.discardBtn.disabled=!1,m.saveBtn.style.opacity="1",m.saveBtn.style.cursor="pointer",m.discardBtn.style.opacity="1",m.discardBtn.style.cursor="pointer"}catch{}window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"debugLog",level:"debug",message:u?`Slice activated on field: ${u.name}`:"Slice cleared",viewKey:e})}catch{}}}).render(),m&&typeof m.onFilterChange=="function"&&m.onFilterChange(u=>{d.querySelectorAll("tr[data-gh-item-id]").forEach(I=>{let G=I.getAttribute("data-gh-item-id");G&&u.has(G)?I.style.display="table-row":I.style.display="none"})})}function o(l){let p=l&&l.data?l.data:l;try{if(p&&p.command==="fields"){if(p.viewKey&&e&&String(p.viewKey)!==String(e))return;p.error?te(t,n,String(p.error)):s(p.payload,p.effectiveFilter)}}catch{}}function r(){try{window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"requestFields",first:i,viewKey:e})}catch{}}try{window.__APP_MESSAGING__.onMessage(o)}catch{window.addEventListener("message",o)}r()};function me(a){try{if(a&&a.details){let t=a.details.verticalGroupByFields&&a.details.verticalGroupByFields.nodes,e=a.details.groupByFields&&a.details.groupByFields.nodes;if(t&&t.length>0)return t[0].name||null;if(e&&e.length>0)return e[0].name||null}}catch{}return null}})();
//# sourceMappingURL=tableViewFetcher.js.map
