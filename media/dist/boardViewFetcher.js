"use strict";(()=>{var Ye=Object.defineProperty;var Q=(p,e)=>()=>(p&&(e=p(p=0)),e);var ne=(p,e)=>{for(var t in e)Ye(p,t,{get:e[t],enumerable:!0})};var K,ve=Q(()=>{"use strict";K=class{static groupItems(e,t){let n=[],i=(t.dataType||"").toLowerCase();if(i==="single_select"?n=t.options||[]:i==="iteration"&&(n=t.configuration&&t.configuration.iterations||[]),n&&n.length>0){let o=n.map(c=>({option:c,items:[]})),d=[];return e.forEach((c,r)=>{let u=c.fieldValues.find(f=>String(f.fieldId)===String(t.id)||f.fieldName===t.name),h=!1;if(u){let f=null,S=null;if(i==="single_select"?(f=u.optionId||u.option&&u.option.id,S=u.name||u.option&&u.option.name):i==="iteration"&&(f=u.iterationId||u.iteration&&u.iteration.id||u.id,S=u.title||u.iteration&&u.iteration.title),f||S){let C=o.find(x=>f&&String(x.option.id)===String(f)||S&&(String(x.option.name)===String(S)||String(x.option.title)===String(S)));C&&(C.items.push({item:c,index:r}),h=!0)}}h||d.push({item:c,index:r})}),d.length>0&&o.push({option:{name:"Unassigned",title:"Unassigned",color:"GRAY"},items:d}),o.filter(c=>c.items.length>0)}let s=new Map,l=[];e.forEach((o,d)=>{let c=o.fieldValues.find(f=>String(f.fieldId)===String(t.id)||f.fieldName===t.name),r=null;if(c)if(c.text!==void 0)r=c.text;else if(c.title!==void 0)r=c.title;else if(c.number!==void 0)r=c.number;else if(c.date!==void 0)r=c.date;else if(c.option)r=c.option.name||c.option.title||c.option.id;else if(c.iteration)r=c.iteration.title||c.iteration.id;else if(c.parent||c.parentIssue||c.issue||c.item||c.value){let f=c.parent||c.parentIssue||c.issue||c.item||c.value;f&&(r=f.number||f.id||f.raw&&(f.raw.number||f.raw.id)||f.url||f.title||f.name||null)}else c.assignees?r=Array.isArray(c.assignees)?c.assignees.map(f=>f.login||f.name).join(", "):c.assignees:c.repository?r=c.repository.nameWithOwner||c.repository.name||c.repository.full_name||c.repository.id:c.milestone?r=c.milestone.title||c.milestone.id||c.milestone.name:r=c.value!==void 0?c.value:null;if(r==null||r===""){l.push({item:o,index:d});return}let u=r;if(typeof r=="string")try{u=String(r).trim();let f=u.split(/\r?\n/);f.length>0&&(u=f[0].trim()),u.length>120&&(u=u.slice(0,120))}catch{}let h=String(typeof u=="string"?u.toLowerCase():u);s.has(h)||s.set(h,{option:{id:h,name:String(u),title:String(u)},items:[]}),s.get(h).items.push({item:o,index:d})});let a=Array.from(s.values());return l.length>0&&a.push({option:{name:"Unassigned",title:"Unassigned",color:"GRAY"},items:l}),a}}});var $e={};ne($e,{FieldsMenu:()=>de,default:()=>lt});var de,lt,Oe=Q(()=>{"use strict";de=class{constructor(e){this.menuElement=null;this.backdropElement=null;this.anchorElementRef=null;this.anchorRectRef=void 0;this.options=e}show(e,t){this.hide(),this.anchorElementRef=e,this.anchorRectRef=t;try{document.querySelectorAll('[data-menu-type="fields-menu"], [data-menu-type="group-by-menu"]').forEach(r=>r.remove())}catch{}this.backdropElement=document.createElement("div"),this.backdropElement.style.position="fixed",this.backdropElement.style.top="0",this.backdropElement.style.left="0",this.backdropElement.style.right="0",this.backdropElement.style.bottom="0",this.backdropElement.style.zIndex="998",this.backdropElement.addEventListener("click",()=>this.hide()),this.backdropElement.dataset.menuType="fields-menu",document.body.appendChild(this.backdropElement),this.menuElement=document.createElement("div"),this.menuElement.className="fields-menu",this.menuElement.dataset.menuType="fields-menu",this.menuElement.style.position="absolute",this.menuElement.style.visibility="hidden",this.menuElement.style.left="0px",this.menuElement.style.top="0px",this.menuElement.style.background="var(--vscode-menu-background)",this.menuElement.style.border="1px solid var(--vscode-menu-border)",this.menuElement.style.borderRadius="4px",this.menuElement.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuElement.style.minWidth="220px",this.menuElement.style.padding="6px 0",this.menuElement.style.maxHeight="60vh",this.menuElement.style.overflowY="auto",this.menuElement.style.boxSizing="border-box",this.menuElement.style.zIndex="1000",this.menuElement.style.fontSize="13px",document.body.appendChild(this.menuElement),this.buildMenu();let n=t;n||(n=e.getBoundingClientRect());try{console.debug("FieldsMenu.show anchorRect",{top:n.top,left:n.left,right:n.right,height:n.height})}catch{}let i=this.menuElement.getBoundingClientRect(),s=8,l=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,o=n.bottom+s;n.bottom+i.height+s>a&&(n.top-i.height-s>=0?o=n.top-i.height-s:o=Math.max(s,Math.min(a-i.height-s,n.bottom+s)));let d=n.left;try{let r=n;d=Math.round(r.right+4),d+i.width>l&&(d=Math.round(r.left-i.width-4),d<s&&(d=Math.max(s,l-i.width-s)))}catch{d=n.left}d=Math.max(s,Math.min(d,l-i.width-s));let c=Math.round(n.top+(n.height-i.height)/2);c=Math.max(s,Math.min(c,Math.max(s,a-i.height-s))),this.menuElement.style.top=`${Math.round(c)}px`,this.menuElement.style.left=`${Math.round(d)}px`,this.menuElement.style.visibility="visible";try{console.debug("FieldsMenu positioned",{top:Math.round(c),left:Math.round(d)})}catch{}return{el:this.menuElement,refresh:this.refresh.bind(this)}}refresh(){if(this.menuElement){this.menuElement.innerHTML="",this.buildMenu();try{let e=this.anchorRectRef;if(!e&&this.anchorElementRef&&(e=this.anchorElementRef.getBoundingClientRect()),!e)return;let t=this.menuElement.getBoundingClientRect(),n=8,i=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight,l=Math.round(e.right+4);l+t.width>i&&(l=Math.round(e.left-t.width-4),l<n&&(l=Math.max(n,i-t.width-n))),l=Math.max(n,Math.min(l,i-t.width-n));let a=Math.round(e.top+(e.height-t.height)/2);a=Math.max(n,Math.min(a,Math.max(n,s-t.height-n))),this.menuElement.style.top=`${Math.round(a)}px`,this.menuElement.style.left=`${Math.round(l)}px`}catch{}}}hide(){this.menuElement&&(this.menuElement.remove(),this.menuElement=null),this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}buildMenu(){if(!this.menuElement)return;let e=document.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.padding="6px 12px",e.style.fontWeight="600",e.style.color="var(--vscode-descriptionForeground)",e.style.fontSize="12px",e.style.textTransform="uppercase";let t=document.createElement("i");t.className="octicon octicon-note",t.style.marginRight="8px",e.appendChild(t);let n=document.createElement("span");n.textContent="Fields",e.appendChild(n),this.menuElement.appendChild(e),this.addSeparator();let i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.padding="6px 12px",i.style.cursor="pointer",i.style.color="var(--vscode-menu-foreground)",i.innerHTML='<span style="margin-right:8px;font-weight:700">+</span><span>New field</span>',i.addEventListener("mouseenter",()=>{i.style.background="var(--vscode-menu-selectionBackground)",i.style.color="var(--vscode-menu-selectionForeground)"}),i.addEventListener("mouseleave",()=>{i.style.background="transparent",i.style.color="var(--vscode-menu-foreground)"}),i.addEventListener("click",()=>{this.options.onCreateField?.(),this.hide()}),this.menuElement.appendChild(i),this.addSeparator();let s=this.options.fields.filter(a=>this.options.visibleFieldIds.has(a.id)),l=this.options.fields.filter(a=>!this.options.visibleFieldIds.has(a.id));this.addSectionHeader("Visible fields"),s.length===0?this.addEmptyRow("No visible fields"):s.forEach(a=>this.addFieldRow(a,!0)),this.addSeparator(),this.addSectionHeader("Hidden fields"),l.length===0?this.addEmptyRow("No hidden fields"):l.forEach(a=>this.addFieldRow(a,!1))}addSectionHeader(e){if(!this.menuElement)return;let t=document.createElement("div");t.textContent=e,t.style.padding="6px 12px",t.style.fontSize="11px",t.style.fontWeight="600",t.style.color="var(--vscode-descriptionForeground)",t.style.textTransform="uppercase",this.menuElement.appendChild(t)}addEmptyRow(e){if(!this.menuElement)return;let t=document.createElement("div");t.textContent=e,t.style.padding="6px 12px",t.style.color="var(--vscode-menu-foreground)",t.style.opacity="0.8",this.menuElement.appendChild(t)}addFieldRow(e,t){if(!this.menuElement)return;let n=document.createElement("div");if(n.style.display="flex",n.style.alignItems="center",n.style.padding="6px 12px",n.style.cursor=e.locked?"default":"pointer",n.style.color="var(--vscode-menu-foreground)",e.locked&&(n.style.opacity="0.6"),t){let a=document.createElement("span");a.textContent="\u2713",a.style.marginRight="8px",a.style.color="var(--vscode-menu-selectionForeground)",n.appendChild(a)}else{let a=document.createElement("span");a.style.display="inline-block",a.style.width="14px",a.style.marginRight="8px",n.appendChild(a)}let i=this.getIconForField(e),s=document.createElement("span");s.innerHTML=i,s.style.marginRight="8px",s.style.display="inline-flex",s.style.alignItems="center",n.appendChild(s);let l=document.createElement("span");l.textContent=e.name,l.style.flex="1",l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",n.appendChild(l),e.locked||(n.addEventListener("mouseenter",()=>{n.style.background="var(--vscode-menu-selectionBackground)",n.style.color="var(--vscode-menu-selectionForeground)"}),n.addEventListener("mouseleave",()=>{n.style.background="transparent",n.style.color="var(--vscode-menu-foreground)"}),n.addEventListener("click",()=>{let a=!t;this.options.onToggleVisibility?.(e.id,a),a?this.options.visibleFieldIds.add(e.id):this.options.visibleFieldIds.delete(e.id),this.menuElement&&(this.menuElement.innerHTML="",this.buildMenu())})),this.menuElement.appendChild(n)}addSeparator(){if(!this.menuElement)return;let e=document.createElement("div");e.style.height="1px",e.style.background="var(--vscode-menu-separatorBackground)",e.style.margin="6px 0",this.menuElement.appendChild(e)}getIconForField(e){let t=(e.dataType||"").toString().toLowerCase();if(typeof window.getIconNameForDataType=="function"&&typeof window.getIconSvg=="function"){let n=window.getIconNameForDataType(t);return window.getIconSvg(n)}return e.iconClass?`<i class="${e.iconClass}"></i>`:"<span></span>"}},lt=de});var we={};ne(we,{GroupByMenu:()=>ce,default:()=>at});var ce,at,Ce=Q(()=>{"use strict";ve();ce=class{constructor(e){this.menuEl=null;this.backdropEl=null;this.anchor=null;this.anchorRect=void 0;this.options=e}show(e,t){this.hide(),this.anchor=e,this.anchorRect=t,this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top="0",this.backdropEl.style.left="0",this.backdropEl.style.right="0",this.backdropEl.style.bottom="0",this.backdropEl.style.zIndex="998",this.backdropEl.addEventListener("click",()=>this.hide()),document.body.appendChild(this.backdropEl);try{document.querySelectorAll('[data-menu-type="fields-menu"], [data-menu-type="group-by-menu"]').forEach(n=>n.remove())}catch{}return this.menuEl=document.createElement("div"),this.menuEl.className="group-by-menu",this.menuEl.dataset.menuType="group-by-menu",this.menuEl.style.position="absolute",this.menuEl.style.background="var(--vscode-menu-background)",this.menuEl.style.border="1px solid var(--vscode-menu-border)",this.menuEl.style.borderRadius="4px",this.menuEl.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuEl.style.minWidth="180px",this.menuEl.style.maxHeight="60vh",this.menuEl.style.overflowY="auto",this.menuEl.style.boxSizing="border-box",this.menuEl.style.padding="4px 0",this.menuEl.style.zIndex="1000",this.menuEl.style.fontSize="13px",document.body.appendChild(this.menuEl),this.buildMenuContent(),this.positionMenu(),{el:this.menuEl,refresh:this.refresh.bind(this)}}buildMenuContent(){if(!this.menuEl)return;this.menuEl.innerHTML="";let e=document.createElement("div");e.textContent=this.options.title||"Group by",e.style.padding="6px 12px",e.style.fontWeight="600",e.style.color="var(--vscode-descriptionForeground)",e.style.fontSize="12px",this.menuEl.appendChild(e),this.addSeparator();let t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.padding="6px 12px",t.style.cursor="pointer";let n=document.createElement("span");n.style.display="inline-flex",n.style.width="14px",n.style.marginRight="8px",n.style.alignItems="center",n.style.justifyContent="center",this.options.current||(n.textContent="\u2713",n.style.color="var(--vscode-menu-selectionForeground)"),t.appendChild(n);let i=document.createElement("span");i.textContent="No grouping",t.appendChild(i),t.addEventListener("mouseenter",()=>{t.style.background="var(--vscode-menu-selectionBackground)",t.style.color="var(--vscode-menu-selectionForeground)"}),t.addEventListener("mouseleave",()=>{t.style.background="transparent",t.style.color="var(--vscode-menu-foreground)"}),t.addEventListener("click",()=>{this.options.current=null,this.options.onSelect?.(null),this.refresh()}),this.menuEl.appendChild(t),this.addSeparator();let s=this.options.fields||[];try{this.options.items&&Array.isArray(this.options.items)&&this.options.items.length>0&&(s=(this.options.fields||[]).filter(l=>{try{let a=K.groupItems(this.options.items||[],l);return Array.isArray(a)&&a.length>0}catch{return!1}}))}catch{}(s||[]).forEach(l=>{let a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.padding="6px 12px",a.style.cursor="pointer";let o=document.createElement("span");o.style.display="inline-flex",o.style.width="14px",o.style.marginRight="8px",o.style.alignItems="center",o.style.justifyContent="center";let d=this.options.current?String(this.options.current).toLowerCase():null;d&&(String(l.id).toLowerCase()===d||String(l.name||"").toLowerCase()===d)&&(o.textContent="\u2713",o.style.color="var(--vscode-menu-selectionForeground)"),a.appendChild(o);let r=document.createElement("span");r.style.display="inline-flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.marginRight="8px";try{let h=(l.dataType||"").toString().toLowerCase();if(typeof window.getIconNameForDataType=="function"&&typeof window.getIconSvg=="function"){let f=window.getIconNameForDataType(h);r.innerHTML=window.getIconSvg(f)||"",r.querySelectorAll&&r.querySelectorAll("svg").forEach(S=>S.setAttribute&&S.setAttribute("fill","currentColor"))}else l.iconClass&&(r.innerHTML=`<i class="${l.iconClass}"></i>`)}catch{}a.appendChild(r);let u=document.createElement("div");u.textContent=l.name,u.style.flex="1",a.appendChild(u),a.addEventListener("mouseenter",()=>{a.style.background="var(--vscode-menu-selectionBackground)",a.style.color="var(--vscode-menu-selectionForeground)"}),a.addEventListener("mouseleave",()=>{a.style.background="transparent",a.style.color="var(--vscode-menu-foreground)"}),a.addEventListener("click",()=>{this.options.current=String(l.name),this.options.onSelect?.(String(l.name)),this.refresh()}),this.menuEl.appendChild(a)})}positionMenu(){if(!this.menuEl)return;let e=this.anchorRect;if(!e&&this.anchor&&(e=this.anchor.getBoundingClientRect()),!e)return;let t=this.menuEl.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,s=8,l=Math.round(e.top+(e.height-t.height)/2),a=Math.max(s,i-t.height-s);l=Math.max(s,Math.min(l,a));let o=Math.round(e.right+4);o+t.width>n&&(o=Math.round(e.left-t.width-4),o<s&&(o=Math.max(s,n-t.width-s))),this.menuEl.style.top=`${l}px`,this.menuEl.style.left=`${o}px`}refresh(){this.menuEl&&this.buildMenuContent()}addSeparator(){if(!this.menuEl)return;let e=document.createElement("div");e.style.height="1px",e.style.background="var(--vscode-menu-separatorBackground)",e.style.margin="6px 0",this.menuEl.appendChild(e)}hide(){this.menuEl&&(this.menuEl.remove(),this.menuEl=null),this.backdropEl&&(this.backdropEl.remove(),this.backdropEl=null)}},at=ce});var ze={};ne(ze,{SortByMenu:()=>ue,default:()=>ut});function dt(p,e=14){return window.getIconSvg?window.getIconSvg(p,{size:e}):""}function ct(p){return window.getIconNameForDataType?window.getIconNameForDataType(p):"note"}var ue,ut,Ge=Q(()=>{"use strict";ue=class{constructor(e){this.menuEl=null;this.backdropEl=null;this.anchor=null;this.anchorRect=void 0;this.options=e}show(e,t){this.hide(),this.anchor=e,this.anchorRect=t,this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top="0",this.backdropEl.style.left="0",this.backdropEl.style.right="0",this.backdropEl.style.bottom="0",this.backdropEl.style.zIndex="998",this.backdropEl.addEventListener("click",()=>this.hide()),document.body.appendChild(this.backdropEl);try{document.querySelectorAll('[data-menu-type="sort-by-menu"]').forEach(n=>n.remove())}catch{}return this.menuEl=document.createElement("div"),this.menuEl.className="sort-by-menu",this.menuEl.dataset.menuType="sort-by-menu",this.menuEl.style.position="absolute",this.menuEl.style.background="var(--vscode-menu-background)",this.menuEl.style.border="1px solid var(--vscode-menu-border)",this.menuEl.style.borderRadius="4px",this.menuEl.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuEl.style.minWidth="180px",this.menuEl.style.maxHeight="60vh",this.menuEl.style.overflowY="auto",this.menuEl.style.boxSizing="border-box",this.menuEl.style.padding="4px 0",this.menuEl.style.zIndex="1000",this.menuEl.style.fontSize="13px",document.body.appendChild(this.menuEl),this.buildMenuContent(),this.positionMenu(),{el:this.menuEl,refresh:this.refresh.bind(this)}}buildMenuContent(){if(!this.menuEl)return;this.menuEl.innerHTML="";let e=document.createElement("div");e.textContent="Sort by",e.style.padding="6px 12px",e.style.fontWeight="600",e.style.color="var(--vscode-descriptionForeground)",e.style.fontSize="12px",this.menuEl.appendChild(e),this.addSeparator(),this.addSortRow(null,"No sorting",null,!this.options.current),this.addSeparator(),(this.options.fields||[]).forEach(t=>{let n=ct(t.dataType||""),i=this.options.current===t.id||this.options.current===t.name;this.addSortRow(t.id,t.name,n,i)})}addSortRow(e,t,n,i){if(!this.menuEl)return;let s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.padding="6px 12px",s.style.cursor="pointer";let l=document.createElement("span");if(l.style.display="inline-flex",l.style.width="14px",l.style.marginRight="8px",l.style.alignItems="center",l.style.justifyContent="center",i&&(l.textContent="\u2713",l.style.color="var(--vscode-menu-selectionForeground)"),s.appendChild(l),n){let o=document.createElement("span");o.style.display="inline-flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.marginRight="8px";try{o.innerHTML=dt(n,14),o.querySelectorAll("svg").forEach(d=>d.setAttribute&&d.setAttribute("fill","currentColor"))}catch{}s.appendChild(o)}let a=document.createElement("span");a.textContent=t,a.style.flex="1",s.appendChild(a),s.addEventListener("mouseenter",()=>{s.style.background="var(--vscode-menu-selectionBackground)",s.style.color="var(--vscode-menu-selectionForeground)"}),s.addEventListener("mouseleave",()=>{s.style.background="transparent",s.style.color="var(--vscode-menu-foreground)"}),s.addEventListener("click",()=>{this.options.current=e,this.options.onSelect&&this.options.onSelect(e),this.refresh()}),this.menuEl.appendChild(s)}positionMenu(){if(!this.menuEl)return;let e=this.anchorRect;if(!e&&this.anchor&&(e=this.anchor.getBoundingClientRect()),!e)return;let t=this.menuEl.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,s=8,l=Math.round(e.top+(e.height-t.height)/2),a=Math.max(s,i-t.height-s);l=Math.max(s,Math.min(l,a));let o=Math.round(e.right+4);o+t.width>n&&(o=Math.round(e.left-t.width-4),o<s&&(o=Math.max(s,n-t.width-s))),this.menuEl.style.top=`${l}px`,this.menuEl.style.left=`${o}px`}refresh(){this.menuEl&&this.buildMenuContent()}addSeparator(){if(!this.menuEl)return;let e=document.createElement("div");e.style.height="1px",e.style.background="var(--vscode-menu-separatorBackground)",e.style.margin="6px 0",this.menuEl.appendChild(e)}hide(){this.menuEl&&(this.menuEl.remove(),this.menuEl=null),this.backdropEl&&(this.backdropEl.remove(),this.backdropEl=null)}},ut=ue});var Me={};ne(Me,{FieldSumMenu:()=>pe,default:()=>pt});var pe,pt,_e=Q(()=>{"use strict";pe=class{constructor(e){this.menuEl=null;this.backdropEl=null;this.anchor=null;this.options=e}show(e,t){return this.hide(),this.anchor=e,this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top="0",this.backdropEl.style.left="0",this.backdropEl.style.right="0",this.backdropEl.style.bottom="0",this.backdropEl.style.zIndex="998",this.backdropEl.addEventListener("click",()=>this.hide()),document.body.appendChild(this.backdropEl),this.menuEl=document.createElement("div"),this.menuEl.className="field-sum-menu",this.menuEl.dataset.menuType="field-sum-menu",this.menuEl.style.position="absolute",this.menuEl.style.background="var(--vscode-menu-background)",this.menuEl.style.border="1px solid var(--vscode-menu-border)",this.menuEl.style.borderRadius="4px",this.menuEl.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuEl.style.minWidth="200px",this.menuEl.style.maxHeight="60vh",this.menuEl.style.overflowY="auto",this.menuEl.style.padding="4px 0",this.menuEl.style.zIndex="1000",this.menuEl.style.fontSize="13px",document.body.appendChild(this.menuEl),this.buildMenu(),this.positionMenu(t),{el:this.menuEl,refresh:this.refresh.bind(this)}}buildMenu(){if(!this.menuEl)return;this.menuEl.innerHTML="";let e=document.createElement("div");e.textContent=this.options.title||"Field sum",e.style.padding="6px 12px",e.style.fontWeight="600",e.style.color="var(--vscode-descriptionForeground)",e.style.fontSize="12px",this.menuEl.appendChild(e);let t=(i,s,l,a)=>{let o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.padding="6px 12px",o.style.cursor="pointer";let d=document.createElement("span");if(d.style.display="inline-flex",d.style.width="14px",d.style.marginRight="8px",d.style.alignItems="center",d.style.justifyContent="center",a&&(d.textContent="\u2713",d.style.color="var(--vscode-menu-selectionForeground)"),o.appendChild(d),l){let r=document.createElement("span");r.style.display="inline-flex",r.style.marginRight="8px";try{r.innerHTML=window.getIconSvg?.(l)||"",r.querySelectorAll&&r.querySelectorAll("svg").forEach(u=>u.setAttribute&&u.setAttribute("fill","currentColor"))}catch{}o.appendChild(r)}let c=document.createElement("div");c.textContent=s,c.style.flex="1",o.appendChild(c),o.addEventListener("mouseenter",()=>{o.style.background="var(--vscode-menu-selectionBackground)",o.style.color="var(--vscode-menu-selectionForeground)"}),o.addEventListener("mouseleave",()=>{o.style.background="transparent",o.style.color="var(--vscode-menu-foreground)"}),o.addEventListener("click",r=>{r.stopPropagation();let u=new Set(this.options.current||[]);u.has(i)?u.delete(i):u.add(i),this.options.current=Array.from(u);try{typeof this.options.onChange=="function"&&this.options.onChange(this.options.current)}catch{}this.refresh()}),this.menuEl.appendChild(o)},n=new Set(this.options.current||[]);t("__count__","Count","check",n.has("__count__")),(this.options.fields||[]).forEach(i=>{let s=String(i.dataType||"").toLowerCase();(s==="number"||s==="numeric"||s.includes("num"))&&t(String(i.id),i.name,"number",n.has(String(i.id)))})}positionMenu(e){if(!this.menuEl||!this.anchor)return;let t=e;t||(t=this.anchor.getBoundingClientRect());let n=this.menuEl.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight,l=t.right+4;l+n.width>i&&(l=t.left-n.width-4,l<4&&(l=Math.max(4,Math.min(i-n.width-4,t.right-n.width)))),this.menuEl.style.top=`${Math.round(t.bottom+4)}px`,this.menuEl.style.left=`${Math.round(l)}px`}refresh(){this.menuEl&&this.buildMenu()}hide(){this.menuEl&&(this.menuEl.remove(),this.menuEl=null),this.backdropEl&&(this.backdropEl.remove(),this.backdropEl=null)}},pt=pe});var We={};ne(We,{AddItemMenu:()=>ke});var ke,je=Q(()=>{"use strict";ke=class{constructor(e){this.menuElement=null;this.backdropElement=null;this.options=e}show(){this.hide(),this.backdropElement=document.createElement("div"),this.backdropElement.style.position="fixed",this.backdropElement.style.top="0",this.backdropElement.style.left="0",this.backdropElement.style.right="0",this.backdropElement.style.bottom="0",this.backdropElement.style.zIndex="998",this.backdropElement.addEventListener("click",()=>this.hide()),document.body.appendChild(this.backdropElement),this.menuElement=document.createElement("div"),this.menuElement.className="add-item-menu",this.menuElement.style.position="absolute",this.menuElement.style.background="var(--vscode-menu-background)",this.menuElement.style.border="1px solid var(--vscode-menu-border)",this.menuElement.style.borderRadius="4px",this.menuElement.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuElement.style.minWidth="220px",this.menuElement.style.padding="4px 0",this.menuElement.style.zIndex="1000",this.menuElement.style.fontSize="13px",document.body.appendChild(this.menuElement),this.buildMenu();let e=this.options.anchorElement.getBoundingClientRect(),t=this.menuElement.getBoundingClientRect(),n=8,i=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight,l=e.bottom+n;e.bottom+t.height+n>s&&(e.top-t.height-n>=0?l=e.top-t.height-n:l=Math.max(n,Math.min(s-t.height-n,e.bottom+n)));let a=e.left;e.left+t.width+n>i&&(a=Math.max(n,e.right-t.width)),a=Math.max(n,Math.min(a,i-t.width-n)),this.menuElement.style.top=`${Math.round(l)}px`,this.menuElement.style.left=`${Math.round(a)}px`}hide(){this.menuElement&&(this.menuElement.remove(),this.menuElement=null),this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}buildMenu(){if(!this.menuElement)return;let e=(t,n,i,s)=>{let l=document.createElement("div");l.className="add-item-menu-item",l.style.display="flex",l.style.alignItems="center",l.style.padding="6px 12px",l.style.cursor="pointer",l.style.color="var(--vscode-menu-foreground)";let a=document.createElement("span");a.style.display="inline-flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.marginRight="8px",a.innerHTML=window.getIconSvg?.(t)||"",l.appendChild(a);let o=document.createElement("div");o.style.display="flex",o.style.flexDirection="column",o.style.flex="1";let d=document.createElement("div");if(d.textContent=n,d.style.fontWeight="500",o.appendChild(d),i){let c=document.createElement("div");c.textContent=i,c.style.fontSize="11px",c.style.color="var(--vscode-descriptionForeground)",o.appendChild(c)}l.appendChild(o),l.addEventListener("mouseenter",()=>{l.style.background="var(--vscode-menu-selectionBackground)",l.style.color="var(--vscode-menu-selectionForeground)"}),l.addEventListener("mouseleave",()=>{l.style.background="transparent",l.style.color="var(--vscode-menu-foreground)"}),l.addEventListener("click",()=>{s(),this.hide()}),this.menuElement.appendChild(l)};e("issue-opened","Create new issue","Create a project issue in a repository.",this.options.onCreateIssue),e("repo","Add item from repository","Attach an existing issue or pull request from a repo.",this.options.onAddFromRepo)}}});function L(p){return p?String(p).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function $(p){if(!p)return null;let e=String(p).trim();if(/^#?[0-9a-f]{3}$/i.test(e)||/^#?[0-9a-f]{6}$/i.test(e)||/^#?[0-9a-f]{8}$/i.test(e)){let i=e[0]==="#"?e.slice(1):e;return"#"+(i.length===8?i.substring(0,6):i)}let t={GRAY:"#848d97",RED:"#f85149",ORANGE:"#db6d28",YELLOW:"#d29922",GREEN:"#3fb950",BLUE:"#2f81f7",PURPLE:"#a371f7",PINK:"#db61a2",BLACK:"#000000",WHITE:"#ffffff"},n=e.toUpperCase();return t[n]||null}function Y(p,e){if(!p)return null;let t=p.replace("#",""),n=i=>parseInt(i,16);if(t.length===3){let i=n(t[0]+t[0]),s=n(t[1]+t[1]),l=n(t[2]+t[2]);return"rgba("+i+","+s+","+l+","+e+")"}if(t.length===6||t.length===8){let i=t.length===8?t.substring(0,6):t,s=n(t.substring(0,2)),l=n(i.substring(2,4)),a=n(i.substring(4,6));return"rgba("+s+","+l+","+a+","+e+")"}return null}function he(p){if(!p)return"#333333";let e=p.replace("#",""),t=l=>parseInt(l,16),n,i,s;if(e.length===3)n=t(e[0]+e[0]),i=t(e[1]+e[1]),s=t(e[2]+e[2]);else if(e.length===6||e.length===8){let l=e.length===8?e.substring(0,6):e;n=t(l.substring(0,2)),i=t(l.substring(2,4)),s=t(l.substring(4,6))}else return"#333333";return .2126*(n/255)+.7152*(i/255)+.0722*(s/255)>.6?"#111111":"#ffffff"}function j(p,e,t){try{window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"debugLog",level:"debug",viewKey:p,message:e,data:t})}catch{}try{console&&console.log&&console.log(e,t)}catch{}}function fe(p,e){p.innerHTML='<div class="title">'+e+'</div><div class="loading"><em>Loading...</em></div>'}function re(p,e,t){p.innerHTML='<div class="title">'+e+'</div><div style="color:var(--vscode-editor-foreground)">'+t+"</div>"}function ge(p){let e=document.createElement("button");return e.type="button",e.textContent="Load more",e.style.marginLeft="8px",e.style.border="1px solid var(--vscode-editorWidget-border)",e.addEventListener("click",()=>{p(),e.disabled=!0,e.textContent="Loading..."}),e}function Ie(p,e,t){if(window.filterBarHelper&&typeof window.filterBarHelper.create=="function")try{return window.filterBarHelper.create({parent:p,suffix:t.suffix||e,effFilter:typeof t.effFilter=="string"?t.effFilter:void 0,viewKey:e,step:t.step||50,onLoadMore:t.onLoadMore,onSave:t.onSave,onDiscard:t.onDiscard})}catch{return null}return null}function Ae(p,e,t,n="block"){try{let i=Array.from(p.querySelectorAll(e));for(let s=0;s<i.length;s++)try{let l=i[s],a=l.getAttribute("data-gh-item-id");l.style.display=t.has(String(a))?n:"none"}catch{}}catch{}}function U(p="div"){return document.createElement(p)}function Ze(p){let e=U("div");return e.className="group-color-dot",e.style.width="12px",e.style.height="12px",e.style.borderRadius="50%",e.style.backgroundColor=$(p?.color)||"gray",e.style.marginRight="8px",e}function Xe(p,e){let t=U("span");t.className="group-name",t.style.fontWeight="600",t.style.marginRight="8px";let n=p&&(p.name||p.title||p.label)?String(p.name||p.title||p.label):"Unassigned";return t.textContent=n,t}function Qe(p,e){let t=U("span"),n=$(e?.color)||"#848d97";return t.className="gh-count-pill",t.style.background=Y(n,.12)||"transparent",t.style.color=n,t.style.border="1px solid rgba(0,0,0,0.04)",t.style.borderRadius="10px",t.style.padding="2px 8px",t.style.fontSize="11px",t.style.fontWeight="600",t.textContent=String(p||0),t}function Ke(p,e){if(!p)return null;let t=p.id||p.name,n=0;for(let i of e||[]){let s=i&&(i.item||i);if(!s||!Array.isArray(s.fieldValues))continue;let l=s.fieldValues.find(a=>a.fieldId&&String(a.fieldId)===String(t)||a.fieldName&&String(a.fieldName)===String(p.name)||a.type==="number");if(l){let a=Number(l.number!=null?l.number:l.value!=null?l.value:NaN);isNaN(a)||(n+=a)}}if(n!==0){let i=U("div");return i.style.display="inline-block",i.style.padding="2px 8px",i.style.borderRadius="999px",i.style.border="1px solid var(--vscode-panel-border)",i.style.background="var(--vscode-input-background)",i.style.color="var(--vscode-foreground)",i.style.fontSize="12px",i.style.lineHeight="18px",i.style.marginLeft="8px",i.textContent=String(p.name||t)+": "+String(n),i}return null}function et(p,e){if(!p)return null;let t=[];Array.isArray(p.fieldValues)&&t.push(p.fieldValues),p.content&&Array.isArray(p.content.fieldValues)&&t.push(p.content.fieldValues),p.raw&&p.raw.itemContent&&Array.isArray(p.raw.itemContent.fieldValues)&&t.push(p.raw.itemContent.fieldValues);for(let n of t){let i=n.find(s=>String(s.fieldId)===String(e?.id)||String(s.fieldName)===String(e?.name)||String(s.type)==="parent_issue");if(i)return i.parent||i.parentIssue||i.issue||i.item||i.value||null}return p.parent||p.parentIssue||p.issue||p.item||p.value||null}function tt(p,e,t){if(!e||String(e.dataType||e.type||"").toLowerCase()!=="parent_issue")return null;try{let n=null;if(p&&p.option&&(n=p.option.parent||p.option.parentIssue||p.option.issue||n),!n&&p.items&&p.items.length>0){let r=p.items[0],u=r&&r.item?r.item:r;n=et(u,e)||n}if(!n)return null;let i=[],s=r=>{r!=null&&r!==""&&i.push(String(r))};s(n&&n.number),s(n&&n.id),s(n&&n.url),s(n&&n.title),p&&p.option&&(s(p.option.id),s(p.option.name),s(p.option.title));let l=(t||[]).find(r=>{let u=r&&(r.content||r.raw&&r.raw.itemContent)||r||null;if(!u)return!1;let h=[],f=S=>{S!=null&&S!==""&&h.push(String(S))};f(u.number),f(u.id),f(u.url),f(u.title),f(u.name),u.raw&&(f(u.raw.number),f(u.raw.id),f(u.raw.url)),u.itemContent&&typeof u.itemContent=="object"&&(f(u.itemContent.number),f(u.itemContent.id),f(u.itemContent.url),f(u.itemContent.title),f(u.itemContent.name));for(let S of i)for(let C of h)if(S&&C&&String(S)===String(C))return!0;return!1}),a=0,o=0,d=p.items||[],c=r=>{try{let u=r&&(r.content||r.raw&&r.raw.itemContent);if(u){let h=(u.state||(u.merged?"MERGED":void 0)||"").toString().toUpperCase();if(h==="CLOSED"||h==="MERGED")return!0}if(Array.isArray(r.fieldValues)){if(r.fieldValues.find(S=>S&&S.type==="single_select"&&S.option&&S.option.name&&["done","closed","completed","finished"].includes(String(S.option.name).toLowerCase())))return!0;let f=r.fieldValues.find(S=>S&&(String(S.fieldName||"").toLowerCase().includes("progress")||String(S.fieldName||"").toLowerCase().includes("percent")));if(f&&f.number!=null&&Number(f.number||0)>=100)return!0}}catch{}return!1};for(let r of d){let u=r.item||r;u&&(o++,c(u)&&a++)}if(o>0){let r=Math.round(a/o*100),u=U("div");u.className="group-progress",u.style.display="inline-flex",u.style.alignItems="center",u.style.gap="8px",u.style.marginLeft="8px";let h=U("div");h.style.display="inline-block",h.style.width="120px",h.style.height="12px",h.style.background="transparent",h.style.border="1px solid var(--vscode-focusBorder)",h.style.borderRadius="6px",h.style.overflow="hidden";let f=U("div");return f.style.height="100%",f.style.width=String(r)+"%",f.style.background="var(--vscode-focusBorder)",h.appendChild(f),u.appendChild(h),u}}catch{}return null}function nt(p,e){if(!e)return null;try{if(String(e.dataType||e.type||"").toLowerCase()!=="iteration")return null;let n=p.option||{},i=null,s=n.startDate||n.start&&n.startDate||null,l=n.duration||n.length||null;if(s&&l)try{let a=new Date(s),o=Number(l)||0,d=new Date(a.getTime()+o*24*60*60*1e3),c=a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),r=d.toLocaleDateString("en-US",{month:"short",day:"numeric"});i=`${c} \u2014 ${r}`}catch{i=null}if(i||(i=n.title||n.name?String(n.title||n.name):null),i){let a=U("div");return a.style.color="var(--vscode-descriptionForeground)",a.style.fontSize="12px",a.style.marginLeft="8px",a.textContent=String(i).slice(0,120),a}}catch{}return null}function it(p,e=14){return window.getIconSvg?window.getIconSvg(p,{size:e}):""}function be(p,e,t,n,i){let s=n&&(n.dataType||n.type)?n:(Array.isArray(p)?p.find(c=>String(c.id)===String(n?.id)||String(c.name)===String(n?.name)):n)||n,l=document.createElement("div");if(l.className="group-header group-header-div",l.style.display="flex",l.style.alignItems="center",l.style.padding="8px",l.style.background="var(--vscode-sideBar-background)",!i?.hideToggle){let c=document.createElement("span");c.className="group-toggle",c.style.cursor="pointer",c.style.marginRight="8px";try{c.innerHTML=it("triangle-down",16)}catch{}l.appendChild(c)}let a=Ze(t.option||{});a.classList.add("board-card-color-dot"),l.appendChild(a);let o=Xe(t.option||{},s);o.classList.add("board-card-title"),l.appendChild(o);let d;try{if(i&&Object.prototype.hasOwnProperty.call(i,"groupDivisors"))d=i.groupDivisors;else if(i&&i.viewKey)try{let c=window.__viewStates||{};d=c[i.viewKey]?c[i.viewKey].groupDivisors:void 0}catch{d=void 0}}catch{d=void 0}if(Array.isArray(d)){if(d.find(c=>String(c)==="__count__")){let c=Qe(t.items&&t.items.length||0,t.option||{});c.classList.add("board-card-count"),l.appendChild(c)}try{let c=(p||[]).filter(r=>String((r.dataType||r.type||"").toLowerCase())==="number"||String(r.name||"").toLowerCase().includes("estimate"));for(let r of d){if(String(r)==="__count__")continue;let u=c.find(h=>String(h.id)===String(r)||String(h.name)===String(r));if(u){let h=Ke(u,t.items||[]);h&&(h.classList.add("board-card-estimate"),l.appendChild(h))}}}catch{}}try{let c=t&&t.option?t.option:{};if(c&&(c.avatarUrl||c.avatar||c.imageUrl||c.login)||c&&c.name&&String((s&&(s.dataType||s.type)||"").toLowerCase())==="assignees"){let u=c.avatarUrl||c.avatar||c.imageUrl||null;if(!u&&Array.isArray(t.items))for(let h of t.items||[]){let f=h&&(h.item||h);if(!f||!Array.isArray(f.fieldValues))continue;let S=f.fieldValues.find(C=>C&&(C.type==="assignees"||String(C.fieldId)===String(s&&s.id)));if(S&&S.assignees&&Array.isArray(S.assignees)){let C=S.assignees.find(x=>String(x.login||x.name)===String(c.name||c.id));if(C&&(C.avatarUrl||C.avatar)){u=C.avatarUrl||C.avatar;break}}}if(u&&a&&a.parentNode){let h=document.createElement("span");h.innerHTML='<span title="'+L(c&&(c.login||c.name)||"Assignee")+'" style="display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url('+L(u)+');border:2px solid var(--vscode-editor-background)"></span>',a.parentNode.replaceChild(h,a)}}}catch{}try{t&&t.option&&(t.option.name==="Unassigned"||t.option.title==="Unassigned")&&o&&(o.textContent="No "+(s&&(s.name||s.title)?s.name||s.title:"value"))}catch{}try{let c=tt(t,s,e);c&&l.appendChild(c)}catch{}try{let c=nt(t,s);c&&l.appendChild(c)}catch{}return l}ve();var oe=class{constructor(e,t,n,i,s,l){this.fields=e;this.allItems=t;this.visibleFieldIds=n;this.onFilter=i;this.onAction=s;this.groupDivisors=l;this.handlePillClick=this.handlePillClick.bind(this)}handlePillClick(e,t,n){if(e.stopPropagation(),e.preventDefault(),this.onFilter){let i=n.includes(" ")?`"${n.replace(/"/g,'\\"')}"`:n,s=t.includes(" ")?`"${t.replace(/"/g,'\\"')}"`:t;this.onFilter(`${s}:${i}`)}}getIconSvg(e,t=14,n){return window.getIconSvg?window.getIconSvg(e,{size:t,fill:n}):""}getEstimateField(){return this.fields.find(e=>e.dataType&&String(e.dataType).toLowerCase()==="number"&&String(e.name||"").toLowerCase().includes("estimate"))||this.fields.find(e=>e.dataType&&String(e.dataType).toLowerCase()==="number")}sumEstimate(e){let t=this.getEstimateField();if(!t)return 0;let n=0;for(let i of e){if(!i||!Array.isArray(i.fieldValues))continue;let s=i.fieldValues.find(l=>l.fieldId&&String(l.fieldId)===String(t.id)||l.fieldName&&String(l.fieldName).toLowerCase().includes("estimate")||l.type==="number");if(s){let l=Number(s.number!=null?s.number:s.value!=null?s.value:NaN);isNaN(l)||(n+=l)}}return n}formatEstimate(e){return isFinite(e)?String(e):""}groupItemsByColumn(e,t){let n=new Map,i=String(t.dataType||"").toLowerCase(),s=[];i==="single_select"&&Array.isArray(t.options)?s=t.options:i==="iteration"&&t.configuration?.iterations&&(s=t.configuration.iterations.map(l=>({id:l.id,name:l.title,title:l.title,color:l.color||null,startDate:l.startDate,duration:l.duration})));for(let l of s){let a=String(l.id||l.name||"");a&&n.set(a,{option:l,items:[]})}n.set("__no_value__",{option:{id:"__no_value__",name:`No ${t.name}`,color:null},items:[]});for(let l of e){if(!l||!Array.isArray(l.fieldValues)){n.get("__no_value__").items.push(l);continue}let a=l.fieldValues.find(d=>String(d.fieldId)===String(t.id)||String(d.fieldName).toLowerCase()===String(t.name).toLowerCase()),o="__no_value__";if(a){if(i==="single_select"){let d=a.optionId||a.option&&a.option.id,c=a.name||a.option&&a.option.name;if(d&&n.has(String(d)))o=String(d);else if(c){for(let[r,u]of n)if(String(u.option.name).toLowerCase()===String(c).toLowerCase()){o=r;break}}}else if(i==="iteration"){let d=a.iterationId||a.iteration&&a.iteration.id||a.id,c=a.title||a.iteration&&a.iteration.title;if(d&&n.has(String(d)))o=String(d);else if(c){for(let[r,u]of n)if(String(u.option.title).toLowerCase()===String(c).toLowerCase()||String(u.option.name).toLowerCase()===String(c).toLowerCase()){o=r;break}}}}n.has(o)?n.get(o).items.push(l):n.get("__no_value__").items.push(l)}return n}getIterationRange(e){let t=e.startDate||e.start,n=e.duration||e.length;if(!t||!n)return null;try{let i=new Date(t),s=new Date(i.getTime()+Number(n)*24*60*60*1e3),l=a=>a.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${l(i)} \u2014 ${l(s)}`}catch{return null}}renderCard(e,t,n){let i=document.createElement("div");i.className="board-card",i.setAttribute("data-column-id",String(e.id||e.name||"")),i.style.width="350px",i.style.minWidth="350px",i.style.maxWidth="350px",i.style.background="var(--vscode-editorWidget-background)",i.style.border="1px solid var(--vscode-editorWidget-border)",i.style.borderRadius="0",i.style.display="flex",i.style.flexDirection="column",i.style.flexShrink="0";let s=this.renderColumnHeaderOnly(e,t,n);s.style.borderBottom="1px solid var(--vscode-editorWidget-border)",i.appendChild(s);let l=document.createElement("div");l.className="board-card-items",l.style.padding="8px",l.style.overflowY="auto",l.style.flex="1",l.style.minHeight="0";let a=$(e.color)||"#666666";for(let d of t){let c=this.renderItem(d,n,a);l.appendChild(c)}i.appendChild(l);let o=this.renderColumnFooterOnly(e,n);return i.appendChild(o),i}renderColumnHeaderOnly(e,t,n){let i=String(n.dataType||"").toLowerCase(),s=document.createElement("div");s.className="board-card-header",s.style.padding="12px",s.style.background="var(--vscode-sideBar-background)",s.style.flexShrink="0";let l=be(this.fields,this.allItems,{option:e,items:t},n,{hideToggle:!0,groupDivisors:this.groupDivisors});l.classList.add("board-card-header-row");let a=l.querySelector(".group-color-dot");a&&a.classList.add("board-card-color-dot");let o=l.querySelector(".group-name");o&&o.classList.add("board-card-title");let d=l.querySelector(".gh-count-pill");d&&d.classList.add("board-card-count");let c=Array.from(l.children);for(let r of c)try{r.textContent&&r.textContent.trim().startsWith("Estimate:")&&r.classList.add("board-card-estimate")}catch{}if(s.appendChild(l),i==="single_select"&&e.description){let r=document.createElement("div");r.className="board-card-description",r.style.fontSize="12px",r.style.color="var(--vscode-descriptionForeground)",r.style.marginTop="4px",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.style.whiteSpace="nowrap",r.textContent=String(e.description).slice(0,120),s.appendChild(r)}if(i==="iteration"){let r=l.lastElementChild;r&&r.textContent&&r.textContent.indexOf("\u2014")!==-1&&r.classList.add("board-card-description")}return s}renderColumnFooterOnly(e,t){let n=document.createElement("div");n.className="board-card-footer",n.style.padding="8px 12px",n.style.borderTop="1px solid var(--vscode-editorWidget-border)",n.style.cursor="pointer",n.style.userSelect="none",n.style.flexShrink="0",n.style.transition="background-color 0.15s ease",n.setAttribute("data-column-field-id",String(t.id||"")),n.setAttribute("data-column-value-id",String(e.id||"")),n.setAttribute("data-column-value-name",String(e.name||e.title||""));let i=document.createElement("span");return i.textContent="+ Add item",i.style.opacity="0.9",i.style.fontSize="13px",n.appendChild(i),n.addEventListener("mouseenter",()=>{n.style.backgroundColor="var(--vscode-list-hoverBackground)"}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor="transparent"}),n.addEventListener("click",s=>{s.stopPropagation(),this.onAction&&this.onAction("add-item-to-column",{columnFieldId:t.id,columnValueId:e.id,columnValueName:e.name||e.title},{anchorElement:n})}),n}renderItem(e,t,n){let i=document.createElement("div");i.className="board-item",i.setAttribute("data-gh-item-id",String(e?.id||"")),i.style.padding="10px",i.style.border="1px solid var(--vscode-editorWidget-border)",i.style.borderRadius="0",i.style.marginBottom="8px",i.style.background="var(--vscode-editor-background)",i.style.cursor="pointer",i.style.position="relative";let s=e?.content||e?.raw&&e.raw.itemContent||null,l=e?.content&&(e.content.title||e.content.name)||e?.title||e?.raw&&e.raw.title||"Untitled",a=e?.content&&e.content.number||e?.raw&&e.raw.itemContent&&e.raw.itemContent.number||null,o=e?.content&&e.content.url||e?.raw&&e.raw.itemContent&&e.raw.itemContent.url||null,d="issue-opened",c=!1;if(s){let v=String(s.__typename||"").toLowerCase(),w=String(s.state||"").toUpperCase();c=v.includes("pullrequest");let E=w==="CLOSED",_=s.merged===!0,H=s.isDraft===!0;c?_?d="git-merge":E?d="git-pull-request-closed":H?d="git-pull-request-draft":d="git-pull-request":E?d="issue-closed":H?d="issue-draft":d="issue-opened"}let r=!1;try{let v=s&&s.issueDependenciesSummary?s.issueDependenciesSummary:null;r=(v&&typeof v.blockedBy=="number"?v.blockedBy:0)>0}catch{}let u=n,h=this.extractAssignees(e),f=document.createElement("div");f.style.display="flex",f.style.flexDirection="column",f.style.gap="6px";let S=document.createElement("div");S.style.display="flex",S.style.justifyContent="flex-start",S.style.alignItems="center";let C=this.getIconSvg(d,16,u),x=r?`<span class='blocked-overlay' style='position:absolute;right:-3px;bottom:-3px;width:14px;height:14px;border-radius:999px;background:var(--vscode-editor-background);display:flex;align-items:center;justify-content:center;box-sizing:border-box;'>${this.getIconSvg("blocked",9,"#dc3545")}</span>`:"";S.innerHTML=`<span style="position:relative;display:inline-flex;align-items:center;justify-content:center;color:${L(u)};">${C}${x}</span>`;let m=document.createElement("span");m.className="board-item-menu-btn",m.setAttribute("data-item-id",String(e?.id||"")),m.style.marginLeft="6px",m.style.color="var(--vscode-descriptionForeground)",m.innerHTML=this.getIconSvg("kebab-horizontal",14)||"<span>...</span>",S.appendChild(m),f.appendChild(S);let y=document.createElement("div");y.style.fontWeight="500",y.style.lineHeight="1.3",y.innerHTML=`${L(l)}${a?` <span style="color:var(--vscode-descriptionForeground);font-weight:400;">#${L(String(a))}</span>`:""}`,f.appendChild(y);let g=this.renderFieldValues(e,t);g&&f.appendChild(g);let b=this.renderSubIssuesProgress(e);if(b&&f.appendChild(b),i.appendChild(f),h&&h.length>0){let v=this.renderAssigneeAvatars(h);v.style.position="absolute",v.style.top="10px",v.style.right="10px",i.appendChild(v)}return o&&(i.setAttribute("data-gh-open",o),i.title=`${l}${a?` #${a}`:""}`),i}getFieldName(e){if(e.fieldName)return e.fieldName;if(e.field?.name)return e.field.name;if(e.fieldId&&this.fields){let t=this.fields.find(n=>String(n.id)===String(e.fieldId));if(t&&t.name)return t.name}return"Field"}extractAssignees(e){if(!e)return[];if(e.content?.assignees?.nodes)return e.content.assignees.nodes;if(e.content?.assignees&&Array.isArray(e.content.assignees))return e.content.assignees;if(Array.isArray(e.fieldValues)){let t=e.fieldValues.find(n=>n?.type==="assignees"||n?.assignees);if(t?.assignees)return Array.isArray(t.assignees)?t.assignees:[]}return[]}extractLinkedPullRequests(e){if(console.log("[BoardCard] extractLinkedPullRequests called with item:",e?.id,"fieldValues:",e?.fieldValues?.length),!e)return[];if(Array.isArray(e.fieldValues)){console.log("[BoardCard] Checking fieldValues, types:",e.fieldValues.map(n=>n?.type));let t=e.fieldValues.find(n=>n?.type==="linked_pull_requests"||n?.type==="pull_request");if(t){if(console.log("[BoardCard] Found PR field value:",t),Array.isArray(t.pullRequests))return console.log("[BoardCard] Returning direct array:",t.pullRequests),t.pullRequests;if(t.pullRequests?.nodes&&Array.isArray(t.pullRequests.nodes))return console.log("[BoardCard] Returning nodes array:",t.pullRequests.nodes),t.pullRequests.nodes}else console.log("[BoardCard] No PR field found in fieldValues")}if(e.content?.linkedPullRequests){if(Array.isArray(e.content.linkedPullRequests))return e.content.linkedPullRequests;if(Array.isArray(e.content.linkedPullRequests.nodes))return e.content.linkedPullRequests.nodes}return console.log("[BoardCard] Returning empty array for linkedPRs"),[]}renderAssigneeAvatars(e){let t=document.createElement("div");t.className="board-item-assignees",t.style.display="flex",t.style.alignItems="center";let n=3;if(e.slice(0,n).forEach((s,l)=>{let a=s.login||s.name||"Unknown",o=s.avatarUrl||"";if(!o)return;let d=document.createElement("img");d.src=o,d.className="board-pill",d.setAttribute("data-filter-field","Assignees"),d.setAttribute("data-filter-value",a),d.title=a,d.style.width="16px",d.style.height="16px",d.style.borderRadius="50%",d.style.border="1px solid var(--vscode-editorWidget-border)",d.style.cursor="pointer",d.style.marginLeft=l===0?"0":"-6px",d.style.zIndex=String(n-l),d.style.position="relative",t.appendChild(d)}),e.length>n){let s=document.createElement("span");s.className="board-pill",s.setAttribute("data-filter-field","Assignees"),s.style.marginLeft="-6px",s.style.width="22px",s.style.height="22px",s.style.borderRadius="50%",s.style.background="var(--vscode-badge-background)",s.style.color="var(--vscode-badge-foreground)",s.style.fontSize="10px",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.fontWeight="bold",s.style.lineHeight="1",s.textContent=`+${e.length-n}`,s.title="More assignees",t.appendChild(s)}return t}renderFieldValues(e,t){if(!e||!Array.isArray(e.fieldValues))return null;let n=["sub_issues_progress","assignees","title","status"],i=["sub issues progress","assignees","title"],s=t?.id,l=[],a=this.extractLinkedPullRequests(e);if(a.length>0){let d=a.map(c=>{let r=L(String(c.number||"")),u=L(c.title||""),h=L(c.url||""),f=c.state_color||c.color||c.colour||c.state||null,S=$(f)||null,C=!!(S&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(S)),x=S||"#999999",m=C&&Y(S,.12)||"rgba(0,0,0,0.06)",y=he(S)||"#333333",g=!!c.isDraft,b=c.state&&String(c.state).toUpperCase()||"",v=!!c.merged,w=!v&&b==="CLOSED",E="git-pull-request";v?E="git-merge":w?E="git-pull-request-closed":g&&(E="git-pull-request-draft");let _=this.getIconSvg(E,12),H=u?L(`#${c.number} ${c.title}`):L(`#${c.number}`);return`<a href="${h}" title="${H}" data-gh-open="${h}" style="cursor:pointer;text-decoration:none;color:inherit"><span class="board-pill" style="display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid ${L(x)};background:${L(m)};color:${L(y)};font-size:12px;line-height:18px;overflow:hidden;box-sizing:border-box;max-width:160px"><span style="position:relative;display:inline-flex;align-items:center;justify-content:center">${_}</span><span style="flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">#${r}</span></span></a>`}).join("");l.push(d)}for(let d of e.fieldValues){if(!d)continue;let c=String(d.type||"").toLowerCase(),r=String(d.fieldName||d.field?.name||"").toLowerCase();if(n.includes(c)||i.includes(r)||s&&String(d.fieldId)===String(s))continue;if(this.visibleFieldIds&&this.visibleFieldIds.length>0){let f=d.fieldId||d.field&&d.field.id;if(f&&!this.visibleFieldIds.includes(String(f)))continue}if(!this.hasFieldValue(d))continue;let h=this.renderFieldValue(d);h&&l.push(h)}if(l.length===0)return null;let o=document.createElement("div");return o.className="board-item-fields",o.style.display="flex",o.style.flexWrap="wrap",o.style.gap="4px",o.style.marginTop="4px",o.innerHTML=l.join(""),o}hasFieldValue(e){switch(String(e.type||"").toLowerCase()){case"single_select":return!!(e.option?.name||e.name);case"iteration":return!!(e.iteration?.title||e.title);case"labels":return Array.isArray(e.labels)&&e.labels.length>0;case"milestone":return!!e.milestone?.title;case"repository":return!!(e.repository?.nameWithOwner||e.repository?.name);case"parent_issue":return!!(e.parent||e.parentIssue);case"number":return e.number!=null&&e.number!=="";case"date":return!!(e.date||e.startDate);case"text":return!!e.text;case"pull_request":case"linked_pull_requests":return!!(e.pullRequests?.nodes?.length>0||Array.isArray(e.pullRequests)&&e.pullRequests.length>0);default:return!1}}renderFieldValue(e){switch(String(e.type||"").toLowerCase()){case"single_select":return this.renderSingleSelectPill(e);case"labels":return this.renderLabelsPills(e);case"iteration":return this.renderIterationPill(e);case"milestone":return this.renderMilestonePill(e);case"repository":return this.renderRepositoryPill(e);case"parent_issue":return this.renderParentIssuePill(e);case"number":return this.renderNumberPill(e);case"text":return this.renderTextPill(e);case"date":return this.renderDatePill(e);case"pull_request":case"linked_pull_requests":return this.renderLinkedPullRequests(e);default:return""}}renderSingleSelectPill(e){let t=e.option?.name||e.name||"";if(!t)return"";let n=e.option?.color||e.color||null,i=$(n)||null,s=!!(i&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(i)),l=i||"#999999",a=s&&Y(i,.12)||"rgba(0,0,0,0.06)",o=i||"#333333",d=this.getFieldName(e);return`<span class="board-pill" data-filter-field="${L(d)}" data-filter-value="${L(t)}" style="display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid ${L(l)};background:${L(a)};color:${L(o)};font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;" title="${L(t)}">${L(t)}</span>`}renderLabelsPills(e){let t=e.labels||[];return!t||t.length===0?"":t.slice(0,3).map(n=>{let i=n.name||"",s=n.color||n.colour||null,l=$(s)||null,a=!!(l&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(l)),o=l||"#999999",d=a&&Y(l,.12)||"rgba(0,0,0,0.06)",c=l||"#333333";return`<span class="board-pill" data-filter-field="Labels" data-filter-value="${L(i)}" style="display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid ${L(o)};background:${L(d)};color:${L(c)};font-size:11px;line-height:16px;white-space:nowrap;max-width:80px;overflow:hidden;text-overflow:ellipsis;">${L(i)}</span>`}).join("")}renderIterationPill(e){let n=(e.iteration||e)?.title||"";if(!n)return"";let i=this.getIconSvg("iterations",12);return`<span class="board-pill" data-filter-field="Iteration" data-filter-value="${L(n)}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;" title="${L(n)}">${i}<span>${L(n)}</span></span>`}renderMilestonePill(e){let t=e.milestone?.title||"";if(!t)return"";let n=this.getIconSvg("milestone",12);return`<span class="board-pill" data-filter-field="Milestone" data-filter-value="${L(t)}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:100px;overflow:hidden;text-overflow:ellipsis;" title="${L(t)}">${n}<span>${L(t)}</span></span>`}renderRepositoryPill(e){let t=e.repository||e,n=t?.nameWithOwner||t?.name||"";if(!n)return"";let i=this.getIconSvg("repo",12);return`<span class="board-pill" data-filter-field="repo" data-filter-value="${L(n)}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;" title="${L(n)}">${i}<span style="max-width:100px;overflow:hidden;text-overflow:ellipsis;">${L(n)}</span></span>`}renderNumberPill(e){let t=e.number;if(t==null||t==="")return"";let n=this.getFieldName(e);return`<span class="board-pill" data-filter-field="${L(n)}" data-filter-value="${L(String(t))}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;"><span style="color:var(--vscode-descriptionForeground);">${L(n)}:</span><span>${L(String(t))}</span></span>`}renderTextPill(e){let t=e.text||"";if(!t)return"";let n=this.getFieldName(e),i=String(t).slice(0,30);return`<span class="board-pill" data-filter-field="${L(n)}" data-filter-value="${L(t)}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;max-width:150px;overflow:hidden;text-overflow:ellipsis;" title="${L(t)}"><span style="color:var(--vscode-descriptionForeground);">${L(n)}:</span><span>${L(i)}</span></span>`}renderDatePill(e){let t=e.date||e.startDate||null;if(!t)return"";let n=this.getFieldName(e),i=t,s=t;try{let a=new Date(t);isNaN(a.getTime())||(i=a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=a.toISOString().split("T")[0])}catch{}let l=this.getIconSvg("calendar",12);return`<span class="board-pill" data-filter-field="${L(n)}" data-filter-value="${L(String(s))}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;"><span style="color:var(--vscode-descriptionForeground);">${L(n)}:</span>${l}<span>${L(String(i))}</span></span>`}renderParentIssuePill(e){let t=e.parent||e.parentIssue||e.issue||null;if(!t)return"";let n=t.title||t.name||"",i=t.number||"",s=t.url||t.html_url||"";if(!n&&!i)return"";let l="#999999",a=!1,o=["done","closed","completed","finished"],d=null;if(this.allItems&&this.allItems.length>0){let b=t.id||t.raw&&t.raw.id,v=t.url||t.html_url||t.raw&&t.raw.url,w=t.number||t.raw&&t.raw.number;if(d=this.allItems.find(E=>{let _=E.content||E.raw&&E.raw.itemContent;if(!_)return!1;if(b&&String(_.id)===String(b)||v&&String(_.url)===String(v))return!0;if(w&&String(_.number)===String(w)){let H=_.repository?.nameWithOwner||_.repository?.name,F=t.repository?.nameWithOwner||t.repository?.name;return!(H&&F&&H!==F)}return!1}),d&&Array.isArray(d.fieldValues)){let E=d.fieldValues.find(_=>_&&_.type==="single_select"&&(_.raw&&_.raw.field&&String(_.raw.field.name||"").toLowerCase()==="status"||_.fieldName&&String(_.fieldName||"").toLowerCase()==="status"||_.field&&_.field.name&&String(_.field.name||"").toLowerCase()==="status"));if(E){let _=E.option&&(E.option.color||E.option.id||E.option.name)||E.raw&&E.raw.color||null;if(_&&(l=$(_)||l),E.option&&E.option.name){let H=String(E.option.name).toLowerCase();o.includes(H)&&(a=!0)}}}}l==="#999999"&&(t.statusColor?l=$(t.statusColor)||l:t.color&&(l=$(t.color)||l));let c=l,r=!!(c&&/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(c)),u=c||"#999999",h=r&&Y(c,.12)||"rgba(0,0,0,0.06)",f=he(c)||"#333333",S=String(t.state||"").toUpperCase()==="CLOSED";a&&(S=!0);let C=!1;try{let b=!!(t.labels&&Array.isArray(t.labels)&&t.labels.some(w=>String(w.name||"").toLowerCase()==="blocked")),v=0;d&&d.content&&d.content.issueDependenciesSummary&&(v=d.content.issueDependenciesSummary.blockedBy||0),(b||v>0)&&(C=!0)}catch{}let x=S?"issue-closed":"issue-opened",m=this.getIconSvg(x,12,c),y=C?`<span class='blocked-overlay' style='position:absolute;right:-3px;bottom:-3px;width:14px;height:14px;border-radius:999px;background:var(--vscode-editor-background);display:flex;align-items:center;justify-content:center;box-sizing:border-box;'>${this.getIconSvg("blocked",9,"#dc3545")}</span>`:"",g=`<span class="board-pill" data-filter-field="parent" data-filter-value="${L(n)}" style="display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border:1px solid ${L(u)};border-radius:999px;background:${L(h)};color:${L(f)};font-size:11px;line-height:16px;max-width:150px;" title="${L(n+(i?" #"+i:""))}"${s?` data-gh-open="${L(s)}"`:""}>`;return g+=`<span style="position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;">${m}${y}</span>`,g+=`<span style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${L(n)}</span>`,i&&(g+=`<span style="flex-shrink:0;color:var(--vscode-descriptionForeground);">#${L(String(i))}</span>`),g+="</span>",g}renderLinkedPullRequests(e){let t=e.pullRequests?.nodes||[];return!t||t.length===0?"":t.map(n=>{let i=n.title||"#"+n.number||"PR",s=this.getIconSvg("git-pull-request",12);return`<span class="board-pill" data-filter-field="Linked Pull Requests" data-filter-value="${L(i)}" style="display:inline-flex;align-items:center;gap:4px;padding:2px 6px;border-radius:999px;border:1px solid var(--vscode-editorWidget-border);background:var(--vscode-input-background);font-size:11px;line-height:16px;white-space:nowrap;margin-right:2px;max-width:100px;overflow:hidden;text-overflow:ellipsis;" title="${L(i)}">${s}<span>${L(i)}</span></span>`}).join("")}renderSubIssuesProgress(e){if(!e||!Array.isArray(e.fieldValues)||!(this.fields&&this.fields.some(d=>{let c=String(d.dataType||d.type||"").toLowerCase(),r=String(d.name||"").toLowerCase();return c==="parent_issue"||c==="sub_issues_progress"||r==="parent issue"||r==="sub-issues"||r==="sub-issue"||r==="tracks"||r==="tracked by"?this.visibleFieldIds?this.visibleFieldIds.includes(String(d.id)):!0:!1})))return null;let n=e.fieldValues.find(d=>d?.type==="sub_issues_progress");if(!n||!n.total||Number(n.total)<=0)return null;let i=Math.max(0,Math.floor(Number(n.total)||0)),s=Math.max(0,Math.floor(Number(n.done||0)));if(i===0)return null;let l=Math.round(s/i*100),a=document.createElement("div");a.className="board-item-progress board-pill",a.setAttribute("data-filter-field","parent");let o=e.content&&(e.content.title||e.content.name)||e.title||e.raw&&e.raw.title||"";return a.setAttribute("data-filter-value",o),a.style.marginTop="6px",a.title=`${s} of ${i} sub-issues complete (${l}%) -- Click to filter by this parent`,a.innerHTML=`
      <div style="display:flex;align-items:center;gap:6px;width:100%;">
        <span style="font-size:11px;color:var(--vscode-descriptionForeground);font-variant-numeric:tabular-nums;min-width:30px;">${s}/${i}</span>
        <div style="flex:1;height:8px;border-radius:4px;border:1px solid var(--vscode-focusBorder);overflow:hidden;background:transparent;">
          <div style="height:100%;width:${l}%;background:var(--vscode-focusBorder);"></div>
        </div>
        <span style="font-size:11px;color:var(--vscode-descriptionForeground);font-variant-numeric:tabular-nums;min-width:28px;text-align:right;">${l}%</span>
      </div>
    `,a}groupItemsBySwimlane(e,t){let n=K.groupItems(e,t||{}),i=new Map;for(let s of n){let l=s.option||{},a=String(l.id||l.name||l.title||Math.random()),o=Array.isArray(s.items)?s.items.map(d=>d&&d.item?d.item:d):[];i.set(a,{option:l,items:o})}return i}renderSwimlaneHeader(e,t,n){let i=document.createElement("div");i.className="board-swimlane-header",i.style.position="sticky",i.style.top="var(--board-headers-height, 72px)",i.style.zIndex="20",i.style.cursor="pointer",i.style.userSelect="none",i.style.background="var(--vscode-editor-background)";let s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.gap="8px",s.style.padding="8px 16px",s.style.position="sticky",s.style.left="0",s.style.width="max-content",s.style.background="inherit";let l=be(this.fields,this.allItems,{option:e,items:t},n,{groupDivisors:this.groupDivisors});l.classList.add("swimlane-header-content");let a=l.querySelector(".group-toggle");return a&&(a.classList.add("swimlane-toggle-icon"),a.style.opacity="0.7"),l.style.display="flex",l.style.alignItems="center",l.style.gap="8px",l.style.padding="0",l.style.background="transparent",s.appendChild(l),i.appendChild(s),i}renderBoard(e,t,n){let i=document.createElement("style");i.textContent=`
            * { box-sizing: border-box; }
            .board-item-menu-btn { opacity: 0; transition: opacity 0.2s; cursor: pointer; padding: 2px; border-radius: 4px; }
            .board-item-menu-btn:hover { background: var(--vscode-toolbar-hoverBackground); }
            .board-item:hover .board-item-menu-btn { opacity: 1; }
            .board-pill { cursor: pointer; transition: opacity 0.2s; }
            .board-pill:hover { opacity: 0.8; }
            .board-swimlane { display: flex; flex-direction: column; }
            .board-swimlane-content { display: flex; gap: 16px; padding: 0 16px 16px 16px; align-items: stretch; }
            .board-container { display: flex; flex-direction: column; overflow: auto; height: 100%; width: 100%; }
            .board-column-headers { 
              display: flex; 
              gap: 16px; 
              padding: 16px 16px 0 16px; 
              position: sticky; 
              top: 0; 
              z-index: 30; 
              background: var(--vscode-editor-background); 
              align-items: stretch;
              border-bottom: 1px solid var(--vscode-panel-border);
            }
            .board-column-header { 
              width: 350px; 
              min-width: 350px; 
              flex-shrink: 0; 
              background: var(--vscode-sideBar-background);
              border: 1px solid var(--vscode-editorWidget-border);
              display: flex;
              flex-direction: column;
            }
            .board-column-items { 
              width: 350px; 
              min-width: 350px; 
              flex-shrink: 0; 
              display: flex; 
              flex-direction: column; 
              gap: 8px; 
              background: var(--vscode-editorWidget-background); 
              border: 1px solid var(--vscode-editorWidget-border); 
              padding: 8px; 
            }
            .board-swimlane-header {
              border-bottom: 1px solid var(--vscode-panel-border);
              background: var(--vscode-editor-background);
              position: sticky;
              z-index: 20;
              margin: 0;
            }
        `,e.appendChild(i);let s=document.createElement("div");s.className="board-container",s.style.background="var(--vscode-editor-background)",s.addEventListener("click",o=>{let d=o.target,c=d.closest(".board-swimlane-header");if(c){let f=c.parentElement.querySelector(".board-swimlane-content"),S=c.querySelector(".swimlane-toggle-icon"),C=f.style.display==="none";f.style.display=C?"flex":"none",S.innerHTML=this.getIconSvg(C?"triangle-down":"triangle-right",16);return}let r=d.closest("[data-filter-field]");if(r){let h=r.getAttribute("data-filter-field"),f=r.getAttribute("data-filter-value");if(h&&f){this.handlePillClick(o,h,f);return}}let u=d.closest(".board-item-menu-btn");if(u){o.stopPropagation(),o.preventDefault();let h=u.getAttribute("data-item-id");if(this.onAction&&h){let f=this.allItems.find(C=>String(C.id)===String(h))||{id:h},S=u.getBoundingClientRect();this.onAction("open-menu",f,{x:S.left,y:S.bottom})}return}});let l=this.groupItemsByColumn(this.allItems,t),a=Array.from(l.values());if(n){let o=document.createElement("div");o.className="board-column-headers js-board-headers",new ResizeObserver(r=>{let u=r[0]?.contentRect.height;u&&s.style.setProperty("--board-headers-height",`${u+16}px`)}).observe(o);for(let r of a){if(r.option.id==="__no_value__"&&r.items.length===0)continue;let u=document.createElement("div");u.className="board-column-header";let h=this.renderColumnHeaderOnly(r.option,r.items,t);u.appendChild(h),o.appendChild(u)}s.appendChild(o),s.style.setProperty("--board-headers-height","72px");let c=this.groupItemsBySwimlane(this.allItems,n);for(let[r,u]of c){if(r==="__no_value__"&&u.items.length===0)continue;let h=document.createElement("div");h.className="board-swimlane";let f=this.renderSwimlaneHeader(u.option,u.items,n);h.appendChild(f);let S=document.createElement("div");S.className="board-swimlane-content";let C=this.groupItemsByColumn(u.items,t);for(let x of a){if(x.option.id==="__no_value__"&&x.items.length===0)continue;let m=String(x.option.id||x.option.name||""),y=C.get(m)?.items||[],g=document.createElement("div");g.className="board-column-items";let b=document.createElement("div");b.style.display="flex",b.style.flexDirection="column",b.style.gap="8px",b.style.flex="1";let v=$(x.option.color)||"#666666";for(let E of y)b.appendChild(this.renderItem(E,t,v));g.appendChild(b);let w=this.renderColumnFooterOnly(x.option,t);w.style.marginTop="8px",w.style.margin="0 -8px -8px -8px",g.appendChild(w),S.appendChild(g)}h.appendChild(S),s.appendChild(h)}}else{let o=document.createElement("div");o.className="board-swimlane-content",o.style.height="100%";for(let d of a){if(d.option.id==="__no_value__"&&d.items.length===0)continue;let c=this.renderCard(d.option,d.items,t);o.appendChild(c)}s.appendChild(o)}e.appendChild(s)}};var le=class{constructor(e,t,n,i){this.panelElement=null;this.container=e,this.field=t,this.items=n,this.allFields=i||[]}render(){this.close(),this.panelElement=document.createElement("div"),this.panelElement.className="slice-panel",this.panelElement.style.position="relative",this.panelElement.style.float="left";try{let h=localStorage.getItem("ghProjects.slicePanel.width");h?this.panelElement.style.width=h:this.panelElement.style.width="280px"}catch{this.panelElement.style.width="280px"}this.panelElement.style.marginRight="12px",this.panelElement.style.background="var(--vscode-sideBar-background)",this.panelElement.style.border="1px solid var(--vscode-sideBar-border)",this.panelElement.style.borderRadius="6px",this.panelElement.style.display="flex",this.panelElement.style.flexDirection="column",this.panelElement.style.overflow="hidden",this.panelElement.style.maxHeight="600px";let e=document.createElement("pre");e.className="slice-panel-debug-overlay",e.style.position="absolute",e.style.left="8px",e.style.bottom="8px",e.style.right="8px",e.style.maxHeight="120px",e.style.overflow="auto",e.style.background="rgba(0,0,0,0.6)",e.style.color="white",e.style.fontSize="11px",e.style.padding="8px",e.style.borderRadius="6px",e.style.zIndex="200",e.style.display="none",e.title="SlicePanel debug (click to show/hide)",e.addEventListener("click",()=>{e.style.display=e.style.display==="none"?"block":"none"}),this.panelElement.appendChild(e);let t=document.createElement("div");t.className="slice-panel-resizer",t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.bottom="0",t.style.width="6px",t.style.cursor="col-resize",t.style.zIndex="100",this.panelElement.appendChild(t);let n=null,i=null,s=h=>{if(n==null||i==null)return;let f=h.pageX-n,S=Math.max(160,i+f);this.panelElement.style.width=S+"px"},l=()=>{if(n!=null){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l);try{localStorage.setItem("ghProjects.slicePanel.width",this.panelElement.style.width)}catch{}n=null,i=null}};t.addEventListener("mousedown",h=>{h.preventDefault(),n=h.pageX,i=this.panelElement?this.panelElement.offsetWidth:280,document.addEventListener("mousemove",s),document.addEventListener("mouseup",l)});let a=document.createElement("div");a.style.padding="12px",a.style.borderBottom="1px solid var(--vscode-sideBar-border)",a.style.display="flex",a.style.flexDirection="column",a.style.gap="8px";let o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.gap="8px";let d=document.createElement("span");d.textContent="Slice by",d.style.fontSize="11px",d.style.fontWeight="600",d.style.color="var(--vscode-descriptionForeground)",d.style.textTransform="uppercase",d.style.letterSpacing="0.5px",o.appendChild(d);let c=document.createElement("button");c.textContent=this.field.name,c.style.flex="1",c.style.padding="6px 12px",c.style.background="var(--vscode-button-secondaryBackground)",c.style.color="var(--vscode-button-secondaryForeground)",c.style.border="1px solid var(--vscode-button-border)",c.style.borderRadius="4px",c.style.cursor="pointer",c.style.fontSize="13px",c.style.fontWeight="500",c.style.textAlign="left",c.style.display="flex",c.style.justifyContent="space-between",c.style.alignItems="center";let r=document.createElement("span");r.textContent="\u25BC",r.style.fontSize="10px",r.style.marginLeft="auto",c.appendChild(r),c.addEventListener("click",h=>{h.stopPropagation(),this.showFieldDropdown(c)}),o.appendChild(c),a.appendChild(o),this.panelElement.appendChild(a);let u=document.createElement("div");u.style.flex="1",u.style.overflow="auto",u.style.padding="8px",this.renderValues(u),this.panelElement.appendChild(u),this.container.appendChild(this.panelElement)}showFieldDropdown(e,t){let n=new Set(["assignees","single_select","parent_issue","iteration","number","date","milestone","repository","labels","text","single_line_text"]),i=this.allFields.filter(o=>{let d=(o.dataType||"").toLowerCase();return n.has(d)});if(i.length===0)return;let s=document.createElement("div");s.style.position="absolute";let l=t||e.getBoundingClientRect();t?(s.style.top=`${l.top}px`,s.style.left=`${l.right+4}px`):(s.style.top=`${l.bottom+4}px`,s.style.left=`${l.left}px`),s.style.minWidth=`${e.offsetWidth}px`,s.style.background="var(--vscode-dropdown-background)",s.style.border="1px solid var(--vscode-dropdown-border)",s.style.borderRadius="4px",s.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)",s.style.zIndex="1000",s.style.maxHeight="300px",s.style.overflowY="auto",i.forEach(o=>{let d=document.createElement("div");d.style.display="flex",d.style.alignItems="center";let c=document.createElement("span");c.style.display="inline-block",c.style.width="14px",c.style.marginRight="8px",c.style.textAlign="center",c.textContent=o.id===this.field.id?"\u2713":"",c.style.color="var(--vscode-menu-selectionForeground)",d.appendChild(c);let r=document.createElement("span");r.style.display="inline-flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.width="18px",r.style.marginRight="8px",r.innerHTML=this.getIconForDataType((o.dataType||"").toString().toLowerCase()),d.appendChild(r);let u=document.createElement("span");u.textContent=o.name,d.appendChild(u),d.style.padding="8px 12px",d.style.cursor="pointer",d.style.fontSize="13px",d.style.color="var(--vscode-dropdown-foreground)",o.id===this.field.id&&(d.style.background="var(--vscode-list-activeSelectionBackground)",d.style.color="var(--vscode-list-activeSelectionForeground)"),d.addEventListener("mouseenter",()=>{o.id!==this.field.id&&(d.style.background="var(--vscode-list-hoverBackground)")}),d.addEventListener("mouseleave",()=>{o.id!==this.field.id&&(d.style.background="transparent")}),d.addEventListener("click",()=>{this.field=o;let h=s.querySelectorAll("div");i.forEach((f,S)=>{let C=h[S];if(!C)return;let x=C.querySelector("span:first-child");f.id===this.field.id?(x.textContent="\u2713",C.style.background="var(--vscode-list-activeSelectionBackground)",C.style.color="var(--vscode-list-activeSelectionForeground)"):(x.textContent="",C.style.background="transparent",C.style.color="var(--vscode-dropdown-foreground)")}),this.render(),this.onFieldChangeCallback&&this.onFieldChangeCallback(o);try{window.__sliceMenuRefresh&&window.__sliceMenuRefresh()}catch{}}),s.appendChild(d)});let a=document.createElement("div");a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.right="0",a.style.bottom="0",a.style.zIndex="999",a.addEventListener("click",()=>{s.remove(),a.remove()}),document.body.appendChild(a),document.body.appendChild(s)}openFieldDropdown(e){try{if(!this.panelElement)return;let t=this.panelElement.querySelector("button");if(!t)return;this.showFieldDropdown(t,e)}catch{}}getIconForDataType(e){if(typeof window.getIconNameForDataType=="function"&&typeof window.getIconSvg=="function"){let t=window.getIconNameForDataType(e);return window.getIconSvg(t)}return"<span></span>"}renderValues(e){let t=this.getValueCounts();if(t.size===0){let s=document.createElement("div");s.textContent="No values",s.style.padding="8px",s.style.color="var(--vscode-descriptionForeground)",e.appendChild(s);return}let n=Array.from(t.entries()).sort((s,l)=>l[1].count-s[1].count),i=s=>{let l={resolved:null,statusColor:null,number:null,title:null,done:0,total:0,pct:0};if(!s)return l;let a=[];s.number&&a.push(String(s.number)),s.id&&a.push(String(s.id)),s.url&&a.push(String(s.url)),s.title&&a.push(String(s.title));let o=this.items.find(c=>{let r=c&&(c.content||c.raw&&c.raw.itemContent)||null;if(!r)return!1;let u=[];r.number&&u.push(String(r.number)),r.id&&u.push(String(r.id)),r.url&&u.push(String(r.url)),r.title&&u.push(String(r.title)),r.name&&u.push(String(r.name)),r.raw&&r.raw.number&&u.push(String(r.raw.number)),r.raw&&r.raw.id&&u.push(String(r.raw.id)),r.raw&&r.raw.url&&u.push(String(r.raw.url));for(let h of a)for(let f of u)if(h&&f&&String(h)===String(f))return!0;return!1});if(!o)return l;l.resolved=o;let d=o.content||o.raw&&o.raw.itemContent||null;if(l.title=d&&(d.title||d.name)?d.title||d.name:o.title||o.name||null,l.number=d&&d.number?String(d.number):o.number||o.id||null,Array.isArray(o.fieldValues)){let c=o.fieldValues.find(u=>u&&u.type==="single_select"&&u.option&&u.option.name);if(c&&c.option)try{let u=c.option.color||c.option.id||c.option.name||null;l.statusColor=$(u)||null}catch{}let r=o.fieldValues.find(u=>u&&(u.type==="sub_issues_progress"||u.total!=null&&u.done!=null));r&&r.total!=null&&(l.total=Number(r.total||0),l.done=Number(r.done||0),l.pct=l.total>0?Math.round(l.done/l.total*100):0)}return l};n.forEach(([s,{value:l,count:a,rawValue:o}])=>{let d=document.createElement("div");d.className="slice-value-item",d.style.padding="10px 12px",d.style.cursor="pointer",d.style.borderRadius="4px",d.style.marginBottom="4px",d.style.display="flex",d.style.alignItems="center",d.style.gap="8px",d.style.transition="background-color 0.15s ease";let c=(this.field.dataType||"").toLowerCase(),r=null;c==="parent_issue"&&o&&(r=o.parent||o.parentIssue||o.issue||o.item||o.value||o);let u=document.createElement("div");u.style.display="flex",u.style.alignItems="center",u.style.gap="8px",u.style.flex="0 0 auto";let h=m=>{let y=document.createElement("span");return y.style.display="inline-block",y.style.width="12px",y.style.height="12px",y.style.borderRadius="50%",y.style.flexShrink="0",y.style.backgroundColor=m||"var(--vscode-descriptionForeground)",y},f=!1;if(c==="assignees"&&o){let m=o,y=m&&(m.avatarUrl||m.avatar||m.imageUrl||m.avatar_url);if(y){let g=document.createElement("span");g.innerHTML='<span title="'+L(m.login||m.name||m.id||"")+'" style="display:inline-block;width:20px;height:20px;border-radius:50%;overflow:hidden;background-size:cover;background-position:center;background-image:url('+L(y)+');border:2px solid var(--vscode-editor-background)"></span>',u.appendChild(g),f=!0}else u.appendChild(h(null)),f=!0}if(!f&&c==="repository"){let m=document.createElement("span");m.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;color:var(--vscode-icon-foreground)"><path fill="currentColor" d="M2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v11A1.5 1.5 0 0 1 12.5 15h-9A1.5 1.5 0 0 1 2 13.5v-11zM3.5 2A.5.5 0 0 0 3 2.5V4h10V2.5a.5.5 0 0 0-.5-.5h-9z"/></svg>',u.appendChild(m),f=!0}if(!f&&c==="parent_issue"){let m=r?i(r):null,y=m&&m.statusColor?m.statusColor:null;if(!y&&r&&(y=$(r.color||r.option&&r.option.color||r.statusColor||r.status?.color)||null),r&&(r.title||r.name||r.number||m&&(m.title||m.number))){let g=h(y);u.appendChild(g),f=!0}}if(!f&&c==="labels"&&o){let m=o,y=m&&(m.color||m.colorName||m.hex||m.name),g=$(y);u.appendChild(h(g)),f=!0}if(!f){let m=null;if(c==="single_select"&&o&&o.option&&(m=o.option.color||o.option.name||o.option.id),!m&&o&&(o.color||o.colorName)&&(m=o.color||o.colorName),!m&&Array.isArray(this.field.options))try{let g=(this.field.options||[]).find(b=>String(b.name)===String(s)||String(b.id)===String(o&&(o.optionId||o.option&&o.option.id)));g&&(m=g.color||g.name||g.id)}catch{}if(!m&&this.field&&this.field.configuration&&Array.isArray(this.field.configuration.iterations))try{let g=(this.field.configuration.iterations||[]).find(b=>String(b.title)===String(s)||String(b.id)===String(o&&(o.iterationId||o.iteration&&o.iteration.id)));g&&(m=g.color||g.name||g.title||g.id)}catch{}let y=$(m);u.appendChild(h(y))}d.appendChild(u);let S=document.createElement("div");S.style.flex="1",S.style.display="flex",S.style.flexDirection="column",S.style.minWidth="0";let C=null;if(c!=="parent_issue"&&(C=document.createElement("span"),C.textContent=s,C.style.fontSize="13px",C.style.fontWeight="500",C.style.whiteSpace="normal",C.style.wordBreak="break-word",C.style.overflow="hidden",S.appendChild(C)),c==="single_select"){let m=null;try{if(o&&o.option&&o.option.description)m=o.option.description;else if(Array.isArray(this.field.options)){let y=(this.field.options||[]).find(g=>String(g.name)===String(s)||String(g.id)===String(o&&(o.optionId||o.option&&o.option.id)));y&&y.description&&(m=y.description)}}catch{}if(m){let y=document.createElement("span");y.textContent=m,y.style.fontSize="11px",y.style.color="var(--vscode-descriptionForeground)",y.style.whiteSpace="normal",y.style.wordBreak="break-word",y.style.overflow="hidden",y.style.maxHeight="3.6em",S.appendChild(y)}}if(c==="parent_issue"&&o){let m=r||o.parent||o.parentIssue||o.issue||o.item||o.value||null,y=i(m),g=y.title||m&&(m.title||m.name)||s,b=document.createElement("div");b.style.display="flex",b.style.gap="8px",b.style.alignItems="baseline";let v=document.createElement("span"),w=String(g).slice(0,120);if(v.textContent=y.number?`${w} #${String(y.number)}`:w,v.style.fontSize="13px",v.style.fontWeight="600",v.style.whiteSpace="normal",v.style.wordBreak="break-word",b.appendChild(v),S.appendChild(b),y.total&&y.total>0){let E=document.createElement("div");E.style.display="flex",E.style.alignItems="center",E.style.gap="8px",E.style.marginTop="6px";let _=document.createElement("div");_.textContent=`${y.done}/${y.total}`,_.style.color="var(--vscode-descriptionForeground)",_.style.fontSize="12px",_.style.fontVariantNumeric="tabular-nums",E.appendChild(_);let H=document.createElement("div");H.style.display="inline-block",H.style.width="120px",H.style.height="10px",H.style.background="transparent",H.style.border="1px solid var(--vscode-focusBorder)",H.style.borderRadius="6px",H.style.overflow="hidden";let F=document.createElement("div");F.style.height="100%",F.style.width=String(y.pct)+"%",F.style.background="var(--vscode-focusBorder)",H.appendChild(F),E.appendChild(H),S.appendChild(E)}}if(c==="iteration")try{let m=o&&(o.iteration||o.configuration||o)||null,y=null;if(m&&m.startDate&&(m.duration||m.length))y=m;else if(this.field&&this.field.configuration&&Array.isArray(this.field.configuration.iterations)){let g=(this.field.configuration.iterations||[]).find(b=>String(b.title||b.name)===String(s)||String(b.id)===String(o&&(o.iterationId||o.iteration&&o.iteration.id)));g&&(y=g)}if(y){let g=y.startDate||y.start,b=y.duration||y.length||y.days;if(g&&b){let v=new Date(g),w=new Date(v.getTime()+Number(b||0)*24*60*60*1e3),E=v.toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=w.toLocaleDateString("en-US",{month:"short",day:"numeric"}),H=document.createElement("div");H.textContent=`${E} \u2014 ${_}`,H.style.fontSize="11px",H.style.color="var(--vscode-descriptionForeground)",H.style.marginTop="4px",S.appendChild(H)}}}catch{}d.appendChild(S);let x=document.createElement("span");x.style.display="inline-flex",x.style.alignItems="center",x.style.justifyContent="center",x.style.minWidth="24px",x.style.height="24px",x.style.borderRadius="50%",x.style.background="var(--vscode-input-background)",x.style.border="1px solid var(--vscode-panel-border)",x.style.color="var(--vscode-foreground)",x.style.fontSize="12px",x.style.fontWeight="600",x.style.padding="0 6px",x.style.boxSizing="border-box",x.textContent=String(a),d.appendChild(x),d.addEventListener("mouseenter",()=>{d.style.background="var(--vscode-list-hoverBackground)"}),d.addEventListener("mouseleave",()=>{d.style.background="transparent"}),d.addEventListener("click",()=>{this.onValueSelectCallback&&this.onValueSelectCallback(l)}),e.appendChild(d)})}getValueCounts(){let e=new Map,t=(this.field.dataType||"").toLowerCase();return this.items.forEach(n=>{let i=n.fieldValues?.find(d=>d.fieldId===this.field.id||d.fieldName===this.field.name);if(!i){let d="(empty)",c=e.get(d);c?c.count++:e.set(d,{value:null,count:1,rawValue:null});return}if(t==="labels"){let d=i.labels&&Array.isArray(i.labels.nodes)?i.labels.nodes:Array.isArray(i.labels)?i.labels:null;if(Array.isArray(d)&&d.length>0){d.forEach(c=>{let r=c&&(c.name||c.title)?String(c.name||c.title):"(empty)",u=this.formatValue(r),h=e.get(u);h?h.count++:e.set(u,{value:r,count:1,rawValue:c})});return}}if(t==="assignees"){let d=i.assignees||(i.assignee?[i.assignee]:null);if(Array.isArray(d)&&d.length>0){d.forEach(c=>{let r=String(c.login||c.name||c.id||"(unknown)"),u=this.formatValue(r),h=e.get(u);h?h.count++:e.set(u,{value:c,count:1,rawValue:c})});return}}let s=null,l=null;try{if(t==="single_select")s=i.option?.name||i.name||i.value,l=i;else if(t==="iteration")s=i.iteration?.title||i.title||i.value,l=i;else if(t==="parent_issue"){let d=i.parent||i.parentIssue||i.issue||i.item||i.value||null;d&&(s=d.title||d.name||d.number||d.id||d.url||null),l=d||i}else t==="milestone"?(s=i.milestone?.title||i.milestone?.name||i.value||null,l=i.milestone||i):t==="repository"?(s=i.repository?.nameWithOwner||i.repository?.full_name||i.repository?.name||i.value||null,l=i.repository||i):t==="number"?(s=i.number!=null?i.number:i.value,l=i):t==="date"?(s=i.date||i.value||null,l=i):(s=i.text||i.title||i.value||null,l=i)}catch{s=i.text||i.title||i.value||null,l=i}let a=s==null||s===""?"(empty)":this.formatValue(s),o=e.get(a);o?o.count++:e.set(a,{value:s,count:1,rawValue:l})}),e}extractValue(e){let t=(this.field.dataType||"").toLowerCase();return e?t==="single_select"?e.option?.name||e.name||e.value:t==="iteration"?e.iteration?.title||e.title||e.value:t==="assignees"?e.assignees||e.assignee||null:t==="labels"?e.labels||null:t==="parent_issue"?e.parent||e.parentIssue||e.issue||e.item||e.value||null:t==="milestone"?e.milestone||e.value||null:t==="repository"?e.repository||e.value||null:t==="number"?e.number!=null?e.number:e.value:t==="date"?e.date||e.value||null:e.text||e.title||e.value||null:null}formatValue(e){return e==null?"(empty)":String(e)}onValueSelect(e){this.onValueSelectCallback=e}onFieldChange(e){this.onFieldChangeCallback=e}close(){this.panelElement&&(this.panelElement.remove(),this.panelElement=null)}};function xe(p){if(!p||!p.nodes||p.nodes.length===0)return null;let e=p.nodes[0];if(!e||!e.field)return null;let t={fieldId:e.field.id||e.field.name,direction:e.direction||"ASC"};if(p.nodes.length>1){let n=p.nodes[1];n&&n.field&&(t.secondary={fieldId:n.field.id||n.field.name,direction:n.direction||"ASC"})}return t}function Fe(p,e,t){if(!t||p.length===0)return p;let n=e.find(s=>s.id===t.fieldId||s.name===t.fieldId);if(!n)return p;let i=[...p];return i.sort((s,l)=>{let a=He(s,l,n,t.direction);if(a===0&&t.secondary){let o=e.find(d=>d.id===t.secondary.fieldId||d.name===t.secondary.fieldId);if(o)return He(s,l,o,t.secondary.direction)}return a}),i}function He(p,e,t,n){let i=Ne(p,t),s=Ne(e,t);if(i===null&&s===null)return 0;if(i===null)return n==="ASC"?1:-1;if(s===null)return n==="ASC"?-1:1;let l=0;switch((t.dataType||"").toLowerCase()){case"text":case"title":l=ee(i,s);break;case"number":l=De(i,s);break;case"date":l=Be(i,s);break;case"single_select":l=st(i,s,t);break;case"iteration":l=rt(i,s);break;case"labels":l=ot(i,s);break;case"assignees":case"repository":case"milestone":case"issue_type":case"parent_issue":case"tracked_by":case"tracks":case"reviewers":l=ee(i,s);break;case"linked_pull_requests":case"sub_issues_progress":l=De(i,s);break;default:l=0}return n==="ASC"?l:-l}function Ne(p,e){let t=p.fieldValues?.find(i=>i.fieldId===e.id||i.fieldName===e.name);if(!t)return null;switch((e.dataType||"").toLowerCase()){case"text":return t.text!=null?t.text:Re(t,p);case"title":return Re(t,p);case"number":return t.number!==void 0?t.number:null;case"date":return t.date||t.startDate||t.dueOn||null;case"single_select":return t.option||t;case"iteration":return t;case"labels":return t.labels||[];case"assignees":{let i=t.assignees;if(Array.isArray(i)&&i.length>0){let s=i[0];return s.login||s.name||null}return null}case"repository":{let i=t.repository;return i&&(i.nameWithOwner||i.name||i.full_name||i.id)||null}case"milestone":{let i=t.milestone;return i&&(i.dueOn||i.title||i.name)||null}case"issue_type":return t.text?t.text:t.option&&(t.option.name||t.option.title)||null;case"parent_issue":{let i=t.parent;return i?i.title?i.title:typeof i.number=="number"?String(i.number):i.id||null:null}case"linked_pull_requests":{let i=t.pullRequests;if(Array.isArray(i)&&i.length>0){let s=i[0];return typeof s.number=="number"?s.number:s.title||null}return null}case"reviewers":{let i=t.reviewers;if(Array.isArray(i)&&i.length>0){let s=i[0];return s.login||s.name||s.id||null}return null}case"sub_issues_progress":return typeof t.percent=="number"?t.percent:typeof t.done=="number"&&typeof t.total=="number"&&t.total>0?t.done/t.total*100:null;case"tracked_by":case"tracks":{let i=t.issues;if(Array.isArray(i)&&i.length>0){let s=i[0];return s.title?s.title:typeof s.number=="number"?String(s.number):s.id||null}return null}default:return t}}function Re(p,e){if(!p)return null;let t=p.title&&p.title.raw||p.raw||null;if(t&&typeof t.text=="string"&&t.text.trim())return t.text;let n=p.title&&p.title.content||p.content||t&&t.itemContent||e&&e.content||null;if(n){if(typeof n=="string"&&n.trim())return n;if(typeof n.title=="string"&&n.title.trim())return n.title;if(typeof n.name=="string"&&n.name.trim())return n.name}return typeof p.text=="string"&&p.text.trim()?p.text:t&&typeof t.title=="string"&&t.title.trim()?t.title:null}function ee(p,e){let t=String(p||"").toLowerCase(),n=String(e||"").toLowerCase();return t.localeCompare(n)}function De(p,e){let t=typeof p=="number"?p:parseFloat(p),n=typeof e=="number"?e:parseFloat(e);return isNaN(t)&&isNaN(n)?0:isNaN(t)?1:isNaN(n)?-1:t-n}function Be(p,e){let t=new Date(p),n=new Date(e);return isNaN(t.getTime())&&isNaN(n.getTime())?0:isNaN(t.getTime())?1:isNaN(n.getTime())?-1:t.getTime()-n.getTime()}function st(p,e,t){let n=p.option||p,i=e.option||e;if(!n||!i)return ee(n?.name||"",i?.name||"");if(t.options&&Array.isArray(t.options)){let s=t.options.findIndex(a=>a.id===n.id||a.name===n.name),l=t.options.findIndex(a=>a.id===i.id||a.name===i.name);if(s!==-1&&l!==-1)return s-l}return ee(n.name,i.name)}function rt(p,e){let t=p.startDate||p.iteration?.startDate,n=e.startDate||e.iteration?.startDate;return!t&&!n?ee(p.title||p.iteration?.title,e.title||e.iteration?.title):Be(t,n)}function ot(p,e){let t=Array.isArray(p)?p:[],n=Array.isArray(e)?e:[];return t.length===0&&n.length===0?0:t.length===0?1:n.length===0?-1:ee(t[0].name,n[0].name)}var G=class G{static closeAll(){try{for(let e of Array.from(G.menus)){try{try{let t=e&&e.dataset&&e.dataset.menuType||null;if(t){let n=Array.from(document.querySelectorAll(`[data-menu-type="${t}"]`));for(let i of n)try{i.remove()}catch{}}}catch{}e&&e.parentElement&&e.parentElement.removeChild(e)}catch{}G.refreshMap.delete(e)}}catch{}G.menus.clear()}static register(e,t){e&&(G.menus.add(e),t&&G.refreshMap.set(e,t))}static unregister(e){e&&(G.menus.delete(e),G.refreshMap.delete(e))}static refreshAll(){try{for(let e of Array.from(G.menus)){let t=G.refreshMap.get(e);try{t&&t()}catch{}}}catch{}}};G.menus=new Set,G.refreshMap=new WeakMap;var Ee=G,ae=Ee;var Se=class{constructor(e){this.buttonEl=null;this.menuEl=null;this.backdropEl=null;this.openSubmenuEl=null;this.externalSubmenuRefresh=null;this.anchorElement=e.anchorElement,this.itemsSource=e.items||[],this.attachButton()}attachButton(){let e=document.createElement("button");e.className="active-tab-menu-button",e.type="button",e.title="Open view menu",e.style.border="none",e.style.background="transparent",e.style.padding="0 4px",e.style.marginLeft="8px",e.style.cursor="pointer",e.style.display="inline-flex",e.style.alignItems="center";try{let i=window.getComputedStyle(this.anchorElement);i&&i.color&&(e.style.color=i.color)}catch{}let t=document.createElement("span");t.style.display="inline-flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.height="16px",t.style.width="16px",t.style.lineHeight="1",t.innerHTML=window.getIconSvg?.("triangle-down")||"",t.querySelectorAll("svg").forEach(i=>i.setAttribute("fill","currentColor")),e.appendChild(t),e.addEventListener("click",i=>{i.stopPropagation(),this.toggle()}),this.buttonEl=e,this.anchorElement.parentElement&&this.anchorElement.parentElement.insertBefore(e,this.anchorElement.nextSibling)}toggle(){this.menuEl?this.hide():this.show()}show(){try{ae.closeAll()}catch{}this.hide(),this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top="0",this.backdropEl.style.left="0",this.backdropEl.style.right="0",this.backdropEl.style.bottom="0",this.backdropEl.style.zIndex="998",this.backdropEl.addEventListener("click",()=>this.hide()),this.backdropEl.dataset.menuType="active-tab-menu",document.body.appendChild(this.backdropEl),this.menuEl=document.createElement("div"),this.menuEl.className="active-tab-menu",this.menuEl.dataset.menuType="active-tab-menu",this.menuEl.style.position="absolute",this.menuEl.style.background="var(--vscode-menu-background)",this.menuEl.style.border="1px solid var(--vscode-menu-border)",this.menuEl.style.borderRadius="4px",this.menuEl.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",this.menuEl.style.width="320px",this.menuEl.style.padding="4px 0",this.menuEl.style.zIndex="1000",this.menuEl.style.fontSize="13px",document.body.appendChild(this.menuEl);let e=typeof this.itemsSource=="function"?this.itemsSource():this.itemsSource;this.buildMenu(this.menuEl,e);let t=(this.buttonEl||this.anchorElement).getBoundingClientRect(),n=this.menuEl.getBoundingClientRect(),i=8,s=window.innerWidth||document.documentElement.clientWidth,l=window.innerHeight||document.documentElement.clientHeight,a=t.bottom+i;t.bottom+n.height+i>l&&(t.top-n.height-i>=0?a=t.top-n.height-i:a=Math.max(i,Math.min(l-n.height-i,t.bottom+i)));try{ae.register(this.menuEl,this.refresh.bind(this))}catch{}let o=t.left;t.left+n.width+i>s&&(o=Math.max(i,t.right-n.width)),o=Math.max(i,Math.min(o,s-n.width-i)),this.menuEl.style.top=`${Math.round(a)}px`,this.menuEl.style.left=`${Math.round(o)}px`}hide(){this.menuEl&&(this.menuEl.remove(),this.menuEl=null),this.backdropEl&&(this.backdropEl.remove(),this.backdropEl=null),this.closeOpenSubmenu()}refresh(){if(this.menuEl){this.menuEl.innerHTML="";let e=typeof this.itemsSource=="function"?this.itemsSource():this.itemsSource;this.buildMenu(this.menuEl,e);try{this.externalSubmenuRefresh&&this.externalSubmenuRefresh()}catch{}}}destroy(){try{this.hide()}catch{}if(this.buttonEl){try{this.buttonEl.remove()}catch{}this.buttonEl=null}}buildMenu(e,t){try{let n=this.anchorElement&&this.anchorElement.parentElement?this.anchorElement.parentElement:null,i=n?n.getAttribute("data-viewkey"):null;if(i){let s=document.createElement("div");s.style.display="flex",s.style.gap="8px",s.style.padding="6px 12px",s.style.justifyContent="center",s.style.alignItems="center";let l=n?n.getAttribute("data-layout"):null,a=(o,d,c)=>{let r=document.createElement("div");r.style.display="inline-flex",r.style.alignItems="center",r.style.gap="8px",r.style.padding="6px 10px",r.style.borderRadius="6px",r.style.cursor="pointer",r.style.fontWeight="500",r.style.color="var(--vscode-menu-foreground)",l&&l===o&&(r.style.background="var(--vscode-sideBar-background)",r.style.color="var(--vscode-foreground)",r.style.fontWeight="600"),r.onmouseenter=()=>{r.style.background="var(--vscode-menu-selectionBackground)",r.style.color="var(--vscode-menu-selectionForeground)"},r.onmouseleave=()=>{r.style.background="transparent",r.style.color="var(--vscode-menu-foreground)"};let u=document.createElement("span");u.style.display="inline-flex",u.style.alignItems="center",u.style.justifyContent="center",u.style.width="16px",u.style.height="16px",u.innerHTML=window.getIconSvg?window.getIconSvg(d):"";try{u.querySelectorAll&&u.querySelectorAll("svg").forEach(f=>f.setAttribute("fill","currentColor"))}catch{}let h=document.createElement("span");return h.style.fontSize="13px",h.textContent=c,r.appendChild(u),r.appendChild(h),r.addEventListener("click",f=>{f.stopPropagation();try{try{let S=window.__PROJECT_DATA__||window.__project_data__;if(S&&Array.isArray(S.views)){let C=parseInt(String(i).split("-")[1]);!isNaN(C)&&S.views[C]&&(S.views[C].layout=o)}}catch{}try{if(n){n.setAttribute("data-layout",o);let S=n.querySelector(".tab-icon");if(S){let C=o==="table"?"table":o==="board"?"project":"roadmap";S.innerHTML=window.getIconSvg?window.getIconSvg(C):""}try{n.click()}catch{}}}catch{}try{this.hide()}catch{}}catch{}}),r};s.appendChild(a("table","table","Table")),s.appendChild(a("board","project","Board")),s.appendChild(a("roadmap","roadmap","Roadmap")),e.appendChild(s)}}catch{}try{let n=document.createElement("div");n.style.height="1px",n.style.background="var(--vscode-panel-border)",n.style.margin="6px 0",e.appendChild(n)}catch{}t.forEach(n=>{let i=document.createElement("div");if(i.className="active-tab-menu-item",i.style.display="flex",i.style.alignItems="center",i.style.padding="6px 12px",i.style.cursor="pointer",i.style.color="var(--vscode-menu-foreground)",n.iconName&&window.getIconSvg){let l=document.createElement("span");l.style.display="inline-flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.marginRight="8px",l.innerHTML=window.getIconSvg(n.iconName)||"";try{l.querySelectorAll&&l.querySelectorAll("svg").forEach(a=>a.setAttribute("fill","currentColor"))}catch{}i.appendChild(l)}let s=document.createElement("div");if(s.style.flex="1",s.style.minWidth="0",s.style.overflow="hidden",s.style.whiteSpace="nowrap",s.style.textOverflow="ellipsis",s.style.marginRight="8px",n.info){let l=document.createElement("span");l.style.fontWeight="600",l.textContent=n.label+": ",s.appendChild(l);let a=document.createElement("span");a.style.opacity="0.7",a.textContent=n.info,s.appendChild(a)}else s.style.fontWeight="500",s.textContent=n.label;if(i.appendChild(s),n.children&&n.children.length||n.forceChevron){let l=document.createElement("span");l.innerHTML=window.getIconSvg?.("chevron-right")||"\u203A",l.style.marginLeft="auto",l.style.flex="0 0 auto",l.style.opacity="0.7",i.appendChild(l),n.children&&n.children.length&&(i.addEventListener("mouseenter",a=>{this.openSubmenuForRow(i,n.children)}),i.addEventListener("mouseleave",a=>{}))}n.children&&n.children.length||i.addEventListener("click",l=>{try{l.stopPropagation()}catch{}try{try{this.closeOpenSubmenu()}catch{}try{document.querySelectorAll(".roadmap-dropdown-menu").forEach(d=>d.remove())}catch{}let a=i.getBoundingClientRect(),o=n.onClick?n.onClick(i,a):void 0;o&&typeof o.then=="function"?o.then(d=>{d||this.hide()}).catch(()=>this.hide()):o||this.hide()}catch{try{this.hide()}catch{}}}),i.addEventListener("mouseenter",()=>{i.style.background="var(--vscode-menu-selectionBackground)",i.style.color="var(--vscode-menu-selectionForeground)"}),i.addEventListener("mouseleave",()=>{i.style.background="transparent",i.style.color="var(--vscode-menu-foreground)"}),e.appendChild(i)})}openSubmenuForRow(e,t){if(this.closeOpenSubmenu(),!this.menuEl)return;let n=document.createElement("div");n.className="active-tab-submenu",n.style.position="absolute",n.style.background="var(--vscode-menu-background)",n.style.border="1px solid var(--vscode-menu-border)",n.style.borderRadius="4px",n.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",n.style.minWidth="160px",n.style.padding="4px 0",n.style.zIndex="1001",n.style.fontSize="13px",document.body.appendChild(n),this.buildMenu(n,t);let i=e.getBoundingClientRect(),s=n.getBoundingClientRect(),l=this.menuEl.getBoundingClientRect(),a=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,d=4,c=i.top;c+s.height>o&&(c=Math.max(d,Math.min(o-s.height-d,c)));try{document.querySelectorAll(".roadmap-dropdown-menu").forEach(u=>u.remove())}catch{}let r=i.right+4;r+s.width>a&&(r=i.left-s.width-4,r<d&&(r=Math.max(d,Math.min(l.right+4,a-s.width-d)))),n.style.top=`${Math.round(c)}px`,n.style.left=`${Math.round(r)}px`,this.openSubmenuEl=n,n.addEventListener("mouseleave",()=>{setTimeout(()=>{this.openSubmenuEl===n&&this.closeOpenSubmenu()},150)})}closeOpenSubmenu(){this.openSubmenuEl&&(this.openSubmenuEl.remove(),this.openSubmenuEl=null,this.externalSubmenuRefresh=null)}registerExternalSubmenu(e,t){try{this.closeOpenSubmenu()}catch{}if(e){this.openSubmenuEl=e,this.externalSubmenuRefresh=t||null;try{ae.register(e,t||null)}catch{}}}},Pe=Se;function qe(){let p=document.getElementById("tabs-container");if(!p)return;let e=null,t=p;function n(l){if(!l)return;let a=l.__activeTabMenu;if(a&&typeof a.destroy=="function")try{a.destroy()}catch{}try{let o=l.__activeTabMenuDateListener;if(o){try{window.removeEventListener("roadmap:dateFieldsChanged",o)}catch{}try{window.removeEventListener("roadmap:zoomChanged",o)}catch{}}}catch{}try{delete l.__activeTabMenu,delete l.__activeTabMenuDateListener}catch{}}function i(){let l=t.querySelector(".tab.active");if(!l){n(e),e=null;return}let a=l.getAttribute("data-layout");if(!a){n(e),e=null;return}let o=l.querySelector(".tab-label");if(!o)return;if(o.__activeTabMenu){e=o;return}n(e);let d=l.getAttribute("data-viewkey")||null,c=()=>{let r=d&&window.__viewStates?window.__viewStates[d]:null,u="";if(r&&r.fields){let C=new Set(Array.from(r.visibleFieldIds||[]));u=r.fields.filter(m=>C.has(String(m.id))).map(m=>m.name).join(", ")}let h="";r&&r.current&&(h=r.current);let f="";r&&r.currentColumn&&(f=r.currentColumn);let S=[];if((a==="table"||a==="board")&&S.push({label:"Fields",info:u,forceChevron:!0,iconName:"note",onClick:(C,x)=>Promise.resolve().then(()=>(Oe(),$e)).then(({FieldsMenu:m})=>{try{try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let y=r&&r.fields||[],g=new Set(r&&r.visibleFieldIds?Array.from(r.visibleFieldIds).map(w=>String(w)):[]),v=new m({fields:(y||[]).map(w=>({id:String(w.id),name:w.name,iconClass:w.iconClass,dataType:w.dataType,locked:w.name==="Title"})),visibleFieldIds:g,onToggleVisibility:(w,E)=>{try{r&&typeof r.onToggleVisibility=="function"&&r.onToggleVisibility(String(w),E),setTimeout(()=>{let _=o.__activeTabMenu;_&&typeof _.refresh=="function"&&_.refresh()},50)}catch{}}}).show(C||o,x);try{let w=o.__activeTabMenu;if(w&&typeof w.registerExternalSubmenu=="function"&&v&&v.el)try{w.registerExternalSubmenu(v.el,v.refresh)}catch{}}catch{}}catch{}return!0}).catch(()=>!1)}),a==="board"&&S.push({label:"Column by",info:f,forceChevron:!0,iconName:"columns",onClick:(C,x)=>Promise.resolve().then(()=>(Ce(),we)).then(({default:m})=>{try{try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let g=(r&&r.fields||[]||[]).filter(w=>{let E=String(w.dataType||w.type||"").toLowerCase();return E==="single_select"||E.includes("iteration")}),v=new m({title:"Column by",fields:(g||[]).map(w=>({id:String(w.id),name:w.name,iconClass:w.iconClass,dataType:w.dataType})),items:r&&r.items?r.items:[],current:r&&r.currentColumn?r.currentColumn:null,onSelect:w=>{try{r&&typeof r.onSetColumnBy=="function"&&r.onSetColumnBy(w),setTimeout(()=>{let E=o.__activeTabMenu;E&&typeof E.refresh=="function"&&E.refresh()},50)}catch{}}}).show(C||o,x);try{let w=o.__activeTabMenu;if(w&&typeof w.registerExternalSubmenu=="function"&&v&&v.el)try{w.registerExternalSubmenu(v.el,v.refresh)}catch{}}catch{}}catch{}return!0}).catch(()=>!1)}),S.push({label:a==="board"?"Swimlanes":"Group by",info:h,forceChevron:!0,iconName:"rows",onClick:(C,x)=>Promise.resolve().then(()=>(Ce(),we)).then(({default:m})=>{try{try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let g=(r&&r.fields||[]||[]).filter(w=>{let E=String(w.dataType||w.type||w.name||"").toLowerCase();return!!(E.includes("assign")||E.includes("assignee")||E.includes("repo")||E.includes("repository")||E.includes("parent")||E.includes("num")||E.includes("number")||E.includes("numeric")||E.includes("iteration")||E.includes("single")&&E.includes("select")||E.includes("milestone")||E.includes("date")||E.includes("text"))}),v=new m({title:a==="board"?"Swimlanes":"Group by",fields:(g||[]).map(w=>({id:String(w.id),name:w.name,iconClass:w.iconClass,dataType:w.dataType})),items:r&&r.items?r.items:[],current:r&&(r.current||r.currentGrouping)?r.current||r.currentGrouping:null,onSelect:w=>{try{r&&typeof r.onSetGroupBy=="function"&&r.onSetGroupBy(w),setTimeout(()=>{let E=o.__activeTabMenu;E&&typeof E.refresh=="function"&&E.refresh()},50)}catch{}}}).show(C||o,x);try{let w=o.__activeTabMenu;if(w&&typeof w.registerExternalSubmenu=="function"&&v&&v.el)try{w.registerExternalSubmenu(v.el,v.refresh)}catch{}}catch{}}catch{}return!0}).catch(()=>!1)}),a==="roadmap"){let C="";try{let x=r&&r.roadmapRenderer;if(x&&typeof x.getActiveMarkers=="function"){let m=x.getActiveMarkers();Array.isArray(m)&&m.length>0?C=m.map(g=>{if(String(g)==="milestones")return"Milestones";let b=r&&r.fields?r.fields.find(v=>String(v.id)===String(g)||v.name===g):null;return b?b.name:String(g)}).join(", "):C="None"}}catch{}S.push({label:"Markers",info:C,forceChevron:!0,iconName:"location",onClick:(x,m)=>{try{let y=r&&r.roadmapRenderer;if(y&&typeof y.showMarkersMenu=="function"){try{document.querySelectorAll(".roadmap-dropdown-menu").forEach(b=>b.remove())}catch{}try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let g={currentTarget:m?{getBoundingClientRect:()=>m}:x||o};try{let b=y.showMarkersMenu(g),v=o.__activeTabMenu;if(b&&b.el&&v&&typeof v.registerExternalSubmenu=="function")try{v.registerExternalSubmenu(b.el,b.refresh)}catch{}}catch{}}}catch{}return!0}})}if(a==="table"||a==="board"||a==="roadmap"){let C="None",x=null;try{let m=r&&(r.currentSort||r.currentSortName);if(m)if(typeof m=="string"){let y=(r&&r.fields?r.fields:[]).find(g=>String(g.id)===String(m)||g.name===m);y?(C=y.name||String(y.id),x=String(y.id)):(C="None",x=null)}else if(typeof m=="object"&&m.fieldId){let y=(r&&r.fields?r.fields:[]).find(g=>String(g.id)===String(m.fieldId));y?(C=y.name||String(y.id),x=String(y.id)):(C="None",x=null)}else C="None",x=null;else C="None",x=null}catch{C="None",x=null}S.push({label:"Sort by",info:C,forceChevron:!0,iconName:"arrow-up-down",onClick:(m,y)=>Promise.resolve().then(()=>(Ge(),ze)).then(({SortByMenu:g})=>{try{try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let b=r&&r.fields||[],w=new g({fields:(b||[]).map(E=>({id:String(E.id),name:E.name,iconClass:E.iconClass,dataType:E.dataType})),current:x,onSelect:E=>{try{r&&typeof r.onSetSort=="function"&&r.onSetSort(E),setTimeout(()=>{let _=o.__activeTabMenu;_&&typeof _.refresh=="function"&&_.refresh()},50)}catch{}}}).show(m||o,y);try{let E=o.__activeTabMenu;if(E&&typeof E.registerExternalSubmenu=="function"&&w&&w.el)try{E.registerExternalSubmenu(w.el,w.refresh)}catch{}}catch{}}catch{}return!0}).catch(()=>!1)})}if(a==="table"||a==="board")try{let C="";try{let x=r&&(r.groupDivisors||null);if(Array.isArray(x)&&x.length>0){let m=r&&r.fields||[];C=x.map(g=>{if(String(g)==="__count__")return"Count";let b=(m||[]).find(v=>String(v.id)===String(g)||v.name===g);return b?b.name:String(g)}).join(", ")}else x===null&&(C="None")}catch{}S.push({label:"Field sum",info:C,forceChevron:!0,iconName:"number",onClick:(x,m)=>Promise.resolve().then(()=>(_e(),Me)).then(({default:y,FieldSumMenu:g})=>{try{try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let b=r&&r.fields||[],v=r&&(r.groupDivisors||[])||[],E=new(g||y)({fields:(b||[]).map(_=>({id:String(_.id),name:_.name,dataType:_.dataType})),current:Array.isArray(v)?v:[],title:"Field sum",onChange:_=>{try{r&&typeof r.onSetGroupDivisors=="function"&&r.onSetGroupDivisors(_&&_.length?_:null),setTimeout(()=>{let H=o.__activeTabMenu;H&&typeof H.refresh=="function"&&H.refresh()},50)}catch{}}}).show(x||o,m);try{let _=o.__activeTabMenu;if(_&&typeof _.registerExternalSubmenu=="function"&&E&&E.el)try{_.registerExternalSubmenu(E.el,E.refresh)}catch{}}catch{}}catch{}return!0}).catch(()=>!1)})}catch{}if(a==="roadmap"){let C="";try{let x=r&&r.roadmapRenderer;if(x){let m=x.startDateFieldId||x.startDateField||null,y=x.endDateFieldId||x.endDateField||null,g=r&&r.fields||[],b=m?g.find(w=>String(w.id)===String(m))?.name:null,v=y?g.find(w=>String(w.id)===String(y))?.name:null;b&&v?C=b===v?b:`${b} & ${v}`:b?C=b:v&&(C=v)}}catch{}S.push({label:"Date",info:C,forceChevron:!0,iconName:"calendar",onClick:(x,m)=>{try{let y=r&&r.roadmapRenderer;if(y&&typeof y.showDateFieldsMenu=="function"){try{document.querySelectorAll(".roadmap-dropdown-menu").forEach(v=>v.remove())}catch{}try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let g=o.__activeTabMenu&&o.__activeTabMenu.menuEl?o.__activeTabMenu.menuEl:void 0,b={currentTarget:m?{getBoundingClientRect:()=>m}:x||g||o};try{let v=y.showDateFieldsMenu(b),w=o.__activeTabMenu;if(v&&v.el&&w&&typeof w.registerExternalSubmenu=="function")try{w.registerExternalSubmenu(v.el,v.refresh)}catch{}}catch{}}}catch{}return!0}});try{let x="",m=r&&r.roadmapRenderer;if(m){let y=m.zoomLevel||"month";x=y.charAt(0).toUpperCase()+y.slice(1)}S.push({label:"Zoom level",info:x,forceChevron:!0,iconName:"zoom-in",onClick:(y,g)=>{try{let b=r&&r.roadmapRenderer;if(b&&typeof b.showZoomMenu=="function"){try{document.querySelectorAll(".roadmap-dropdown-menu").forEach(E=>E.remove())}catch{}try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let v=o.__activeTabMenu&&o.__activeTabMenu.menuEl?o.__activeTabMenu.menuEl:void 0,w={currentTarget:g?{getBoundingClientRect:()=>g}:y||v||o};try{let E=b.showZoomMenu(w),_=o.__activeTabMenu;if(E&&E.el&&_&&typeof _.registerExternalSubmenu=="function")try{_.registerExternalSubmenu(E.el,E.refresh)}catch{}else try{let H=document.querySelector(".slice-panel");if(H&&_&&typeof _.registerExternalSubmenu=="function")try{_.registerExternalSubmenu(H,()=>{})}catch{}}catch{}}catch{}}}catch{}return!0}})}catch{}try{let x="";try{let m=r&&(r.groupDivisors||null);if(Array.isArray(m)&&m.length>0){let y=r&&r.fields||[];x=m.map(b=>{if(String(b)==="__count__")return"Count";let v=(y||[]).find(w=>String(w.id)===String(b)||w.name===b);return v?v.name:String(b)}).join(", ")}else m===null&&(x="None")}catch{}S.push({label:"Field sum",info:x,forceChevron:!0,iconName:"number",onClick:(m,y)=>Promise.resolve().then(()=>(_e(),Me)).then(({default:g,FieldSumMenu:b})=>{try{try{o.__activeTabMenu&&o.__activeTabMenu.closeOpenSubmenu&&o.__activeTabMenu.closeOpenSubmenu()}catch{}let v=r&&r.fields||[],w=r&&(r.groupDivisors||[])||[],_=new(b||g)({fields:(v||[]).map(H=>({id:String(H.id),name:H.name,dataType:H.dataType})),current:Array.isArray(w)?w:[],title:"Field sum",onChange:H=>{try{r&&typeof r.onSetGroupDivisors=="function"&&r.onSetGroupDivisors(H&&H.length?H:null),setTimeout(()=>{let F=o.__activeTabMenu;F&&typeof F.refresh=="function"&&F.refresh()},50)}catch{}}}).show(m||o,y);try{let H=o.__activeTabMenu;if(H&&typeof H.registerExternalSubmenu=="function"&&_&&_.el)try{H.registerExternalSubmenu(_.el,_.refresh)}catch{}}catch{}}catch{}return!0}).catch(()=>!1)})}catch{}}try{let C="";try{let x=r&&(r.currentSlice||r.currentSliceField||r.slice||null);if(x)typeof x=="string"?C=x:x&&typeof x=="object"&&(C=x.name||String(x.fieldId||x.id||""));else if(d)try{let m=localStorage.getItem(`ghProjects.table.${d}.slice`);if(m){let y=JSON.parse(m);y&&y.fieldId&&(C=String(y.fieldId))}}catch{}}catch{}(a==="table"||a==="board"||a==="roadmap")&&S.push({label:"Slice by",info:C||"None",forceChevron:!0,iconName:"sliceby",onClick:(x,m)=>{try{if(r&&typeof r.showSlicePanel=="function"){try{window.__sliceMenuRefresh=()=>{let g=o.__activeTabMenu;g&&typeof g.refresh=="function"&&g.refresh()};let y=r.showSlicePanel(x,m)}catch{}return!0}try{let y=r&&r.fields||[],g=new Set(["assignees","single_select","parent_issue","iteration","number","date","milestone","repository","labels","text","single_line_text"]),b=(y||[]).find(v=>g.has(String((v.dataType||"").toLowerCase())));if(b)try{if(r&&typeof r.onSetSlice=="function")return r.onSetSlice(b.id||b.name||b),!0}catch{}}catch{}}catch{}try{let y=m||x&&x.getBoundingClientRect&&x.getBoundingClientRect();if(y){try{document.querySelectorAll(".active-tab-slice-placeholder").forEach(b=>b.remove())}catch{}let g=document.createElement("div");g.className="active-tab-slice-placeholder",g.style.position="absolute",g.style.top=Math.round(y.top)+"px",g.style.left=Math.round(y.right)+8+"px",g.style.width="8px",g.style.height="8px",g.style.zIndex="1001",g.style.pointerEvents="none",document.body.appendChild(g);try{let b=o.__activeTabMenu;b&&typeof b.registerExternalSubmenu=="function"&&b.registerExternalSubmenu(g,()=>{})}catch{}}}catch{}return!0}})}catch{}return S};try{let r=new Pe({anchorElement:o,items:c});o.__activeTabMenu=r;let u=()=>{try{let h=o.__activeTabMenu;h&&typeof h.refresh=="function"&&h.refresh()}catch{}};try{window.addEventListener("roadmap:dateFieldsChanged",u),window.addEventListener("roadmap:zoomChanged",u),window.addEventListener("roadmap:markersChanged",u),o.__activeTabMenuDateListener=u}catch{}e=o}catch{}}i(),t.addEventListener("click",()=>setTimeout(i,0)),new MutationObserver(l=>{for(let a of l){a.type==="attributes"&&i();for(let o of Array.from(a.addedNodes||[]))o.nodeType===1&&i()}}).observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})}window.__activeTabMenusInitialized||(window.__activeTabMenusInitialized=!0,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",qe):setTimeout(qe,0));try{j("global","boardViewFetcher.loaded")}catch{}try{console.log&&console.log("boardViewFetcher script loaded")}catch{}function mt(){return function(p,e,t){let n=p&&(p.name||p.id)?p.name||p.id:"Board View";try{fe(e,n)}catch{}var i=50;let s,l,a,o=null,d=null,c,r=null,u=null,h;function f(m,y){try{u=m,y!==void 0?h=y:y=h;var g=m&&m.items||[],b=m&&m.fields||[],v=m&&m.allFields||b;let z,Te=e.querySelector(".slice-panel");if(e.innerHTML="",Te)try{e.appendChild(Te)}catch{}r!==null&&(b=v.filter(T=>!r.has(String(T.id)))),e.style.margin="0",e.style.padding="0",e.style.height="100%",e.style.display="flex",e.style.flexDirection="column",e.style.overflow="hidden";let A=Ie(e,t,{suffix:t,step:i,onLoadMore:function(){i+=50,x()},onSave:T=>{let k=!1;if(s!==void 0){try{let M=t?`ghProjects.table.${t}.sortConfig`:null;M&&(s===null?localStorage.removeItem(M):localStorage.setItem(M,JSON.stringify(s)))}catch{}s=void 0,k=!0}if(r!==null){let M=Array.from(r);window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewHiddenFields",viewKey:t,hiddenFields:M});try{let N=t?`ghProjects.table.${t}.hiddenFields`:null;N&&localStorage.setItem(N,JSON.stringify(M))}catch{}r=null,k=!0}if(l!==void 0&&(window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewGrouping",viewKey:t,grouping:l}),l=void 0,k=!0),a!==void 0){try{window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewGroupDivisors",viewKey:t,groupDivisors:a})}catch{}try{let M=t?`ghProjects.table.${t}.groupDivisors`:null;M&&(a===null?localStorage.removeItem(M):localStorage.setItem(M,JSON.stringify(a)))}catch{}a=void 0,k=!0}if(o!==null){try{window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"setViewSlice",viewKey:t,slice:o})}catch{}try{let M=t?`ghProjects.table.${t}.slice`:null;M&&localStorage.setItem(M,JSON.stringify(o))}catch{}o=null,k=!0}k&&x()},onDiscard:()=>{if(s!==void 0||r!==null||l!==void 0||o!==null){s=void 0,r=null,l=void 0,o=null;try{d&&typeof d.close=="function"&&d.close(),d=null}catch{}u?f(u,h):x()}}});try{if(y&&A&&typeof A.setEffectiveFilter=="function")try{A.setEffectiveFilter(y)}catch{}}catch{}try{let T=null;if(s!==void 0)T=s||null;else if(t)try{let M=localStorage.getItem(`ghProjects.table.${t}.sortConfig`);M&&(T=JSON.parse(M))}catch{}T||(T=xe(m&&m.details&&m.details.sortByFields));let k=null;if(T&&T.fieldId){let M=v.find(N=>String(N.id)===String(T.fieldId));k=M?M.name:null}try{if(a!==void 0)z=a===null?null:a||null;else if(t)try{let M=localStorage.getItem(`ghProjects.table.${t}.groupDivisors`);M&&(z=JSON.parse(M))}catch{}try{let M=m.details&&m.details.groupDivisors&&Array.isArray(m.details.groupDivisors.nodes)?m.details.groupDivisors.nodes.map(N=>String(N.id||N.name)):null;z===null&&M&&(z=M)}catch{}}catch{}window.__viewStates=window.__viewStates||{},window.__viewStates[t]={fields:v,items:g||[],visibleFieldIds:new Set(b.map(M=>String(M.id))),currentSort:k,groupDivisors:z,onToggleVisibility:(M,N)=>{try{if(r===null){r=new Set;let R=new Set(b.map(D=>String(D.id)));v.forEach(D=>{R.has(String(D.id))||r.add(String(D.id))})}let I=String(M);N?r.delete(I):r.add(I),u&&f(u,h)}catch{}},onSetGroupBy:M=>{try{l=M,u&&f(u,h)}catch{}},onSetGroupDivisors:M=>{try{a=M===null?null:M||[],u&&f(u,h)}catch{}},onSetColumnBy:M=>{try{c=M,u&&f(u,h)}catch{}},onSetSort:M=>{try{M===null?s=null:s={fieldId:M,direction:"ASC"},u&&f(u,h)}catch{}},onSetSlice:M=>{try{o=M?{fieldId:M,value:null}:null,u&&f(u,h)}catch{}},showSlicePanel:(M,N)=>{try{try{d&&typeof d.close=="function"&&d.close(),d=null}catch{}try{let D=e.querySelector(".slice-panel");D&&D.remove()}catch{}let I=new Set(["assignees","single_select","parent_issue","iteration","number","date","milestone","repository","labels","text","single_line_text"]),R=null;try{let D=o?String(o.fieldId):null;D&&(R=v.find(O=>String(O.id)===D))}catch{}if(R||(R=(v||[]).find(D=>I.has(String((D.dataType||"").toLowerCase())))),!R)return;try{d=new le(e,R,g||[],v||[]),d.render();try{let D=e.querySelector(".board-container")||e.querySelector(".board-wrapper")||e.querySelector(".board-content")||e.firstElementChild||e,O=e.querySelector(".slice-panel");if(O)try{D&&D.parentElement&&D.parentElement.contains(D)?(D.parentElement.insertBefore(O,D),D.parentElement.style.flexDirection="row"):e.insertBefore(O,e.firstChild)}catch{try{e.insertBefore(O,e.firstChild)}catch{}}}catch{}try{N&&d&&typeof d.openFieldDropdown=="function"&&d.openFieldDropdown(N)}catch{}d.onValueSelect(D=>{try{o={fieldId:R.id,value:D};try{A&&A.saveBtn&&A.discardBtn&&(A.saveBtn.disabled=!1,A.saveBtn.style.opacity="1",A.saveBtn.style.cursor="pointer",A.discardBtn.disabled=!1,A.discardBtn.style.opacity="1",A.discardBtn.style.cursor="pointer")}catch{}u&&f(u,h)}catch{}}),d.onFieldChange(D=>{try{d&&d.close&&d.close(),d=null,o=null,D&&(o={fieldId:D.id,value:null},window.__viewStates[t]&&window.__viewStates[t].showSlicePanel&&window.__viewStates[t].showSlicePanel())}catch{}})}catch{}try{let D=d&&d.panelElement?d.panelElement:null;if(D)return{el:D,refresh:()=>{try{}catch{}}}}catch{}return null}catch{}},get currentSlice(){try{let M=o?String(o.fieldId):null;if(M){let N=(v||[]).find(I=>String(I.id)===M);return N?N.name:M}if(t)try{let N=localStorage.getItem(`ghProjects.table.${t}.slice`);if(N){let I=JSON.parse(N);if(I&&I.fieldId){let R=(v||[]).find(D=>String(D.id)===String(I.fieldId));return R?R.name:String(I.fieldId)}}}catch{}}catch{}return null}}}catch{}try{window.__viewStates=window.__viewStates||{},window.__viewStates[t]=window.__viewStates[t]||{}}catch{}if(!A){var w=document.createElement("div");w.style.display="flex",w.style.justifyContent="space-between",w.style.alignItems="center",w.style.marginBottom="8px";var E=document.createElement("div");E.style.fontWeight="600",E.style.padding="6px",E.textContent=n;var _=document.createElement("div"),H=ge(()=>{i+=50,x()});_.appendChild(H),w.appendChild(E),w.appendChild(_),e.appendChild(w)}let P=null;if(c!==void 0)c!==null&&(P=v.find(T=>T.name===c));else try{let T=m&&m.details,k=T&&T.verticalGroupByFields&&T.verticalGroupByFields.nodes;if(k&&k.length>0){let M=k[0];if(P=v.find(N=>String(N.id)===String(M.id)||String(N.name)===String(M.name)),P){let N=String(P.dataType||"").toLowerCase();N!=="single_select"&&N!=="iteration"&&(j(t,"boardViewFetcher.invalidColumnFieldType",{dataType:N,fieldName:P.name}),P=null)}}}catch{}P||(P=v.find(T=>String(T.dataType||"").toLowerCase()==="single_select"&&String(T.name||"").toLowerCase()==="status")),P||(P=v.find(T=>String(T.dataType||"").toLowerCase()==="single_select"));try{window.__viewStates&&window.__viewStates[t]&&(window.__viewStates[t].currentColumn=P&&P.name||null)}catch{}let Z=null;if(l!==void 0)l===null?Z=null:Z=v.find(T=>T.name===l);else try{let T=m&&m.details,k=T&&T.groupByFields&&T.groupByFields.nodes;if(k&&k.length>0){let M=k[0];Z=v.find(N=>String(N.id)===String(M.id)||String(N.name)===String(M.name))}}catch(T){j(t,"boardViewFetcher.swimlaneFieldDetection.error",{message:String(T?.message||T)})}if(A&&(s!==void 0||r!==null||l!==void 0))try{A.saveBtn&&(A.saveBtn.disabled=!1,A.saveBtn.style.opacity="1",A.saveBtn.style.cursor="pointer"),A.discardBtn&&(A.discardBtn.disabled=!1,A.discardBtn.style.opacity="1",A.discardBtn.style.cursor="pointer")}catch{}try{let T=Z&&Z.name||null;window.__viewStates&&window.__viewStates[t]&&(window.__viewStates[t].current=T)}catch{}var F=document.createElement("div");F.style.flex="1 1 auto",F.style.overflow="hidden",F.style.position="relative",F.style.display="flex",F.style.flexDirection="column";let Ve=T=>{if(A&&A.inputEl){let k=String(A.inputEl.value||"").trim(),M=k?`${k} ${T}`:T;A.inputEl.value=M,A.inputEl.dispatchEvent(new Event("input",{bubbles:!0}))}},ie=xe(m&&m.details&&m.details.sortByFields);if(t)try{let T=localStorage.getItem(`ghProjects.table.${t}.sortConfig`);T&&(ie=JSON.parse(T))}catch{}s!==void 0&&(ie=s||null);let se=g;ie&&(se=Fe(g,v,ie)),o&&(se=se.filter(T=>{let k=T.fieldValues.find(R=>String(R.fieldId)===String(o.fieldId)),M=v.find(R=>R.id===o.fieldId),N=M?(M.dataType||M.type||"").toLowerCase():"",I=null;if(!k)I=null;else if(k.text!==void 0)I=k.text;else if(k.title!==void 0)I=k.title;else if(k.number!==void 0)I=k.number;else if(k.date!==void 0)I=k.date;else if(k.option)I=k.option.name;else if(k.iteration)I=k.iteration.title;else if(k.assignees)I=k.assignees;else if(k.labels)I=k.labels;else if(N==="parent_issue"){let R=k.parent||k.parentIssue||k.issue||k.item||k.value||null;R&&(I=R.title||R.name||R.number||R.id||R.url||null)}else N==="milestone"?I=k.milestone?.title||k.milestone?.name||k.value||null:N==="repository"?I=k.repository?.nameWithOwner||k.repository?.full_name||k.repository?.name||k.value||null:I=k.value;if(o.value===null)return N==="assignees"||N==="labels"?!I||Array.isArray(I)&&I.length===0:I==null;if(N==="assignees"||N==="labels"){if(!Array.isArray(I))return!1;if(N==="assignees")return I.some(R=>R&&(R.login===o.value?.login||R.id===o.value?.id));if(N==="labels")return I.some(R=>R&&(R.name===o.value||R.id===o.value))}else return I===o.value}));let Ue=(T,k,M)=>{if(T==="open-menu"&&M){document.querySelectorAll(".board-context-menu").forEach(q=>q.remove());let I=document.createElement("div");I.className="board-context-menu",I.style.position="fixed";let R=Math.min(M.x,window.innerWidth-180),D=Math.min(M.y,window.innerHeight-150);I.style.left=R+"px",I.style.top=D+"px",I.style.background="var(--vscode-menu-background)",I.style.color="var(--vscode-menu-foreground)",I.style.border="1px solid var(--vscode-menu-border)",I.style.borderRadius="4px",I.style.zIndex="1000",I.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",I.style.minWidth="160px",I.style.padding="4px 0";let O=(q,W,te,ye=!1)=>{if(ye){let V=document.createElement("div");V.style.height="1px",V.style.background="var(--vscode-menu-separatorBackground)",V.style.margin="4px 0",I.appendChild(V);return}let B=document.createElement("div");B.style.padding="4px 8px",B.style.cursor="pointer",B.style.display="flex",B.style.alignItems="center",B.style.gap="8px",B.style.fontSize="13px";let J=document.createElement("span");W&&(J.className="codicon codicon-"+W,W==="link-external"?J.textContent="\u2197":W==="globe"?J.textContent="\u{1F310}":W==="arrow-both"&&(J.textContent="\u21C4"));let X=document.createElement("span");X.textContent=q,B.appendChild(J),B.appendChild(X),B.addEventListener("click",V=>{V.stopPropagation(),I.remove(),te()}),B.addEventListener("mouseenter",()=>B.style.background="var(--vscode-menu-selectionBackground)"),B.addEventListener("mouseleave",()=>B.style.background="transparent"),I.appendChild(B)};O("Open issue","link-external",()=>{let q=k.content?.url||k.url||k.raw&&k.raw.itemContent&&k.raw.itemContent.url;q&&window.__APP_MESSAGING__&&window.__APP_MESSAGING__.postMessage({command:"openUrl",url:q})}),O("","",()=>{},!0),O("Move to column...","arrow-both",()=>{if(window.__APP_MESSAGING__){let q=[];if(P){let W=P.options||P.configuration&&P.configuration.options,te=P.configuration&&P.configuration.iterations,ye=(B,J)=>{try{let X=new Date(B),V=new Date(X.getTime()+Number(J)*24*60*60*1e3),Le=Je=>Je.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${Le(X)} \u2014 ${Le(V)}`}catch{return""}};W&&Array.isArray(W)?q=W.map(B=>({id:B.id,name:B.name,color:B.color,description:B.description})):te&&Array.isArray(te)&&(q=te.map(B=>({id:B.id,name:B.title,color:B.color,description:ye(B.startDate,B.duration)})))}window.__APP_MESSAGING__.postMessage({command:"moveItem",viewKey:t,itemId:k.id,projectId:m&&m.id,fieldId:P?P.id:null,options:q,currentValue:""})}}),document.body.appendChild(I);let me=()=>{I.remove(),document.removeEventListener("click",me)};setTimeout(()=>document.addEventListener("click",me),0)}else T==="add-item-to-column"&&k&&M&&Promise.resolve().then(()=>(je(),We)).then(({AddItemMenu:N})=>{new N({anchorElement:M.anchorElement,onCreateIssue:()=>{try{let R=window.__APP_MESSAGING__;R&&typeof R.postMessage=="function"&&R.postMessage({command:"addItem:createIssue",viewKey:t,projectId:m&&m.id,columnFieldId:k.columnFieldId,columnValueId:k.columnValueId,columnValueName:k.columnValueName})}catch(R){console.error("[boardViewFetcher] create-issue action failed",R)}},onAddFromRepo:()=>{try{let R=window.__APP_MESSAGING__;R&&typeof R.postMessage=="function"&&R.postMessage({command:"addItem:addFromRepo",viewKey:t,projectId:m&&m.id,columnFieldId:k.columnFieldId,columnValueId:k.columnValueId,columnValueName:k.columnValueName})}catch(R){console.error("[boardViewFetcher] add-from-repo action failed",R)}}}).show()}).catch(N=>{console.error("Failed to load AddItemMenu",N)})};if(P)try{let T=b.map(M=>String(M.id));new oe(v,se,T,Ve,Ue,z).renderBoard(F,P,Z)}catch(T){j(t,"boardViewFetcher.cardRenderer.error",{message:String(T?.message||T)}),S(F,g)}else j(t,"boardViewFetcher.noColumnField",{fieldsCount:v.length}),S(F,g);e.appendChild(F);try{let T=e.querySelector(".slice-panel");if(T){let k=F.querySelector(".board-container")||F.querySelector(".board-wrapper")||F.querySelector(".board-content")||F.firstElementChild;k&&k.parentElement===F&&(F.insertBefore(T,k),F.style.display="flex",F.style.flexDirection="row")}}catch{}try{A&&typeof A.setCount=="function"&&A.setCount(g.length),A&&typeof A.setLoadState=="function"&&A.setLoadState(g.length<i,g.length>=i?"Load more":"All loaded"),A&&A.inputEl&&(typeof A.registerItems=="function"&&A.registerItems(g,{fields:b}),typeof A.onFilterChange=="function"&&A.onFilterChange(function(T,k){Ae(e,"[data-gh-item-id]",T,"block"),A&&typeof A.setCount=="function"&&A.setCount(T.size),j(t,"filterInput",{filter:k,matched:T.size,original:g.length})}),typeof A.onSortChange=="function"&&A.onSortChange(T=>{s=T||null,A&&A.saveBtn&&A.discardBtn&&(A.saveBtn.disabled=!1,A.discardBtn.disabled=!1,A.saveBtn.style.opacity="1",A.saveBtn.style.cursor="pointer",A.discardBtn.style.opacity="1",A.discardBtn.style.cursor="pointer")}))}catch{}}catch(z){j(t,"boardViewFetcher.render.error",{message:String(z&&z.message),stack:z&&z.stack}),re(e,n,"Error rendering board view: "+String(z&&z.message))}}function S(m,y){for(var g=0;g<y.length;g++){var b=y[g],v=document.createElement("div");try{v.setAttribute("data-gh-item-id",String(b&&b.id))}catch{}v.style.padding="8px",v.style.border="1px solid var(--vscode-editorWidget-border)",v.style.marginBottom="8px",v.style.borderRadius="2px";var w=b&&b.content&&(b.content.title||b.content.name)||b&&b.title||b&&b.raw&&b.raw.title||"#"+(g+1);v.innerHTML='<div style="font-weight:600">'+L(w)+"</div>"+(b&&b.id?'<div style="color:var(--vscode-descriptionForeground);font-size:12px">'+L(String(b.id))+"</div>":""),m.appendChild(v)}}function C(m){var y=m&&m.data?m.data:m;try{if(y&&y.command==="fields"){if(y.viewKey&&t&&String(y.viewKey)!==String(t))return;y.error?re(e,n,String(y.error)):f(y.payload||y.payload&&y.payload.data||y.payload,y.effectiveFilter)}}catch{}}function x(){try{window.__APP_MESSAGING__&&typeof window.__APP_MESSAGING__.postMessage=="function"&&window.__APP_MESSAGING__.postMessage({command:"requestFields",first:i,viewKey:t})}catch{}}try{window.__APP_MESSAGING__.onMessage(C)}catch{window.addEventListener("message",C)}x()}}try{window.boardViewFetcher=mt()}catch{}})();
//# sourceMappingURL=boardViewFetcher.js.map
